(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const _ of u.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&n(_)}).observe(document,{childList:!0,subtree:!0});function i(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(s){if(s.ep)return;s.ep=!0;const u=i(s);fetch(s.href,u)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function vs(e){const t=Object.create(null);for(const i of e.split(","))t[i]=1;return i=>i in t}const He={},Pi=[],Ft=()=>{},Tu=()=>!1,cn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),ys=e=>e.startsWith("onUpdate:"),Ze=Object.assign,bs=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},Au=Object.prototype.hasOwnProperty,Ne=(e,t)=>Au.call(e,t),_e=Array.isArray,Hi=e=>Er(e)==="[object Map]",dn=e=>Er(e)==="[object Set]",Js=e=>Er(e)==="[object Date]",Ee=e=>typeof e=="function",qe=e=>typeof e=="string",Tt=e=>typeof e=="symbol",Be=e=>e!==null&&typeof e=="object",ca=e=>(Be(e)||Ee(e))&&Ee(e.then)&&Ee(e.catch),da=Object.prototype.toString,Er=e=>da.call(e),Cu=e=>Er(e).slice(8,-1),fa=e=>Er(e)==="[object Object]",xs=e=>qe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,lr=vs(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),fn=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},ku=/-(\w)/g,Et=fn(e=>e.replace(ku,(t,i)=>i?i.toUpperCase():"")),Ou=/\B([A-Z])/g,ci=fn(e=>e.replace(Ou,"-$1").toLowerCase()),hn=fn(e=>e.charAt(0).toUpperCase()+e.slice(1)),kn=fn(e=>e?`on${hn(e)}`:""),ai=(e,t)=>!Object.is(e,t),Ur=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},qn=(e,t,i,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:i})},Kr=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Mu=e=>{const t=qe(e)?Number(e):NaN;return isNaN(t)?e:t};let Qs;const mn=()=>Qs||(Qs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Rr(e){if(_e(e)){const t={};for(let i=0;i<e.length;i++){const n=e[i],s=qe(n)?Pu(n):Rr(n);if(s)for(const u in s)t[u]=s[u]}return t}else if(qe(e)||Be(e))return e}const Lu=/;(?![^(]*\))/g,Nu=/:([^]+)/,Fu=/\/\*[^]*?\*\//g;function Pu(e){const t={};return e.replace(Fu,"").split(Lu).forEach(i=>{if(i){const n=i.split(Nu);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Ye(e){let t="";if(qe(e))t=e;else if(_e(e))for(let i=0;i<e.length;i++){const n=Ye(e[i]);n&&(t+=n+" ")}else if(Be(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const Hu="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",zu=vs(Hu);function ha(e){return!!e||e===""}function Bu(e,t){if(e.length!==t.length)return!1;let i=!0;for(let n=0;i&&n<e.length;n++)i=pn(e[n],t[n]);return i}function pn(e,t){if(e===t)return!0;let i=Js(e),n=Js(t);if(i||n)return i&&n?e.getTime()===t.getTime():!1;if(i=Tt(e),n=Tt(t),i||n)return e===t;if(i=_e(e),n=_e(t),i||n)return i&&n?Bu(e,t):!1;if(i=Be(e),n=Be(t),i||n){if(!i||!n)return!1;const s=Object.keys(e).length,u=Object.keys(t).length;if(s!==u)return!1;for(const _ in e){const E=e.hasOwnProperty(_),w=t.hasOwnProperty(_);if(E&&!w||!E&&w||!pn(e[_],t[_]))return!1}}return String(e)===String(t)}function ju(e,t){return e.findIndex(i=>pn(i,t))}const ma=e=>!!(e&&e.__v_isRef===!0),ae=e=>qe(e)?e:e==null?"":_e(e)||Be(e)&&(e.toString===da||!Ee(e.toString))?ma(e)?ae(e.value):JSON.stringify(e,pa,2):String(e),pa=(e,t)=>ma(t)?pa(e,t.value):Hi(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[n,s],u)=>(i[On(n,u)+" =>"]=s,i),{})}:dn(t)?{[`Set(${t.size})`]:[...t.values()].map(i=>On(i))}:Tt(t)?On(t):Be(t)&&!_e(t)&&!fa(t)?String(t):t,On=(e,t="")=>{var i;return Tt(e)?`Symbol(${(i=e.description)!=null?i:t})`:e};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let lt;class Uu{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=lt,!t&&lt&&(this.index=(lt.scopes||(lt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].pause();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].resume();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].resume()}}run(t){if(this._active){const i=lt;try{return lt=this,t()}finally{lt=i}}}on(){++this._on===1&&(this.prevScope=lt,lt=this)}off(){this._on>0&&--this._on===0&&(lt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let i,n;for(i=0,n=this.effects.length;i<n;i++)this.effects[i].stop();for(this.effects.length=0,i=0,n=this.cleanups.length;i<n;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,n=this.scopes.length;i<n;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Vu(){return lt}let ze;const Mn=new WeakSet;class ga{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,lt&&lt.active&&lt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Mn.has(this)&&(Mn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ya(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,eo(this),ba(this);const t=ze,i=It;ze=this,It=!0;try{return this.fn()}finally{xa(this),ze=t,It=i,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ss(t);this.deps=this.depsTail=void 0,eo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Mn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Gn(this)&&this.run()}get dirty(){return Gn(this)}}let va=0,ur,cr;function ya(e,t=!1){if(e.flags|=8,t){e.next=cr,cr=e;return}e.next=ur,ur=e}function ws(){va++}function _s(){if(--va>0)return;if(cr){let t=cr;for(cr=void 0;t;){const i=t.next;t.next=void 0,t.flags&=-9,t=i}}let e;for(;ur;){let t=ur;for(ur=void 0;t;){const i=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=i}}if(e)throw e}function ba(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function xa(e){let t,i=e.depsTail,n=i;for(;n;){const s=n.prevDep;n.version===-1?(n===i&&(i=s),Ss(n),qu(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=s}e.deps=t,e.depsTail=i}function Gn(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(wa(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function wa(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===pr)||(e.globalVersion=pr,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Gn(e))))return;e.flags|=2;const t=e.dep,i=ze,n=It;ze=e,It=!0;try{ba(e);const s=e.fn(e._value);(t.version===0||ai(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{ze=i,It=n,xa(e),e.flags&=-3}}function Ss(e,t=!1){const{dep:i,prevSub:n,nextSub:s}=e;if(n&&(n.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=n,e.nextSub=void 0),i.subs===e&&(i.subs=n,!n&&i.computed)){i.computed.flags&=-5;for(let u=i.computed.deps;u;u=u.nextDep)Ss(u,!0)}!t&&!--i.sc&&i.map&&i.map.delete(i.key)}function qu(e){const{prevDep:t,nextDep:i}=e;t&&(t.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=t,e.nextDep=void 0)}let It=!0;const _a=[];function Kt(){_a.push(It),It=!1}function $t(){const e=_a.pop();It=e===void 0?!0:e}function eo(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const i=ze;ze=void 0;try{t()}finally{ze=i}}}let pr=0;class Gu{constructor(t,i){this.sub=t,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class gn{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!ze||!It||ze===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==ze)i=this.activeLink=new Gu(ze,this),ze.deps?(i.prevDep=ze.depsTail,ze.depsTail.nextDep=i,ze.depsTail=i):ze.deps=ze.depsTail=i,Sa(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const n=i.nextDep;n.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=n),i.prevDep=ze.depsTail,i.nextDep=void 0,ze.depsTail.nextDep=i,ze.depsTail=i,ze.deps===i&&(ze.deps=n)}return i}trigger(t){this.version++,pr++,this.notify(t)}notify(t){ws();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{_s()}}}function Sa(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)Sa(n)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const Xn=new WeakMap,_i=Symbol(""),Wn=Symbol(""),gr=Symbol("");function nt(e,t,i){if(It&&ze){let n=Xn.get(e);n||Xn.set(e,n=new Map);let s=n.get(i);s||(n.set(i,s=new gn),s.map=n,s.key=i),s.track()}}function Xt(e,t,i,n,s,u){const _=Xn.get(e);if(!_){pr++;return}const E=w=>{w&&w.trigger()};if(ws(),t==="clear")_.forEach(E);else{const w=_e(e),l=w&&xs(i);if(w&&i==="length"){const r=Number(n);_.forEach((a,f)=>{(f==="length"||f===gr||!Tt(f)&&f>=r)&&E(a)})}else switch((i!==void 0||_.has(void 0))&&E(_.get(i)),l&&E(_.get(gr)),t){case"add":w?l&&E(_.get("length")):(E(_.get(_i)),Hi(e)&&E(_.get(Wn)));break;case"delete":w||(E(_.get(_i)),Hi(e)&&E(_.get(Wn)));break;case"set":Hi(e)&&E(_.get(_i));break}}_s()}function Ci(e){const t=Le(e);return t===e?t:(nt(t,"iterate",gr),_t(e)?t:t.map(tt))}function vn(e){return nt(e=Le(e),"iterate",gr),e}const Xu={__proto__:null,[Symbol.iterator](){return Ln(this,Symbol.iterator,tt)},concat(...e){return Ci(this).concat(...e.map(t=>_e(t)?Ci(t):t))},entries(){return Ln(this,"entries",e=>(e[1]=tt(e[1]),e))},every(e,t){return Vt(this,"every",e,t,void 0,arguments)},filter(e,t){return Vt(this,"filter",e,t,i=>i.map(tt),arguments)},find(e,t){return Vt(this,"find",e,t,tt,arguments)},findIndex(e,t){return Vt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Vt(this,"findLast",e,t,tt,arguments)},findLastIndex(e,t){return Vt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Vt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Nn(this,"includes",e)},indexOf(...e){return Nn(this,"indexOf",e)},join(e){return Ci(this).join(e)},lastIndexOf(...e){return Nn(this,"lastIndexOf",e)},map(e,t){return Vt(this,"map",e,t,void 0,arguments)},pop(){return Ji(this,"pop")},push(...e){return Ji(this,"push",e)},reduce(e,...t){return to(this,"reduce",e,t)},reduceRight(e,...t){return to(this,"reduceRight",e,t)},shift(){return Ji(this,"shift")},some(e,t){return Vt(this,"some",e,t,void 0,arguments)},splice(...e){return Ji(this,"splice",e)},toReversed(){return Ci(this).toReversed()},toSorted(e){return Ci(this).toSorted(e)},toSpliced(...e){return Ci(this).toSpliced(...e)},unshift(...e){return Ji(this,"unshift",e)},values(){return Ln(this,"values",tt)}};function Ln(e,t,i){const n=vn(e),s=n[t]();return n!==e&&!_t(e)&&(s._next=s.next,s.next=()=>{const u=s._next();return u.value&&(u.value=i(u.value)),u}),s}const Wu=Array.prototype;function Vt(e,t,i,n,s,u){const _=vn(e),E=_!==e&&!_t(e),w=_[t];if(w!==Wu[t]){const a=w.apply(e,u);return E?tt(a):a}let l=i;_!==e&&(E?l=function(a,f){return i.call(this,tt(a),f,e)}:i.length>2&&(l=function(a,f){return i.call(this,a,f,e)}));const r=w.call(_,l,n);return E&&s?s(r):r}function to(e,t,i,n){const s=vn(e);let u=i;return s!==e&&(_t(e)?i.length>3&&(u=function(_,E,w){return i.call(this,_,E,w,e)}):u=function(_,E,w){return i.call(this,_,tt(E),w,e)}),s[t](u,...n)}function Nn(e,t,i){const n=Le(e);nt(n,"iterate",gr);const s=n[t](...i);return(s===-1||s===!1)&&Ds(i[0])?(i[0]=Le(i[0]),n[t](...i)):s}function Ji(e,t,i=[]){Kt(),ws();const n=Le(e)[t].apply(e,i);return _s(),$t(),n}const Ku=vs("__proto__,__v_isRef,__isVue"),Ea=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Tt));function $u(e){Tt(e)||(e=String(e));const t=Le(this);return nt(t,"has",e),t.hasOwnProperty(e)}class Ra{constructor(t=!1,i=!1){this._isReadonly=t,this._isShallow=i}get(t,i,n){if(i==="__v_skip")return t.__v_skip;const s=this._isReadonly,u=this._isShallow;if(i==="__v_isReactive")return!s;if(i==="__v_isReadonly")return s;if(i==="__v_isShallow")return u;if(i==="__v_raw")return n===(s?u?sc:Aa:u?Ta:Ia).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const _=_e(t);if(!s){let w;if(_&&(w=Xu[i]))return w;if(i==="hasOwnProperty")return $u}const E=Reflect.get(t,i,et(t)?t:n);return(Tt(i)?Ea.has(i):Ku(i))||(s||nt(t,"get",i),u)?E:et(E)?_&&xs(i)?E:E.value:Be(E)?s?Ca(E):Ei(E):E}}class Da extends Ra{constructor(t=!1){super(!1,t)}set(t,i,n,s){let u=t[i];if(!this._isShallow){const w=ui(u);if(!_t(n)&&!ui(n)&&(u=Le(u),n=Le(n)),!_e(t)&&et(u)&&!et(n))return w?!1:(u.value=n,!0)}const _=_e(t)&&xs(i)?Number(i)<t.length:Ne(t,i),E=Reflect.set(t,i,n,et(t)?t:s);return t===Le(s)&&(_?ai(n,u)&&Xt(t,"set",i,n):Xt(t,"add",i,n)),E}deleteProperty(t,i){const n=Ne(t,i);t[i];const s=Reflect.deleteProperty(t,i);return s&&n&&Xt(t,"delete",i,void 0),s}has(t,i){const n=Reflect.has(t,i);return(!Tt(i)||!Ea.has(i))&&nt(t,"has",i),n}ownKeys(t){return nt(t,"iterate",_e(t)?"length":_i),Reflect.ownKeys(t)}}class Yu extends Ra{constructor(t=!1){super(!0,t)}set(t,i){return!0}deleteProperty(t,i){return!0}}const Zu=new Da,Ju=new Yu,Qu=new Da(!0);const Kn=e=>e,Nr=e=>Reflect.getPrototypeOf(e);function ec(e,t,i){return function(...n){const s=this.__v_raw,u=Le(s),_=Hi(u),E=e==="entries"||e===Symbol.iterator&&_,w=e==="keys"&&_,l=s[e](...n),r=i?Kn:t?$r:tt;return!t&&nt(u,"iterate",w?Wn:_i),{next(){const{value:a,done:f}=l.next();return f?{value:a,done:f}:{value:E?[r(a[0]),r(a[1])]:r(a),done:f}},[Symbol.iterator](){return this}}}}function Fr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function tc(e,t){const i={get(s){const u=this.__v_raw,_=Le(u),E=Le(s);e||(ai(s,E)&&nt(_,"get",s),nt(_,"get",E));const{has:w}=Nr(_),l=t?Kn:e?$r:tt;if(w.call(_,s))return l(u.get(s));if(w.call(_,E))return l(u.get(E));u!==_&&u.get(s)},get size(){const s=this.__v_raw;return!e&&nt(Le(s),"iterate",_i),Reflect.get(s,"size",s)},has(s){const u=this.__v_raw,_=Le(u),E=Le(s);return e||(ai(s,E)&&nt(_,"has",s),nt(_,"has",E)),s===E?u.has(s):u.has(s)||u.has(E)},forEach(s,u){const _=this,E=_.__v_raw,w=Le(E),l=t?Kn:e?$r:tt;return!e&&nt(w,"iterate",_i),E.forEach((r,a)=>s.call(u,l(r),l(a),_))}};return Ze(i,e?{add:Fr("add"),set:Fr("set"),delete:Fr("delete"),clear:Fr("clear")}:{add(s){!t&&!_t(s)&&!ui(s)&&(s=Le(s));const u=Le(this);return Nr(u).has.call(u,s)||(u.add(s),Xt(u,"add",s,s)),this},set(s,u){!t&&!_t(u)&&!ui(u)&&(u=Le(u));const _=Le(this),{has:E,get:w}=Nr(_);let l=E.call(_,s);l||(s=Le(s),l=E.call(_,s));const r=w.call(_,s);return _.set(s,u),l?ai(u,r)&&Xt(_,"set",s,u):Xt(_,"add",s,u),this},delete(s){const u=Le(this),{has:_,get:E}=Nr(u);let w=_.call(u,s);w||(s=Le(s),w=_.call(u,s)),E&&E.call(u,s);const l=u.delete(s);return w&&Xt(u,"delete",s,void 0),l},clear(){const s=Le(this),u=s.size!==0,_=s.clear();return u&&Xt(s,"clear",void 0,void 0),_}}),["keys","values","entries",Symbol.iterator].forEach(s=>{i[s]=ec(s,e,t)}),i}function Es(e,t){const i=tc(e,t);return(n,s,u)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?n:Reflect.get(Ne(i,s)&&s in n?i:n,s,u)}const ic={get:Es(!1,!1)},rc={get:Es(!1,!0)},nc={get:Es(!0,!1)};const Ia=new WeakMap,Ta=new WeakMap,Aa=new WeakMap,sc=new WeakMap;function oc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ac(e){return e.__v_skip||!Object.isExtensible(e)?0:oc(Cu(e))}function Ei(e){return ui(e)?e:Rs(e,!1,Zu,ic,Ia)}function lc(e){return Rs(e,!1,Qu,rc,Ta)}function Ca(e){return Rs(e,!0,Ju,nc,Aa)}function Rs(e,t,i,n,s){if(!Be(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const u=ac(e);if(u===0)return e;const _=s.get(e);if(_)return _;const E=new Proxy(e,u===2?n:i);return s.set(e,E),E}function zi(e){return ui(e)?zi(e.__v_raw):!!(e&&e.__v_isReactive)}function ui(e){return!!(e&&e.__v_isReadonly)}function _t(e){return!!(e&&e.__v_isShallow)}function Ds(e){return e?!!e.__v_raw:!1}function Le(e){const t=e&&e.__v_raw;return t?Le(t):e}function uc(e){return!Ne(e,"__v_skip")&&Object.isExtensible(e)&&qn(e,"__v_skip",!0),e}const tt=e=>Be(e)?Ei(e):e,$r=e=>Be(e)?Ca(e):e;function et(e){return e?e.__v_isRef===!0:!1}function ve(e){return cc(e,!1)}function cc(e,t){return et(e)?e:new dc(e,t)}class dc{constructor(t,i){this.dep=new gn,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?t:Le(t),this._value=i?t:tt(t),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(t){const i=this._rawValue,n=this.__v_isShallow||_t(t)||ui(t);t=n?t:Le(t),ai(t,i)&&(this._rawValue=t,this._value=n?t:tt(t),this.dep.trigger())}}function ee(e){return et(e)?e.value:e}const fc={get:(e,t,i)=>t==="__v_raw"?e:ee(Reflect.get(e,t,i)),set:(e,t,i,n)=>{const s=e[t];return et(s)&&!et(i)?(s.value=i,!0):Reflect.set(e,t,i,n)}};function ka(e){return zi(e)?e:new Proxy(e,fc)}class hc{constructor(t){this.__v_isRef=!0,this._value=void 0;const i=this.dep=new gn,{get:n,set:s}=t(i.track.bind(i),i.trigger.bind(i));this._get=n,this._set=s}get value(){return this._value=this._get()}set value(t){this._set(t)}}function mc(e){return new hc(e)}class pc{constructor(t,i,n){this.fn=t,this.setter=i,this._value=void 0,this.dep=new gn(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=pr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&ze!==this)return ya(this,!0),!0}get value(){const t=this.dep.track();return wa(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function gc(e,t,i=!1){let n,s;return Ee(e)?n=e:(n=e.get,s=e.set),new pc(n,s,i)}const Pr={},Yr=new WeakMap;let bi;function vc(e,t=!1,i=bi){if(i){let n=Yr.get(i);n||Yr.set(i,n=[]),n.push(e)}}function yc(e,t,i=He){const{immediate:n,deep:s,once:u,scheduler:_,augmentJob:E,call:w}=i,l=p=>s?p:_t(p)||s===!1||s===0?Wt(p,1):Wt(p);let r,a,f,o,g=!1,d=!1;if(et(e)?(a=()=>e.value,g=_t(e)):zi(e)?(a=()=>l(e),g=!0):_e(e)?(d=!0,g=e.some(p=>zi(p)||_t(p)),a=()=>e.map(p=>{if(et(p))return p.value;if(zi(p))return l(p);if(Ee(p))return w?w(p,2):p()})):Ee(e)?t?a=w?()=>w(e,2):e:a=()=>{if(f){Kt();try{f()}finally{$t()}}const p=bi;bi=r;try{return w?w(e,3,[o]):e(o)}finally{bi=p}}:a=Ft,t&&s){const p=a,m=s===!0?1/0:s;a=()=>Wt(p(),m)}const h=Vu(),c=()=>{r.stop(),h&&h.active&&bs(h.effects,r)};if(u&&t){const p=t;t=(...m)=>{p(...m),c()}}let b=d?new Array(e.length).fill(Pr):Pr;const S=p=>{if(!(!(r.flags&1)||!r.dirty&&!p))if(t){const m=r.run();if(s||g||(d?m.some((x,v)=>ai(x,b[v])):ai(m,b))){f&&f();const x=bi;bi=r;try{const v=[m,b===Pr?void 0:d&&b[0]===Pr?[]:b,o];b=m,w?w(t,3,v):t(...v)}finally{bi=x}}}else r.run()};return E&&E(S),r=new ga(a),r.scheduler=_?()=>_(S,!1):S,o=p=>vc(p,!1,r),f=r.onStop=()=>{const p=Yr.get(r);if(p){if(w)w(p,4);else for(const m of p)m();Yr.delete(r)}},t?n?S(!0):b=r.run():_?_(S.bind(null,!0),!0):r.run(),c.pause=r.pause.bind(r),c.resume=r.resume.bind(r),c.stop=c,c}function Wt(e,t=1/0,i){if(t<=0||!Be(e)||e.__v_skip||(i=i||new Set,i.has(e)))return e;if(i.add(e),t--,et(e))Wt(e.value,t,i);else if(_e(e))for(let n=0;n<e.length;n++)Wt(e[n],t,i);else if(dn(e)||Hi(e))e.forEach(n=>{Wt(n,t,i)});else if(fa(e)){for(const n in e)Wt(e[n],t,i);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Wt(e[n],t,i)}return e}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Dr(e,t,i,n){try{return n?e(...n):e()}catch(s){yn(s,t,i)}}function At(e,t,i,n){if(Ee(e)){const s=Dr(e,t,i,n);return s&&ca(s)&&s.catch(u=>{yn(u,t,i)}),s}if(_e(e)){const s=[];for(let u=0;u<e.length;u++)s.push(At(e[u],t,i,n));return s}}function yn(e,t,i,n=!0){const s=t?t.vnode:null,{errorHandler:u,throwUnhandledErrorInProduction:_}=t&&t.appContext.config||He;if(t){let E=t.parent;const w=t.proxy,l=`https://vuejs.org/error-reference/#runtime-${i}`;for(;E;){const r=E.ec;if(r){for(let a=0;a<r.length;a++)if(r[a](e,w,l)===!1)return}E=E.parent}if(u){Kt(),Dr(u,null,10,[e,w,l]),$t();return}}bc(e,i,s,n,_)}function bc(e,t,i,n=!0,s=!1){if(s)throw e;console.error(e)}const at=[];let Mt=-1;const Bi=[];let ri=null,Mi=0;const Oa=Promise.resolve();let Zr=null;function Ki(e){const t=Zr||Oa;return e?t.then(this?e.bind(this):e):t}function xc(e){let t=Mt+1,i=at.length;for(;t<i;){const n=t+i>>>1,s=at[n],u=vr(s);u<e||u===e&&s.flags&2?t=n+1:i=n}return t}function Is(e){if(!(e.flags&1)){const t=vr(e),i=at[at.length-1];!i||!(e.flags&2)&&t>=vr(i)?at.push(e):at.splice(xc(t),0,e),e.flags|=1,Ma()}}function Ma(){Zr||(Zr=Oa.then(Na))}function wc(e){_e(e)?Bi.push(...e):ri&&e.id===-1?ri.splice(Mi+1,0,e):e.flags&1||(Bi.push(e),e.flags|=1),Ma()}function io(e,t,i=Mt+1){for(;i<at.length;i++){const n=at[i];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;at.splice(i,1),i--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function La(e){if(Bi.length){const t=[...new Set(Bi)].sort((i,n)=>vr(i)-vr(n));if(Bi.length=0,ri){ri.push(...t);return}for(ri=t,Mi=0;Mi<ri.length;Mi++){const i=ri[Mi];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}ri=null,Mi=0}}const vr=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Na(e){try{for(Mt=0;Mt<at.length;Mt++){const t=at[Mt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Dr(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Mt<at.length;Mt++){const t=at[Mt];t&&(t.flags&=-2)}Mt=-1,at.length=0,La(),Zr=null,(at.length||Bi.length)&&Na()}}let Qe=null,Fa=null;function Jr(e){const t=Qe;return Qe=e,Fa=e&&e.type.__scopeId||null,t}function Oe(e,t=Qe,i){if(!t||e._n)return e;const n=(...s)=>{n._d&&ho(-1);const u=Jr(t);let _;try{_=e(...s)}finally{Jr(u),n._d&&ho(1)}return _};return n._n=!0,n._c=!0,n._d=!0,n}function pt(e,t){if(Qe===null)return e;const i=_n(Qe),n=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[u,_,E,w=He]=t[s];u&&(Ee(u)&&(u={mounted:u,updated:u}),u.deep&&Wt(_),n.push({dir:u,instance:i,value:_,oldValue:void 0,arg:E,modifiers:w}))}return e}function mi(e,t,i,n){const s=e.dirs,u=t&&t.dirs;for(let _=0;_<s.length;_++){const E=s[_];u&&(E.oldValue=u[_].value);let w=E.dir[n];w&&(Kt(),At(w,i,8,[e.el,E,e,t]),$t())}}const _c=Symbol("_vte"),Sc=e=>e.__isTeleport,ki=Symbol("_leaveCb"),Hr=Symbol("_enterCb");function Ec(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return vt(()=>{e.isMounted=!0}),ja(()=>{e.isUnmounting=!0}),e}const xt=[Function,Array],Rc={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:xt,onEnter:xt,onAfterEnter:xt,onEnterCancelled:xt,onBeforeLeave:xt,onLeave:xt,onAfterLeave:xt,onLeaveCancelled:xt,onBeforeAppear:xt,onAppear:xt,onAfterAppear:xt,onAppearCancelled:xt};function Dc(e,t){const{leavingVNodes:i}=e;let n=i.get(t.type);return n||(n=Object.create(null),i.set(t.type,n)),n}function $n(e,t,i,n,s){const{appear:u,mode:_,persisted:E=!1,onBeforeEnter:w,onEnter:l,onAfterEnter:r,onEnterCancelled:a,onBeforeLeave:f,onLeave:o,onAfterLeave:g,onLeaveCancelled:d,onBeforeAppear:h,onAppear:c,onAfterAppear:b,onAppearCancelled:S}=t,p=String(e.key),m=Dc(i,e),x=(D,k)=>{D&&At(D,n,9,k)},v=(D,k)=>{const P=k[1];x(D,k),_e(D)?D.every(T=>T.length<=1)&&P():D.length<=1&&P()},I={mode:_,persisted:E,beforeEnter(D){let k=w;if(!i.isMounted)if(u)k=h||w;else return;D[ki]&&D[ki](!0);const P=m[p];P&&Li(e,P)&&P.el[ki]&&P.el[ki](),x(k,[D])},enter(D){let k=l,P=r,T=a;if(!i.isMounted)if(u)k=c||l,P=b||r,T=S||a;else return;let A=!1;const C=D[Hr]=R=>{A||(A=!0,R?x(T,[D]):x(P,[D]),I.delayedLeave&&I.delayedLeave(),D[Hr]=void 0)};k?v(k,[D,C]):C()},leave(D,k){const P=String(e.key);if(D[Hr]&&D[Hr](!0),i.isUnmounting)return k();x(f,[D]);let T=!1;const A=D[ki]=C=>{T||(T=!0,k(),C?x(d,[D]):x(g,[D]),D[ki]=void 0,m[P]===e&&delete m[P])};m[P]=e,o?v(o,[D,A]):A()},clone(D){return $n(D,t,i,n)}};return I}function yr(e,t){e.shapeFlag&6&&e.component?(e.transition=t,yr(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Pa(e,t=!1,i){let n=[],s=0;for(let u=0;u<e.length;u++){let _=e[u];const E=i==null?_.key:String(i)+String(_.key!=null?_.key:u);_.type===Ce?(_.patchFlag&128&&s++,n=n.concat(Pa(_.children,t,E))):(t||_.type!==Ht)&&n.push(E!=null?Ri(_,{key:E}):_)}if(s>1)for(let u=0;u<n.length;u++)n[u].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function Ic(e,t){return Ee(e)?Ze({name:e.name},t,{setup:e}):e}function Ha(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function dr(e,t,i,n,s=!1){if(_e(e)){e.forEach((g,d)=>dr(g,t&&(_e(t)?t[d]:t),i,n,s));return}if(ji(n)&&!s){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&dr(e,t,i,n.component.subTree);return}const u=n.shapeFlag&4?_n(n.component):n.el,_=s?null:u,{i:E,r:w}=e,l=t&&t.r,r=E.refs===He?E.refs={}:E.refs,a=E.setupState,f=Le(a),o=a===He?()=>!1:g=>Ne(f,g);if(l!=null&&l!==w&&(qe(l)?(r[l]=null,o(l)&&(a[l]=null)):et(l)&&(l.value=null)),Ee(w))Dr(w,E,12,[_,r]);else{const g=qe(w),d=et(w);if(g||d){const h=()=>{if(e.f){const c=g?o(w)?a[w]:r[w]:w.value;s?_e(c)&&bs(c,u):_e(c)?c.includes(u)||c.push(u):g?(r[w]=[u],o(w)&&(a[w]=r[w])):(w.value=[u],e.k&&(r[e.k]=w.value))}else g?(r[w]=_,o(w)&&(a[w]=_)):d&&(w.value=_,e.k&&(r[e.k]=_))};_?(h.id=-1,mt(h,i)):h()}}}mn().requestIdleCallback;mn().cancelIdleCallback;const ji=e=>!!e.type.__asyncLoader,za=e=>e.type.__isKeepAlive;function Tc(e,t){Ba(e,"a",t)}function Ac(e,t){Ba(e,"da",t)}function Ba(e,t,i=it){const n=e.__wdc||(e.__wdc=()=>{let s=i;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(bn(t,n,i),i){let s=i.parent;for(;s&&s.parent;)za(s.parent.vnode)&&Cc(n,t,i,s),s=s.parent}}function Cc(e,t,i,n){const s=bn(t,e,n,!0);Ua(()=>{bs(n[t],s)},i)}function bn(e,t,i=it,n=!1){if(i){const s=i[e]||(i[e]=[]),u=t.__weh||(t.__weh=(..._)=>{Kt();const E=Ir(i),w=At(t,i,e,_);return E(),$t(),w});return n?s.unshift(u):s.push(u),u}}const Zt=e=>(t,i=it)=>{(!xr||e==="sp")&&bn(e,(...n)=>t(...n),i)},kc=Zt("bm"),vt=Zt("m"),Oc=Zt("bu"),Ts=Zt("u"),ja=Zt("bum"),Ua=Zt("um"),Mc=Zt("sp"),Lc=Zt("rtg"),Nc=Zt("rtc");function Fc(e,t=it){bn("ec",e,t)}const Va="components";function Pc(e,t){return Ga(Va,e,!0,t)||e}const qa=Symbol.for("v-ndc");function Hc(e){return qe(e)?Ga(Va,e,!1)||e:e||qa}function Ga(e,t,i=!0,n=!1){const s=Qe||it;if(s){const u=s.type;{const E=Dd(u,!1);if(E&&(E===t||E===Et(t)||E===hn(Et(t))))return u}const _=ro(s[e]||u[e],t)||ro(s.appContext[e],t);return!_&&n?u:_}}function ro(e,t){return e&&(e[t]||e[Et(t)]||e[hn(Et(t))])}function St(e,t,i,n){let s;const u=i,_=_e(e);if(_||qe(e)){const E=_&&zi(e);let w=!1,l=!1;E&&(w=!_t(e),l=ui(e),e=vn(e)),s=new Array(e.length);for(let r=0,a=e.length;r<a;r++)s[r]=t(w?l?$r(tt(e[r])):tt(e[r]):e[r],r,void 0,u)}else if(typeof e=="number"){s=new Array(e);for(let E=0;E<e;E++)s[E]=t(E+1,E,void 0,u)}else if(Be(e))if(e[Symbol.iterator])s=Array.from(e,(E,w)=>t(E,w,void 0,u));else{const E=Object.keys(e);s=new Array(E.length);for(let w=0,l=E.length;w<l;w++){const r=E[w];s[w]=t(e[r],r,w,u)}}else s=[];return s}function Yn(e,t,i={},n,s){if(Qe.ce||Qe.parent&&ji(Qe.parent)&&Qe.parent.ce)return t!=="default"&&(i.name=t),Q(),Fe(Ce,null,[Ve("slot",i,n)],64);let u=e[t];u&&u._c&&(u._d=!1),Q();const _=u&&Xa(u(i)),E=i.key||_&&_.key,w=Fe(Ce,{key:(E&&!Tt(E)?E:`_${t}`)+""},_||[],_&&e._===1?64:-2);return w.scopeId&&(w.slotScopeIds=[w.scopeId+"-s"]),u&&u._c&&(u._d=!0),w}function Xa(e){return e.some(t=>ks(t)?!(t.type===Ht||t.type===Ce&&!Xa(t.children)):!0)?e:null}const Zn=e=>e?fl(e)?_n(e):Zn(e.parent):null,fr=Ze(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Zn(e.parent),$root:e=>Zn(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Ka(e),$forceUpdate:e=>e.f||(e.f=()=>{Is(e.update)}),$nextTick:e=>e.n||(e.n=Ki.bind(e.proxy)),$watch:e=>sd.bind(e)}),Fn=(e,t)=>e!==He&&!e.__isScriptSetup&&Ne(e,t),zc={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:i,setupState:n,data:s,props:u,accessCache:_,type:E,appContext:w}=e;let l;if(t[0]!=="$"){const o=_[t];if(o!==void 0)switch(o){case 1:return n[t];case 2:return s[t];case 4:return i[t];case 3:return u[t]}else{if(Fn(n,t))return _[t]=1,n[t];if(s!==He&&Ne(s,t))return _[t]=2,s[t];if((l=e.propsOptions[0])&&Ne(l,t))return _[t]=3,u[t];if(i!==He&&Ne(i,t))return _[t]=4,i[t];Jn&&(_[t]=0)}}const r=fr[t];let a,f;if(r)return t==="$attrs"&&nt(e.attrs,"get",""),r(e);if((a=E.__cssModules)&&(a=a[t]))return a;if(i!==He&&Ne(i,t))return _[t]=4,i[t];if(f=w.config.globalProperties,Ne(f,t))return f[t]},set({_:e},t,i){const{data:n,setupState:s,ctx:u}=e;return Fn(s,t)?(s[t]=i,!0):n!==He&&Ne(n,t)?(n[t]=i,!0):Ne(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(u[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:n,appContext:s,propsOptions:u}},_){let E;return!!i[_]||e!==He&&Ne(e,_)||Fn(t,_)||(E=u[0])&&Ne(E,_)||Ne(n,_)||Ne(fr,_)||Ne(s.config.globalProperties,_)},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:Ne(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function no(e){return _e(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}let Jn=!0;function Bc(e){const t=Ka(e),i=e.proxy,n=e.ctx;Jn=!1,t.beforeCreate&&so(t.beforeCreate,e,"bc");const{data:s,computed:u,methods:_,watch:E,provide:w,inject:l,created:r,beforeMount:a,mounted:f,beforeUpdate:o,updated:g,activated:d,deactivated:h,beforeDestroy:c,beforeUnmount:b,destroyed:S,unmounted:p,render:m,renderTracked:x,renderTriggered:v,errorCaptured:I,serverPrefetch:D,expose:k,inheritAttrs:P,components:T,directives:A,filters:C}=t;if(l&&jc(l,n,null),_)for(const O in _){const B=_[O];Ee(B)&&(n[O]=B.bind(i))}if(s){const O=s.call(i,i);Be(O)&&(e.data=Ei(O))}if(Jn=!0,u)for(const O in u){const B=u[O],G=Ee(B)?B.bind(i,i):Ee(B.get)?B.get.bind(i,i):Ft,$=!Ee(B)&&Ee(B.set)?B.set.bind(i):Ft,te=ml({get:G,set:$});Object.defineProperty(n,O,{enumerable:!0,configurable:!0,get:()=>te.value,set:V=>te.value=V})}if(E)for(const O in E)Wa(E[O],n,i,O);if(w){const O=Ee(w)?w.call(i):w;Reflect.ownKeys(O).forEach(B=>{qt(B,O[B])})}r&&so(r,e,"c");function M(O,B){_e(B)?B.forEach(G=>O(G.bind(i))):B&&O(B.bind(i))}if(M(kc,a),M(vt,f),M(Oc,o),M(Ts,g),M(Tc,d),M(Ac,h),M(Fc,I),M(Nc,x),M(Lc,v),M(ja,b),M(Ua,p),M(Mc,D),_e(k))if(k.length){const O=e.exposed||(e.exposed={});k.forEach(B=>{Object.defineProperty(O,B,{get:()=>i[B],set:G=>i[B]=G})})}else e.exposed||(e.exposed={});m&&e.render===Ft&&(e.render=m),P!=null&&(e.inheritAttrs=P),T&&(e.components=T),A&&(e.directives=A),D&&Ha(e)}function jc(e,t,i=Ft){_e(e)&&(e=Qn(e));for(const n in e){const s=e[n];let u;Be(s)?"default"in s?u=ye(s.from||n,s.default,!0):u=ye(s.from||n):u=ye(s),et(u)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>u.value,set:_=>u.value=_}):t[n]=u}}function so(e,t,i){At(_e(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,i)}function Wa(e,t,i,n){let s=n.includes(".")?al(i,n):()=>i[n];if(qe(e)){const u=t[e];Ee(u)&&Si(s,u)}else if(Ee(e))Si(s,e.bind(i));else if(Be(e))if(_e(e))e.forEach(u=>Wa(u,t,i,n));else{const u=Ee(e.handler)?e.handler.bind(i):t[e.handler];Ee(u)&&Si(s,u,e)}}function Ka(e){const t=e.type,{mixins:i,extends:n}=t,{mixins:s,optionsCache:u,config:{optionMergeStrategies:_}}=e.appContext,E=u.get(t);let w;return E?w=E:!s.length&&!i&&!n?w=t:(w={},s.length&&s.forEach(l=>Qr(w,l,_,!0)),Qr(w,t,_)),Be(t)&&u.set(t,w),w}function Qr(e,t,i,n=!1){const{mixins:s,extends:u}=t;u&&Qr(e,u,i,!0),s&&s.forEach(_=>Qr(e,_,i,!0));for(const _ in t)if(!(n&&_==="expose")){const E=Uc[_]||i&&i[_];e[_]=E?E(e[_],t[_]):t[_]}return e}const Uc={data:oo,props:ao,emits:ao,methods:or,computed:or,beforeCreate:ot,created:ot,beforeMount:ot,mounted:ot,beforeUpdate:ot,updated:ot,beforeDestroy:ot,beforeUnmount:ot,destroyed:ot,unmounted:ot,activated:ot,deactivated:ot,errorCaptured:ot,serverPrefetch:ot,components:or,directives:or,watch:qc,provide:oo,inject:Vc};function oo(e,t){return t?e?function(){return Ze(Ee(e)?e.call(this,this):e,Ee(t)?t.call(this,this):t)}:t:e}function Vc(e,t){return or(Qn(e),Qn(t))}function Qn(e){if(_e(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function ot(e,t){return e?[...new Set([].concat(e,t))]:t}function or(e,t){return e?Ze(Object.create(null),e,t):t}function ao(e,t){return e?_e(e)&&_e(t)?[...new Set([...e,...t])]:Ze(Object.create(null),no(e),no(t??{})):t}function qc(e,t){if(!e)return t;if(!t)return e;const i=Ze(Object.create(null),e);for(const n in t)i[n]=ot(e[n],t[n]);return i}function $a(){return{app:null,config:{isNativeTag:Tu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Gc=0;function Xc(e,t){return function(n,s=null){Ee(n)||(n=Ze({},n)),s!=null&&!Be(s)&&(s=null);const u=$a(),_=new WeakSet,E=[];let w=!1;const l=u.app={_uid:Gc++,_component:n,_props:s,_container:null,_context:u,_instance:null,version:Td,get config(){return u.config},set config(r){},use(r,...a){return _.has(r)||(r&&Ee(r.install)?(_.add(r),r.install(l,...a)):Ee(r)&&(_.add(r),r(l,...a))),l},mixin(r){return u.mixins.includes(r)||u.mixins.push(r),l},component(r,a){return a?(u.components[r]=a,l):u.components[r]},directive(r,a){return a?(u.directives[r]=a,l):u.directives[r]},mount(r,a,f){if(!w){const o=l._ceVNode||Ve(n,s);return o.appContext=u,f===!0?f="svg":f===!1&&(f=void 0),e(o,r,f),w=!0,l._container=r,r.__vue_app__=l,_n(o.component)}},onUnmount(r){E.push(r)},unmount(){w&&(At(E,l._instance,16),e(null,l._container),delete l._container.__vue_app__)},provide(r,a){return u.provides[r]=a,l},runWithContext(r){const a=Ui;Ui=l;try{return r()}finally{Ui=a}}};return l}}let Ui=null;function qt(e,t){if(it){let i=it.provides;const n=it.parent&&it.parent.provides;n===i&&(i=it.provides=Object.create(n)),i[e]=t}}function ye(e,t,i=!1){const n=it||Qe;if(n||Ui){let s=Ui?Ui._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return i&&Ee(t)?t.call(n&&n.proxy):t}}const Ya={},Za=()=>Object.create(Ya),Ja=e=>Object.getPrototypeOf(e)===Ya;function Wc(e,t,i,n=!1){const s={},u=Za();e.propsDefaults=Object.create(null),Qa(e,t,s,u);for(const _ in e.propsOptions[0])_ in s||(s[_]=void 0);i?e.props=n?s:lc(s):e.type.props?e.props=s:e.props=u,e.attrs=u}function Kc(e,t,i,n){const{props:s,attrs:u,vnode:{patchFlag:_}}=e,E=Le(s),[w]=e.propsOptions;let l=!1;if((n||_>0)&&!(_&16)){if(_&8){const r=e.vnode.dynamicProps;for(let a=0;a<r.length;a++){let f=r[a];if(xn(e.emitsOptions,f))continue;const o=t[f];if(w)if(Ne(u,f))o!==u[f]&&(u[f]=o,l=!0);else{const g=Et(f);s[g]=es(w,E,g,o,e,!1)}else o!==u[f]&&(u[f]=o,l=!0)}}}else{Qa(e,t,s,u)&&(l=!0);let r;for(const a in E)(!t||!Ne(t,a)&&((r=ci(a))===a||!Ne(t,r)))&&(w?i&&(i[a]!==void 0||i[r]!==void 0)&&(s[a]=es(w,E,a,void 0,e,!0)):delete s[a]);if(u!==E)for(const a in u)(!t||!Ne(t,a))&&(delete u[a],l=!0)}l&&Xt(e.attrs,"set","")}function Qa(e,t,i,n){const[s,u]=e.propsOptions;let _=!1,E;if(t)for(let w in t){if(lr(w))continue;const l=t[w];let r;s&&Ne(s,r=Et(w))?!u||!u.includes(r)?i[r]=l:(E||(E={}))[r]=l:xn(e.emitsOptions,w)||(!(w in n)||l!==n[w])&&(n[w]=l,_=!0)}if(u){const w=Le(i),l=E||He;for(let r=0;r<u.length;r++){const a=u[r];i[a]=es(s,w,a,l[a],e,!Ne(l,a))}}return _}function es(e,t,i,n,s,u){const _=e[i];if(_!=null){const E=Ne(_,"default");if(E&&n===void 0){const w=_.default;if(_.type!==Function&&!_.skipFactory&&Ee(w)){const{propsDefaults:l}=s;if(i in l)n=l[i];else{const r=Ir(s);n=l[i]=w.call(null,t),r()}}else n=w;s.ce&&s.ce._setProp(i,n)}_[0]&&(u&&!E?n=!1:_[1]&&(n===""||n===ci(i))&&(n=!0))}return n}const $c=new WeakMap;function el(e,t,i=!1){const n=i?$c:t.propsCache,s=n.get(e);if(s)return s;const u=e.props,_={},E=[];let w=!1;if(!Ee(e)){const r=a=>{w=!0;const[f,o]=el(a,t,!0);Ze(_,f),o&&E.push(...o)};!i&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}if(!u&&!w)return Be(e)&&n.set(e,Pi),Pi;if(_e(u))for(let r=0;r<u.length;r++){const a=Et(u[r]);lo(a)&&(_[a]=He)}else if(u)for(const r in u){const a=Et(r);if(lo(a)){const f=u[r],o=_[a]=_e(f)||Ee(f)?{type:f}:Ze({},f),g=o.type;let d=!1,h=!0;if(_e(g))for(let c=0;c<g.length;++c){const b=g[c],S=Ee(b)&&b.name;if(S==="Boolean"){d=!0;break}else S==="String"&&(h=!1)}else d=Ee(g)&&g.name==="Boolean";o[0]=d,o[1]=h,(d||Ne(o,"default"))&&E.push(a)}}const l=[_,E];return Be(e)&&n.set(e,l),l}function lo(e){return e[0]!=="$"&&!lr(e)}const As=e=>e[0]==="_"||e==="$stable",Cs=e=>_e(e)?e.map(Lt):[Lt(e)],Yc=(e,t,i)=>{if(t._n)return t;const n=Oe((...s)=>Cs(t(...s)),i);return n._c=!1,n},tl=(e,t,i)=>{const n=e._ctx;for(const s in e){if(As(s))continue;const u=e[s];if(Ee(u))t[s]=Yc(s,u,n);else if(u!=null){const _=Cs(u);t[s]=()=>_}}},il=(e,t)=>{const i=Cs(t);e.slots.default=()=>i},rl=(e,t,i)=>{for(const n in t)(i||!As(n))&&(e[n]=t[n])},Zc=(e,t,i)=>{const n=e.slots=Za();if(e.vnode.shapeFlag&32){const s=t.__;s&&qn(n,"__",s,!0);const u=t._;u?(rl(n,t,i),i&&qn(n,"_",u,!0)):tl(t,n)}else t&&il(e,t)},Jc=(e,t,i)=>{const{vnode:n,slots:s}=e;let u=!0,_=He;if(n.shapeFlag&32){const E=t._;E?i&&E===1?u=!1:rl(s,t,i):(u=!t.$stable,tl(t,s)),_=t}else t&&(il(e,t),_={default:1});if(u)for(const E in s)!As(E)&&_[E]==null&&delete s[E]},mt=fd;function Qc(e){return ed(e)}function ed(e,t){const i=mn();i.__VUE__=!0;const{insert:n,remove:s,patchProp:u,createElement:_,createText:E,createComment:w,setText:l,setElementText:r,parentNode:a,nextSibling:f,setScopeId:o=Ft,insertStaticContent:g}=e,d=(H,z,W,Z=null,J=null,Y=null,he=void 0,de=null,me=!!z.dynamicChildren)=>{if(H===z)return;H&&!Li(H,z)&&(Z=xe(H),V(H,J,Y,!0),H=null),z.patchFlag===-2&&(me=!1,z.dynamicChildren=null);const{type:le,ref:we,shapeFlag:pe}=z;switch(le){case wn:h(H,z,W,Z);break;case Ht:c(H,z,W,Z);break;case Vr:H==null&&b(z,W,Z,he);break;case Ce:T(H,z,W,Z,J,Y,he,de,me);break;default:pe&1?m(H,z,W,Z,J,Y,he,de,me):pe&6?A(H,z,W,Z,J,Y,he,de,me):(pe&64||pe&128)&&le.process(H,z,W,Z,J,Y,he,de,me,ge)}we!=null&&J?dr(we,H&&H.ref,Y,z||H,!z):we==null&&H&&H.ref!=null&&dr(H.ref,null,Y,H,!0)},h=(H,z,W,Z)=>{if(H==null)n(z.el=E(z.children),W,Z);else{const J=z.el=H.el;z.children!==H.children&&l(J,z.children)}},c=(H,z,W,Z)=>{H==null?n(z.el=w(z.children||""),W,Z):z.el=H.el},b=(H,z,W,Z)=>{[H.el,H.anchor]=g(H.children,z,W,Z,H.el,H.anchor)},S=({el:H,anchor:z},W,Z)=>{let J;for(;H&&H!==z;)J=f(H),n(H,W,Z),H=J;n(z,W,Z)},p=({el:H,anchor:z})=>{let W;for(;H&&H!==z;)W=f(H),s(H),H=W;s(z)},m=(H,z,W,Z,J,Y,he,de,me)=>{z.type==="svg"?he="svg":z.type==="math"&&(he="mathml"),H==null?x(z,W,Z,J,Y,he,de,me):D(H,z,J,Y,he,de,me)},x=(H,z,W,Z,J,Y,he,de)=>{let me,le;const{props:we,shapeFlag:pe,transition:ue,dirs:Se}=H;if(me=H.el=_(H.type,Y,we&&we.is,we),pe&8?r(me,H.children):pe&16&&I(H.children,me,null,Z,J,Pn(H,Y),he,de),Se&&mi(H,null,Z,"created"),v(me,H,H.scopeId,he,Z),we){for(const Pe in we)Pe!=="value"&&!lr(Pe)&&u(me,Pe,null,we[Pe],Y,Z);"value"in we&&u(me,"value",null,we.value,Y),(le=we.onVnodeBeforeMount)&&kt(le,Z,H)}Se&&mi(H,null,Z,"beforeMount");const Re=td(J,ue);Re&&ue.beforeEnter(me),n(me,z,W),((le=we&&we.onVnodeMounted)||Re||Se)&&mt(()=>{le&&kt(le,Z,H),Re&&ue.enter(me),Se&&mi(H,null,Z,"mounted")},J)},v=(H,z,W,Z,J)=>{if(W&&o(H,W),Z)for(let Y=0;Y<Z.length;Y++)o(H,Z[Y]);if(J){let Y=J.subTree;if(z===Y||ul(Y.type)&&(Y.ssContent===z||Y.ssFallback===z)){const he=J.vnode;v(H,he,he.scopeId,he.slotScopeIds,J.parent)}}},I=(H,z,W,Z,J,Y,he,de,me=0)=>{for(let le=me;le<H.length;le++){const we=H[le]=de?ni(H[le]):Lt(H[le]);d(null,we,z,W,Z,J,Y,he,de)}},D=(H,z,W,Z,J,Y,he)=>{const de=z.el=H.el;let{patchFlag:me,dynamicChildren:le,dirs:we}=z;me|=H.patchFlag&16;const pe=H.props||He,ue=z.props||He;let Se;if(W&&pi(W,!1),(Se=ue.onVnodeBeforeUpdate)&&kt(Se,W,z,H),we&&mi(z,H,W,"beforeUpdate"),W&&pi(W,!0),(pe.innerHTML&&ue.innerHTML==null||pe.textContent&&ue.textContent==null)&&r(de,""),le?k(H.dynamicChildren,le,de,W,Z,Pn(z,J),Y):he||B(H,z,de,null,W,Z,Pn(z,J),Y,!1),me>0){if(me&16)P(de,pe,ue,W,J);else if(me&2&&pe.class!==ue.class&&u(de,"class",null,ue.class,J),me&4&&u(de,"style",pe.style,ue.style,J),me&8){const Re=z.dynamicProps;for(let Pe=0;Pe<Re.length;Pe++){const Me=Re[Pe],rt=pe[Me],Xe=ue[Me];(Xe!==rt||Me==="value")&&u(de,Me,rt,Xe,J,W)}}me&1&&H.children!==z.children&&r(de,z.children)}else!he&&le==null&&P(de,pe,ue,W,J);((Se=ue.onVnodeUpdated)||we)&&mt(()=>{Se&&kt(Se,W,z,H),we&&mi(z,H,W,"updated")},Z)},k=(H,z,W,Z,J,Y,he)=>{for(let de=0;de<z.length;de++){const me=H[de],le=z[de],we=me.el&&(me.type===Ce||!Li(me,le)||me.shapeFlag&198)?a(me.el):W;d(me,le,we,null,Z,J,Y,he,!0)}},P=(H,z,W,Z,J)=>{if(z!==W){if(z!==He)for(const Y in z)!lr(Y)&&!(Y in W)&&u(H,Y,z[Y],null,J,Z);for(const Y in W){if(lr(Y))continue;const he=W[Y],de=z[Y];he!==de&&Y!=="value"&&u(H,Y,de,he,J,Z)}"value"in W&&u(H,"value",z.value,W.value,J)}},T=(H,z,W,Z,J,Y,he,de,me)=>{const le=z.el=H?H.el:E(""),we=z.anchor=H?H.anchor:E("");let{patchFlag:pe,dynamicChildren:ue,slotScopeIds:Se}=z;Se&&(de=de?de.concat(Se):Se),H==null?(n(le,W,Z),n(we,W,Z),I(z.children||[],W,we,J,Y,he,de,me)):pe>0&&pe&64&&ue&&H.dynamicChildren?(k(H.dynamicChildren,ue,W,J,Y,he,de),(z.key!=null||J&&z===J.subTree)&&nl(H,z,!0)):B(H,z,W,we,J,Y,he,de,me)},A=(H,z,W,Z,J,Y,he,de,me)=>{z.slotScopeIds=de,H==null?z.shapeFlag&512?J.ctx.activate(z,W,Z,he,me):C(z,W,Z,J,Y,he,me):R(H,z,me)},C=(H,z,W,Z,J,Y,he)=>{const de=H.component=xd(H,Z,J);if(za(H)&&(de.ctx.renderer=ge),_d(de,!1,he),de.asyncDep){if(J&&J.registerDep(de,M,he),!H.el){const me=de.subTree=Ve(Ht);c(null,me,z,W)}}else M(de,H,z,W,J,Y,he)},R=(H,z,W)=>{const Z=z.component=H.component;if(cd(H,z,W))if(Z.asyncDep&&!Z.asyncResolved){O(Z,z,W);return}else Z.next=z,Z.update();else z.el=H.el,Z.vnode=z},M=(H,z,W,Z,J,Y,he)=>{const de=()=>{if(H.isMounted){let{next:pe,bu:ue,u:Se,parent:Re,vnode:Pe}=H;{const Ke=sl(H);if(Ke){pe&&(pe.el=Pe.el,O(H,pe,he)),Ke.asyncDep.then(()=>{H.isUnmounted||de()});return}}let Me=pe,rt;pi(H,!1),pe?(pe.el=Pe.el,O(H,pe,he)):pe=Pe,ue&&Ur(ue),(rt=pe.props&&pe.props.onVnodeBeforeUpdate)&&kt(rt,Re,pe,Pe),pi(H,!0);const Xe=co(H),yt=H.subTree;H.subTree=Xe,d(yt,Xe,a(yt.el),xe(yt),H,J,Y),pe.el=Xe.el,Me===null&&dd(H,Xe.el),Se&&mt(Se,J),(rt=pe.props&&pe.props.onVnodeUpdated)&&mt(()=>kt(rt,Re,pe,Pe),J)}else{let pe;const{el:ue,props:Se}=z,{bm:Re,m:Pe,parent:Me,root:rt,type:Xe}=H,yt=ji(z);pi(H,!1),Re&&Ur(Re),!yt&&(pe=Se&&Se.onVnodeBeforeMount)&&kt(pe,Me,z),pi(H,!0);{rt.ce&&rt.ce._def.shadowRoot!==!1&&rt.ce._injectChildStyle(Xe);const Ke=H.subTree=co(H);d(null,Ke,W,Z,H,J,Y),z.el=Ke.el}if(Pe&&mt(Pe,J),!yt&&(pe=Se&&Se.onVnodeMounted)){const Ke=z;mt(()=>kt(pe,Me,Ke),J)}(z.shapeFlag&256||Me&&ji(Me.vnode)&&Me.vnode.shapeFlag&256)&&H.a&&mt(H.a,J),H.isMounted=!0,z=W=Z=null}};H.scope.on();const me=H.effect=new ga(de);H.scope.off();const le=H.update=me.run.bind(me),we=H.job=me.runIfDirty.bind(me);we.i=H,we.id=H.uid,me.scheduler=()=>Is(we),pi(H,!0),le()},O=(H,z,W)=>{z.component=H;const Z=H.vnode.props;H.vnode=z,H.next=null,Kc(H,z.props,Z,W),Jc(H,z.children,W),Kt(),io(H),$t()},B=(H,z,W,Z,J,Y,he,de,me=!1)=>{const le=H&&H.children,we=H?H.shapeFlag:0,pe=z.children,{patchFlag:ue,shapeFlag:Se}=z;if(ue>0){if(ue&128){$(le,pe,W,Z,J,Y,he,de,me);return}else if(ue&256){G(le,pe,W,Z,J,Y,he,de,me);return}}Se&8?(we&16&&fe(le,J,Y),pe!==le&&r(W,pe)):we&16?Se&16?$(le,pe,W,Z,J,Y,he,de,me):fe(le,J,Y,!0):(we&8&&r(W,""),Se&16&&I(pe,W,Z,J,Y,he,de,me))},G=(H,z,W,Z,J,Y,he,de,me)=>{H=H||Pi,z=z||Pi;const le=H.length,we=z.length,pe=Math.min(le,we);let ue;for(ue=0;ue<pe;ue++){const Se=z[ue]=me?ni(z[ue]):Lt(z[ue]);d(H[ue],Se,W,null,J,Y,he,de,me)}le>we?fe(H,J,Y,!0,!1,pe):I(z,W,Z,J,Y,he,de,me,pe)},$=(H,z,W,Z,J,Y,he,de,me)=>{let le=0;const we=z.length;let pe=H.length-1,ue=we-1;for(;le<=pe&&le<=ue;){const Se=H[le],Re=z[le]=me?ni(z[le]):Lt(z[le]);if(Li(Se,Re))d(Se,Re,W,null,J,Y,he,de,me);else break;le++}for(;le<=pe&&le<=ue;){const Se=H[pe],Re=z[ue]=me?ni(z[ue]):Lt(z[ue]);if(Li(Se,Re))d(Se,Re,W,null,J,Y,he,de,me);else break;pe--,ue--}if(le>pe){if(le<=ue){const Se=ue+1,Re=Se<we?z[Se].el:Z;for(;le<=ue;)d(null,z[le]=me?ni(z[le]):Lt(z[le]),W,Re,J,Y,he,de,me),le++}}else if(le>ue)for(;le<=pe;)V(H[le],J,Y,!0),le++;else{const Se=le,Re=le,Pe=new Map;for(le=Re;le<=ue;le++){const st=z[le]=me?ni(z[le]):Lt(z[le]);st.key!=null&&Pe.set(st.key,le)}let Me,rt=0;const Xe=ue-Re+1;let yt=!1,Ke=0;const Jt=new Array(Xe);for(le=0;le<Xe;le++)Jt[le]=0;for(le=Se;le<=pe;le++){const st=H[le];if(rt>=Xe){V(st,J,Y,!0);continue}let bt;if(st.key!=null)bt=Pe.get(st.key);else for(Me=Re;Me<=ue;Me++)if(Jt[Me-Re]===0&&Li(st,z[Me])){bt=Me;break}bt===void 0?V(st,J,Y,!0):(Jt[bt-Re]=le+1,bt>=Ke?Ke=bt:yt=!0,d(st,z[bt],W,null,J,Y,he,de,me),rt++)}const kr=yt?id(Jt):Pi;for(Me=kr.length-1,le=Xe-1;le>=0;le--){const st=Re+le,bt=z[st],Or=st+1<we?z[st+1].el:Z;Jt[le]===0?d(null,bt,W,Or,J,Y,he,de,me):yt&&(Me<0||le!==kr[Me]?te(bt,W,Or,2):Me--)}}},te=(H,z,W,Z,J=null)=>{const{el:Y,type:he,transition:de,children:me,shapeFlag:le}=H;if(le&6){te(H.component.subTree,z,W,Z);return}if(le&128){H.suspense.move(z,W,Z);return}if(le&64){he.move(H,z,W,ge);return}if(he===Ce){n(Y,z,W);for(let pe=0;pe<me.length;pe++)te(me[pe],z,W,Z);n(H.anchor,z,W);return}if(he===Vr){S(H,z,W);return}if(Z!==2&&le&1&&de)if(Z===0)de.beforeEnter(Y),n(Y,z,W),mt(()=>de.enter(Y),J);else{const{leave:pe,delayLeave:ue,afterLeave:Se}=de,Re=()=>{H.ctx.isUnmounted?s(Y):n(Y,z,W)},Pe=()=>{pe(Y,()=>{Re(),Se&&Se()})};ue?ue(Y,Re,Pe):Pe()}else n(Y,z,W)},V=(H,z,W,Z=!1,J=!1)=>{const{type:Y,props:he,ref:de,children:me,dynamicChildren:le,shapeFlag:we,patchFlag:pe,dirs:ue,cacheIndex:Se}=H;if(pe===-2&&(J=!1),de!=null&&(Kt(),dr(de,null,W,H,!0),$t()),Se!=null&&(z.renderCache[Se]=void 0),we&256){z.ctx.deactivate(H);return}const Re=we&1&&ue,Pe=!ji(H);let Me;if(Pe&&(Me=he&&he.onVnodeBeforeUnmount)&&kt(Me,z,H),we&6)ne(H.component,W,Z);else{if(we&128){H.suspense.unmount(W,Z);return}Re&&mi(H,null,z,"beforeUnmount"),we&64?H.type.remove(H,z,W,ge,Z):le&&!le.hasOnce&&(Y!==Ce||pe>0&&pe&64)?fe(le,z,W,!1,!0):(Y===Ce&&pe&384||!J&&we&16)&&fe(me,z,W),Z&&X(H)}(Pe&&(Me=he&&he.onVnodeUnmounted)||Re)&&mt(()=>{Me&&kt(Me,z,H),Re&&mi(H,null,z,"unmounted")},W)},X=H=>{const{type:z,el:W,anchor:Z,transition:J}=H;if(z===Ce){ie(W,Z);return}if(z===Vr){p(H);return}const Y=()=>{s(W),J&&!J.persisted&&J.afterLeave&&J.afterLeave()};if(H.shapeFlag&1&&J&&!J.persisted){const{leave:he,delayLeave:de}=J,me=()=>he(W,Y);de?de(H.el,Y,me):me()}else Y()},ie=(H,z)=>{let W;for(;H!==z;)W=f(H),s(H),H=W;s(z)},ne=(H,z,W)=>{const{bum:Z,scope:J,job:Y,subTree:he,um:de,m:me,a:le,parent:we,slots:{__:pe}}=H;uo(me),uo(le),Z&&Ur(Z),we&&_e(pe)&&pe.forEach(ue=>{we.renderCache[ue]=void 0}),J.stop(),Y&&(Y.flags|=8,V(he,H,z,W)),de&&mt(de,z),mt(()=>{H.isUnmounted=!0},z),z&&z.pendingBranch&&!z.isUnmounted&&H.asyncDep&&!H.asyncResolved&&H.suspenseId===z.pendingId&&(z.deps--,z.deps===0&&z.resolve())},fe=(H,z,W,Z=!1,J=!1,Y=0)=>{for(let he=Y;he<H.length;he++)V(H[he],z,W,Z,J)},xe=H=>{if(H.shapeFlag&6)return xe(H.component.subTree);if(H.shapeFlag&128)return H.suspense.next();const z=f(H.anchor||H.el),W=z&&z[_c];return W?f(W):z};let be=!1;const oe=(H,z,W)=>{H==null?z._vnode&&V(z._vnode,null,null,!0):d(z._vnode||null,H,z,null,null,null,W),z._vnode=H,be||(be=!0,io(),La(),be=!1)},ge={p:d,um:V,m:te,r:X,mt:C,mc:I,pc:B,pbc:k,n:xe,o:e};return{render:oe,hydrate:void 0,createApp:Xc(oe)}}function Pn({type:e,props:t},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function pi({effect:e,job:t},i){i?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function td(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function nl(e,t,i=!1){const n=e.children,s=t.children;if(_e(n)&&_e(s))for(let u=0;u<n.length;u++){const _=n[u];let E=s[u];E.shapeFlag&1&&!E.dynamicChildren&&((E.patchFlag<=0||E.patchFlag===32)&&(E=s[u]=ni(s[u]),E.el=_.el),!i&&E.patchFlag!==-2&&nl(_,E)),E.type===wn&&(E.el=_.el),E.type===Ht&&!E.el&&(E.el=_.el)}}function id(e){const t=e.slice(),i=[0];let n,s,u,_,E;const w=e.length;for(n=0;n<w;n++){const l=e[n];if(l!==0){if(s=i[i.length-1],e[s]<l){t[n]=s,i.push(n);continue}for(u=0,_=i.length-1;u<_;)E=u+_>>1,e[i[E]]<l?u=E+1:_=E;l<e[i[u]]&&(u>0&&(t[n]=i[u-1]),i[u]=n)}}for(u=i.length,_=i[u-1];u-- >0;)i[u]=_,_=t[_];return i}function sl(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:sl(t)}function uo(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const rd=Symbol.for("v-scx"),nd=()=>ye(rd);function Si(e,t,i){return ol(e,t,i)}function ol(e,t,i=He){const{immediate:n,deep:s,flush:u,once:_}=i,E=Ze({},i),w=t&&n||!t&&u!=="post";let l;if(xr){if(u==="sync"){const o=nd();l=o.__watcherHandles||(o.__watcherHandles=[])}else if(!w){const o=()=>{};return o.stop=Ft,o.resume=Ft,o.pause=Ft,o}}const r=it;E.call=(o,g,d)=>At(o,r,g,d);let a=!1;u==="post"?E.scheduler=o=>{mt(o,r&&r.suspense)}:u!=="sync"&&(a=!0,E.scheduler=(o,g)=>{g?o():Is(o)}),E.augmentJob=o=>{t&&(o.flags|=4),a&&(o.flags|=2,r&&(o.id=r.uid,o.i=r))};const f=yc(e,t,E);return xr&&(l?l.push(f):w&&f()),f}function sd(e,t,i){const n=this.proxy,s=qe(e)?e.includes(".")?al(n,e):()=>n[e]:e.bind(n,n);let u;Ee(t)?u=t:(u=t.handler,i=t);const _=Ir(this),E=ol(s,u.bind(n),i);return _(),E}function al(e,t){const i=t.split(".");return()=>{let n=e;for(let s=0;s<i.length&&n;s++)n=n[i[s]];return n}}const od=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Et(t)}Modifiers`]||e[`${ci(t)}Modifiers`];function ad(e,t,...i){if(e.isUnmounted)return;const n=e.vnode.props||He;let s=i;const u=t.startsWith("update:"),_=u&&od(n,t.slice(7));_&&(_.trim&&(s=i.map(r=>qe(r)?r.trim():r)),_.number&&(s=i.map(Kr)));let E,w=n[E=kn(t)]||n[E=kn(Et(t))];!w&&u&&(w=n[E=kn(ci(t))]),w&&At(w,e,6,s);const l=n[E+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[E])return;e.emitted[E]=!0,At(l,e,6,s)}}function ll(e,t,i=!1){const n=t.emitsCache,s=n.get(e);if(s!==void 0)return s;const u=e.emits;let _={},E=!1;if(!Ee(e)){const w=l=>{const r=ll(l,t,!0);r&&(E=!0,Ze(_,r))};!i&&t.mixins.length&&t.mixins.forEach(w),e.extends&&w(e.extends),e.mixins&&e.mixins.forEach(w)}return!u&&!E?(Be(e)&&n.set(e,null),null):(_e(u)?u.forEach(w=>_[w]=null):Ze(_,u),Be(e)&&n.set(e,_),_)}function xn(e,t){return!e||!cn(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ne(e,t[0].toLowerCase()+t.slice(1))||Ne(e,ci(t))||Ne(e,t))}function co(e){const{type:t,vnode:i,proxy:n,withProxy:s,propsOptions:[u],slots:_,attrs:E,emit:w,render:l,renderCache:r,props:a,data:f,setupState:o,ctx:g,inheritAttrs:d}=e,h=Jr(e);let c,b;try{if(i.shapeFlag&4){const p=s||n,m=p;c=Lt(l.call(m,p,r,a,o,f,g)),b=E}else{const p=t;c=Lt(p.length>1?p(a,{attrs:E,slots:_,emit:w}):p(a,null)),b=t.props?E:ld(E)}}catch(p){hr.length=0,yn(p,e,1),c=Ve(Ht)}let S=c;if(b&&d!==!1){const p=Object.keys(b),{shapeFlag:m}=S;p.length&&m&7&&(u&&p.some(ys)&&(b=ud(b,u)),S=Ri(S,b,!1,!0))}return i.dirs&&(S=Ri(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(i.dirs):i.dirs),i.transition&&yr(S,i.transition),c=S,Jr(h),c}const ld=e=>{let t;for(const i in e)(i==="class"||i==="style"||cn(i))&&((t||(t={}))[i]=e[i]);return t},ud=(e,t)=>{const i={};for(const n in e)(!ys(n)||!(n.slice(9)in t))&&(i[n]=e[n]);return i};function cd(e,t,i){const{props:n,children:s,component:u}=e,{props:_,children:E,patchFlag:w}=t,l=u.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&w>=0){if(w&1024)return!0;if(w&16)return n?fo(n,_,l):!!_;if(w&8){const r=t.dynamicProps;for(let a=0;a<r.length;a++){const f=r[a];if(_[f]!==n[f]&&!xn(l,f))return!0}}}else return(s||E)&&(!E||!E.$stable)?!0:n===_?!1:n?_?fo(n,_,l):!0:!!_;return!1}function fo(e,t,i){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let s=0;s<n.length;s++){const u=n[s];if(t[u]!==e[u]&&!xn(i,u))return!0}return!1}function dd({vnode:e,parent:t},i){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=i,t=t.parent;else break}}const ul=e=>e.__isSuspense;function fd(e,t){t&&t.pendingBranch?_e(e)?t.effects.push(...e):t.effects.push(e):wc(e)}const Ce=Symbol.for("v-fgt"),wn=Symbol.for("v-txt"),Ht=Symbol.for("v-cmt"),Vr=Symbol.for("v-stc"),hr=[];let gt=null;function Q(e=!1){hr.push(gt=e?null:[])}function hd(){hr.pop(),gt=hr[hr.length-1]||null}let br=1;function ho(e,t=!1){br+=e,e<0&&gt&&t&&(gt.hasOnce=!0)}function cl(e){return e.dynamicChildren=br>0?gt||Pi:null,hd(),br>0&&gt&&gt.push(e),e}function se(e,t,i,n,s,u){return cl(j(e,t,i,n,s,u,!0))}function Fe(e,t,i,n,s){return cl(Ve(e,t,i,n,s,!0))}function ks(e){return e?e.__v_isVNode===!0:!1}function Li(e,t){return e.type===t.type&&e.key===t.key}const dl=({key:e})=>e??null,qr=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?qe(e)||et(e)||Ee(e)?{i:Qe,r:e,k:t,f:!!i}:e:null);function j(e,t=null,i=null,n=0,s=null,u=e===Ce?0:1,_=!1,E=!1){const w={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&dl(t),ref:t&&qr(t),scopeId:Fa,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:u,patchFlag:n,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Qe};return E?(Os(w,i),u&128&&e.normalize(w)):i&&(w.shapeFlag|=qe(i)?8:16),br>0&&!_&&gt&&(w.patchFlag>0||u&6)&&w.patchFlag!==32&&gt.push(w),w}const Ve=md;function md(e,t=null,i=null,n=0,s=null,u=!1){if((!e||e===qa)&&(e=Ht),ks(e)){const E=Ri(e,t,!0);return i&&Os(E,i),br>0&&!u&&gt&&(E.shapeFlag&6?gt[gt.indexOf(e)]=E:gt.push(E)),E.patchFlag=-2,E}if(Id(e)&&(e=e.__vccOpts),t){t=pd(t);let{class:E,style:w}=t;E&&!qe(E)&&(t.class=Ye(E)),Be(w)&&(Ds(w)&&!_e(w)&&(w=Ze({},w)),t.style=Rr(w))}const _=qe(e)?1:ul(e)?128:Sc(e)?64:Be(e)?4:Ee(e)?2:0;return j(e,t,i,n,s,_,u,!0)}function pd(e){return e?Ds(e)||Ja(e)?Ze({},e):e:null}function Ri(e,t,i=!1,n=!1){const{props:s,ref:u,patchFlag:_,children:E,transition:w}=e,l=t?vd(s||{},t):s,r={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&dl(l),ref:t&&t.ref?i&&u?_e(u)?u.concat(qr(t)):[u,qr(t)]:qr(t):u,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:E,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ce?_===-1?16:_|16:_,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:w,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ri(e.ssContent),ssFallback:e.ssFallback&&Ri(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return w&&n&&yr(r,w.clone(r)),r}function Ge(e=" ",t=0){return Ve(wn,null,e,t)}function gd(e,t){const i=Ve(Vr,null,e);return i.staticCount=t,i}function ke(e="",t=!1){return t?(Q(),Fe(Ht,null,e)):Ve(Ht,null,e)}function Lt(e){return e==null||typeof e=="boolean"?Ve(Ht):_e(e)?Ve(Ce,null,e.slice()):ks(e)?ni(e):Ve(wn,null,String(e))}function ni(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ri(e)}function Os(e,t){let i=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(_e(t))i=16;else if(typeof t=="object")if(n&65){const s=t.default;s&&(s._c&&(s._d=!1),Os(e,s()),s._c&&(s._d=!0));return}else{i=32;const s=t._;!s&&!Ja(t)?t._ctx=Qe:s===3&&Qe&&(Qe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ee(t)?(t={default:t,_ctx:Qe},i=32):(t=String(t),n&64?(i=16,t=[Ge(t)]):i=8);e.children=t,e.shapeFlag|=i}function vd(...e){const t={};for(let i=0;i<e.length;i++){const n=e[i];for(const s in n)if(s==="class")t.class!==n.class&&(t.class=Ye([t.class,n.class]));else if(s==="style")t.style=Rr([t.style,n.style]);else if(cn(s)){const u=t[s],_=n[s];_&&u!==_&&!(_e(u)&&u.includes(_))&&(t[s]=u?[].concat(u,_):_)}else s!==""&&(t[s]=n[s])}return t}function kt(e,t,i,n=null){At(e,t,7,[i,n])}const yd=$a();let bd=0;function xd(e,t,i){const n=e.type,s=(t?t.appContext:e.appContext)||yd,u={uid:bd++,vnode:e,type:n,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Uu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:el(n,s),emitsOptions:ll(n,s),emit:null,emitted:null,propsDefaults:He,inheritAttrs:n.inheritAttrs,ctx:He,data:He,props:He,attrs:He,slots:He,refs:He,setupState:He,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return u.ctx={_:u},u.root=t?t.root:u,u.emit=ad.bind(null,u),e.ce&&e.ce(u),u}let it=null;const wd=()=>it||Qe;let en,ts;{const e=mn(),t=(i,n)=>{let s;return(s=e[i])||(s=e[i]=[]),s.push(n),u=>{s.length>1?s.forEach(_=>_(u)):s[0](u)}};en=t("__VUE_INSTANCE_SETTERS__",i=>it=i),ts=t("__VUE_SSR_SETTERS__",i=>xr=i)}const Ir=e=>{const t=it;return en(e),e.scope.on(),()=>{e.scope.off(),en(t)}},mo=()=>{it&&it.scope.off(),en(null)};function fl(e){return e.vnode.shapeFlag&4}let xr=!1;function _d(e,t=!1,i=!1){t&&ts(t);const{props:n,children:s}=e.vnode,u=fl(e);Wc(e,n,u,t),Zc(e,s,i||t);const _=u?Sd(e,t):void 0;return t&&ts(!1),_}function Sd(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,zc);const{setup:n}=i;if(n){Kt();const s=e.setupContext=n.length>1?Rd(e):null,u=Ir(e),_=Dr(n,e,0,[e.props,s]),E=ca(_);if($t(),u(),(E||e.sp)&&!ji(e)&&Ha(e),E){if(_.then(mo,mo),t)return _.then(w=>{po(e,w)}).catch(w=>{yn(w,e,0)});e.asyncDep=_}else po(e,_)}else hl(e)}function po(e,t,i){Ee(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Be(t)&&(e.setupState=ka(t)),hl(e)}function hl(e,t,i){const n=e.type;e.render||(e.render=n.render||Ft);{const s=Ir(e);Kt();try{Bc(e)}finally{$t(),s()}}}const Ed={get(e,t){return nt(e,"get",""),e[t]}};function Rd(e){const t=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,Ed),slots:e.slots,emit:e.emit,expose:t}}function _n(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(ka(uc(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in fr)return fr[i](e)},has(t,i){return i in t||i in fr}})):e.proxy}function Dd(e,t=!0){return Ee(e)?e.displayName||e.name:e.name||t&&e.__name}function Id(e){return Ee(e)&&"__vccOpts"in e}const ml=(e,t)=>gc(e,t,xr),Td="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let is;const go=typeof window<"u"&&window.trustedTypes;if(go)try{is=go.createPolicy("vue",{createHTML:e=>e})}catch{}const pl=is?e=>is.createHTML(e):e=>e,Ad="http://www.w3.org/2000/svg",Cd="http://www.w3.org/1998/Math/MathML",Gt=typeof document<"u"?document:null,vo=Gt&&Gt.createElement("template"),kd={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,n)=>{const s=t==="svg"?Gt.createElementNS(Ad,e):t==="mathml"?Gt.createElementNS(Cd,e):i?Gt.createElement(e,{is:i}):Gt.createElement(e);return e==="select"&&n&&n.multiple!=null&&s.setAttribute("multiple",n.multiple),s},createText:e=>Gt.createTextNode(e),createComment:e=>Gt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Gt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,n,s,u){const _=i?i.previousSibling:t.lastChild;if(s&&(s===u||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),i),!(s===u||!(s=s.nextSibling)););else{vo.innerHTML=pl(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const E=vo.content;if(n==="svg"||n==="mathml"){const w=E.firstChild;for(;w.firstChild;)E.appendChild(w.firstChild);E.removeChild(w)}t.insertBefore(E,i)}return[_?_.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},Qt="transition",Qi="animation",Xi=Symbol("_vtc"),gl={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Od=Ze({},Rc,gl),gi=(e,t=[])=>{_e(e)?e.forEach(i=>i(...t)):e&&e(...t)},yo=e=>e?_e(e)?e.some(t=>t.length>1):e.length>1:!1;function Md(e){const t={};for(const T in e)T in gl||(t[T]=e[T]);if(e.css===!1)return t;const{name:i="v",type:n,duration:s,enterFromClass:u=`${i}-enter-from`,enterActiveClass:_=`${i}-enter-active`,enterToClass:E=`${i}-enter-to`,appearFromClass:w=u,appearActiveClass:l=_,appearToClass:r=E,leaveFromClass:a=`${i}-leave-from`,leaveActiveClass:f=`${i}-leave-active`,leaveToClass:o=`${i}-leave-to`}=e,g=Ld(s),d=g&&g[0],h=g&&g[1],{onBeforeEnter:c,onEnter:b,onEnterCancelled:S,onLeave:p,onLeaveCancelled:m,onBeforeAppear:x=c,onAppear:v=b,onAppearCancelled:I=S}=t,D=(T,A,C,R)=>{T._enterCancelled=R,ii(T,A?r:E),ii(T,A?l:_),C&&C()},k=(T,A)=>{T._isLeaving=!1,ii(T,a),ii(T,o),ii(T,f),A&&A()},P=T=>(A,C)=>{const R=T?v:b,M=()=>D(A,T,C);gi(R,[A,M]),bo(()=>{ii(A,T?w:u),Ot(A,T?r:E),yo(R)||xo(A,n,d,M)})};return Ze(t,{onBeforeEnter(T){gi(c,[T]),Ot(T,u),Ot(T,_)},onBeforeAppear(T){gi(x,[T]),Ot(T,w),Ot(T,l)},onEnter:P(!1),onAppear:P(!0),onLeave(T,A){T._isLeaving=!0;const C=()=>k(T,A);Ot(T,a),T._enterCancelled?(Ot(T,f),rs()):(rs(),Ot(T,f)),bo(()=>{T._isLeaving&&(ii(T,a),Ot(T,o),yo(p)||xo(T,n,h,C))}),gi(p,[T,C])},onEnterCancelled(T){D(T,!1,void 0,!0),gi(S,[T])},onAppearCancelled(T){D(T,!0,void 0,!0),gi(I,[T])},onLeaveCancelled(T){k(T),gi(m,[T])}})}function Ld(e){if(e==null)return null;if(Be(e))return[Hn(e.enter),Hn(e.leave)];{const t=Hn(e);return[t,t]}}function Hn(e){return Mu(e)}function Ot(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.add(i)),(e[Xi]||(e[Xi]=new Set)).add(t)}function ii(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const i=e[Xi];i&&(i.delete(t),i.size||(e[Xi]=void 0))}function bo(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Nd=0;function xo(e,t,i,n){const s=e._endId=++Nd,u=()=>{s===e._endId&&n()};if(i!=null)return setTimeout(u,i);const{type:_,timeout:E,propCount:w}=vl(e,t);if(!_)return n();const l=_+"end";let r=0;const a=()=>{e.removeEventListener(l,f),u()},f=o=>{o.target===e&&++r>=w&&a()};setTimeout(()=>{r<w&&a()},E+1),e.addEventListener(l,f)}function vl(e,t){const i=window.getComputedStyle(e),n=g=>(i[g]||"").split(", "),s=n(`${Qt}Delay`),u=n(`${Qt}Duration`),_=wo(s,u),E=n(`${Qi}Delay`),w=n(`${Qi}Duration`),l=wo(E,w);let r=null,a=0,f=0;t===Qt?_>0&&(r=Qt,a=_,f=u.length):t===Qi?l>0&&(r=Qi,a=l,f=w.length):(a=Math.max(_,l),r=a>0?_>l?Qt:Qi:null,f=r?r===Qt?u.length:w.length:0);const o=r===Qt&&/\b(transform|all)(,|$)/.test(n(`${Qt}Property`).toString());return{type:r,timeout:a,propCount:f,hasTransform:o}}function wo(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((i,n)=>_o(i)+_o(e[n])))}function _o(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function rs(){return document.body.offsetHeight}function Fd(e,t,i){const n=e[Xi];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const tn=Symbol("_vod"),yl=Symbol("_vsh"),ar={beforeMount(e,{value:t},{transition:i}){e[tn]=e.style.display==="none"?"":e.style.display,i&&t?i.beforeEnter(e):er(e,t)},mounted(e,{value:t},{transition:i}){i&&t&&i.enter(e)},updated(e,{value:t,oldValue:i},{transition:n}){!t!=!i&&(n?t?(n.beforeEnter(e),er(e,!0),n.enter(e)):n.leave(e,()=>{er(e,!1)}):er(e,t))},beforeUnmount(e,{value:t}){er(e,t)}};function er(e,t){e.style.display=t?e[tn]:"none",e[yl]=!t}const Pd=Symbol(""),Hd=/(^|;)\s*display\s*:/;function zd(e,t,i){const n=e.style,s=qe(i);let u=!1;if(i&&!s){if(t)if(qe(t))for(const _ of t.split(";")){const E=_.slice(0,_.indexOf(":")).trim();i[E]==null&&Gr(n,E,"")}else for(const _ in t)i[_]==null&&Gr(n,_,"");for(const _ in i)_==="display"&&(u=!0),Gr(n,_,i[_])}else if(s){if(t!==i){const _=n[Pd];_&&(i+=";"+_),n.cssText=i,u=Hd.test(i)}}else t&&e.removeAttribute("style");tn in e&&(e[tn]=u?n.display:"",e[yl]&&(n.display="none"))}const So=/\s*!important$/;function Gr(e,t,i){if(_e(i))i.forEach(n=>Gr(e,t,n));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const n=Bd(e,t);So.test(i)?e.setProperty(ci(n),i.replace(So,""),"important"):e[n]=i}}const Eo=["Webkit","Moz","ms"],zn={};function Bd(e,t){const i=zn[t];if(i)return i;let n=Et(t);if(n!=="filter"&&n in e)return zn[t]=n;n=hn(n);for(let s=0;s<Eo.length;s++){const u=Eo[s]+n;if(u in e)return zn[t]=u}return t}const Ro="http://www.w3.org/1999/xlink";function Do(e,t,i,n,s,u=zu(t)){n&&t.startsWith("xlink:")?i==null?e.removeAttributeNS(Ro,t.slice(6,t.length)):e.setAttributeNS(Ro,t,i):i==null||u&&!ha(i)?e.removeAttribute(t):e.setAttribute(t,u?"":Tt(i)?String(i):i)}function Io(e,t,i,n,s){if(t==="innerHTML"||t==="textContent"){i!=null&&(e[t]=t==="innerHTML"?pl(i):i);return}const u=e.tagName;if(t==="value"&&u!=="PROGRESS"&&!u.includes("-")){const E=u==="OPTION"?e.getAttribute("value")||"":e.value,w=i==null?e.type==="checkbox"?"on":"":String(i);(E!==w||!("_value"in e))&&(e.value=w),i==null&&e.removeAttribute(t),e._value=i;return}let _=!1;if(i===""||i==null){const E=typeof e[t];E==="boolean"?i=ha(i):i==null&&E==="string"?(i="",_=!0):E==="number"&&(i=0,_=!0)}try{e[t]=i}catch{}_&&e.removeAttribute(s||t)}function xi(e,t,i,n){e.addEventListener(t,i,n)}function jd(e,t,i,n){e.removeEventListener(t,i,n)}const To=Symbol("_vei");function Ud(e,t,i,n,s=null){const u=e[To]||(e[To]={}),_=u[t];if(n&&_)_.value=n;else{const[E,w]=Vd(t);if(n){const l=u[t]=Xd(n,s);xi(e,E,l,w)}else _&&(jd(e,E,_,w),u[t]=void 0)}}const Ao=/(?:Once|Passive|Capture)$/;function Vd(e){let t;if(Ao.test(e)){t={};let n;for(;n=e.match(Ao);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ci(e.slice(2)),t]}let Bn=0;const qd=Promise.resolve(),Gd=()=>Bn||(qd.then(()=>Bn=0),Bn=Date.now());function Xd(e,t){const i=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=i.attached)return;At(Wd(n,i.value),t,5,[n])};return i.value=e,i.attached=Gd(),i}function Wd(e,t){if(_e(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(n=>s=>!s._stopped&&n&&n(s))}else return t}const Co=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Kd=(e,t,i,n,s,u)=>{const _=s==="svg";t==="class"?Fd(e,n,_):t==="style"?zd(e,i,n):cn(t)?ys(t)||Ud(e,t,i,n,u):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):$d(e,t,n,_))?(Io(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Do(e,t,n,_,u,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!qe(n))?Io(e,Et(t),n,u,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),Do(e,t,n,_))};function $d(e,t,i,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&Co(t)&&Ee(i));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Co(t)&&qe(i)?!1:t in e}const bl=new WeakMap,xl=new WeakMap,rn=Symbol("_moveCb"),ko=Symbol("_enterCb"),Yd=e=>(delete e.props.mode,e),Zd=Yd({name:"TransitionGroup",props:Ze({},Od,{tag:String,moveClass:String}),setup(e,{slots:t}){const i=wd(),n=Ec();let s,u;return Ts(()=>{if(!s.length)return;const _=e.moveClass||`${e.name||"v"}-move`;if(!rf(s[0].el,i.vnode.el,_)){s=[];return}s.forEach(Qd),s.forEach(ef);const E=s.filter(tf);rs(),E.forEach(w=>{const l=w.el,r=l.style;Ot(l,_),r.transform=r.webkitTransform=r.transitionDuration="";const a=l[rn]=f=>{f&&f.target!==l||(!f||/transform$/.test(f.propertyName))&&(l.removeEventListener("transitionend",a),l[rn]=null,ii(l,_))};l.addEventListener("transitionend",a)}),s=[]}),()=>{const _=Le(e),E=Md(_);let w=_.tag||Ce;if(s=[],u)for(let l=0;l<u.length;l++){const r=u[l];r.el&&r.el instanceof Element&&(s.push(r),yr(r,$n(r,E,n,i)),bl.set(r,r.el.getBoundingClientRect()))}u=t.default?Pa(t.default()):[];for(let l=0;l<u.length;l++){const r=u[l];r.key!=null&&yr(r,$n(r,E,n,i))}return Ve(w,null,u)}}}),Jd=Zd;function Qd(e){const t=e.el;t[rn]&&t[rn](),t[ko]&&t[ko]()}function ef(e){xl.set(e,e.el.getBoundingClientRect())}function tf(e){const t=bl.get(e),i=xl.get(e),n=t.left-i.left,s=t.top-i.top;if(n||s){const u=e.el.style;return u.transform=u.webkitTransform=`translate(${n}px,${s}px)`,u.transitionDuration="0s",e}}function rf(e,t,i){const n=e.cloneNode(),s=e[Xi];s&&s.forEach(E=>{E.split(/\s+/).forEach(w=>w&&n.classList.remove(w))}),i.split(/\s+/).forEach(E=>E&&n.classList.add(E)),n.style.display="none";const u=t.nodeType===1?t:t.parentNode;u.appendChild(n);const{hasTransform:_}=vl(n);return u.removeChild(n),_}const nn=e=>{const t=e.props["onUpdate:modelValue"]||!1;return _e(t)?i=>Ur(t,i):t};function nf(e){e.target.composing=!0}function Oo(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Vi=Symbol("_assign"),$i={created(e,{modifiers:{lazy:t,trim:i,number:n}},s){e[Vi]=nn(s);const u=n||s.props&&s.props.type==="number";xi(e,t?"change":"input",_=>{if(_.target.composing)return;let E=e.value;i&&(E=E.trim()),u&&(E=Kr(E)),e[Vi](E)}),i&&xi(e,"change",()=>{e.value=e.value.trim()}),t||(xi(e,"compositionstart",nf),xi(e,"compositionend",Oo),xi(e,"change",Oo))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:i,modifiers:{lazy:n,trim:s,number:u}},_){if(e[Vi]=nn(_),e.composing)return;const E=(u||e.type==="number")&&!/^0\d/.test(e.value)?Kr(e.value):e.value,w=t??"";E!==w&&(document.activeElement===e&&e.type!=="range"&&(n&&t===i||s&&e.value.trim()===w)||(e.value=w))}},Mo={deep:!0,created(e,{value:t,modifiers:{number:i}},n){const s=dn(t);xi(e,"change",()=>{const u=Array.prototype.filter.call(e.options,_=>_.selected).map(_=>i?Kr(sn(_)):sn(_));e[Vi](e.multiple?s?new Set(u):u:u[0]),e._assigning=!0,Ki(()=>{e._assigning=!1})}),e[Vi]=nn(n)},mounted(e,{value:t}){Lo(e,t)},beforeUpdate(e,t,i){e[Vi]=nn(i)},updated(e,{value:t}){e._assigning||Lo(e,t)}};function Lo(e,t){const i=e.multiple,n=_e(t);if(!(i&&!n&&!dn(t))){for(let s=0,u=e.options.length;s<u;s++){const _=e.options[s],E=sn(_);if(i)if(n){const w=typeof E;w==="string"||w==="number"?_.selected=t.some(l=>String(l)===String(E)):_.selected=ju(t,E)>-1}else _.selected=t.has(E);else if(pn(sn(_),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!i&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function sn(e){return"_value"in e?e._value:e.value}const sf=["ctrl","shift","alt","meta"],of={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>sf.some(i=>e[`${i}Key`]&&!t.includes(i))},wi=(e,t)=>{const i=e._withMods||(e._withMods={}),n=t.join(".");return i[n]||(i[n]=(s,...u)=>{for(let _=0;_<t.length;_++){const E=of[t[_]];if(E&&E(s,t))return}return e(s,...u)})},af={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Yi=(e,t)=>{const i=e._withKeys||(e._withKeys={}),n=t.join(".");return i[n]||(i[n]=s=>{if(!("key"in s))return;const u=ci(s.key);if(t.some(_=>_===u||af[_]===u))return e(s)})},lf=Ze({patchProp:Kd},kd);let No;function uf(){return No||(No=Qc(lf))}const cf=(...e)=>{const t=uf().createApp(...e),{mount:i}=t;return t.mount=n=>{const s=ff(n);if(!s)return;const u=t._component;!Ee(u)&&!u.render&&!u.template&&(u.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const _=i(s,!1,df(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),_},t};function df(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function ff(e){return qe(e)?document.querySelector(e):e}const hf={id:"fs-container"},Fo="/fs",mf=Ic({__name:"App",setup(e){const t={active:!0,multiple:!0,click:(i,n)=>{if(!i.length){alert("No item selected");return}alert("Selected: "+i[0].path),console.log(i,n)}};return(i,n)=>{const s=Pc("vue-finder");return Q(),se(Ce,null,[n[0]||(n[0]=j("h2",null,"Hello World",-1)),j("div",hf,[Ve(s,{id:"my_vuefinder",url:Fo,request:Fo,theme:"light","select-button":t})])],64)}}}),pf=(e,t)=>{const i=e.__vccOpts||e;for(const[n,s]of t)i[n]=s;return i},gf=pf(mf,[["__scopeId","data-v-dbfde38b"]]),vf="modulepreload",yf=function(e,t){return new URL(e,t).href},Po={},ei=function(t,i,n){let s=Promise.resolve();if(i&&i.length>0){let l=function(r){return Promise.all(r.map(a=>Promise.resolve(a).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const _=document.getElementsByTagName("link"),E=document.querySelector("meta[property=csp-nonce]"),w=E?.nonce||E?.getAttribute("nonce");s=l(i.map(r=>{if(r=yf(r,n),r in Po)return;Po[r]=!0;const a=r.endsWith(".css"),f=a?'[rel="stylesheet"]':"";if(!!n)for(let d=_.length-1;d>=0;d--){const h=_[d];if(h.href===r&&(!a||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${f}`))return;const g=document.createElement("link");if(g.rel=a?"stylesheet":vf,a||(g.as="script"),g.crossOrigin="",g.href=r,w&&g.setAttribute("nonce",w),document.head.appendChild(g),a)return new Promise((d,h)=>{g.addEventListener("load",d),g.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${r}`)))})}))}function u(_){const E=new Event("vite:preloadError",{cancelable:!0});if(E.payload=_,window.dispatchEvent(E),!E.defaultPrevented)throw _}return s.then(_=>{for(const E of _||[])E.status==="rejected"&&u(E.reason);return t().catch(u)})};function bf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Xr={exports:{}},Wr={exports:{}},xf=Wr.exports,Ho;function wf(){return Ho||(Ho=1,function(e){(function(t,i){var n=function(){var s={};return i.apply(s,arguments),s.moxie};e.exports?e.exports=n():t.moxie=n()})(xf||window,function(){(function(t,i){var n={};function s(l,r){for(var a,f=[],o=0;o<l.length;++o){if(a=n[l[o]]||E(l[o]),!a)throw"module definition dependecy not found: "+l[o];f.push(a)}r.apply(null,f)}function u(l,r,a){if(typeof l!="string")throw"invalid module definition, module id must be defined and be a string";if(r===i)throw"invalid module definition, dependencies must be specified";if(a===i)throw"invalid module definition, definition function must be specified";s(r,function(){n[l]=a.apply(null,arguments)})}function _(l){return!!n[l]}function E(l){for(var r=t,a=l.split(/[.\/]/),f=0;f<a.length;++f){if(!r[a[f]])return;r=r[a[f]]}return r}function w(l){for(var r=0;r<l.length;r++){for(var a=t,f=l[r],o=f.split(/[.\/]/),g=0;g<o.length-1;++g)a[o[g]]===i&&(a[o[g]]={}),a=a[o[g]];a[o[o.length-1]]=n[f]}}u("moxie/core/utils/Basic",[],function(){function l(R){var M;return R===M?"undefined":R===null?"null":R.nodeType?"node":{}.toString.call(R).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()}function r(){return h(!1,!1,arguments)}function a(){return h(!0,!1,arguments)}function f(){return h(!1,!0,arguments)}function o(){return h(!0,!0,arguments)}function g(R){switch(l(R)){case"array":return h(!1,!0,[[],R]);case"object":return h(!1,!0,[{},R]);default:return R}}function d(R){switch(l(R)){case"array":return Array.prototype.slice.call(R);case"object":return r({},R)}return R}function h(R,M,O){var B,G=O[0];return b(O,function($,te){te>0&&b($,function(V,X){var ie=x(l(V),["array","object"])!==-1;if(V===B||R&&G[X]===B)return!0;ie&&M&&(V=d(V)),l(G[X])===l(V)&&ie?h(R,M,[G[X],V]):G[X]=V})}),G}function c(R,M){for(var O in M)({}).hasOwnProperty.call(M,O)&&(R[O]=M[O]);function B(){this.constructor=R;{var G=function($){var te=$.toString().match(/^function\s([^\(\s]+)/);return te?te[1]:!1};this.ctorName=G(R)}}return B.prototype=M.prototype,R.prototype=new B,R.parent=M.prototype,R}function b(R,M){var O,B,G,$;if(R){try{O=R.length}catch{O=$}if(O===$||typeof O!="number"){for(B in R)if(R.hasOwnProperty(B)&&M(R[B],B)===!1)return}else for(G=0;G<O;G++)if(M(R[G],G)===!1)return}}function S(R){var M;if(!R||l(R)!=="object")return!0;for(M in R)return!1;return!0}function p(R,M){var O=0,B=R.length;l(M)!=="function"&&(M=function(){}),(!R||!R.length)&&M();function G($){l(R[$])==="function"&&R[$](function(te){++$<B&&!te?G($):M(te)})}G(O)}function m(R,M){var O=0,B=R.length,G=new Array(B);b(R,function($,te){$(function(V){if(V)return M(V);var X=[].slice.call(arguments);X.shift(),G[te]=X,O++,O===B&&(G.unshift(null),M.apply(this,G))})})}function x(R,M){if(M){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(M,R);for(var O=0,B=M.length;O<B;O++)if(M[O]===R)return O}return-1}function v(R,M){var O=[];l(R)!=="array"&&(R=[R]),l(M)!=="array"&&(M=[M]);for(var B in R)x(R[B],M)===-1&&O.push(R[B]);return O.length?O:!1}function I(R,M){var O=[];return b(R,function(B){x(B,M)!==-1&&O.push(B)}),O.length?O:null}function D(R){var M,O=[];for(M=0;M<R.length;M++)O[M]=R[M];return O}var k=function(){var R=0;return function(M){var O=new Date().getTime().toString(32),B;for(B=0;B<5;B++)O+=Math.floor(Math.random()*65535).toString(32);return(M||"o_")+O+(R++).toString(32)}}();function P(R){return R&&(String.prototype.trim?String.prototype.trim.call(R):R.toString().replace(/^\s*/,"").replace(/\s*$/,""))}function T(R){if(typeof R!="string")return R;var M={t:1099511627776,g:1073741824,m:1048576,k:1024},O;return R=/^([0-9\.]+)([tmgk]?)$/.exec(R.toLowerCase().replace(/[^0-9\.tmkg]/g,"")),O=R[2],R=+R[1],M.hasOwnProperty(O)&&(R*=M[O]),Math.floor(R)}function A(R){var M=[].slice.call(arguments,1);return R.replace(/%([a-z])/g,function(O,B){var G=M.shift();switch(B){case"s":return G+"";case"d":return parseInt(G,10);case"f":return parseFloat(G);case"c":return"";default:return G}})}function C(R,M){var O=this;setTimeout(function(){R.call(O)},M||1)}return{guid:k,typeOf:l,extend:r,extendIf:a,extendImmutable:f,extendImmutableIf:o,clone:g,inherit:c,each:b,isEmptyObj:S,inSeries:p,inParallel:m,inArray:x,arrayDiff:v,arrayIntersect:I,toArray:D,trim:P,sprintf:A,parseSizeStr:T,delay:C}}),u("moxie/core/utils/Encode",[],function(){var l=function(o){return unescape(encodeURIComponent(o))},r=function(o){return decodeURIComponent(escape(o))},a=function(o,g){if(typeof window.atob=="function")return g?r(window.atob(o)):window.atob(o);var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h,c,b,S,p,m,x,v,I=0,D=0,k="",P=[];if(!o)return o;o+="";do S=d.indexOf(o.charAt(I++)),p=d.indexOf(o.charAt(I++)),m=d.indexOf(o.charAt(I++)),x=d.indexOf(o.charAt(I++)),v=S<<18|p<<12|m<<6|x,h=v>>16&255,c=v>>8&255,b=v&255,m==64?P[D++]=String.fromCharCode(h):x==64?P[D++]=String.fromCharCode(h,c):P[D++]=String.fromCharCode(h,c,b);while(I<o.length);return k=P.join(""),g?r(k):k},f=function(o,g){if(g&&(o=l(o)),typeof window.btoa=="function")return window.btoa(o);var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h,c,b,S,p,m,x,v,I=0,D=0,k="",P=[];if(!o)return o;do h=o.charCodeAt(I++),c=o.charCodeAt(I++),b=o.charCodeAt(I++),v=h<<16|c<<8|b,S=v>>18&63,p=v>>12&63,m=v>>6&63,x=v&63,P[D++]=d.charAt(S)+d.charAt(p)+d.charAt(m)+d.charAt(x);while(I<o.length);k=P.join("");var T=o.length%3;return(T?k.slice(0,T-3):k)+"===".slice(T||3)};return{utf8_encode:l,utf8_decode:r,atob:a,btoa:f}}),u("moxie/core/utils/Env",["moxie/core/utils/Basic"],function(l){var r=function(d){var h="",c="?",b="function",S="undefined",p="object",m="name",x="version",v={has:function(T,A){return A.toLowerCase().indexOf(T.toLowerCase())!==-1},lowerize:function(T){return T.toLowerCase()}},I={rgx:function(){for(var T,A=0,C,R,M,O,B,G,$=arguments;A<$.length;A+=2){var te=$[A],V=$[A+1];if(typeof T===S){T={};for(M in V)O=V[M],typeof O===p?T[O[0]]=d:T[O]=d}for(C=R=0;C<te.length;C++)if(B=te[C].exec(this.getUA()),B){for(M=0;M<V.length;M++)G=B[++R],O=V[M],typeof O===p&&O.length>0?O.length==2?typeof O[1]==b?T[O[0]]=O[1].call(this,G):T[O[0]]=O[1]:O.length==3?typeof O[1]===b&&!(O[1].exec&&O[1].test)?T[O[0]]=G?O[1].call(this,G,O[2]):d:T[O[0]]=G?G.replace(O[1],O[2]):d:O.length==4&&(T[O[0]]=G?O[3].call(this,G.replace(O[1],O[2])):d):T[O]=G||d;break}if(B)break}return T},str:function(T,A){for(var C in A)if(typeof A[C]===p&&A[C].length>0){for(var R=0;R<A[C].length;R++)if(v.has(A[C][R],T))return C===c?d:C}else if(v.has(A[C],T))return C===c?d:C;return T}},D={browser:{oldsafari:{version:{"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",RT:"ARM"}}}},k={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[m,x],[/\s(opr)\/([\w\.]+)/i],[[m,"Opera"],x],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi)\/([\w\.-]+)/i],[m,x],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[m,"IE"],x],[/(edge)\/((\d+)?[\w\.]+)/i],[m,x],[/(yabrowser)\/([\w\.]+)/i],[[m,"Yandex"],x],[/(comodo_dragon)\/([\w\.]+)/i],[[m,/_/g," "],x],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?([\w\.]+)/i],[m,x],[/(dolfin)\/([\w\.]+)/i],[[m,"Dolphin"],x],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[m,"Chrome"],x],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[x,[m,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[x,[m,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[x,[m,"Facebook"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[x,[m,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[x,m],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[m,[x,I.str,D.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[m,x],[/(navigator|netscape)\/([\w\.-]+)/i],[[m,"Netscape"],x],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[m,x]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[x,[m,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[m,x],[/rv\:([\w\.]+).*(gecko)/i],[x,m]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[m,x],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[m,[x,I.str,D.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[m,"Windows"],[x,I.str,D.os.windows.version]],[/\((bb)(10);/i],[[m,"BlackBerry"],x],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[m,x],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[m,"Symbian"],x],[/\((series40);/i],[m],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[m,"Firefox OS"],x],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[m,x],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[m,"Chromium OS"],x],[/(sunos)\s?([\w\.]+\d)*/i],[[m,"Solaris"],x],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[m,x],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[m,"iOS"],[x,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[m,"Mac OS"],[x,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[m,x]]},P=function(T){var A=T||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:h);this.getBrowser=function(){return I.rgx.apply(this,k.browser)},this.getEngine=function(){return I.rgx.apply(this,k.engine)},this.getOS=function(){return I.rgx.apply(this,k.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS()}},this.getUA=function(){return A},this.setUA=function(C){return A=C,this},this.setUA(A)};return P}();function a(d,h,c){var b=0,S=0,p=0,m={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},x=function(I){return I=(""+I).replace(/[_\-+]/g,"."),I=I.replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,"."),I.length?I.split("."):[-8]},v=function(I){return I?isNaN(I)?m[I]||-7:parseInt(I,10):0};for(d=x(d),h=x(h),S=Math.max(d.length,h.length),b=0;b<S;b++)if(d[b]!=h[b]){if(d[b]=v(d[b]),h[b]=v(h[b]),d[b]<h[b]){p=-1;break}else if(d[b]>h[b]){p=1;break}}if(!c)return p;switch(c){case">":case"gt":return p>0;case">=":case"ge":return p>=0;case"<=":case"le":return p<=0;case"==":case"=":case"eq":return p===0;case"<>":case"!=":case"ne":return p!==0;case"":case"<":case"lt":return p<0;default:return null}}var f=function(){var d={access_global_ns:function(){return!!window.moxie},define_property:function(){return!1}(),create_canvas:function(){var h=document.createElement("canvas"),c=!!(h.getContext&&h.getContext("2d"));return d.create_canvas=c,c},return_response_type:function(h){try{if(l.inArray(h,["","text","document"])!==-1)return!0;if(window.XMLHttpRequest){var c=new XMLHttpRequest;if(c.open("get","/"),"responseType"in c)return c.responseType=h,c.responseType===h}}catch{}return!1},use_blob_uri:function(){var h=window.URL;return d.use_blob_uri=h&&"createObjectURL"in h&&"revokeObjectURL"in h&&(g.browser!=="IE"||g.verComp(g.version,"11.0.46",">=")),d.use_blob_uri},use_data_uri:function(){var h=new Image;return h.onload=function(){d.use_data_uri=h.width===1&&h.height===1},setTimeout(function(){h.src="data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="},1),!1}(),use_data_uri_over32kb:function(){return d.use_data_uri&&(g.browser!=="IE"||g.version>=9)},use_data_uri_of:function(h){return d.use_data_uri&&h<33e3||d.use_data_uri_over32kb()},use_fileinput:function(){if(navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/))return!1;var h=document.createElement("input");return h.setAttribute("type","file"),d.use_fileinput=!h.disabled},use_webgl:function(){var h=document.createElement("canvas"),c=null,b;try{c=h.getContext("webgl")||h.getContext("experimental-webgl")}catch{}return c||(c=null),b=!!c,d.use_webgl=b,h=i,b}};return function(h){var c=[].slice.call(arguments);return c.shift(),l.typeOf(d[h])==="function"?d[h].apply(this,c):!!d[h]}}(),o=new r().getResult(),g={can:f,uaParser:r,browser:o.browser.name,version:o.browser.version,os:o.os.name,osVersion:o.os.version,verComp:a,swf_url:"../flash/Moxie.swf",xap_url:"../silverlight/Moxie.xap",global_event_dispatcher:"moxie.core.EventTarget.instance.dispatchEvent"};return g.OS=g.os,g.debug={runtime:!0,events:!1},g.log=function(){function d(b){h.appendChild(document.createTextNode(b+`
`))}if(window&&window.console&&window.console.log&&window.console.log.apply)window.console.log.apply(window.console,arguments);else if(document){var h=document.getElementById("moxie-console");h||(h=document.createElement("pre"),h.id="moxie-console",document.body.appendChild(h));var c=arguments[0];if(l.typeOf(c)==="string")c=l.sprintf.apply(this,arguments);else if(l.inArray(l.typeOf(c),["object","array"])!==-1){d(c);return}h.appendChild(document.createTextNode(c+`
`))}},g}),u("moxie/core/Exceptions",["moxie/core/utils/Basic"],function(l){function r(a,f){var o;for(o in a)if(a[o]===f)return o;return null}return{RuntimeError:function(){var a={NOT_INIT_ERR:1,EXCEPTION_ERR:3,NOT_SUPPORTED_ERR:9,JS_ERR:4};function f(o,g){this.code=o,this.name=r(a,o),this.message=this.name+(g||": RuntimeError "+this.code)}return l.extend(f,a),f.prototype=Error.prototype,f}(),OperationNotAllowedException:function(){function a(f){this.code=f,this.name="OperationNotAllowedException"}return l.extend(a,{NOT_ALLOWED_ERR:1}),a.prototype=Error.prototype,a}(),ImageError:function(){var a={WRONG_FORMAT:1,MAX_RESOLUTION_ERR:2,INVALID_META_ERR:3};function f(o){this.code=o,this.name=r(a,o),this.message=this.name+": ImageError "+this.code}return l.extend(f,a),f.prototype=Error.prototype,f}(),FileException:function(){var a={NOT_FOUND_ERR:1,SECURITY_ERR:2,ABORT_ERR:3,NOT_READABLE_ERR:4,ENCODING_ERR:5,NO_MODIFICATION_ALLOWED_ERR:6,INVALID_STATE_ERR:7,SYNTAX_ERR:8};function f(o){this.code=o,this.name=r(a,o),this.message=this.name+": FileException "+this.code}return l.extend(f,a),f.prototype=Error.prototype,f}(),DOMException:function(){var a={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};function f(o){this.code=o,this.name=r(a,o),this.message=this.name+": DOMException "+this.code}return l.extend(f,a),f.prototype=Error.prototype,f}(),EventException:function(){function a(f){this.code=f,this.name="EventException"}return l.extend(a,{UNSPECIFIED_EVENT_TYPE_ERR:0}),a.prototype=Error.prototype,a}()}}),u("moxie/core/utils/Dom",["moxie/core/utils/Env"],function(l){var r=function(c){return typeof c!="string"?c:document.getElementById(c)},a=function(c,b){if(!c.className)return!1;var S=new RegExp("(^|\\s+)"+b+"(\\s+|$)");return S.test(c.className)},f=function(c,b){a(c,b)||(c.className=c.className?c.className.replace(/\s+$/,"")+" "+b:b)},o=function(c,b){if(c.className){var S=new RegExp("(^|\\s+)"+b+"(\\s+|$)");c.className=c.className.replace(S,function(p,m,x){return m===" "&&x===" "?" ":""})}},g=function(c,b){if(c.currentStyle)return c.currentStyle[b];if(window.getComputedStyle)return window.getComputedStyle(c,null)[b]},d=function(c,b){var S=0,p=0,m,x=document,v,I;c=c,b=b||x.body;function D(k){var P,T,A=0,C=0;return k&&(T=k.getBoundingClientRect(),P=x.compatMode==="CSS1Compat"?x.documentElement:x.body,A=T.left+P.scrollLeft,C=T.top+P.scrollTop),{x:A,y:C}}if(c&&c.getBoundingClientRect&&l.browser==="IE"&&(!x.documentMode||x.documentMode<8))return v=D(c),I=D(b),{x:v.x-I.x,y:v.y-I.y};for(m=c;m&&m!=b&&m.nodeType;)S+=m.offsetLeft||0,p+=m.offsetTop||0,m=m.offsetParent;for(m=c.parentNode;m&&m!=b&&m.nodeType;)S-=m.scrollLeft||0,p-=m.scrollTop||0,m=m.parentNode;return{x:S,y:p}},h=function(c){return{w:c.offsetWidth||c.clientWidth,h:c.offsetHeight||c.clientHeight}};return{get:r,hasClass:a,addClass:f,removeClass:o,getStyle:g,getPos:d,getSize:h}}),u("moxie/core/EventTarget",["moxie/core/utils/Env","moxie/core/Exceptions","moxie/core/utils/Basic"],function(l,r,a){var f={};function o(){this.uid=a.guid()}return a.extend(o.prototype,{init:function(){this.uid||(this.uid=a.guid("uid_"))},addEventListener:function(g,d,h,c){var b=this,S;if(this.hasOwnProperty("uid")||(this.uid=a.guid("uid_")),g=a.trim(g),/\s/.test(g)){a.each(g.split(/\s+/),function(p){b.addEventListener(p,d,h,c)});return}g=g.toLowerCase(),h=parseInt(h,10)||0,S=f[this.uid]&&f[this.uid][g]||[],S.push({fn:d,priority:h,scope:c||this}),f[this.uid]||(f[this.uid]={}),f[this.uid][g]=S},hasEventListener:function(g){var d;return g?(g=g.toLowerCase(),d=f[this.uid]&&f[this.uid][g]):d=f[this.uid],d||!1},removeEventListener:function(g,d){var h=this,c,b;if(g=g.toLowerCase(),/\s/.test(g)){a.each(g.split(/\s+/),function(S){h.removeEventListener(S,d)});return}if(c=f[this.uid]&&f[this.uid][g],c){if(d){for(b=c.length-1;b>=0;b--)if(c[b].fn===d){c.splice(b,1);break}}else c=[];c.length||(delete f[this.uid][g],a.isEmptyObj(f[this.uid])&&delete f[this.uid])}},removeAllEventListeners:function(){f[this.uid]&&delete f[this.uid]},dispatchEvent:function(g){var d,h,c,b,S={},p=!0,m;if(a.typeOf(g)!=="string")if(b=g,a.typeOf(b.type)==="string")g=b.type,b.total!==m&&b.loaded!==m&&(S.total=b.total,S.loaded=b.loaded),S.async=b.async||!1;else throw new r.EventException(r.EventException.UNSPECIFIED_EVENT_TYPE_ERR);if(g.indexOf("::")!==-1?function(v){d=v[0],g=v[1]}(g.split("::")):d=this.uid,g=g.toLowerCase(),h=f[d]&&f[d][g],h){h.sort(function(v,I){return I.priority-v.priority}),c=[].slice.call(arguments),c.shift(),S.type=g,c.unshift(S),l.debug.events&&l.log("%cEvent '%s' fired on %s","color: #999;",S.type,(this.ctorName?this.ctorName+"::":"")+d);var x=[];a.each(h,function(v){c[0].target=v.scope,S.async?x.push(function(I){setTimeout(function(){I(v.fn.apply(v.scope,c)===!1)},1)}):x.push(function(I){I(v.fn.apply(v.scope,c)===!1)})}),x.length&&a.inSeries(x,function(v){p=!v})}return p},bindOnce:function(g,d,h,c){var b=this;b.bind.call(this,g,function S(){return b.unbind(g,S),d.apply(this,arguments)},h,c)},bind:function(){this.addEventListener.apply(this,arguments)},unbind:function(){this.removeEventListener.apply(this,arguments)},unbindAll:function(){this.removeAllEventListeners.apply(this,arguments)},trigger:function(){return this.dispatchEvent.apply(this,arguments)},handleEventProps:function(g){var d=this;this.bind(g.join(" "),function(h){var c="on"+h.type.toLowerCase();a.typeOf(this[c])==="function"&&this[c].apply(this,arguments)}),a.each(g,function(h){h="on"+h.toLowerCase(h),a.typeOf(d[h])==="undefined"&&(d[h]=null)})}}),o.instance=new o,o}),u("moxie/runtime/Runtime",["moxie/core/utils/Env","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/EventTarget"],function(l,r,a,f){var o={},g={};function d(h,c,b,S,p){var m=this,x,v=r.guid(c+"_"),I=p||"browser";h=h||{},g[v]=this,b=r.extend({access_binary:!1,access_image_binary:!1,display_media:!1,do_cors:!1,drag_and_drop:!1,filter_by_extension:!0,resize_image:!1,report_upload_progress:!1,return_response_headers:!1,return_response_type:!1,return_status_code:!0,send_custom_headers:!1,select_file:!1,select_folder:!1,select_multiple:!0,send_binary_string:!1,send_browser_cookies:!0,send_multipart:!0,slice_blob:!1,stream_upload:!1,summon_file_dialog:!1,upload_filesize:!0,use_http_method:!0},b),h.preferred_caps&&(I=d.getMode(S,h.preferred_caps,I)),l.debug.runtime&&l.log("	default mode: %s",I),x=function(){var D={};return{exec:function(k,P,T,A){if(x[P]&&(D[k]||(D[k]={context:this,instance:new x[P]}),D[k].instance[T]))return D[k].instance[T].apply(this,A)},removeInstance:function(k){delete D[k]},removeAllInstances:function(){var k=this;r.each(D,function(P,T){r.typeOf(P.instance.destroy)==="function"&&P.instance.destroy.call(P.context),k.removeInstance(T)})}}}(),r.extend(this,{initialized:!1,uid:v,type:c,mode:d.getMode(S,h.required_caps,I),shimid:v+"_container",clients:0,options:h,can:function(D,k){var P=arguments[2]||b;if(r.typeOf(D)==="string"&&r.typeOf(k)==="undefined"&&(D=d.parseCaps(D)),r.typeOf(D)==="object"){for(var T in D)if(!this.can(T,D[T],P))return!1;return!0}return r.typeOf(P[D])==="function"?P[D].call(this,k):k===P[D]},getShimContainer:function(){var D,k=a.get(this.shimid);return k||(D=a.get(this.options.container)||document.body,k=document.createElement("div"),k.id=this.shimid,k.className="moxie-shim moxie-shim-"+this.type,r.extend(k.style,{position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),D.appendChild(k),D=null),k},getShim:function(){return x},shimExec:function(D,k){var P=[].slice.call(arguments,2);return m.getShim().exec.call(this,this.uid,D,k,P)},exec:function(D,k){var P=[].slice.call(arguments,2);return m[D]&&m[D][k]?m[D][k].apply(this,P):m.shimExec.apply(this,arguments)},destroy:function(){if(m){var D=a.get(this.shimid);D&&D.parentNode.removeChild(D),x&&x.removeAllInstances(),this.unbindAll(),delete g[this.uid],this.uid=null,v=m=x=D=null}}}),this.mode&&h.required_caps&&!this.can(h.required_caps)&&(this.mode=!1)}return d.order="html5,flash,silverlight,html4",d.getRuntime=function(h){return g[h]?g[h]:!1},d.addConstructor=function(h,c){c.prototype=f.instance,o[h]=c},d.getConstructor=function(h){return o[h]||null},d.getInfo=function(h){var c=d.getRuntime(h);return c?{uid:c.uid,type:c.type,mode:c.mode,can:function(){return c.can.apply(c,arguments)}}:null},d.parseCaps=function(h){var c={};return r.typeOf(h)!=="string"?h||{}:(r.each(h.split(","),function(b){c[b]=!0}),c)},d.can=function(h,c){var b,S=d.getConstructor(h),p;return S?(b=new S({required_caps:c}),p=b.mode,b.destroy(),!!p):!1},d.thatCan=function(h,c){var b=(c||d.order).split(/\s*,\s*/);for(var S in b)if(d.can(b[S],h))return b[S];return null},d.getMode=function(h,c,b){var S=null;if(r.typeOf(b)==="undefined"&&(b="browser"),c&&!r.isEmptyObj(h)){if(r.each(c,function(p,m){if(h.hasOwnProperty(m)){var x=h[m](p);if(typeof x=="string"&&(x=[x]),!S)S=x;else if(!(S=r.arrayIntersect(S,x)))return l.debug.runtime&&l.log("		%s: %s (conflicting mode requested: %s)",m,p,x),S=!1}l.debug.runtime&&l.log("		%s: %s (compatible modes: %s)",m,p,S)}),S)return r.inArray(b,S)!==-1?b:S[0];if(S===!1)return!1}return b},d.getGlobalEventTarget=function(){if(/^moxie\./.test(l.global_event_dispatcher)&&!l.can("access_global_ns")){var h=r.guid("moxie_event_target_");window[h]=function(c,b){f.instance.dispatchEvent(c,b)},l.global_event_dispatcher=h}return l.global_event_dispatcher},d.capTrue=function(){return!0},d.capFalse=function(){return!1},d.capTest=function(h){return function(){return!!h}},d}),u("moxie/runtime/RuntimeClient",["moxie/core/utils/Env","moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/Runtime"],function(l,r,a,f){return function(){var g;a.extend(this,{connectRuntime:function(d){var h=this,c;function b(S){var p,m;if(!S.length){h.trigger("RuntimeError",new r.RuntimeError(r.RuntimeError.NOT_INIT_ERR)),g=null;return}if(p=S.shift().toLowerCase(),m=f.getConstructor(p),!m){l.debug.runtime&&l.log("Constructor for '%s' runtime is not available.",p),b(S);return}if(l.debug.runtime&&(l.log("Trying runtime: %s",p),l.log(d)),g=new m(d),g.bind("Init",function(){g.initialized=!0,l.debug.runtime&&l.log("Runtime '%s' initialized",g.type),setTimeout(function(){g.clients++,h.ruid=g.uid,h.trigger("RuntimeInit",g)},1)}),g.bind("Error",function(){l.debug.runtime&&l.log("Runtime '%s' failed to initialize",g.type),g.destroy(),b(S)}),g.bind("Exception",function(x,v){var I=v.name+"(#"+v.code+")"+(v.message?", from: "+v.message:"");l.debug.runtime&&l.log("Runtime '%s' has thrown an exception: %s",this.type,I),h.trigger("RuntimeError",new r.RuntimeError(r.RuntimeError.EXCEPTION_ERR,I))}),l.debug.runtime&&l.log("	selected mode: %s",g.mode),!g.mode){g.trigger("Error");return}g.init()}if(a.typeOf(d)==="string"?c=d:a.typeOf(d.ruid)==="string"&&(c=d.ruid),c){if(g=f.getRuntime(c),g)return h.ruid=c,g.clients++,g;throw new r.RuntimeError(r.RuntimeError.NOT_INIT_ERR)}b((d.runtime_order||f.order).split(/\s*,\s*/))},disconnectRuntime:function(){g&&--g.clients<=0&&g.destroy(),g=null},getRuntime:function(){return g&&g.uid?g:g=null},exec:function(){return g?g.exec.apply(this,arguments):null},can:function(d){return g?g.can(d):!1}})}}),u("moxie/file/Blob",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient"],function(l,r,a){var f={};function o(g,d){function h(c,b,S){var p,m=f[this.uid];return l.typeOf(m)!=="string"||!m.length?null:(p=new o(null,{type:S,size:b-c}),p.detach(m.substr(c,p.size)),p)}a.call(this),g&&this.connectRuntime(g),d?l.typeOf(d)==="string"&&(d={data:d}):d={},l.extend(this,{uid:d.uid||l.guid("uid_"),ruid:g,size:d.size||0,type:d.type||"",slice:function(c,b,S){return this.isDetached()?h.apply(this,arguments):this.getRuntime().exec.call(this,"Blob","slice",this.getSource(),c,b,S)},getSource:function(){return f[this.uid]?f[this.uid]:null},detach:function(c){if(this.ruid&&(this.getRuntime().exec.call(this,"Blob","destroy"),this.disconnectRuntime(),this.ruid=null),c=c||"",c.substr(0,5)=="data:"){var b=c.indexOf(";base64,");this.type=c.substring(5,b),c=r.atob(c.substring(b+8))}this.size=c.length,f[this.uid]=c},isDetached:function(){return!this.ruid&&l.typeOf(f[this.uid])==="string"},destroy:function(){this.detach(),delete f[this.uid]}}),d.data?this.detach(d.data):f[this.uid]=d}return o}),u("moxie/core/I18n",["moxie/core/utils/Basic"],function(l){var r={};return{addI18n:function(a){return l.extend(r,a)},translate:function(a){return r[a]||a},_:function(a){return this.translate(a)},sprintf:function(a){var f=[].slice.call(arguments,1);return a.replace(/%[a-z]/g,function(){var o=f.shift();return l.typeOf(o)!=="undefined"?o:""})}}}),u("moxie/core/utils/Mime",["moxie/core/utils/Basic","moxie/core/I18n"],function(l,r){var a="application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb xlt xla,application/vnd.ms-powerpoint,ppt pps pot ppa,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe",f={},o={},g=function(p){var m=p.split(/,/),x,v,I;for(x=0;x<m.length;x+=2){for(I=m[x+1].split(/ /),v=0;v<I.length;v++)f[I[v]]=m[x];o[m[x]]=I}},d=function(p,m){var x,v,I,D,k=[];for(v=0;v<p.length;v++)for(x=p[v].extensions.toLowerCase().split(/\s*,\s*/),I=0;I<x.length;I++){if(x[I]==="*")return[];if(D=k[x[I]],m&&/^\w+$/.test(x[I]))k.push("."+x[I]);else if(D&&l.inArray(D,k)===-1)k.push(D);else if(!D)return[]}return k},h=function(p){var m=[];return l.each(p,function(x){if(x=x.toLowerCase(),x==="*")return m=[],!1;var v=x.match(/^(\w+)\/(\*|\w+)$/);v&&(v[2]==="*"?l.each(o,function(I,D){new RegExp("^"+v[1]+"/").test(D)&&[].push.apply(m,o[D])}):o[x]&&[].push.apply(m,o[x]))}),m},c=function(p){var m=[],x=[];return l.typeOf(p)==="string"&&(p=l.trim(p).split(/\s*,\s*/)),x=h(p),m.push({title:r.translate("Files"),extensions:x.length?x.join(","):"*"}),m},b=function(p){var m=p&&p.match(/\.([^.]+)$/);return m?m[1].toLowerCase():""},S=function(p){return f[b(p)]||""};return g(a),{mimes:f,extensions:o,addMimeType:g,extList2mimes:d,mimes2exts:h,mimes2extList:c,getFileExtension:b,getFileMime:S}}),u("moxie/file/FileInput",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Mime","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/I18n","moxie/runtime/Runtime","moxie/runtime/RuntimeClient"],function(l,r,a,f,o,g,d,h,c){var b=["ready","change","cancel","mouseenter","mouseleave","mousedown","mouseup"];function S(p){r.log("Instantiating FileInput...");var m,x,v;if(l.inArray(l.typeOf(p),["string","node"])!==-1&&(p={browse_button:p}),x=f.get(p.browse_button),!x)throw new o.DOMException(o.DOMException.NOT_FOUND_ERR);v={accept:[{title:d.translate("All Files"),extensions:"*"}],multiple:!1,required_caps:!1,container:x.parentNode||document.body},p=l.extend({},v,p),typeof p.required_caps=="string"&&(p.required_caps=h.parseCaps(p.required_caps)),typeof p.accept=="string"&&(p.accept=a.mimes2extList(p.accept)),m=f.get(p.container),m||(m=document.body),f.getStyle(m,"position")==="static"&&(m.style.position="relative"),m=x=null,c.call(this),l.extend(this,{uid:l.guid("uid_"),ruid:null,shimid:null,files:null,init:function(){var I=this;I.bind("RuntimeInit",function(D,k){I.ruid=k.uid,I.shimid=k.shimid,I.bind("Ready",function(){I.trigger("Refresh")},999),I.bind("Refresh",function(){var P,T,A,C,R;A=f.get(p.browse_button),C=f.get(k.shimid),A&&(P=f.getPos(A,f.get(p.container)),T=f.getSize(A),R=parseInt(f.getStyle(A,"z-index"),10)||0,C&&l.extend(C.style,{top:P.y+"px",left:P.x+"px",width:T.w+"px",height:T.h+"px",zIndex:R+1})),C=A=null}),k.exec.call(I,"FileInput","init",p)}),I.connectRuntime(l.extend({},p,{required_caps:{select_file:!0}}))},getOption:function(I){return p[I]},setOption:function(I,D){if(p.hasOwnProperty(I)){var k=p[I];switch(I){case"accept":typeof D=="string"&&(D=a.mimes2extList(D));break;case"container":case"required_caps":throw new o.FileException(o.FileException.NO_MODIFICATION_ALLOWED_ERR)}p[I]=D,this.exec("FileInput","setOption",I,D),this.trigger("OptionChanged",I,D,k)}},disable:function(I){var D=this.getRuntime();D&&this.exec("FileInput","disable",l.typeOf(I)==="undefined"?!0:I)},refresh:function(){this.trigger("Refresh")},destroy:function(){var I=this.getRuntime();I&&(I.exec.call(this,"FileInput","destroy"),this.disconnectRuntime()),l.typeOf(this.files)==="array"&&l.each(this.files,function(D){D.destroy()}),this.files=null,this.unbindAll()}}),this.handleEventProps(b)}return S.prototype=g.instance,S}),u("moxie/file/File",["moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/file/Blob"],function(l,r,a){function f(o,g){g||(g={}),a.apply(this,arguments),this.type||(this.type=r.getFileMime(g.name));var d;if(g.name)d=g.name.replace(/\\/g,"/"),d=d.substr(d.lastIndexOf("/")+1);else if(this.type){var h=this.type.split("/")[0];d=l.guid((h!==""?h:"file")+"_"),r.extensions[this.type]&&(d+="."+r.extensions[this.type][0])}l.extend(this,{name:d||l.guid("file_"),relativePath:"",lastModifiedDate:g.lastModifiedDate||new Date().toLocaleString()})}return f.prototype=a.prototype,f}),u("moxie/file/FileDrop",["moxie/core/I18n","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/utils/Basic","moxie/core/utils/Env","moxie/file/File","moxie/runtime/RuntimeClient","moxie/core/EventTarget","moxie/core/utils/Mime"],function(l,r,a,f,o,g,d,h,c){var b=["ready","dragenter","dragleave","drop","error"];function S(p){o.log("Instantiating FileDrop...");var m=this,x;typeof p=="string"&&(p={drop_zone:p}),x={accept:[{title:l.translate("All Files"),extensions:"*"}],required_caps:{drag_and_drop:!0}},p=typeof p=="object"?f.extend({},x,p):x,p.container=r.get(p.drop_zone)||document.body,r.getStyle(p.container,"position")==="static"&&(p.container.style.position="relative"),typeof p.accept=="string"&&(p.accept=c.mimes2extList(p.accept)),d.call(m),f.extend(m,{uid:f.guid("uid_"),ruid:null,files:null,init:function(){m.bind("RuntimeInit",function(v,I){m.ruid=I.uid,I.exec.call(m,"FileDrop","init",p),m.dispatchEvent("ready")}),m.connectRuntime(p)},destroy:function(){var v=this.getRuntime();v&&(v.exec.call(this,"FileDrop","destroy"),this.disconnectRuntime()),this.files=null,this.unbindAll()}}),this.handleEventProps(b)}return S.prototype=h.instance,S}),u("moxie/file/FileReader",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/core/Exceptions","moxie/core/EventTarget","moxie/file/Blob","moxie/runtime/RuntimeClient"],function(l,r,a,f,o,g){var d=["loadstart","progress","load","abort","error","loadend"];function h(){g.call(this),l.extend(this,{uid:l.guid("uid_"),readyState:h.EMPTY,result:null,error:null,readAsBinaryString:function(b){c.call(this,"readAsBinaryString",b)},readAsDataURL:function(b){c.call(this,"readAsDataURL",b)},readAsText:function(b){c.call(this,"readAsText",b)},abort:function(){this.result=null,l.inArray(this.readyState,[h.EMPTY,h.DONE])===-1&&(this.readyState===h.LOADING&&(this.readyState=h.DONE),this.exec("FileReader","abort"),this.trigger("abort"),this.trigger("loadend"))},destroy:function(){this.abort(),this.exec("FileReader","destroy"),this.disconnectRuntime(),this.unbindAll()}}),this.handleEventProps(d),this.bind("Error",function(b,S){this.readyState=h.DONE,this.error=S},999),this.bind("Load",function(b){this.readyState=h.DONE},999);function c(b,S){if(this.trigger("loadstart"),this.readyState===h.LOADING){this.trigger("error",new a.DOMException(a.DOMException.INVALID_STATE_ERR)),this.trigger("loadend");return}if(!(S instanceof o)){this.trigger("error",new a.DOMException(a.DOMException.NOT_FOUND_ERR)),this.trigger("loadend");return}if(this.result=null,this.readyState=h.LOADING,S.isDetached()){var p=S.getSource();switch(b){case"readAsText":case"readAsBinaryString":this.result=p;break;case"readAsDataURL":this.result="data:"+S.type+";base64,"+r.btoa(p);break}this.readyState=h.DONE,this.trigger("load"),this.trigger("loadend")}else this.connectRuntime(S.ruid),this.exec("FileReader","read",b,S)}}return h.EMPTY=0,h.LOADING=1,h.DONE=2,h.prototype=f.instance,h}),u("moxie/core/utils/Url",["moxie/core/utils/Basic"],function(l){var r=function(o,g){var d=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],h=d.length,c={http:80,https:443},b={},S=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@\/]*):?([^:@\/]*))?@)?(\[[\da-fA-F:]+\]|[^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,p=S.exec(o||""),m,x=/^\/\/\w/.test(o);switch(l.typeOf(g)){case"undefined":g=r(document.location.href,!1);break;case"string":g=r(g,!1);break}for(;h--;)p[h]&&(b[d[h]]=p[h]);if(m=!x&&!b.scheme,(x||m)&&(b.scheme=g.scheme),m){b.host=g.host,b.port=g.port;var v="";/^[^\/]/.test(b.path)&&(v=g.path,/\/[^\/]*\.[^\/]*$/.test(v)?v=v.replace(/\/[^\/]+$/,"/"):v=v.replace(/\/?$/,"/")),b.path=v+(b.path||"")}return b.port||(b.port=c[b.scheme]||80),b.port=parseInt(b.port,10),b.path||(b.path="/"),delete b.source,b},a=function(o){var g={http:80,https:443},d=typeof o=="object"?o:r(o);return d.scheme+"://"+d.host+(d.port!==g[d.scheme]?":"+d.port:"")+d.path+(d.query?d.query:"")},f=function(o){function g(d){return[d.scheme,d.host,d.port].join("/")}return typeof o=="string"&&(o=r(o)),g(r())===g(o)};return{parseUrl:r,resolveUrl:a,hasSameOrigin:f}}),u("moxie/runtime/RuntimeTarget",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(l,r,a){function f(){this.uid=l.guid("uid_"),r.call(this),this.destroy=function(){this.disconnectRuntime(),this.unbindAll()}}return f.prototype=a.instance,f}),u("moxie/file/FileReaderSync",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/utils/Encode"],function(l,r,a){return function(){r.call(this),l.extend(this,{uid:l.guid("uid_"),readAsBinaryString:function(o){return f.call(this,"readAsBinaryString",o)},readAsDataURL:function(o){return f.call(this,"readAsDataURL",o)},readAsText:function(o){return f.call(this,"readAsText",o)}});function f(o,g){if(g.isDetached()){var d=g.getSource();switch(o){case"readAsBinaryString":return d;case"readAsDataURL":return"data:"+g.type+";base64,"+a.btoa(d);case"readAsText":for(var h="",c=0,b=d.length;c<b;c++)h+=String.fromCharCode(d[c]);return h}}else{var S=this.connectRuntime(g.ruid).exec.call(this,"FileReaderSync","read",o,g);return this.disconnectRuntime(),S}}}}),u("moxie/xhr/FormData",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/file/Blob"],function(l,r,a){function f(){var o,g=[];r.extend(this,{append:function(d,h){var c=this,b=r.typeOf(h);h instanceof a?o={name:d,value:h}:b==="array"?(d+="[]",r.each(h,function(S){c.append(d,S)})):b==="object"?r.each(h,function(S,p){c.append(d+"["+p+"]",S)}):b==="null"||b==="undefined"||b==="number"&&isNaN(h)?c.append(d,"false"):g.push({name:d,value:h.toString()})},hasBlob:function(){return!!this.getBlob()},getBlob:function(){return o&&o.value||null},getBlobName:function(){return o&&o.name||null},each:function(d){r.each(g,function(h){d(h.value,h.name)}),o&&d(o.value,o.name)},destroy:function(){o=null,g=[]}})}return f}),u("moxie/xhr/XMLHttpRequest",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/utils/Encode","moxie/core/utils/Url","moxie/runtime/Runtime","moxie/runtime/RuntimeTarget","moxie/file/Blob","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/core/utils/Env","moxie/core/utils/Mime"],function(l,r,a,f,o,g,d,h,c,b,S,p){var m={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Reserved",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",510:"Not Extended"};function x(){this.uid=l.guid("uid_")}x.prototype=a.instance;var v=["loadstart","progress","abort","error","load","timeout","loadend"];function I(){var D=this,k={timeout:0,readyState:I.UNSENT,withCredentials:!1,status:0,statusText:"",responseType:"",responseXML:null,responseText:null,response:null},P=!0,T,A,C={},R,M,O=null,B=null,G=!1,$=!1,te=!1,V=!1,X=!1,ie=!1,ne={},fe,xe="",be;l.extend(this,k,{uid:l.guid("uid_"),upload:new x,open:function(H,z,W,Z,J){var Y;if(!H||!z)throw new r.DOMException(r.DOMException.SYNTAX_ERR);if(/[\u0100-\uffff]/.test(H)||f.utf8_encode(H)!==H)throw new r.DOMException(r.DOMException.SYNTAX_ERR);if(~l.inArray(H.toUpperCase(),["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"])&&(A=H.toUpperCase()),~l.inArray(A,["CONNECT","TRACE","TRACK"]))throw new r.DOMException(r.DOMException.SECURITY_ERR);if(z=f.utf8_encode(z),Y=o.parseUrl(z),ie=o.hasSameOrigin(Y),T=o.resolveUrl(z),(Z||J)&&!ie)throw new r.DOMException(r.DOMException.INVALID_ACCESS_ERR);if(R=Z||Y.user,M=J||Y.pass,P=W||!0,P===!1&&(oe("timeout")||oe("withCredentials")||oe("responseType")!==""))throw new r.DOMException(r.DOMException.INVALID_ACCESS_ERR);G=!P,$=!1,C={},Te.call(this),oe("readyState",I.OPENED),this.dispatchEvent("readystatechange")},setRequestHeader:function(H,z){var W=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];if(oe("readyState")!==I.OPENED||$)throw new r.DOMException(r.DOMException.INVALID_STATE_ERR);if(/[\u0100-\uffff]/.test(H)||f.utf8_encode(H)!==H)throw new r.DOMException(r.DOMException.SYNTAX_ERR);return H=l.trim(H).toLowerCase(),~l.inArray(H,W)||/^(proxy\-|sec\-)/.test(H)?!1:(C[H]?C[H]+=", "+z:C[H]=z,!0)},hasRequestHeader:function(H){return H&&C[H.toLowerCase()]||!1},getAllResponseHeaders:function(){return xe||""},getResponseHeader:function(H){return H=H.toLowerCase(),X||~l.inArray(H,["set-cookie","set-cookie2"])?null:xe&&xe!==""&&(be||(be={},l.each(xe.split(/\r\n/),function(z){var W=z.split(/:\s+/);W.length===2&&(W[0]=l.trim(W[0]),be[W[0].toLowerCase()]={header:W[0],value:l.trim(W[1])})})),be.hasOwnProperty(H))?be[H].header+": "+be[H].value:null},overrideMimeType:function(H){var z;if(~l.inArray(oe("readyState"),[I.LOADING,I.DONE]))throw new r.DOMException(r.DOMException.INVALID_STATE_ERR);if(H=l.trim(H.toLowerCase()),/;/.test(H)&&(z=H.match(/^([^;]+)(?:;\scharset\=)?(.*)$/))&&(H=z[1],z[2]&&z[2]),!p.mimes[H])throw new r.DOMException(r.DOMException.SYNTAX_ERR)},send:function(H,z){if(l.typeOf(z)==="string"?ne={ruid:z}:z?ne=z:ne={},this.readyState!==I.OPENED||$)throw new r.DOMException(r.DOMException.INVALID_STATE_ERR);if(H instanceof h)ne.ruid=H.ruid,B=H.type||"application/octet-stream";else if(H instanceof b){if(H.hasBlob()){var W=H.getBlob();ne.ruid=W.ruid,B=W.type||"application/octet-stream"}}else typeof H=="string"&&(O="UTF-8",B="text/plain;charset=UTF-8",H=f.utf8_encode(H));this.withCredentials||(this.withCredentials=ne.required_caps&&ne.required_caps.send_browser_cookies&&!ie),te=!G&&this.upload.hasEventListener(),X=!1,V=!H,G||($=!0),ge.call(this,H)},abort:function(){if(X=!0,G=!1,~l.inArray(oe("readyState"),[I.UNSENT,I.OPENED,I.DONE]))oe("readyState",I.UNSENT);else{if(oe("readyState",I.DONE),$=!1,fe)fe.getRuntime().exec.call(fe,"XMLHttpRequest","abort",V);else throw new r.DOMException(r.DOMException.INVALID_STATE_ERR);V=!0}},destroy:function(){fe&&(l.typeOf(fe.destroy)==="function"&&fe.destroy(),fe=null),this.unbindAll(),this.upload&&(this.upload.unbindAll(),this.upload=null)}}),this.handleEventProps(v.concat(["readystatechange"])),this.upload.handleEventProps(v);function oe(H,z){if(k.hasOwnProperty(H)){if(arguments.length===1)return S.can("define_property")?k[H]:D[H];S.can("define_property")?k[H]=z:D[H]=z}}function ge(H){var z=this;new Date().getTime(),fe=new d;function W(){fe&&(fe.destroy(),fe=null),z.dispatchEvent("loadend"),z=null}function Z(J){fe.bind("LoadStart",function(Y){oe("readyState",I.LOADING),z.dispatchEvent("readystatechange"),z.dispatchEvent(Y),te&&z.upload.dispatchEvent(Y)}),fe.bind("Progress",function(Y){oe("readyState")!==I.LOADING&&(oe("readyState",I.LOADING),z.dispatchEvent("readystatechange")),z.dispatchEvent(Y)}),fe.bind("UploadProgress",function(Y){te&&z.upload.dispatchEvent({type:"progress",lengthComputable:!1,total:Y.total,loaded:Y.loaded})}),fe.bind("Load",function(Y){oe("readyState",I.DONE),oe("status",Number(J.exec.call(fe,"XMLHttpRequest","getStatus")||0)),oe("statusText",m[oe("status")]||""),oe("response",J.exec.call(fe,"XMLHttpRequest","getResponse",oe("responseType"))),~l.inArray(oe("responseType"),["text",""])?oe("responseText",oe("response")):oe("responseType")==="document"&&oe("responseXML",oe("response")),xe=J.exec.call(fe,"XMLHttpRequest","getAllResponseHeaders"),z.dispatchEvent("readystatechange"),oe("status")>0?(te&&z.upload.dispatchEvent(Y),z.dispatchEvent(Y)):(X=!0,z.dispatchEvent("error")),W()}),fe.bind("Abort",function(Y){z.dispatchEvent(Y),W()}),fe.bind("Error",function(Y){X=!0,oe("readyState",I.DONE),z.dispatchEvent("readystatechange"),V=!0,z.dispatchEvent(Y),W()}),J.exec.call(fe,"XMLHttpRequest","send",{url:T,method:A,async:P,user:R,password:M,headers:C,mimeType:B,encoding:O,responseType:z.responseType,withCredentials:z.withCredentials,options:ne},H)}typeof ne.required_caps=="string"&&(ne.required_caps=g.parseCaps(ne.required_caps)),ne.required_caps=l.extend({},ne.required_caps,{return_response_type:z.responseType}),H instanceof b&&(ne.required_caps.send_multipart=!0),l.isEmptyObj(C)||(ne.required_caps.send_custom_headers=!0),ie||(ne.required_caps.do_cors=!0),ne.ruid?Z(fe.connectRuntime(ne)):(fe.bind("RuntimeInit",function(J,Y){Z(Y)}),fe.bind("RuntimeError",function(J,Y){z.dispatchEvent("RuntimeError",Y)}),fe.connectRuntime(ne))}function Te(){oe("responseText",""),oe("responseXML",null),oe("response",null),oe("status",0),oe("statusText","")}}return I.UNSENT=0,I.OPENED=1,I.HEADERS_RECEIVED=2,I.LOADING=3,I.DONE=4,I.prototype=a.instance,I}),u("moxie/runtime/Transporter",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(l,r,a,f){function o(){var g,d,h,c,b,S;a.call(this),l.extend(this,{uid:l.guid("uid_"),state:o.IDLE,result:null,transport:function(v,I,D){var k=this;if(D=l.extend({chunk_size:204798},D),(g=D.chunk_size%3)&&(D.chunk_size+=3-g),S=D.chunk_size,p.call(this),h=v,c=v.length,l.typeOf(D)==="string"||D.ruid)m.call(k,I,this.connectRuntime(D));else{var P=function(T,A){k.unbind("RuntimeInit",P),m.call(k,I,A)};this.bind("RuntimeInit",P),this.connectRuntime(D)}},abort:function(){var v=this;v.state=o.IDLE,d&&(d.exec.call(v,"Transporter","clear"),v.trigger("TransportingAborted")),p.call(v)},destroy:function(){this.unbindAll(),d=null,this.disconnectRuntime(),p.call(this)}});function p(){c=b=0,h=this.result=null}function m(v,I){var D=this;d=I,D.bind("TransportingProgress",function(k){b=k.loaded,b<c&&l.inArray(D.state,[o.IDLE,o.DONE])===-1&&x.call(D)},999),D.bind("TransportingComplete",function(){b=c,D.state=o.DONE,h=null,D.result=d.exec.call(D,"Transporter","getAsBlob",v||"")},999),D.state=o.BUSY,D.trigger("TransportingStarted"),x.call(D)}function x(){var v=this,I,D=c-b;S>D&&(S=D),I=r.btoa(h.substr(b,S)),d.exec.call(v,"Transporter","receive",I,c)}}return o.IDLE=0,o.BUSY=1,o.DONE=2,o.prototype=f.instance,o}),u("moxie/image/Image",["moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/file/FileReaderSync","moxie/xhr/XMLHttpRequest","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/runtime/Transporter","moxie/core/utils/Env","moxie/core/EventTarget","moxie/file/Blob","moxie/file/File","moxie/core/utils/Encode"],function(l,r,a,f,o,g,d,h,c,b,S,p,m){var x=["progress","load","error","resize","embedded"];function v(){d.call(this),l.extend(this,{uid:l.guid("uid_"),ruid:null,name:"",size:0,width:0,height:0,type:"",meta:{},clone:function(){this.load.apply(this,arguments)},load:function(){D.apply(this,arguments)},resize:function(A){var C=this,R,M,O={x:0,y:0,width:C.width,height:C.height},B=l.extendIf({width:C.width,height:C.height,type:C.type||"image/jpeg",quality:90,crop:!1,fit:!0,preserveHeaders:!0,resample:"default",multipass:!0},A);try{if(!C.size)throw new a.DOMException(a.DOMException.INVALID_STATE_ERR);if(C.width>v.MAX_RESIZE_WIDTH||C.height>v.MAX_RESIZE_HEIGHT)throw new a.ImageError(a.ImageError.MAX_RESOLUTION_ERR);if(R=C.meta&&C.meta.tiff&&C.meta.tiff.Orientation||1,l.inArray(R,[5,6,7,8])!==-1){var G=B.width;B.width=B.height,B.height=G}if(B.crop){switch(M=Math.max(B.width/C.width,B.height/C.height),A.fit?(O.width=Math.min(Math.ceil(B.width/M),C.width),O.height=Math.min(Math.ceil(B.height/M),C.height),M=B.width/O.width):(O.width=Math.min(B.width,C.width),O.height=Math.min(B.height,C.height),M=1),typeof B.crop=="boolean"&&(B.crop="cc"),B.crop.toLowerCase().replace(/_/,"-")){case"rb":case"right-bottom":O.x=C.width-O.width,O.y=C.height-O.height;break;case"cb":case"center-bottom":O.x=Math.floor((C.width-O.width)/2),O.y=C.height-O.height;break;case"lb":case"left-bottom":O.x=0,O.y=C.height-O.height;break;case"lt":case"left-top":O.x=0,O.y=0;break;case"ct":case"center-top":O.x=Math.floor((C.width-O.width)/2),O.y=0;break;case"rt":case"right-top":O.x=C.width-O.width,O.y=0;break;case"rc":case"right-center":case"right-middle":O.x=C.width-O.width,O.y=Math.floor((C.height-O.height)/2);break;case"lc":case"left-center":case"left-middle":O.x=0,O.y=Math.floor((C.height-O.height)/2);break;case"cc":case"center-center":case"center-middle":default:O.x=Math.floor((C.width-O.width)/2),O.y=Math.floor((C.height-O.height)/2)}O.x=Math.max(O.x,0),O.y=Math.max(O.y,0)}else M=Math.min(B.width/C.width,B.height/C.height),M>1&&!B.fit&&(M=1);this.exec("Image","resize",O,M,B)}catch($){C.trigger("error",$.code)}},downsize:function(A){var C={width:this.width,height:this.height,type:this.type||"image/jpeg",quality:90,crop:!1,fit:!1,preserveHeaders:!0,resample:"default"},R;typeof A=="object"?R=l.extend(C,A):R=l.extend(C,{width:arguments[0],height:arguments[1],crop:arguments[2],preserveHeaders:arguments[3]}),this.resize(R)},crop:function(A,C,R){this.downsize(A,C,!0,R)},getAsCanvas:function(){if(!c.can("create_canvas"))throw new a.RuntimeError(a.RuntimeError.NOT_SUPPORTED_ERR);return this.exec("Image","getAsCanvas")},getAsBlob:function(A,C){if(!this.size)throw new a.DOMException(a.DOMException.INVALID_STATE_ERR);return this.exec("Image","getAsBlob",A||"image/jpeg",C||90)},getAsDataURL:function(A,C){if(!this.size)throw new a.DOMException(a.DOMException.INVALID_STATE_ERR);return this.exec("Image","getAsDataURL",A||"image/jpeg",C||90)},getAsBinaryString:function(A,C){var R=this.getAsDataURL(A,C);return m.atob(R.substring(R.indexOf("base64,")+7))},embed:function(A,C){var R=this,M,O=l.extend({width:this.width,height:this.height,type:this.type||"image/jpeg",quality:90,fit:!0,resample:"nearest"},C);function B($,te){var V=this;if(c.can("create_canvas")){var X=V.getAsCanvas();if(X){A.appendChild(X),X=null,V.destroy(),R.trigger("embedded");return}}var ie=V.getAsDataURL($,te);if(!ie)throw new a.ImageError(a.ImageError.WRONG_FORMAT);if(c.can("use_data_uri_of",ie.length))A.innerHTML='<img src="'+ie+'" width="'+V.width+'" height="'+V.height+'" alt="" />',V.destroy(),R.trigger("embedded");else{var ne=new h;ne.bind("TransportingComplete",function(){M=R.connectRuntime(this.result.ruid),R.bind("Embedded",function(){l.extend(M.getShimContainer().style,{top:"0px",left:"0px",width:V.width+"px",height:V.height+"px"}),M=null},999),M.exec.call(R,"ImageView","display",this.result.uid,width,height),V.destroy()}),ne.transport(m.atob(ie.substring(ie.indexOf("base64,")+7)),$,{required_caps:{display_media:!0},runtime_order:"flash,silverlight",container:A})}}try{if(!(A=r.get(A)))throw new a.DOMException(a.DOMException.INVALID_NODE_TYPE_ERR);if(!this.size)throw new a.DOMException(a.DOMException.INVALID_STATE_ERR);this.width>v.MAX_RESIZE_WIDTH||this.height>v.MAX_RESIZE_HEIGHT;var G=new v;return G.bind("Resize",function(){B.call(this,O.type,O.quality)}),G.bind("Load",function(){this.downsize(O)}),this.meta.thumb&&this.meta.thumb.width>=O.width&&this.meta.thumb.height>=O.height?G.load(this.meta.thumb.data):G.clone(this,!1),G}catch($){this.trigger("error",$.code)}},destroy:function(){this.ruid&&(this.getRuntime().exec.call(this,"Image","destroy"),this.disconnectRuntime()),this.meta&&this.meta.thumb&&this.meta.thumb.data.destroy(),this.unbindAll()}}),this.handleEventProps(x),this.bind("Load Resize",function(){return I.call(this)},999);function I(A){try{return A||(A=this.exec("Image","getInfo")),this.size=A.size,this.width=A.width,this.height=A.height,this.type=A.type,this.meta=A.meta,this.name===""&&(this.name=A.name),!0}catch(C){return this.trigger("error",C.code),!1}}function D(A){var C=l.typeOf(A);try{if(A instanceof v){if(!A.size)throw new a.DOMException(a.DOMException.INVALID_STATE_ERR);k.apply(this,arguments)}else if(A instanceof S){if(!~l.inArray(A.type,["image/jpeg","image/png"]))throw new a.ImageError(a.ImageError.WRONG_FORMAT);P.apply(this,arguments)}else if(l.inArray(C,["blob","file"])!==-1)D.call(this,new p(null,A),arguments[1]);else if(C==="string")A.substr(0,5)==="data:"?D.call(this,new S(null,{data:A}),arguments[1]):T.apply(this,arguments);else if(C==="node"&&A.nodeName.toLowerCase()==="img")D.call(this,A.src,arguments[1]);else throw new a.DOMException(a.DOMException.TYPE_MISMATCH_ERR)}catch(R){this.trigger("error",R.code)}}function k(A,C){var R=this.connectRuntime(A.ruid);this.ruid=R.uid,R.exec.call(this,"Image","loadFromImage",A,l.typeOf(C)==="undefined"?!0:C)}function P(A,C){var R=this;R.name=A.name||"";function M(O){R.ruid=O.uid,O.exec.call(R,"Image","loadFromBlob",A)}A.isDetached()?(this.bind("RuntimeInit",function(O,B){M(B)}),C&&typeof C.required_caps=="string"&&(C.required_caps=g.parseCaps(C.required_caps)),this.connectRuntime(l.extend({required_caps:{access_image_binary:!0,resize_image:!0}},C))):M(this.connectRuntime(A.ruid))}function T(A,C){var R=this,M;M=new o,M.open("get",A),M.responseType="blob",M.onprogress=function(O){R.trigger(O)},M.onload=function(){P.call(R,M.response,!0)},M.onerror=function(O){R.trigger(O)},M.onloadend=function(){M.destroy()},M.bind("RuntimeError",function(O,B){R.trigger("RuntimeError",B)}),M.send(null,C)}}return v.MAX_RESIZE_WIDTH=8192,v.MAX_RESIZE_HEIGHT=8192,v.prototype=b.instance,v}),u("moxie/runtime/html5/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(l,r,a,f){var o="html5",g={};function d(h){var c=this,b=a.capTest,S=a.capTrue,p=l.extend({access_binary:b(window.FileReader||window.File&&window.File.getAsDataURL),access_image_binary:function(){return c.can("access_binary")&&!!g.Image},display_media:b((f.can("create_canvas")||f.can("use_data_uri_over32kb"))&&_("moxie/image/Image")),do_cors:b(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),drag_and_drop:b(function(){var m=document.createElement("div");return("draggable"in m||"ondragstart"in m&&"ondrop"in m)&&(f.browser!=="IE"||f.verComp(f.version,9,">"))}()),filter_by_extension:b(function(){return!(f.browser==="Chrome"&&f.verComp(f.version,28,"<")||f.browser==="IE"&&f.verComp(f.version,10,"<")||f.browser==="Safari"&&f.verComp(f.version,7,"<")||f.browser==="Firefox"&&f.verComp(f.version,37,"<"))}()),return_response_headers:S,return_response_type:function(m){return m==="json"&&window.JSON?!0:f.can("return_response_type",m)},return_status_code:S,report_upload_progress:b(window.XMLHttpRequest&&new XMLHttpRequest().upload),resize_image:function(){return c.can("access_binary")&&f.can("create_canvas")},select_file:function(){return f.can("use_fileinput")&&window.File},select_folder:function(){return c.can("select_file")&&(f.browser==="Chrome"&&f.verComp(f.version,21,">=")||f.browser==="Firefox"&&f.verComp(f.version,42,">="))},select_multiple:function(){return c.can("select_file")&&!(f.browser==="Safari"&&f.os==="Windows")&&!(f.os==="iOS"&&f.verComp(f.osVersion,"7.0.0",">")&&f.verComp(f.osVersion,"8.0.0","<"))},send_binary_string:b(window.XMLHttpRequest&&(new XMLHttpRequest().sendAsBinary||window.Uint8Array&&window.ArrayBuffer)),send_custom_headers:b(window.XMLHttpRequest),send_multipart:function(){return!!(window.XMLHttpRequest&&new XMLHttpRequest().upload&&window.FormData)||c.can("send_binary_string")},slice_blob:b(window.File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),stream_upload:function(){return c.can("slice_blob")&&c.can("send_multipart")},summon_file_dialog:function(){return c.can("select_file")&&!(f.browser==="Firefox"&&f.verComp(f.version,4,"<")||f.browser==="Opera"&&f.verComp(f.version,12,"<")||f.browser==="IE"&&f.verComp(f.version,10,"<"))},upload_filesize:S,use_http_method:S},arguments[2]);a.call(this,h,arguments[1]||o,p),l.extend(this,{init:function(){this.trigger("Init")},destroy:function(m){return function(){m.call(c),m=c=null}}(this.destroy)}),l.extend(this.getShim(),g)}return a.addConstructor(o,d),g}),u("moxie/runtime/html5/file/Blob",["moxie/runtime/html5/Runtime","moxie/file/Blob"],function(l,r){function a(){function f(o,g,d){var h;if(window.File.prototype.slice)try{return o.slice(),o.slice(g,d)}catch{return o.slice(g,d-g)}else return(h=window.File.prototype.webkitSlice||window.File.prototype.mozSlice)?h.call(o,g,d):null}this.slice=function(){return new r(this.getRuntime().uid,f.apply(this,arguments))},this.destroy=function(){this.getRuntime().getShim().removeInstance(this.uid)}}return l.Blob=a}),u("moxie/core/utils/Events",["moxie/core/utils/Basic"],function(l){var r={},a="moxie_"+l.guid();function f(){this.returnValue=!1}function o(){this.cancelBubble=!0}var g=function(c,b,S,p){var m,x;b=b.toLowerCase(),c.addEventListener?(m=S,c.addEventListener(b,m,!1)):c.attachEvent&&(m=function(){var v=window.event;v.target||(v.target=v.srcElement),v.preventDefault=f,v.stopPropagation=o,S(v)},c.attachEvent("on"+b,m)),c[a]||(c[a]=l.guid()),r.hasOwnProperty(c[a])||(r[c[a]]={}),x=r[c[a]],x.hasOwnProperty(b)||(x[b]=[]),x[b].push({func:m,orig:S,key:p})},d=function(c,b,S){var p,m;if(b=b.toLowerCase(),c[a]&&r[c[a]]&&r[c[a]][b])p=r[c[a]][b];else return;for(var x=p.length-1;x>=0&&!((p[x].orig===S||p[x].key===S)&&(c.removeEventListener?c.removeEventListener(b,p[x].func,!1):c.detachEvent&&c.detachEvent("on"+b,p[x].func),p[x].orig=null,p[x].func=null,p.splice(x,1),S!==m));x--);if(p.length||delete r[c[a]][b],l.isEmptyObj(r[c[a]])){delete r[c[a]];try{delete c[a]}catch{c[a]=m}}},h=function(c,b){!c||!c[a]||l.each(r[c[a]],function(S,p){d(c,p,b)})};return{addEvent:g,removeEvent:d,removeAllEvents:h}}),u("moxie/runtime/html5/file/FileInput",["moxie/runtime/html5/Runtime","moxie/file/File","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime","moxie/core/utils/Env"],function(l,r,a,f,o,g,d){function h(){var c,b;a.extend(this,{init:function(S){var p=this,m=p.getRuntime(),x,v,I,D,k,P;c=S,I=g.extList2mimes(c.accept,m.can("filter_by_extension")),v=m.getShimContainer(),v.innerHTML='<input id="'+m.uid+'" type="file" style="font-size:999px;opacity:0;"'+(c.multiple&&m.can("select_multiple")?"multiple":"")+(c.directory&&m.can("select_folder")?"webkitdirectory directory":"")+(I?' accept="'+I.join(",")+'"':"")+" />",x=f.get(m.uid),a.extend(x.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),D=f.get(c.browse_button),b=f.getStyle(D,"z-index")||"auto",m.can("summon_file_dialog")&&(f.getStyle(D,"position")==="static"&&(D.style.position="relative"),o.addEvent(D,"click",function(T){var A=f.get(m.uid);A&&!A.disabled&&A.click(),T.preventDefault()},p.uid),p.bind("Refresh",function(){k=parseInt(b,10)||1,f.get(c.browse_button).style.zIndex=k,this.getRuntime().getShimContainer().style.zIndex=k-1})),P=m.can("summon_file_dialog")?D:v,o.addEvent(P,"mouseover",function(){p.trigger("mouseenter")},p.uid),o.addEvent(P,"mouseout",function(){p.trigger("mouseleave")},p.uid),o.addEvent(P,"mousedown",function(){p.trigger("mousedown")},p.uid),o.addEvent(f.get(c.container),"mouseup",function(){p.trigger("mouseup")},p.uid),(m.can("summon_file_dialog")?x:D).setAttribute("tabindex",-1),x.onchange=function T(){if(p.files=[],a.each(this.files,function(C){var R="";if(c.directory&&C.name==".")return!0;C.webkitRelativePath&&(R="/"+C.webkitRelativePath.replace(/^\//,"")),C=new r(m.uid,C),C.relativePath=R,p.files.push(C)}),d.browser!=="IE"&&d.browser!=="IEMobile")this.value="";else{var A=this.cloneNode(!0);this.parentNode.replaceChild(A,this),A.onchange=T}p.files.length&&p.trigger("change")},p.trigger({type:"ready",async:!0}),v=null},setOption:function(S,p){var m=this.getRuntime(),x=f.get(m.uid);switch(S){case"accept":if(p){var v=p.mimes||g.extList2mimes(p,m.can("filter_by_extension"));x.setAttribute("accept",v.join(","))}else x.removeAttribute("accept");break;case"directory":p&&m.can("select_folder")?(x.setAttribute("directory",""),x.setAttribute("webkitdirectory","")):(x.removeAttribute("directory"),x.removeAttribute("webkitdirectory"));break;case"multiple":p&&m.can("select_multiple")?x.setAttribute("multiple",""):x.removeAttribute("multiple")}},disable:function(S){var p=this.getRuntime(),m;(m=f.get(p.uid))&&(m.disabled=!!S)},destroy:function(){var S=this.getRuntime(),p=S.getShim(),m=S.getShimContainer(),x=c&&f.get(c.container),v=c&&f.get(c.browse_button);x&&o.removeAllEvents(x,this.uid),v&&(o.removeAllEvents(v,this.uid),v.style.zIndex=b),m&&(o.removeAllEvents(m,this.uid),m.innerHTML=""),p.removeInstance(this.uid),c=m=x=v=p=null}})}return l.FileInput=h}),u("moxie/runtime/html5/file/FileDrop",["moxie/runtime/html5/Runtime","moxie/file/File","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime"],function(l,r,a,f,o,g){function d(){var h=[],c=[],b,S;a.extend(this,{init:function(T){var A=this,C;b=T,S=A.ruid,c=x(b.accept),C=b.container,o.addEvent(C,"dragover",function(R){p(R)&&(R.preventDefault(),R.dataTransfer.dropEffect="copy")},A.uid),o.addEvent(C,"drop",function(R){p(R)&&(R.preventDefault(),h=[],R.dataTransfer.items&&R.dataTransfer.items[0].webkitGetAsEntry?I(R.dataTransfer.items,function(){A.files=h,A.trigger("drop")}):(a.each(R.dataTransfer.files,function(M){m(M)}),A.files=h,A.trigger("drop")))},A.uid),o.addEvent(C,"dragenter",function(R){A.trigger("dragenter")},A.uid),o.addEvent(C,"dragleave",function(R){A.trigger("dragleave")},A.uid)},destroy:function(){o.removeAllEvents(b&&f.get(b.container),this.uid),S=h=c=b=null,this.getRuntime().getShim().removeInstance(this.uid)}});function p(T){if(!T.dataTransfer||!T.dataTransfer.types)return!1;var A=a.toArray(T.dataTransfer.types||[]);return a.inArray("Files",A)!==-1||a.inArray("public.file-url",A)!==-1||a.inArray("application/x-moz-file",A)!==-1}function m(T,A){if(v(T)){var C=new r(S,T);C.relativePath=A||"",h.push(C)}}function x(T){for(var A=[],C=0;C<T.length;C++)[].push.apply(A,T[C].extensions.split(/\s*,\s*/));return a.inArray("*",A)===-1?A:[]}function v(T){if(!c.length)return!0;var A=g.getFileExtension(T.name);return!A||a.inArray(A,c)!==-1}function I(T,A){var C=[];a.each(T,function(R){var M=R.webkitGetAsEntry();M&&(M.isFile?m(R.getAsFile(),M.fullPath):C.push(M))}),C.length?D(C,A):A()}function D(T,A){var C=[];a.each(T,function(R){C.push(function(M){k(R,M)})}),a.inSeries(C,function(){A()})}function k(T,A){T.isFile?T.file(function(C){m(C,T.fullPath),A()},function(){A()}):T.isDirectory?P(T,A):A()}function P(T,A){var C=[],R=T.createReader();function M(O){R.readEntries(function(B){B.length?([].push.apply(C,B),M(O)):O()},O)}M(function(){D(C,A)})}}return l.FileDrop=d}),u("moxie/runtime/html5/file/FileReader",["moxie/runtime/html5/Runtime","moxie/core/utils/Encode","moxie/core/utils/Basic"],function(l,r,a){function f(){var o,g=!1;a.extend(this,{read:function(h,c){var b=this;b.result="",o=new window.FileReader,o.addEventListener("progress",function(S){b.trigger(S)}),o.addEventListener("load",function(S){b.result=g?d(o.result):o.result,b.trigger(S)}),o.addEventListener("error",function(S){b.trigger(S,o.error)}),o.addEventListener("loadend",function(S){o=null,b.trigger(S)}),a.typeOf(o[h])==="function"?(g=!1,o[h](c.getSource())):h==="readAsBinaryString"&&(g=!0,o.readAsDataURL(c.getSource()))},abort:function(){o&&o.abort()},destroy:function(){o=null,this.getRuntime().getShim().removeInstance(this.uid)}});function d(h){return r.atob(h.substring(h.indexOf("base64,")+7))}}return l.FileReader=f}),u("moxie/runtime/html5/xhr/XMLHttpRequest",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/core/utils/Url","moxie/file/File","moxie/file/Blob","moxie/xhr/FormData","moxie/core/Exceptions","moxie/core/utils/Env"],function(l,r,a,f,o,g,d,h,c){function b(){var S=this,p,m;r.extend(this,{send:function(k,P){var T=this,A=c.browser==="Mozilla"&&c.verComp(c.version,4,">=")&&c.verComp(c.version,7,"<"),C=c.browser==="Android Browser",R=!1;if(m=k.url.replace(/^.+?\/([\w\-\.]+)$/,"$1").toLowerCase(),p=v(),p.open(k.method,k.url,k.async,k.user,k.password),P instanceof g)P.isDetached()&&(R=!0),P=P.getSource();else if(P instanceof d){if(P.hasBlob()){if(P.getBlob().isDetached())P=D.call(T,P),R=!0;else if((A||C)&&r.typeOf(P.getBlob().getSource())==="blob"&&window.FileReader){x.call(T,k,P);return}}if(P instanceof d){var M=new window.FormData;P.each(function(O,B){O instanceof g?M.append(B,O.getSource()):M.append(B,O)}),P=M}}p.upload?(k.withCredentials&&(p.withCredentials=!0),p.addEventListener("load",function(O){T.trigger(O)}),p.addEventListener("error",function(O){T.trigger(O)}),p.addEventListener("progress",function(O){T.trigger(O)}),p.upload.addEventListener("progress",function(O){T.trigger({type:"UploadProgress",loaded:O.loaded,total:O.total})})):p.onreadystatechange=function(){switch(p.readyState){case 1:break;case 2:break;case 3:var B,G;try{f.hasSameOrigin(k.url)&&(B=p.getResponseHeader("Content-Length")||0),p.responseText&&(G=p.responseText.length)}catch{B=G=0}T.trigger({type:"progress",lengthComputable:!!B,total:parseInt(B,10),loaded:G});break;case 4:p.onreadystatechange=function(){};try{if(p.status>=200&&p.status<400){T.trigger("load");break}}catch{}T.trigger("error");break}},r.isEmptyObj(k.headers)||r.each(k.headers,function(O,B){p.setRequestHeader(B,O)}),k.responseType!==""&&"responseType"in p&&(k.responseType==="json"&&!c.can("return_response_type","json")?p.responseType="text":p.responseType=k.responseType),R?p.sendAsBinary?p.sendAsBinary(P):function(){for(var O=new Uint8Array(P.length),B=0;B<P.length;B++)O[B]=P.charCodeAt(B)&255;p.send(O.buffer)}():p.send(P),T.trigger("loadstart")},getStatus:function(){try{if(p)return p.status}catch{}return 0},getResponse:function(k){var P=this.getRuntime();try{switch(k){case"blob":var T=new o(P.uid,p.response),A=p.getResponseHeader("Content-Disposition");if(A){var C=A.match(/filename=([\'\"'])([^\1]+)\1/);C&&(m=C[2])}return T.name=m,T.type||(T.type=a.getFileMime(m)),T;case"json":return c.can("return_response_type","json")?p.response:p.status===200&&window.JSON?JSON.parse(p.responseText):null;case"document":return I(p);default:return p.responseText!==""?p.responseText:null}}catch{return null}},getAllResponseHeaders:function(){try{return p.getAllResponseHeaders()}catch{}return""},abort:function(){p&&p.abort()},destroy:function(){S=m=null,this.getRuntime().getShim().removeInstance(this.uid)}});function x(k,P){var T=this,A,C;A=P.getBlob().getSource(),C=new window.FileReader,C.onload=function(){P.append(P.getBlobName(),new g(null,{type:A.type,data:C.result})),S.send.call(T,k,P)},C.readAsBinaryString(A)}function v(){return window.XMLHttpRequest&&!(c.browser==="IE"&&c.verComp(c.version,8,"<"))?new window.XMLHttpRequest:function(){for(var k=["Msxml2.XMLHTTP.6.0","Microsoft.XMLHTTP"],P=0;P<k.length;P++)try{return new ActiveXObject(k[P])}catch{}}()}function I(k){var P=k.responseXML,T=k.responseText;return c.browser==="IE"&&T&&P&&!P.documentElement&&/[^\/]+\/[^\+]+\+xml/.test(k.getResponseHeader("Content-Type"))&&(P=new window.ActiveXObject("Microsoft.XMLDOM"),P.async=!1,P.validateOnParse=!1,P.loadXML(T)),P&&(c.browser==="IE"&&P.parseError!==0||!P.documentElement||P.documentElement.tagName==="parsererror")?null:P}function D(k){var P="----moxieboundary"+new Date().getTime(),T="--",A=`\r
`,C="",R=this.getRuntime();if(!R.can("send_binary_string"))throw new h.RuntimeError(h.RuntimeError.NOT_SUPPORTED_ERR);return p.setRequestHeader("Content-Type","multipart/form-data; boundary="+P),k.each(function(M,O){M instanceof g?C+=T+P+A+'Content-Disposition: form-data; name="'+O+'"; filename="'+unescape(encodeURIComponent(M.name||"blob"))+'"'+A+"Content-Type: "+(M.type||"application/octet-stream")+A+A+M.getSource()+A:C+=T+P+A+'Content-Disposition: form-data; name="'+O+'"'+A+A+unescape(encodeURIComponent(M))+A}),C+=T+P+T+A,C}}return l.XMLHttpRequest=b}),u("moxie/runtime/html5/utils/BinaryReader",["moxie/core/utils/Basic"],function(l){function r(o){o instanceof ArrayBuffer?a.apply(this,arguments):f.apply(this,arguments)}l.extend(r.prototype,{littleEndian:!1,read:function(o,g){var d,h,c;if(o+g>this.length())throw new Error("You are trying to read outside the source boundaries.");for(h=this.littleEndian?0:-8*(g-1),c=0,d=0;c<g;c++)d|=this.readByteAt(o+c)<<Math.abs(h+c*8);return d},write:function(o,g,d){var h,c;if(o>this.length())throw new Error("You are trying to write outside the source boundaries.");for(h=this.littleEndian?0:-8*(d-1),c=0;c<d;c++)this.writeByteAt(o+c,g>>Math.abs(h+c*8)&255)},BYTE:function(o){return this.read(o,1)},SHORT:function(o){return this.read(o,2)},LONG:function(o){return this.read(o,4)},SLONG:function(o){var g=this.read(o,4);return g>2147483647?g-4294967296:g},CHAR:function(o){return String.fromCharCode(this.read(o,1))},STRING:function(o,g){return this.asArray("CHAR",o,g).join("")},asArray:function(o,g,d){for(var h=[],c=0;c<d;c++)h[c]=this[o](g+c);return h}});function a(o){var g=new DataView(o);l.extend(this,{readByteAt:function(d){return g.getUint8(d)},writeByteAt:function(d,h){g.setUint8(d,h)},SEGMENT:function(d,h,c){switch(arguments.length){case 2:return o.slice(d,d+h);case 1:return o.slice(d);case 3:if(c===null&&(c=new ArrayBuffer),c instanceof ArrayBuffer){var b=new Uint8Array(this.length()-h+c.byteLength);d>0&&b.set(new Uint8Array(o.slice(0,d)),0),b.set(new Uint8Array(c),d),b.set(new Uint8Array(o.slice(d+h)),d+c.byteLength),this.clear(),o=b.buffer,g=new DataView(o);break}default:return o}},length:function(){return o?o.byteLength:0},clear:function(){g=o=null}})}function f(o){l.extend(this,{readByteAt:function(d){return o.charCodeAt(d)},writeByteAt:function(d,h){g(String.fromCharCode(h),d,1)},SEGMENT:function(d,h,c){switch(arguments.length){case 1:return o.substr(d);case 2:return o.substr(d,h);case 3:g(c!==null?c:"",d,h);break;default:return o}},length:function(){return o?o.length:0},clear:function(){o=null}});function g(d,h,c){c=arguments.length===3?c:o.length-h-1,o=o.substr(0,h)+d+o.substr(c+h)}}return r}),u("moxie/runtime/html5/image/JPEGHeaders",["moxie/runtime/html5/utils/BinaryReader","moxie/core/Exceptions"],function(l,r){return function a(f){var o=[],g,d,h,c=0;if(g=new l(f),g.SHORT(0)!==65496)throw g.clear(),new r.ImageError(r.ImageError.WRONG_FORMAT);for(d=2;d<=g.length();){if(h=g.SHORT(d),h>=65488&&h<=65495){d+=2;continue}if(h===65498||h===65497)break;c=g.SHORT(d+2)+2,h>=65505&&h<=65519&&o.push({hex:h,name:"APP"+(h&15),start:d,length:c,segment:g.SEGMENT(d,c)}),d+=c}return g.clear(),{headers:o,restore:function(b){var S,p,m;for(m=new l(b),d=m.SHORT(2)==65504?4+m.SHORT(4):2,p=0,S=o.length;p<S;p++)m.SEGMENT(d,0,o[p].segment),d+=o[p].length;return b=m.SEGMENT(),m.clear(),b},strip:function(b){var S,p,m,x;for(m=new a(b),p=m.headers,m.purge(),S=new l(b),x=p.length;x--;)S.SEGMENT(p[x].start,p[x].length,"");return b=S.SEGMENT(),S.clear(),b},get:function(b){for(var S=[],p=0,m=o.length;p<m;p++)o[p].name===b.toUpperCase()&&S.push(o[p].segment);return S},set:function(b,S){var p=[],m,x,v;for(typeof S=="string"?p.push(S):p=S,m=x=0,v=o.length;m<v&&(o[m].name===b.toUpperCase()&&(o[m].segment=p[x],o[m].length=p[x].length,x++),!(x>=p.length));m++);},purge:function(){this.headers=o=[]}}}}),u("moxie/runtime/html5/image/ExifParser",["moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader","moxie/core/Exceptions"],function(l,r,a){function f(o){var g,d,h,c,b,S;if(r.call(this,o),d={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"},thumb:{513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength"}},h={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},c={tiffHeader:10},b=c.tiffHeader,g={clear:this.clear},l.extend(this,{read:function(){try{return f.prototype.read.apply(this,arguments)}catch{throw new a.ImageError(a.ImageError.INVALID_META_ERR)}},write:function(){try{return f.prototype.write.apply(this,arguments)}catch{throw new a.ImageError(a.ImageError.INVALID_META_ERR)}},UNDEFINED:function(){return this.BYTE.apply(this,arguments)},RATIONAL:function(v){return this.LONG(v)/this.LONG(v+4)},SRATIONAL:function(v){return this.SLONG(v)/this.SLONG(v+4)},ASCII:function(v){return this.CHAR(v)},TIFF:function(){return S||null},EXIF:function(){var v=null;if(c.exifIFD){try{v=m.call(this,c.exifIFD,d.exif)}catch{return null}if(v.ExifVersion&&l.typeOf(v.ExifVersion)==="array"){for(var I=0,D="";I<v.ExifVersion.length;I++)D+=String.fromCharCode(v.ExifVersion[I]);v.ExifVersion=D}}return v},GPS:function(){var v=null;if(c.gpsIFD){try{v=m.call(this,c.gpsIFD,d.gps)}catch{return null}v.GPSVersionID&&l.typeOf(v.GPSVersionID)==="array"&&(v.GPSVersionID=v.GPSVersionID.join("."))}return v},thumb:function(){if(c.IFD1)try{var v=m.call(this,c.IFD1,d.thumb);if("JPEGInterchangeFormat"in v)return this.SEGMENT(c.tiffHeader+v.JPEGInterchangeFormat,v.JPEGInterchangeFormatLength)}catch{}return null},setExif:function(v,I){return v!=="PixelXDimension"&&v!=="PixelYDimension"?!1:x.call(this,"exif",v,I)},clear:function(){g.clear(),o=d=h=S=c=g=null}}),this.SHORT(0)!==65505||this.STRING(4,5).toUpperCase()!=="EXIF\0")throw new a.ImageError(a.ImageError.INVALID_META_ERR);if(this.littleEndian=this.SHORT(b)==18761,this.SHORT(b+=2)!==42)throw new a.ImageError(a.ImageError.INVALID_META_ERR);c.IFD0=c.tiffHeader+this.LONG(b+=2),S=m.call(this,c.IFD0,d.tiff),"ExifIFDPointer"in S&&(c.exifIFD=c.tiffHeader+S.ExifIFDPointer,delete S.ExifIFDPointer),"GPSInfoIFDPointer"in S&&(c.gpsIFD=c.tiffHeader+S.GPSInfoIFDPointer,delete S.GPSInfoIFDPointer),l.isEmptyObj(S)&&(S=null);var p=this.LONG(c.IFD0+this.SHORT(c.IFD0)*12+2);p&&(c.IFD1=c.tiffHeader+p);function m(v,I){var D=this,k,P,T,A,C,R,M,O,B=[],G={},$={1:"BYTE",7:"UNDEFINED",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",9:"SLONG",10:"SRATIONAL"},te={BYTE:1,UNDEFINED:1,ASCII:1,SHORT:2,LONG:4,RATIONAL:8,SLONG:4,SRATIONAL:8};for(k=D.SHORT(v),P=0;P<k;P++)if(B=[],M=v+2+P*12,T=I[D.SHORT(M)],T!==i){if(A=$[D.SHORT(M+=2)],C=D.LONG(M+=2),R=te[A],!R)throw new a.ImageError(a.ImageError.INVALID_META_ERR);if(M+=4,R*C>4&&(M=D.LONG(M)+c.tiffHeader),M+R*C>=this.length())throw new a.ImageError(a.ImageError.INVALID_META_ERR);if(A==="ASCII"){G[T]=l.trim(D.STRING(M,C).replace(/\0$/,""));continue}else B=D.asArray(A,M,C),O=C==1?B[0]:B,h.hasOwnProperty(T)&&typeof O!="object"?G[T]=h[T][O]:G[T]=O}return G}function x(v,I,D){var k,P,T,A=0;if(typeof I=="string"){var C=d[v.toLowerCase()];for(var R in C)if(C[R]===I){I=R;break}}k=c[v.toLowerCase()+"IFD"],P=this.SHORT(k);for(var M=0;M<P;M++)if(T=k+12*M+2,this.SHORT(T)==I){A=T+8;break}if(!A)return!1;try{this.write(A,D,4)}catch{return!1}return!0}}return f.prototype=r.prototype,f}),u("moxie/runtime/html5/image/JPEG",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEGHeaders","moxie/runtime/html5/utils/BinaryReader","moxie/runtime/html5/image/ExifParser"],function(l,r,a,f,o){function g(d){var h,c,b,S;if(h=new f(d),h.SHORT(0)!==65496)throw new r.ImageError(r.ImageError.WRONG_FORMAT);c=new a(d);try{b=new o(c.get("app1")[0])}catch{}S=p.call(this),l.extend(this,{type:"image/jpeg",size:h.length(),width:S&&S.width||0,height:S&&S.height||0,setExif:function(v,I){if(!b)return!1;l.typeOf(v)==="object"?l.each(v,function(D,k){b.setExif(k,D)}):b.setExif(v,I),c.set("app1",b.SEGMENT())},writeHeaders:function(){return arguments.length?c.restore(arguments[0]):c.restore(d)},stripHeaders:function(v){return c.strip(v)},purge:function(){x.call(this)}}),b&&(this.meta={tiff:b.TIFF(),exif:b.EXIF(),gps:b.GPS(),thumb:m()});function p(v){var I=0,D,k;for(v||(v=h);I<=v.length();){if(D=v.SHORT(I+=2),D>=65472&&D<=65475)return I+=5,{height:v.SHORT(I),width:v.SHORT(I+=2)};k=v.SHORT(I+=2),I+=k-2}return null}function m(){var v=b.thumb(),I,D;return v&&(I=new f(v),D=p(I),I.clear(),D)?(D.data=v,D):null}function x(){!b||!c||!h||(b.clear(),c.purge(),h.clear(),S=c=b=h=null)}}return g}),u("moxie/runtime/html5/image/PNG",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader"],function(l,r,a){function f(o){var g,d;g=new a(o),function(){var S=0,p=0,m=[35152,20039,3338,6666];for(p=0;p<m.length;p++,S+=2)if(m[p]!=g.SHORT(S))throw new l.ImageError(l.ImageError.WRONG_FORMAT)}();function h(){var S,p;return S=b.call(this,8),S.type=="IHDR"?(p=S.start,{width:g.LONG(p),height:g.LONG(p+=4)}):null}function c(){g&&(g.clear(),o=d=g=null)}d=h.call(this),r.extend(this,{type:"image/png",size:g.length(),width:d.width,height:d.height,purge:function(){c.call(this)}}),c.call(this);function b(S){var p,m,x,v;return p=g.LONG(S),m=g.STRING(S+=4,4),x=S+=4,v=g.LONG(S+p),{length:p,type:m,start:x,CRC:v}}}return f}),u("moxie/runtime/html5/image/ImageInfo",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEG","moxie/runtime/html5/image/PNG"],function(l,r,a,f){return function(o){var g=[a,f],d;d=function(){for(var h=0;h<g.length;h++)try{return new g[h](o)}catch{}throw new r.ImageError(r.ImageError.WRONG_FORMAT)}(),l.extend(this,{type:"",size:0,width:0,height:0,setExif:function(){},writeHeaders:function(h){return h},stripHeaders:function(h){return h},purge:function(){o=null}}),l.extend(this,d),this.purge=function(){d.purge(),d=null}}}),u("moxie/runtime/html5/image/ResizerCanvas",[],function(){function l(a,f,o){var g=a.width>a.height?"width":"height",d=Math.round(a[g]*f),h=!1;o!=="nearest"&&(f<.5||f>2)&&(f=f<.5?.5:2,h=!0);var c=r(a,f);return h?l(c,d/c[g],o):c}function r(a,f){var o=a.width,g=a.height,d=Math.round(o*f),h=Math.round(g*f),c=document.createElement("canvas");return c.width=d,c.height=h,c.getContext("2d").drawImage(a,0,0,o,g,0,0,d,h),a=null,c}return{scale:l}}),u("moxie/runtime/html5/image/Image",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/Exceptions","moxie/core/utils/Encode","moxie/file/Blob","moxie/file/File","moxie/runtime/html5/image/ImageInfo","moxie/runtime/html5/image/ResizerCanvas","moxie/core/utils/Mime","moxie/core/utils/Env"],function(l,r,a,f,o,g,d,h,c,b){function S(){var p=this,m,x,v,I,D,k=!1,P=!0;r.extend(this,{loadFromBlob:function($){var te=this.getRuntime(),V=arguments.length>1?arguments[1]:!0;if(!te.can("access_binary"))throw new a.RuntimeError(a.RuntimeError.NOT_SUPPORTED_ERR);if(D=$,$.isDetached()){I=$.getSource(),M.call(this,I);return}else O.call(this,$.getSource(),function(X){V&&(I=C(X)),M.call(this,X)})},loadFromImage:function($,te){this.meta=$.meta,D=new g(null,{name:$.name,size:$.size,type:$.type}),M.call(this,te?I=$.getAsBinaryString():$.getAsDataURL())},getInfo:function(){var $=this.getRuntime(),te;return!x&&I&&$.can("access_image_binary")&&(x=new d(I)),te={width:T().width||0,height:T().height||0,type:D.type||c.getFileMime(D.name),size:I&&I.length||D.size||0,name:D.name||"",meta:null},P&&(te.meta=x&&x.meta||this.meta||{},te.meta&&te.meta.thumb&&!(te.meta.thumb.data instanceof o)&&(te.meta.thumb.data=new o(null,{type:"image/jpeg",data:te.meta.thumb.data}))),te},resize:function($,te,V){var X=document.createElement("canvas");if(X.width=$.width,X.height=$.height,X.getContext("2d").drawImage(T(),$.x,$.y,$.width,$.height,0,0,X.width,X.height),v=h.scale(X,te),P=V.preserveHeaders,!P){var ie=this.meta&&this.meta.tiff&&this.meta.tiff.Orientation||1;v=B(v,ie)}this.width=v.width,this.height=v.height,k=!0,this.trigger("Resize")},getAsCanvas:function(){return v||(v=A()),v.id=this.uid+"_canvas",v},getAsBlob:function($,te){return $!==this.type?(k=!0,new g(null,{name:D.name||"",type:$,data:p.getAsDataURL($,te)})):new g(null,{name:D.name||"",type:$,data:p.getAsBinaryString($,te)})},getAsDataURL:function($){var te=arguments[1]||90;if(!k)return m.src;if(A(),$!=="image/jpeg")return v.toDataURL("image/png");try{return v.toDataURL("image/jpeg",te/100)}catch{return v.toDataURL("image/jpeg")}},getAsBinaryString:function($,te){if(!k)return I||(I=C(p.getAsDataURL($,te))),I;if($!=="image/jpeg")I=C(p.getAsDataURL($,te));else{var V;te||(te=90),A();try{V=v.toDataURL("image/jpeg",te/100)}catch{V=v.toDataURL("image/jpeg")}I=C(V),x&&(I=x.stripHeaders(I),P&&(x.meta&&x.meta.exif&&x.setExif({PixelXDimension:this.width,PixelYDimension:this.height}),I=x.writeHeaders(I)),x.purge(),x=null)}return k=!1,I},destroy:function(){p=null,G.call(this),this.getRuntime().getShim().removeInstance(this.uid)}});function T(){if(!v&&!m)throw new a.ImageError(a.DOMException.INVALID_STATE_ERR);return v||m}function A(){var $=T();return $.nodeName.toLowerCase()=="canvas"?$:(v=document.createElement("canvas"),v.width=$.width,v.height=$.height,v.getContext("2d").drawImage($,0,0),v)}function C($){return f.atob($.substring($.indexOf("base64,")+7))}function R($,te){return"data:"+(te||"")+";base64,"+f.btoa($)}function M($){var te=this;m=new Image,m.onerror=function(){G.call(this),te.trigger("error",a.ImageError.WRONG_FORMAT)},m.onload=function(){te.trigger("load")},m.src=$.substr(0,5)=="data:"?$:R($,D.type)}function O($,te){var V=this,X;if(window.FileReader)X=new FileReader,X.onload=function(){te.call(V,this.result)},X.onerror=function(){V.trigger("error",a.ImageError.WRONG_FORMAT)},X.readAsDataURL($);else return te.call(this,$.getAsDataURL())}function B($,te){var V=Math.PI/180,X=document.createElement("canvas"),ie=X.getContext("2d"),ne=$.width,fe=$.height;switch(r.inArray(te,[5,6,7,8])>-1?(X.width=fe,X.height=ne):(X.width=ne,X.height=fe),te){case 2:ie.translate(ne,0),ie.scale(-1,1);break;case 3:ie.translate(ne,fe),ie.rotate(180*V);break;case 4:ie.translate(0,fe),ie.scale(1,-1);break;case 5:ie.rotate(90*V),ie.scale(1,-1);break;case 6:ie.rotate(90*V),ie.translate(0,-fe);break;case 7:ie.rotate(90*V),ie.translate(ne,-fe),ie.scale(-1,1);break;case 8:ie.rotate(-90*V),ie.translate(-ne,0);break}return ie.drawImage($,0,0,ne,fe),X}function G(){x&&(x.purge(),x=null),I=m=v=D=null,k=!1}}return l.Image=S}),u("moxie/runtime/flash/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(l,r,a,f,o){var g="flash",d={};function h(){var p;try{p=navigator.plugins["Shockwave Flash"],p=p.description}catch{try{p=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch{p="0.0"}}return p=p.match(/\d+/g),parseFloat(p[0]+"."+p[1])}function c(p){var m=a.get(p);m&&m.nodeName=="OBJECT"&&(r.browser==="IE"?(m.style.display="none",function x(){m.readyState==4?b(p):setTimeout(x,10)}()):m.parentNode.removeChild(m))}function b(p){var m=a.get(p);if(m){for(var x in m)typeof m[x]=="function"&&(m[x]=null);m.parentNode.removeChild(m)}}function S(p){var m=this,x;p=l.extend({swf_url:r.swf_url},p),o.call(this,p,g,{access_binary:function(v){return v&&m.mode==="browser"},access_image_binary:function(v){return v&&m.mode==="browser"},display_media:o.capTest(_("moxie/image/Image")),do_cors:o.capTrue,drag_and_drop:!1,report_upload_progress:function(){return m.mode==="client"},resize_image:o.capTrue,return_response_headers:!1,return_response_type:function(v){return v==="json"&&window.JSON?!0:!l.arrayDiff(v,["","text","document"])||m.mode==="browser"},return_status_code:function(v){return m.mode==="browser"||!l.arrayDiff(v,[200,404])},select_file:o.capTrue,select_multiple:o.capTrue,send_binary_string:function(v){return v&&m.mode==="browser"},send_browser_cookies:function(v){return v&&m.mode==="browser"},send_custom_headers:function(v){return v&&m.mode==="browser"},send_multipart:o.capTrue,slice_blob:function(v){return v&&m.mode==="browser"},stream_upload:function(v){return v&&m.mode==="browser"},summon_file_dialog:!1,upload_filesize:function(v){return l.parseSizeStr(v)<=2097152||m.mode==="client"},use_http_method:function(v){return!l.arrayDiff(v,["GET","POST"])}},{access_binary:function(v){return v?"browser":"client"},access_image_binary:function(v){return v?"browser":"client"},report_upload_progress:function(v){return v?"browser":"client"},return_response_type:function(v){return l.arrayDiff(v,["","text","json","document"])?"browser":["client","browser"]},return_status_code:function(v){return l.arrayDiff(v,[200,404])?"browser":["client","browser"]},send_binary_string:function(v){return v?"browser":"client"},send_browser_cookies:function(v){return v?"browser":"client"},send_custom_headers:function(v){return v?"browser":"client"},slice_blob:function(v){return v?"browser":"client"},stream_upload:function(v){return v?"client":"browser"},upload_filesize:function(v){return l.parseSizeStr(v)>=2097152?"client":"browser"}},"client"),h()<11.3&&(r.debug.runtime&&r.log("	Flash didn't meet minimal version requirement (11.3)."),this.mode=!1),l.extend(this,{getShim:function(){return a.get(this.uid)},shimExec:function(v,I){var D=[].slice.call(arguments,2);return m.getShim().exec(this.uid,v,I,D)},init:function(){var v,I,D;D=this.getShimContainer(),l.extend(D.style,{position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),v='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+p.swf_url+'" ',r.browser==="IE"&&(v+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),v+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+p.swf_url+'" /><param name="flashvars" value="uid='+escape(this.uid)+"&target="+o.getGlobalEventTarget()+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',r.browser==="IE"?(I=document.createElement("div"),D.appendChild(I),I.outerHTML=v,I=D=null):D.innerHTML=v,x=setTimeout(function(){m&&!m.initialized&&(m.trigger("Error",new f.RuntimeError(f.RuntimeError.NOT_INIT_ERR)),r.debug.runtime&&r.log("	Flash failed to initialize within a specified period of time (typically 5s)."))},5e3)},destroy:function(v){return function(){c(m.uid),v.call(m),clearTimeout(x),p=x=v=m=null}}(this.destroy)},d)}return o.addConstructor(g,S),d}),u("moxie/runtime/flash/file/Blob",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(l,r){var a={slice:function(f,o,g,d){var h=this.getRuntime();return o<0?o=Math.max(f.size+o,0):o>0&&(o=Math.min(o,f.size)),g<0?g=Math.max(f.size+g,0):g>0&&(g=Math.min(g,f.size)),f=h.shimExec.call(this,"Blob","slice",o,g,d||""),f&&(f=new r(h.uid,f)),f}};return l.Blob=a}),u("moxie/runtime/flash/file/FileInput",["moxie/runtime/flash/Runtime","moxie/file/File","moxie/core/utils/Dom","moxie/core/utils/Basic"],function(l,r,a,f){var o={init:function(g){var d=this,h=this.getRuntime(),c=a.get(g.browse_button);c&&(c.setAttribute("tabindex",-1),c=null),this.bind("Change",function(){var b=h.shimExec.call(d,"FileInput","getFiles");d.files=[],f.each(b,function(S){d.files.push(new r(h.uid,S))})},999),this.getRuntime().shimExec.call(this,"FileInput","init",{accept:g.accept,multiple:g.multiple}),this.trigger("ready")}};return l.FileInput=o}),u("moxie/runtime/flash/file/FileReader",["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(l,r){function a(o,g){switch(g){case"readAsText":return r.atob(o,"utf8");case"readAsBinaryString":return r.atob(o);case"readAsDataURL":return o}return null}var f={read:function(o,g){var d=this;return d.result="",o==="readAsDataURL"&&(d.result="data:"+(g.type||"")+";base64,"),d.bind("Progress",function(h,c){c&&(d.result+=a(c,o))},999),d.getRuntime().shimExec.call(this,"FileReader","readAsBase64",g.uid)}};return l.FileReader=f}),u("moxie/runtime/flash/file/FileReaderSync",["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(l,r){function a(o,g){switch(g){case"readAsText":return r.atob(o,"utf8");case"readAsBinaryString":return r.atob(o);case"readAsDataURL":return o}return null}var f={read:function(o,g){var d,h=this.getRuntime();return d=h.shimExec.call(this,"FileReaderSync","readAsBase64",g.uid),d?(o==="readAsDataURL"&&(d="data:"+(g.type||"")+";base64,"+d),a(d,o,g.type)):null}};return l.FileReaderSync=f}),u("moxie/runtime/flash/runtime/Transporter",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(l,r){var a={getAsBlob:function(f){var o=this.getRuntime(),g=o.shimExec.call(this,"Transporter","getAsBlob",f);return g?new r(o.uid,g):null}};return l.Transporter=a}),u("moxie/runtime/flash/xhr/XMLHttpRequest",["moxie/runtime/flash/Runtime","moxie/core/utils/Basic","moxie/file/Blob","moxie/file/File","moxie/file/FileReaderSync","moxie/runtime/flash/file/FileReaderSync","moxie/xhr/FormData","moxie/runtime/Transporter","moxie/runtime/flash/runtime/Transporter"],function(l,r,a,f,o,g,d,h,c){var b={send:function(S,p){var m=this,x=m.getRuntime();function v(){S.transport=x.mode,x.shimExec.call(m,"XMLHttpRequest","send",S,p)}function I(T,A){x.shimExec.call(m,"XMLHttpRequest","appendBlob",T,A.uid),p=null,v()}function D(T,A){var C=new h;C.bind("TransportingComplete",function(){A(this.result)}),C.transport(T.getSource(),T.type,{ruid:x.uid})}if(r.isEmptyObj(S.headers)||r.each(S.headers,function(T,A){x.shimExec.call(m,"XMLHttpRequest","setRequestHeader",A,T.toString())}),p instanceof d){var k;if(p.each(function(T,A){T instanceof a?k=A:x.shimExec.call(m,"XMLHttpRequest","append",A,T)}),!p.hasBlob())p=null,v();else{var P=p.getBlob();P.isDetached()?D(P,function(T){P.destroy(),I(k,T)}):I(k,P)}}else p instanceof a?p.isDetached()?D(p,function(T){p.destroy(),p=T.uid,v()}):(p=p.uid,v()):v()},getResponse:function(S){var p,m,x=this.getRuntime();if(m=x.shimExec.call(this,"XMLHttpRequest","getResponseAsBlob"),m){if(m=new f(x.uid,m),S==="blob")return m;try{if(p=new o,~r.inArray(S,["","text"]))return p.readAsText(m);if(S==="json"&&window.JSON)return JSON.parse(p.readAsText(m))}finally{m.destroy()}}return null},abort:function(S){var p=this.getRuntime();p.shimExec.call(this,"XMLHttpRequest","abort"),this.dispatchEvent("readystatechange"),this.dispatchEvent("abort")}};return l.XMLHttpRequest=b}),u("moxie/runtime/flash/image/Image",["moxie/runtime/flash/Runtime","moxie/core/utils/Basic","moxie/runtime/Transporter","moxie/file/Blob","moxie/file/FileReaderSync"],function(l,r,a,f,o){var g={loadFromBlob:function(d){var h=this,c=h.getRuntime();function b(p){c.shimExec.call(h,"Image","loadFromBlob",p.uid),h=c=null}if(d.isDetached()){var S=new a;S.bind("TransportingComplete",function(){b(S.result.getSource())}),S.transport(d.getSource(),d.type,{ruid:c.uid})}else b(d.getSource())},loadFromImage:function(d){var h=this.getRuntime();return h.shimExec.call(this,"Image","loadFromImage",d.uid)},getInfo:function(){var d=this.getRuntime(),h=d.shimExec.call(this,"Image","getInfo");return h.meta&&h.meta.thumb&&h.meta.thumb.data&&!(d.meta.thumb.data instanceof f)&&(h.meta.thumb.data=new f(d.uid,h.meta.thumb.data)),h},getAsBlob:function(d,h){var c=this.getRuntime(),b=c.shimExec.call(this,"Image","getAsBlob",d,h);return b?new f(c.uid,b):null},getAsDataURL:function(){var d=this.getRuntime(),h=d.Image.getAsBlob.apply(this,arguments),c;return h?(c=new o,c.readAsDataURL(h)):null}};return l.Image=g}),u("moxie/runtime/silverlight/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(l,r,a,f,o){var g="silverlight",d={};function h(b){var S=!1,p=null,m,x,v,I,D,k=0;try{try{p=new ActiveXObject("AgControl.AgControl"),p.IsVersionSupported(b)&&(S=!0),p=null}catch{var P=navigator.plugins["Silverlight Plug-In"];if(P){for(m=P.description,m==="1.0.30226.2"&&(m="2.0.30226.2"),x=m.split(".");x.length>3;)x.pop();for(;x.length<4;)x.push(0);for(v=b.split(".");v.length>4;)v.pop();do I=parseInt(v[k],10),D=parseInt(x[k],10),k++;while(k<v.length&&I===D);I<=D&&!isNaN(I)&&(S=!0)}}}catch{S=!1}return S}function c(b){var S=this,p;b=l.extend({xap_url:r.xap_url},b),o.call(this,b,g,{access_binary:o.capTrue,access_image_binary:o.capTrue,display_media:o.capTest(_("moxie/image/Image")),do_cors:o.capTrue,drag_and_drop:!1,report_upload_progress:o.capTrue,resize_image:o.capTrue,return_response_headers:function(m){return m&&S.mode==="client"},return_response_type:function(m){return m!=="json"?!0:!!window.JSON},return_status_code:function(m){return S.mode==="client"||!l.arrayDiff(m,[200,404])},select_file:o.capTrue,select_multiple:o.capTrue,send_binary_string:o.capTrue,send_browser_cookies:function(m){return m&&S.mode==="browser"},send_custom_headers:function(m){return m&&S.mode==="client"},send_multipart:o.capTrue,slice_blob:o.capTrue,stream_upload:!0,summon_file_dialog:!1,upload_filesize:o.capTrue,use_http_method:function(m){return S.mode==="client"||!l.arrayDiff(m,["GET","POST"])}},{return_response_headers:function(m){return m?"client":"browser"},return_status_code:function(m){return l.arrayDiff(m,[200,404])?"client":["client","browser"]},send_browser_cookies:function(m){return m?"browser":"client"},send_custom_headers:function(m){return m?"client":"browser"},use_http_method:function(m){return l.arrayDiff(m,["GET","POST"])?"client":["client","browser"]}}),(!h("2.0.31005.0")||r.browser==="Opera")&&(r.debug.runtime&&r.log("	Silverlight is not installed or minimal version (2.0.31005.0) requirement not met (not likely)."),this.mode=!1),l.extend(this,{getShim:function(){return a.get(this.uid).content.Moxie},shimExec:function(m,x){var v=[].slice.call(arguments,2);return S.getShim().exec(this.uid,m,x,v)},init:function(){var m;m=this.getShimContainer(),m.innerHTML='<object id="'+this.uid+'" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%" style="outline:none;"><param name="source" value="'+b.xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="uid='+this.uid+",target="+o.getGlobalEventTarget()+'"/></object>',p=setTimeout(function(){S&&!S.initialized&&(S.trigger("Error",new f.RuntimeError(f.RuntimeError.NOT_INIT_ERR)),r.debug.runtime&&r.log("Silverlight failed to initialize within a specified period of time (5-10s)."))},r.OS!=="Windows"?1e4:5e3)},destroy:function(m){return function(){m.call(S),clearTimeout(p),b=p=m=S=null}}(this.destroy)},d)}return o.addConstructor(g,c),d}),u("moxie/runtime/silverlight/file/Blob",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/Blob"],function(l,r,a){return l.Blob=r.extend({},a)}),u("moxie/runtime/silverlight/file/FileInput",["moxie/runtime/silverlight/Runtime","moxie/file/File","moxie/core/utils/Dom","moxie/core/utils/Basic"],function(l,r,a,f){function o(d){for(var h="",c=0;c<d.length;c++)h+=(h!==""?"|":"")+d[c].title+" | *."+d[c].extensions.replace(/,/g,";*.");return h}var g={init:function(d){var h=this,c=this.getRuntime(),b=a.get(d.browse_button);b&&(b.setAttribute("tabindex",-1),b=null),this.bind("Change",function(){var S=c.shimExec.call(h,"FileInput","getFiles");h.files=[],f.each(S,function(p){h.files.push(new r(c.uid,p))})},999),c.shimExec.call(this,"FileInput","init",o(d.accept),d.multiple),this.trigger("ready")},setOption:function(d,h){d=="accept"&&(h=o(h)),this.getRuntime().shimExec.call(this,"FileInput","setOption",d,h)}};return l.FileInput=g}),u("moxie/runtime/silverlight/file/FileDrop",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Dom","moxie/core/utils/Events"],function(l,r,a){var f={init:function(){var o=this,g=o.getRuntime(),d;return d=g.getShimContainer(),a.addEvent(d,"dragover",function(h){h.preventDefault(),h.stopPropagation(),h.dataTransfer.dropEffect="copy"},o.uid),a.addEvent(d,"dragenter",function(h){h.preventDefault();var c=r.get(g.uid).dragEnter(h);c&&h.stopPropagation()},o.uid),a.addEvent(d,"drop",function(h){h.preventDefault();var c=r.get(g.uid).dragDrop(h);c&&h.stopPropagation()},o.uid),g.shimExec.call(this,"FileDrop","init")}};return l.FileDrop=f}),u("moxie/runtime/silverlight/file/FileReader",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReader"],function(l,r,a){return l.FileReader=r.extend({},a)}),u("moxie/runtime/silverlight/file/FileReaderSync",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReaderSync"],function(l,r,a){return l.FileReaderSync=r.extend({},a)}),u("moxie/runtime/silverlight/runtime/Transporter",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/runtime/Transporter"],function(l,r,a){return l.Transporter=r.extend({},a)}),u("moxie/runtime/silverlight/xhr/XMLHttpRequest",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/xhr/XMLHttpRequest","moxie/runtime/silverlight/file/FileReaderSync","moxie/runtime/silverlight/runtime/Transporter"],function(l,r,a,f,o){return l.XMLHttpRequest=r.extend({},a)}),u("moxie/runtime/silverlight/image/Image",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/file/Blob","moxie/runtime/flash/image/Image"],function(l,r,a,f){return l.Image=r.extend({},f,{getInfo:function(){var o=this.getRuntime(),g=["tiff","exif","gps","thumb"],d={meta:{}},h=o.shimExec.call(this,"Image","getInfo");return h.meta&&(r.each(g,function(c){var b=h.meta[c],S,p,m,x;if(b&&b.keys)for(d.meta[c]={},p=0,m=b.keys.length;p<m;p++)S=b.keys[p],x=b[S],x&&(/^(\d|[1-9]\d+)$/.test(x)?x=parseInt(x,10):/^\d*\.\d+$/.test(x)&&(x=parseFloat(x)),d.meta[c][S]=x)}),d.meta&&d.meta.thumb&&d.meta.thumb.data&&!(o.meta.thumb.data instanceof a)&&(d.meta.thumb.data=new a(o.uid,d.meta.thumb.data))),d.width=parseInt(h.width,10),d.height=parseInt(h.height,10),d.size=parseInt(h.size,10),d.type=h.type,d.name=h.name,d},resize:function(o,g,d){this.getRuntime().shimExec.call(this,"Image","resize",o.x,o.y,o.width,o.height,g,d.preserveHeaders,d.resample)}})}),u("moxie/runtime/html4/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(l,r,a,f){var o="html4",g={};function d(h){var c=this,b=a.capTest,S=a.capTrue;a.call(this,h,o,{access_binary:b(window.FileReader||window.File&&File.getAsDataURL),access_image_binary:!1,display_media:b((f.can("create_canvas")||f.can("use_data_uri_over32kb"))&&_("moxie/image/Image")),do_cors:!1,drag_and_drop:!1,filter_by_extension:b(function(){return!(f.browser==="Chrome"&&f.verComp(f.version,28,"<")||f.browser==="IE"&&f.verComp(f.version,10,"<")||f.browser==="Safari"&&f.verComp(f.version,7,"<")||f.browser==="Firefox"&&f.verComp(f.version,37,"<"))}()),resize_image:function(){return g.Image&&c.can("access_binary")&&f.can("create_canvas")},report_upload_progress:!1,return_response_headers:!1,return_response_type:function(p){return p==="json"&&window.JSON?!0:!!~l.inArray(p,["text","document",""])},return_status_code:function(p){return!l.arrayDiff(p,[200,404])},select_file:function(){return f.can("use_fileinput")},select_multiple:!1,send_binary_string:!1,send_custom_headers:!1,send_multipart:!0,slice_blob:!1,stream_upload:function(){return c.can("select_file")},summon_file_dialog:function(){return c.can("select_file")&&!(f.browser==="Firefox"&&f.verComp(f.version,4,"<")||f.browser==="Opera"&&f.verComp(f.version,12,"<")||f.browser==="IE"&&f.verComp(f.version,10,"<"))},upload_filesize:S,use_http_method:function(p){return!l.arrayDiff(p,["GET","POST"])}}),l.extend(this,{init:function(){this.trigger("Init")},destroy:function(p){return function(){p.call(c),p=c=null}}(this.destroy)}),l.extend(this.getShim(),g)}return a.addConstructor(o,d),g}),u("moxie/runtime/html4/file/FileInput",["moxie/runtime/html4/Runtime","moxie/file/File","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime","moxie/core/utils/Env"],function(l,r,a,f,o,g,d){function h(){var c,b=[],S,p;function m(){var x=this,v=x.getRuntime(),I,D,k,P,T,A;A=a.guid("uid_"),I=v.getShimContainer(),c&&(k=f.get(c+"_form"),k&&(a.extend(k.style,{top:"100%"}),k.firstChild.setAttribute("tabindex",-1))),P=document.createElement("form"),P.setAttribute("id",A+"_form"),P.setAttribute("method","post"),P.setAttribute("enctype","multipart/form-data"),P.setAttribute("encoding","multipart/form-data"),a.extend(P.style,{overflow:"hidden",position:"absolute",top:0,left:0,width:"100%",height:"100%"}),T=document.createElement("input"),T.setAttribute("id",A),T.setAttribute("type","file"),T.setAttribute("accept",b.join(",")),v.can("summon_file_dialog")&&T.setAttribute("tabindex",-1),a.extend(T.style,{fontSize:"999px",opacity:0}),P.appendChild(T),I.appendChild(P),a.extend(T.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),d.browser==="IE"&&d.verComp(d.version,10,"<")&&a.extend(T.style,{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"}),T.onchange=function(){var C;this.value&&(this.files?C=this.files[0]:C={name:this.value},C=new r(v.uid,C),this.onchange=function(){},m.call(x),x.files=[C],T.setAttribute("id",C.uid),P.setAttribute("id",C.uid+"_form"),x.trigger("change"),T=P=null)},v.can("summon_file_dialog")&&(D=f.get(S.browse_button),o.removeEvent(D,"click",x.uid),o.addEvent(D,"click",function(C){T&&!T.disabled&&T.click(),C.preventDefault()},x.uid)),c=A,I=k=D=null}a.extend(this,{init:function(x){var v=this,I=v.getRuntime(),D;S=x,b=g.extList2mimes(x.accept,I.can("filter_by_extension")),D=I.getShimContainer(),function(){var k,P,T;k=f.get(x.browse_button),p=f.getStyle(k,"z-index")||"auto",I.can("summon_file_dialog")?(f.getStyle(k,"position")==="static"&&(k.style.position="relative"),v.bind("Refresh",function(){P=parseInt(p,10)||1,f.get(S.browse_button).style.zIndex=P,this.getRuntime().getShimContainer().style.zIndex=P-1})):k.setAttribute("tabindex",-1),T=I.can("summon_file_dialog")?k:D,o.addEvent(T,"mouseover",function(){v.trigger("mouseenter")},v.uid),o.addEvent(T,"mouseout",function(){v.trigger("mouseleave")},v.uid),o.addEvent(T,"mousedown",function(){v.trigger("mousedown")},v.uid),o.addEvent(f.get(x.container),"mouseup",function(){v.trigger("mouseup")},v.uid),k=null}(),m.call(this),D=null,v.trigger({type:"ready",async:!0})},setOption:function(x,v){var I=this.getRuntime(),D;x=="accept"&&(b=v.mimes||g.extList2mimes(v,I.can("filter_by_extension"))),D=f.get(c),D&&D.setAttribute("accept",b.join(","))},disable:function(x){var v;(v=f.get(c))&&(v.disabled=!!x)},destroy:function(){var x=this.getRuntime(),v=x.getShim(),I=x.getShimContainer(),D=S&&f.get(S.container),k=S&&f.get(S.browse_button);D&&o.removeAllEvents(D,this.uid),k&&(o.removeAllEvents(k,this.uid),k.style.zIndex=p),I&&(o.removeAllEvents(I,this.uid),I.innerHTML=""),v.removeInstance(this.uid),c=b=S=I=D=k=v=null}})}return l.FileInput=h}),u("moxie/runtime/html4/file/FileReader",["moxie/runtime/html4/Runtime","moxie/runtime/html5/file/FileReader"],function(l,r){return l.FileReader=r}),u("moxie/runtime/html4/xhr/XMLHttpRequest",["moxie/runtime/html4/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Url","moxie/core/Exceptions","moxie/core/utils/Events","moxie/file/Blob","moxie/xhr/FormData"],function(l,r,a,f,o,g,d,h){function c(){var b,S,p;function m(x){var v=this,I,D,k,P,T=!1;if(p){if(I=p.id.replace(/_iframe$/,""),D=a.get(I+"_form"),D){for(k=D.getElementsByTagName("input"),P=k.length;P--;)switch(k[P].getAttribute("type")){case"hidden":k[P].parentNode.removeChild(k[P]);break;case"file":T=!0;break}k=[],T||D.parentNode.removeChild(D),D=null}setTimeout(function(){g.removeEvent(p,"load",v.uid),p.parentNode&&p.parentNode.removeChild(p);var A=v.getRuntime().getShimContainer();A.children.length||A.parentNode.removeChild(A),A=p=null,x()},1)}}r.extend(this,{send:function(x,v){var I=this,D=I.getRuntime(),k,P,T,A;b=S=null;function C(){var R=D.getShimContainer()||document.body,M=document.createElement("div");M.innerHTML='<iframe id="'+k+'_iframe" name="'+k+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>',p=M.firstChild,R.appendChild(p),g.addEvent(p,"load",function(){var O;try{O=p.contentWindow.document||p.contentDocument||window.frames[p.id].document,/^4(0[0-9]|1[0-7]|2[2346])\s/.test(O.title)?b=O.title.replace(/^(\d+).*$/,"$1"):(b=200,S=r.trim(O.body.innerHTML),I.trigger({type:"progress",loaded:S.length,total:S.length}),A&&I.trigger({type:"uploadprogress",loaded:A.size||1025,total:A.size||1025}))}catch{if(f.hasSameOrigin(x.url))b=404;else{m.call(I,function(){I.trigger("error")});return}}m.call(I,function(){I.trigger("load")})},I.uid)}if(v instanceof h&&v.hasBlob()){if(A=v.getBlob(),k=A.uid,T=a.get(k),P=a.get(k+"_form"),!P)throw new o.DOMException(o.DOMException.NOT_FOUND_ERR)}else k=r.guid("uid_"),P=document.createElement("form"),P.setAttribute("id",k+"_form"),P.setAttribute("method",x.method),P.setAttribute("enctype","multipart/form-data"),P.setAttribute("encoding","multipart/form-data"),D.getShimContainer().appendChild(P);P.setAttribute("target",k+"_iframe"),v instanceof h&&v.each(function(R,M){if(R instanceof d)T&&T.setAttribute("name",M);else{var O=document.createElement("input");r.extend(O,{type:"hidden",name:M,value:R}),T?P.insertBefore(O,T):P.appendChild(O)}}),P.setAttribute("action",x.url),C(),P.submit(),I.trigger("loadstart")},getStatus:function(){return b},getResponse:function(x){if(x==="json"&&r.typeOf(S)==="string"&&window.JSON)try{return JSON.parse(S.replace(/^\s*<pre[^>]*>/,"").replace(/<\/pre>\s*$/,""))}catch{return null}return S},abort:function(){var x=this;p&&p.contentWindow&&(p.contentWindow.stop?p.contentWindow.stop():p.contentWindow.document.execCommand?p.contentWindow.document.execCommand("Stop"):p.src="about:blank"),m.call(this,function(){x.dispatchEvent("abort")})},destroy:function(){this.getRuntime().getShim().removeInstance(this.uid)}})}return l.XMLHttpRequest=c}),u("moxie/runtime/html4/image/Image",["moxie/runtime/html4/Runtime","moxie/runtime/html5/image/Image"],function(l,r){return l.Image=r}),w(["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/core/utils/Env","moxie/core/Exceptions","moxie/core/utils/Dom","moxie/core/EventTarget","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/file/Blob","moxie/core/I18n","moxie/core/utils/Mime","moxie/file/FileInput","moxie/file/File","moxie/file/FileDrop","moxie/file/FileReader","moxie/core/utils/Url","moxie/runtime/RuntimeTarget","moxie/xhr/FormData","moxie/xhr/XMLHttpRequest","moxie/image/Image","moxie/core/utils/Events","moxie/runtime/html5/image/ResizerCanvas"])})(this)})}(Wr)),Wr.exports}var zo=Xr.exports,Bo;function _f(){return Bo||(Bo=1,function(e){(function(t,i){var n=function(){var s={};return i.apply(s,arguments),s.moxie};e.exports?e.exports=n():t.moxie=n()})(zo||window,function(){(function(t,i){function n(l,r){for(var a,f=[],o=0;o<l.length;++o){if(a=w[l[o]]||_(l[o]),!a)throw"module definition dependecy not found: "+l[o];f.push(a)}r.apply(null,f)}function s(l,r,a){if(typeof l!="string")throw"invalid module definition, module id must be defined and be a string";if(r===i)throw"invalid module definition, dependencies must be specified";if(a===i)throw"invalid module definition, definition function must be specified";n(r,function(){w[l]=a.apply(null,arguments)})}function u(l){return!!w[l]}function _(l){for(var r=t,a=l.split(/[.\/]/),f=0;f<a.length;++f){if(!r[a[f]])return;r=r[a[f]]}return r}function E(l){for(var r=0;r<l.length;r++){for(var a=t,f=l[r],o=f.split(/[.\/]/),g=0;g<o.length-1;++g)a[o[g]]===i&&(a[o[g]]={}),a=a[o[g]];a[o[o.length-1]]=w[f]}}var w={};s("moxie/core/utils/Basic",[],function(){function l(R){var M;return R===M?"undefined":R===null?"null":R.nodeType?"node":{}.toString.call(R).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()}function r(){return h(!1,!1,arguments)}function a(){return h(!0,!1,arguments)}function f(){return h(!1,!0,arguments)}function o(){return h(!0,!0,arguments)}function g(R){switch(l(R)){case"array":return h(!1,!0,[[],R]);case"object":return h(!1,!0,[{},R]);default:return R}}function d(R){switch(l(R)){case"array":return Array.prototype.slice.call(R);case"object":return r({},R)}return R}function h(R,M,O){var B,G=O[0];return b(O,function($,te){te>0&&b($,function(V,X){var ie=x(l(V),["array","object"])!==-1;return V===B||R&&G[X]===B?!0:(ie&&M&&(V=d(V)),l(G[X])===l(V)&&ie?h(R,M,[G[X],V]):G[X]=V,void 0)})}),G}function c(R,M){function O(){this.constructor=R}for(var B in M)({}).hasOwnProperty.call(M,B)&&(R[B]=M[B]);return O.prototype=M.prototype,R.prototype=new O,R.parent=M.prototype,R}function b(R,M){var O,B,G,$;if(R){try{O=R.length}catch{O=$}if(O===$||typeof O!="number"){for(B in R)if(R.hasOwnProperty(B)&&M(R[B],B)===!1)return}else for(G=0;O>G;G++)if(M(R[G],G)===!1)return}}function S(R){var M;if(!R||l(R)!=="object")return!0;for(M in R)return!1;return!0}function p(R,M){function O($){l(R[$])==="function"&&R[$](function(te){++$<G&&!te?O($):M(te)})}var B=0,G=R.length;l(M)!=="function"&&(M=function(){}),R&&R.length||M(),O(B)}function m(R,M){var O=0,B=R.length,G=new Array(B);b(R,function($,te){$(function(V){if(V)return M(V);var X=[].slice.call(arguments);X.shift(),G[te]=X,O++,O===B&&(G.unshift(null),M.apply(this,G))})})}function x(R,M){if(M){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(M,R);for(var O=0,B=M.length;B>O;O++)if(M[O]===R)return O}return-1}function v(R,M){var O=[];l(R)!=="array"&&(R=[R]),l(M)!=="array"&&(M=[M]);for(var B in R)x(R[B],M)===-1&&O.push(R[B]);return O.length?O:!1}function I(R,M){var O=[];return b(R,function(B){x(B,M)!==-1&&O.push(B)}),O.length?O:null}function D(R){var M,O=[];for(M=0;M<R.length;M++)O[M]=R[M];return O}function k(R){return R&&(String.prototype.trim?String.prototype.trim.call(R):R.toString().replace(/^\s*/,"").replace(/\s*$/,""))}function P(R){if(typeof R!="string")return R;var M,O={t:1099511627776,g:1073741824,m:1048576,k:1024};return R=/^([0-9\.]+)([tmgk]?)$/.exec(R.toLowerCase().replace(/[^0-9\.tmkg]/g,"")),M=R[2],R=+R[1],O.hasOwnProperty(M)&&(R*=O[M]),Math.floor(R)}function T(R){var M=[].slice.call(arguments,1);return R.replace(/%([a-z])/g,function(O,B){var G=M.shift();switch(B){case"s":return G+"";case"d":return parseInt(G,10);case"f":return parseFloat(G);case"c":return"";default:return G}})}function A(R,M){var O=this;setTimeout(function(){R.call(O)},M||1)}var C=function(){var R=0;return function(M){var O,B=new Date().getTime().toString(32);for(O=0;5>O;O++)B+=Math.floor(65535*Math.random()).toString(32);return(M||"o_")+B+(R++).toString(32)}}();return{guid:C,typeOf:l,extend:r,extendIf:a,extendImmutable:f,extendImmutableIf:o,clone:g,inherit:c,each:b,isEmptyObj:S,inSeries:p,inParallel:m,inArray:x,arrayDiff:v,arrayIntersect:I,toArray:D,trim:k,sprintf:T,parseSizeStr:P,delay:A}}),s("moxie/core/utils/Encode",[],function(){var l=function(o){return unescape(encodeURIComponent(o))},r=function(o){return decodeURIComponent(escape(o))},a=function(o,g){if(typeof window.atob=="function")return g?r(window.atob(o)):window.atob(o);var d,h,c,b,S,p,m,x,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",I=0,D=0,k="",P=[];if(!o)return o;o+="";do b=v.indexOf(o.charAt(I++)),S=v.indexOf(o.charAt(I++)),p=v.indexOf(o.charAt(I++)),m=v.indexOf(o.charAt(I++)),x=b<<18|S<<12|p<<6|m,d=255&x>>16,h=255&x>>8,c=255&x,P[D++]=p==64?String.fromCharCode(d):m==64?String.fromCharCode(d,h):String.fromCharCode(d,h,c);while(I<o.length);return k=P.join(""),g?r(k):k},f=function(o,g){if(g&&(o=l(o)),typeof window.btoa=="function")return window.btoa(o);var d,h,c,b,S,p,m,x,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",I=0,D=0,k="",P=[];if(!o)return o;do d=o.charCodeAt(I++),h=o.charCodeAt(I++),c=o.charCodeAt(I++),x=d<<16|h<<8|c,b=63&x>>18,S=63&x>>12,p=63&x>>6,m=63&x,P[D++]=v.charAt(b)+v.charAt(S)+v.charAt(p)+v.charAt(m);while(I<o.length);k=P.join("");var T=o.length%3;return(T?k.slice(0,T-3):k)+"===".slice(T||3)};return{utf8_encode:l,utf8_decode:r,atob:a,btoa:f}}),s("moxie/core/utils/Env",["moxie/core/utils/Basic"],function(l){function r(d,h,c){var b=0,S=0,p=0,m={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},x=function(I){return I=(""+I).replace(/[_\-+]/g,"."),I=I.replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,"."),I.length?I.split("."):[-8]},v=function(I){return I?isNaN(I)?m[I]||-7:parseInt(I,10):0};for(d=x(d),h=x(h),S=Math.max(d.length,h.length),b=0;S>b;b++)if(d[b]!=h[b]){if(d[b]=v(d[b]),h[b]=v(h[b]),d[b]<h[b]){p=-1;break}if(d[b]>h[b]){p=1;break}}if(!c)return p;switch(c){case">":case"gt":return p>0;case">=":case"ge":return p>=0;case"<=":case"le":return 0>=p;case"==":case"=":case"eq":return p===0;case"<>":case"!=":case"ne":return p!==0;case"":case"<":case"lt":return 0>p;default:return null}}var a=function(d){var h="",c="?",b="function",S="undefined",p="object",m="name",x="version",v={has:function(T,A){return A.toLowerCase().indexOf(T.toLowerCase())!==-1},lowerize:function(T){return T.toLowerCase()}},I={rgx:function(){for(var T,A,C,R,M,O,B,G=0,$=arguments;G<$.length;G+=2){var te=$[G],V=$[G+1];if(typeof T===S){T={};for(R in V)M=V[R],typeof M===p?T[M[0]]=d:T[M]=d}for(A=C=0;A<te.length;A++)if(O=te[A].exec(this.getUA())){for(R=0;R<V.length;R++)B=O[++C],M=V[R],typeof M===p&&M.length>0?M.length==2?T[M[0]]=typeof M[1]==b?M[1].call(this,B):M[1]:M.length==3?T[M[0]]=typeof M[1]!==b||M[1].exec&&M[1].test?B?B.replace(M[1],M[2]):d:B?M[1].call(this,B,M[2]):d:M.length==4&&(T[M[0]]=B?M[3].call(this,B.replace(M[1],M[2])):d):T[M]=B||d;break}if(O)break}return T},str:function(T,A){for(var C in A)if(typeof A[C]===p&&A[C].length>0){for(var R=0;R<A[C].length;R++)if(v.has(A[C][R],T))return C===c?d:C}else if(v.has(A[C],T))return C===c?d:C;return T}},D={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",RT:"ARM"}}}},k={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[m,x],[/\s(opr)\/([\w\.]+)/i],[[m,"Opera"],x],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi)\/([\w\.-]+)/i],[m,x],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[m,"IE"],x],[/(edge)\/((\d+)?[\w\.]+)/i],[m,x],[/(yabrowser)\/([\w\.]+)/i],[[m,"Yandex"],x],[/(comodo_dragon)\/([\w\.]+)/i],[[m,/_/g," "],x],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?([\w\.]+)/i],[m,x],[/(dolfin)\/([\w\.]+)/i],[[m,"Dolphin"],x],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[m,"Chrome"],x],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[x,[m,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[x,[m,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[x,[m,"Facebook"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[x,[m,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[x,m],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[m,[x,I.str,D.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[m,x],[/(navigator|netscape)\/([\w\.-]+)/i],[[m,"Netscape"],x],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[m,x]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[x,[m,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[m,x],[/rv\:([\w\.]+).*(gecko)/i],[x,m]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[m,x],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[m,[x,I.str,D.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[m,"Windows"],[x,I.str,D.os.windows.version]],[/\((bb)(10);/i],[[m,"BlackBerry"],x],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[m,x],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[m,"Symbian"],x],[/\((series40);/i],[m],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[m,"Firefox OS"],x],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[m,x],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[m,"Chromium OS"],x],[/(sunos)\s?([\w\.]+\d)*/i],[[m,"Solaris"],x],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[m,x],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[m,"iOS"],[x,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[m,"Mac OS"],[x,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[m,x]]},P=function(T){var A=T||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:h);this.getBrowser=function(){return I.rgx.apply(this,k.browser)},this.getEngine=function(){return I.rgx.apply(this,k.engine)},this.getOS=function(){return I.rgx.apply(this,k.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS()}},this.getUA=function(){return A},this.setUA=function(C){return A=C,this},this.setUA(A)};return P}(),f=function(){var d={access_global_ns:function(){return!!window.moxie},define_property:function(){return!1}(),create_canvas:function(){var h=document.createElement("canvas"),c=!(!h.getContext||!h.getContext("2d"));return d.create_canvas=c,c},return_response_type:function(h){try{if(l.inArray(h,["","text","document"])!==-1)return!0;if(window.XMLHttpRequest){var c=new XMLHttpRequest;if(c.open("get","/"),"responseType"in c)return c.responseType=h,c.responseType===h}}catch{}return!1},use_blob_uri:function(){var h=window.URL;return d.use_blob_uri=h&&"createObjectURL"in h&&"revokeObjectURL"in h&&(g.browser!=="IE"||g.verComp(g.version,"11.0.46",">=")),d.use_blob_uri},use_data_uri:function(){var h=new Image;return h.onload=function(){d.use_data_uri=h.width===1&&h.height===1},setTimeout(function(){h.src="data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="},1),!1}(),use_data_uri_over32kb:function(){return d.use_data_uri&&(g.browser!=="IE"||g.version>=9)},use_data_uri_of:function(h){return d.use_data_uri&&33e3>h||d.use_data_uri_over32kb()},use_fileinput:function(){if(navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/))return!1;var h=document.createElement("input");return h.setAttribute("type","file"),d.use_fileinput=!h.disabled},use_webgl:function(){var h,c=document.createElement("canvas"),b=null;try{b=c.getContext("webgl")||c.getContext("experimental-webgl")}catch{}return b||(b=null),h=!!b,d.use_webgl=h,c=i,h}};return function(h){var c=[].slice.call(arguments);return c.shift(),l.typeOf(d[h])==="function"?d[h].apply(this,c):!!d[h]}}(),o=new a().getResult(),g={can:f,uaParser:a,browser:o.browser.name,version:o.browser.version,os:o.os.name,osVersion:o.os.version,verComp:r,swf_url:"../flash/Moxie.swf",xap_url:"../silverlight/Moxie.xap",global_event_dispatcher:"moxie.core.EventTarget.instance.dispatchEvent"};return g.OS=g.os,g}),s("moxie/core/Exceptions",["moxie/core/utils/Basic"],function(l){function r(a,f){var o;for(o in a)if(a[o]===f)return o;return null}return{RuntimeError:function(){function a(o,g){this.code=o,this.name=r(f,o),this.message=this.name+(g||": RuntimeError "+this.code)}var f={NOT_INIT_ERR:1,EXCEPTION_ERR:3,NOT_SUPPORTED_ERR:9,JS_ERR:4};return l.extend(a,f),a.prototype=Error.prototype,a}(),OperationNotAllowedException:function(){function a(f){this.code=f,this.name="OperationNotAllowedException"}return l.extend(a,{NOT_ALLOWED_ERR:1}),a.prototype=Error.prototype,a}(),ImageError:function(){function a(o){this.code=o,this.name=r(f,o),this.message=this.name+": ImageError "+this.code}var f={WRONG_FORMAT:1,MAX_RESOLUTION_ERR:2,INVALID_META_ERR:3};return l.extend(a,f),a.prototype=Error.prototype,a}(),FileException:function(){function a(o){this.code=o,this.name=r(f,o),this.message=this.name+": FileException "+this.code}var f={NOT_FOUND_ERR:1,SECURITY_ERR:2,ABORT_ERR:3,NOT_READABLE_ERR:4,ENCODING_ERR:5,NO_MODIFICATION_ALLOWED_ERR:6,INVALID_STATE_ERR:7,SYNTAX_ERR:8};return l.extend(a,f),a.prototype=Error.prototype,a}(),DOMException:function(){function a(o){this.code=o,this.name=r(f,o),this.message=this.name+": DOMException "+this.code}var f={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};return l.extend(a,f),a.prototype=Error.prototype,a}(),EventException:function(){function a(f){this.code=f,this.name="EventException"}return l.extend(a,{UNSPECIFIED_EVENT_TYPE_ERR:0}),a.prototype=Error.prototype,a}()}}),s("moxie/core/utils/Dom",["moxie/core/utils/Env"],function(l){var r=function(c){return typeof c!="string"?c:document.getElementById(c)},a=function(c,b){if(!c.className)return!1;var S=new RegExp("(^|\\s+)"+b+"(\\s+|$)");return S.test(c.className)},f=function(c,b){a(c,b)||(c.className=c.className?c.className.replace(/\s+$/,"")+" "+b:b)},o=function(c,b){if(c.className){var S=new RegExp("(^|\\s+)"+b+"(\\s+|$)");c.className=c.className.replace(S,function(p,m,x){return m===" "&&x===" "?" ":""})}},g=function(c,b){return c.currentStyle?c.currentStyle[b]:window.getComputedStyle?window.getComputedStyle(c,null)[b]:void 0},d=function(c,b){function S(k){var P,T,A=0,C=0;return k&&(T=k.getBoundingClientRect(),P=D.compatMode==="CSS1Compat"?D.documentElement:D.body,A=T.left+P.scrollLeft,C=T.top+P.scrollTop),{x:A,y:C}}var p,m,x,v=0,I=0,D=document;if(c=c,b=b||D.body,c&&c.getBoundingClientRect&&l.browser==="IE"&&(!D.documentMode||D.documentMode<8))return m=S(c),x=S(b),{x:m.x-x.x,y:m.y-x.y};for(p=c;p&&p!=b&&p.nodeType;)v+=p.offsetLeft||0,I+=p.offsetTop||0,p=p.offsetParent;for(p=c.parentNode;p&&p!=b&&p.nodeType;)v-=p.scrollLeft||0,I-=p.scrollTop||0,p=p.parentNode;return{x:v,y:I}},h=function(c){return{w:c.offsetWidth||c.clientWidth,h:c.offsetHeight||c.clientHeight}};return{get:r,hasClass:a,addClass:f,removeClass:o,getStyle:g,getPos:d,getSize:h}}),s("moxie/core/EventTarget",["moxie/core/utils/Env","moxie/core/Exceptions","moxie/core/utils/Basic"],function(l,r,a){function f(){this.uid=a.guid()}var o={};return a.extend(f.prototype,{init:function(){this.uid||(this.uid=a.guid("uid_"))},addEventListener:function(g,d,h,c){var b,S=this;return this.hasOwnProperty("uid")||(this.uid=a.guid("uid_")),g=a.trim(g),/\s/.test(g)?(a.each(g.split(/\s+/),function(p){S.addEventListener(p,d,h,c)}),void 0):(g=g.toLowerCase(),h=parseInt(h,10)||0,b=o[this.uid]&&o[this.uid][g]||[],b.push({fn:d,priority:h,scope:c||this}),o[this.uid]||(o[this.uid]={}),o[this.uid][g]=b,void 0)},hasEventListener:function(g){var d;return g?(g=g.toLowerCase(),d=o[this.uid]&&o[this.uid][g]):d=o[this.uid],d||!1},removeEventListener:function(g,d){var h,c,b=this;if(g=g.toLowerCase(),/\s/.test(g))return a.each(g.split(/\s+/),function(S){b.removeEventListener(S,d)}),void 0;if(h=o[this.uid]&&o[this.uid][g]){if(d){for(c=h.length-1;c>=0;c--)if(h[c].fn===d){h.splice(c,1);break}}else h=[];h.length||(delete o[this.uid][g],a.isEmptyObj(o[this.uid])&&delete o[this.uid])}},removeAllEventListeners:function(){o[this.uid]&&delete o[this.uid]},dispatchEvent:function(g){var d,h,c,b,S,p={},m=!0;if(a.typeOf(g)!=="string"){if(b=g,a.typeOf(b.type)!=="string")throw new r.EventException(r.EventException.UNSPECIFIED_EVENT_TYPE_ERR);g=b.type,b.total!==S&&b.loaded!==S&&(p.total=b.total,p.loaded=b.loaded),p.async=b.async||!1}if(g.indexOf("::")!==-1?function(v){d=v[0],g=v[1]}(g.split("::")):d=this.uid,g=g.toLowerCase(),h=o[d]&&o[d][g]){h.sort(function(v,I){return I.priority-v.priority}),c=[].slice.call(arguments),c.shift(),p.type=g,c.unshift(p);var x=[];a.each(h,function(v){c[0].target=v.scope,p.async?x.push(function(I){setTimeout(function(){I(v.fn.apply(v.scope,c)===!1)},1)}):x.push(function(I){I(v.fn.apply(v.scope,c)===!1)})}),x.length&&a.inSeries(x,function(v){m=!v})}return m},bindOnce:function(g,d,h,c){var b=this;b.bind.call(this,g,function S(){return b.unbind(g,S),d.apply(this,arguments)},h,c)},bind:function(){this.addEventListener.apply(this,arguments)},unbind:function(){this.removeEventListener.apply(this,arguments)},unbindAll:function(){this.removeAllEventListeners.apply(this,arguments)},trigger:function(){return this.dispatchEvent.apply(this,arguments)},handleEventProps:function(g){var d=this;this.bind(g.join(" "),function(h){var c="on"+h.type.toLowerCase();a.typeOf(this[c])==="function"&&this[c].apply(this,arguments)}),a.each(g,function(h){h="on"+h.toLowerCase(h),a.typeOf(d[h])==="undefined"&&(d[h]=null)})}}),f.instance=new f,f}),s("moxie/runtime/Runtime",["moxie/core/utils/Env","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/EventTarget"],function(l,r,a,f){function o(h,c,b,S,p){var m,x=this,v=r.guid(c+"_"),I=p||"browser";h=h||{},d[v]=this,b=r.extend({access_binary:!1,access_image_binary:!1,display_media:!1,do_cors:!1,drag_and_drop:!1,filter_by_extension:!0,resize_image:!1,report_upload_progress:!1,return_response_headers:!1,return_response_type:!1,return_status_code:!0,send_custom_headers:!1,select_file:!1,select_folder:!1,select_multiple:!0,send_binary_string:!1,send_browser_cookies:!0,send_multipart:!0,slice_blob:!1,stream_upload:!1,summon_file_dialog:!1,upload_filesize:!0,use_http_method:!0},b),h.preferred_caps&&(I=o.getMode(S,h.preferred_caps,I)),m=function(){var D={};return{exec:function(k,P,T,A){return m[P]&&(D[k]||(D[k]={context:this,instance:new m[P]}),D[k].instance[T])?D[k].instance[T].apply(this,A):void 0},removeInstance:function(k){delete D[k]},removeAllInstances:function(){var k=this;r.each(D,function(P,T){r.typeOf(P.instance.destroy)==="function"&&P.instance.destroy.call(P.context),k.removeInstance(T)})}}}(),r.extend(this,{initialized:!1,uid:v,type:c,mode:o.getMode(S,h.required_caps,I),shimid:v+"_container",clients:0,options:h,can:function(D,k){var P=arguments[2]||b;if(r.typeOf(D)==="string"&&r.typeOf(k)==="undefined"&&(D=o.parseCaps(D)),r.typeOf(D)==="object"){for(var T in D)if(!this.can(T,D[T],P))return!1;return!0}return r.typeOf(P[D])==="function"?P[D].call(this,k):k===P[D]},getShimContainer:function(){var D,k=a.get(this.shimid);return k||(D=a.get(this.options.container)||document.body,k=document.createElement("div"),k.id=this.shimid,k.className="moxie-shim moxie-shim-"+this.type,r.extend(k.style,{position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),D.appendChild(k),D=null),k},getShim:function(){return m},shimExec:function(D,k){var P=[].slice.call(arguments,2);return x.getShim().exec.call(this,this.uid,D,k,P)},exec:function(D,k){var P=[].slice.call(arguments,2);return x[D]&&x[D][k]?x[D][k].apply(this,P):x.shimExec.apply(this,arguments)},destroy:function(){if(x){var D=a.get(this.shimid);D&&D.parentNode.removeChild(D),m&&m.removeAllInstances(),this.unbindAll(),delete d[this.uid],this.uid=null,v=x=m=D=null}}}),this.mode&&h.required_caps&&!this.can(h.required_caps)&&(this.mode=!1)}var g={},d={};return o.order="html5,flash,silverlight,html4",o.getRuntime=function(h){return d[h]?d[h]:!1},o.addConstructor=function(h,c){c.prototype=f.instance,g[h]=c},o.getConstructor=function(h){return g[h]||null},o.getInfo=function(h){var c=o.getRuntime(h);return c?{uid:c.uid,type:c.type,mode:c.mode,can:function(){return c.can.apply(c,arguments)}}:null},o.parseCaps=function(h){var c={};return r.typeOf(h)!=="string"?h||{}:(r.each(h.split(","),function(b){c[b]=!0}),c)},o.can=function(h,c){var b,S,p=o.getConstructor(h);return p?(b=new p({required_caps:c}),S=b.mode,b.destroy(),!!S):!1},o.thatCan=function(h,c){var b=(c||o.order).split(/\s*,\s*/);for(var S in b)if(o.can(b[S],h))return b[S];return null},o.getMode=function(h,c,b){var S=null;if(r.typeOf(b)==="undefined"&&(b="browser"),c&&!r.isEmptyObj(h)){if(r.each(c,function(p,m){if(h.hasOwnProperty(m)){var x=h[m](p);if(typeof x=="string"&&(x=[x]),S){if(!(S=r.arrayIntersect(S,x)))return S=!1}else S=x}}),S)return r.inArray(b,S)!==-1?b:S[0];if(S===!1)return!1}return b},o.getGlobalEventTarget=function(){if(/^moxie\./.test(l.global_event_dispatcher)&&!l.can("access_global_ns")){var h=r.guid("moxie_event_target_");window[h]=function(c,b){f.instance.dispatchEvent(c,b)},l.global_event_dispatcher=h}return l.global_event_dispatcher},o.capTrue=function(){return!0},o.capFalse=function(){return!1},o.capTest=function(h){return function(){return!!h}},o}),s("moxie/runtime/RuntimeClient",["moxie/core/utils/Env","moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/Runtime"],function(l,r,a,f){return function(){var o;a.extend(this,{connectRuntime:function(g){function d(b){var S,p;return b.length?(S=b.shift().toLowerCase(),(p=f.getConstructor(S))?(o=new p(g),o.bind("Init",function(){o.initialized=!0,setTimeout(function(){o.clients++,c.ruid=o.uid,c.trigger("RuntimeInit",o)},1)}),o.bind("Error",function(){o.destroy(),d(b)}),o.bind("Exception",function(m,x){var v=x.name+"(#"+x.code+")"+(x.message?", from: "+x.message:"");c.trigger("RuntimeError",new r.RuntimeError(r.RuntimeError.EXCEPTION_ERR,v))}),o.mode?(o.init(),void 0):(o.trigger("Error"),void 0)):(d(b),void 0)):(c.trigger("RuntimeError",new r.RuntimeError(r.RuntimeError.NOT_INIT_ERR)),o=null,void 0)}var h,c=this;if(a.typeOf(g)==="string"?h=g:a.typeOf(g.ruid)==="string"&&(h=g.ruid),h){if(o=f.getRuntime(h))return c.ruid=h,o.clients++,o;throw new r.RuntimeError(r.RuntimeError.NOT_INIT_ERR)}d((g.runtime_order||f.order).split(/\s*,\s*/))},disconnectRuntime:function(){o&&--o.clients<=0&&o.destroy(),o=null},getRuntime:function(){return o&&o.uid?o:o=null},exec:function(){return o?o.exec.apply(this,arguments):null},can:function(g){return o?o.can(g):!1}})}}),s("moxie/file/Blob",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient"],function(l,r,a){function f(g,d){function h(c,b,S){var p,m=o[this.uid];return l.typeOf(m)==="string"&&m.length?(p=new f(null,{type:S,size:b-c}),p.detach(m.substr(c,p.size)),p):null}a.call(this),g&&this.connectRuntime(g),d?l.typeOf(d)==="string"&&(d={data:d}):d={},l.extend(this,{uid:d.uid||l.guid("uid_"),ruid:g,size:d.size||0,type:d.type||"",slice:function(c,b,S){return this.isDetached()?h.apply(this,arguments):this.getRuntime().exec.call(this,"Blob","slice",this.getSource(),c,b,S)},getSource:function(){return o[this.uid]?o[this.uid]:null},detach:function(c){if(this.ruid&&(this.getRuntime().exec.call(this,"Blob","destroy"),this.disconnectRuntime(),this.ruid=null),c=c||"",c.substr(0,5)=="data:"){var b=c.indexOf(";base64,");this.type=c.substring(5,b),c=r.atob(c.substring(b+8))}this.size=c.length,o[this.uid]=c},isDetached:function(){return!this.ruid&&l.typeOf(o[this.uid])==="string"},destroy:function(){this.detach(),delete o[this.uid]}}),d.data?this.detach(d.data):o[this.uid]=d}var o={};return f}),s("moxie/core/I18n",["moxie/core/utils/Basic"],function(l){var r={};return{addI18n:function(a){return l.extend(r,a)},translate:function(a){return r[a]||a},_:function(a){return this.translate(a)},sprintf:function(a){var f=[].slice.call(arguments,1);return a.replace(/%[a-z]/g,function(){var o=f.shift();return l.typeOf(o)!=="undefined"?o:""})}}}),s("moxie/core/utils/Mime",["moxie/core/utils/Basic","moxie/core/I18n"],function(l,r){var a="application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb xlt xla,application/vnd.ms-powerpoint,ppt pps pot ppa,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe",f={},o={},g=function(p){var m,x,v,I=p.split(/,/);for(m=0;m<I.length;m+=2){for(v=I[m+1].split(/ /),x=0;x<v.length;x++)f[v[x]]=I[m];o[I[m]]=v}},d=function(p,m){var x,v,I,D,k=[];for(v=0;v<p.length;v++)for(x=p[v].extensions.toLowerCase().split(/\s*,\s*/),I=0;I<x.length;I++){if(x[I]==="*")return[];if(D=k[x[I]],m&&/^\w+$/.test(x[I]))k.push("."+x[I]);else if(D&&l.inArray(D,k)===-1)k.push(D);else if(!D)return[]}return k},h=function(p){var m=[];return l.each(p,function(x){if(x=x.toLowerCase(),x==="*")return m=[],!1;var v=x.match(/^(\w+)\/(\*|\w+)$/);v&&(v[2]==="*"?l.each(o,function(I,D){new RegExp("^"+v[1]+"/").test(D)&&[].push.apply(m,o[D])}):o[x]&&[].push.apply(m,o[x]))}),m},c=function(p){var m=[],x=[];return l.typeOf(p)==="string"&&(p=l.trim(p).split(/\s*,\s*/)),x=h(p),m.push({title:r.translate("Files"),extensions:x.length?x.join(","):"*"}),m},b=function(p){var m=p&&p.match(/\.([^.]+)$/);return m?m[1].toLowerCase():""},S=function(p){return f[b(p)]||""};return g(a),{mimes:f,extensions:o,addMimeType:g,extList2mimes:d,mimes2exts:h,mimes2extList:c,getFileExtension:b,getFileMime:S}}),s("moxie/file/FileInput",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Mime","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/I18n","moxie/runtime/Runtime","moxie/runtime/RuntimeClient"],function(l,r,a,f,o,g,d,h,c){function b(p){var m,x,v;if(l.inArray(l.typeOf(p),["string","node"])!==-1&&(p={browse_button:p}),x=f.get(p.browse_button),!x)throw new o.DOMException(o.DOMException.NOT_FOUND_ERR);v={accept:[{title:d.translate("All Files"),extensions:"*"}],multiple:!1,required_caps:!1,container:x.parentNode||document.body},p=l.extend({},v,p),typeof p.required_caps=="string"&&(p.required_caps=h.parseCaps(p.required_caps)),typeof p.accept=="string"&&(p.accept=a.mimes2extList(p.accept)),m=f.get(p.container),m||(m=document.body),f.getStyle(m,"position")==="static"&&(m.style.position="relative"),m=x=null,c.call(this),l.extend(this,{uid:l.guid("uid_"),ruid:null,shimid:null,files:null,init:function(){var I=this;I.bind("RuntimeInit",function(D,k){I.ruid=k.uid,I.shimid=k.shimid,I.bind("Ready",function(){I.trigger("Refresh")},999),I.bind("Refresh",function(){var P,T,A,C,R;A=f.get(p.browse_button),C=f.get(k.shimid),A&&(P=f.getPos(A,f.get(p.container)),T=f.getSize(A),R=parseInt(f.getStyle(A,"z-index"),10)||0,C&&l.extend(C.style,{top:P.y+"px",left:P.x+"px",width:T.w+"px",height:T.h+"px",zIndex:R+1})),C=A=null}),k.exec.call(I,"FileInput","init",p)}),I.connectRuntime(l.extend({},p,{required_caps:{select_file:!0}}))},getOption:function(I){return p[I]},setOption:function(I,D){if(p.hasOwnProperty(I)){var k=p[I];switch(I){case"accept":typeof D=="string"&&(D=a.mimes2extList(D));break;case"container":case"required_caps":throw new o.FileException(o.FileException.NO_MODIFICATION_ALLOWED_ERR)}p[I]=D,this.exec("FileInput","setOption",I,D),this.trigger("OptionChanged",I,D,k)}},disable:function(I){var D=this.getRuntime();D&&this.exec("FileInput","disable",l.typeOf(I)==="undefined"?!0:I)},refresh:function(){this.trigger("Refresh")},destroy:function(){var I=this.getRuntime();I&&(I.exec.call(this,"FileInput","destroy"),this.disconnectRuntime()),l.typeOf(this.files)==="array"&&l.each(this.files,function(D){D.destroy()}),this.files=null,this.unbindAll()}}),this.handleEventProps(S)}var S=["ready","change","cancel","mouseenter","mouseleave","mousedown","mouseup"];return b.prototype=g.instance,b}),s("moxie/file/File",["moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/file/Blob"],function(l,r,a){function f(o,g){g||(g={}),a.apply(this,arguments),this.type||(this.type=r.getFileMime(g.name));var d;if(g.name)d=g.name.replace(/\\/g,"/"),d=d.substr(d.lastIndexOf("/")+1);else if(this.type){var h=this.type.split("/")[0];d=l.guid((h!==""?h:"file")+"_"),r.extensions[this.type]&&(d+="."+r.extensions[this.type][0])}l.extend(this,{name:d||l.guid("file_"),relativePath:"",lastModifiedDate:g.lastModifiedDate||new Date().toLocaleString()})}return f.prototype=a.prototype,f}),s("moxie/file/FileDrop",["moxie/core/I18n","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/utils/Basic","moxie/core/utils/Env","moxie/file/File","moxie/runtime/RuntimeClient","moxie/core/EventTarget","moxie/core/utils/Mime"],function(l,r,a,f,o,g,d,h,c){function b(p){var m,x=this;typeof p=="string"&&(p={drop_zone:p}),m={accept:[{title:l.translate("All Files"),extensions:"*"}],required_caps:{drag_and_drop:!0}},p=typeof p=="object"?f.extend({},m,p):m,p.container=r.get(p.drop_zone)||document.body,r.getStyle(p.container,"position")==="static"&&(p.container.style.position="relative"),typeof p.accept=="string"&&(p.accept=c.mimes2extList(p.accept)),d.call(x),f.extend(x,{uid:f.guid("uid_"),ruid:null,files:null,init:function(){x.bind("RuntimeInit",function(v,I){x.ruid=I.uid,I.exec.call(x,"FileDrop","init",p),x.dispatchEvent("ready")}),x.connectRuntime(p)},destroy:function(){var v=this.getRuntime();v&&(v.exec.call(this,"FileDrop","destroy"),this.disconnectRuntime()),this.files=null,this.unbindAll()}}),this.handleEventProps(S)}var S=["ready","dragenter","dragleave","drop","error"];return b.prototype=h.instance,b}),s("moxie/file/FileReader",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/core/Exceptions","moxie/core/EventTarget","moxie/file/Blob","moxie/runtime/RuntimeClient"],function(l,r,a,f,o,g){function d(){function c(b,S){if(this.trigger("loadstart"),this.readyState===d.LOADING)return this.trigger("error",new a.DOMException(a.DOMException.INVALID_STATE_ERR)),this.trigger("loadend"),void 0;if(!(S instanceof o))return this.trigger("error",new a.DOMException(a.DOMException.NOT_FOUND_ERR)),this.trigger("loadend"),void 0;if(this.result=null,this.readyState=d.LOADING,S.isDetached()){var p=S.getSource();switch(b){case"readAsText":case"readAsBinaryString":this.result=p;break;case"readAsDataURL":this.result="data:"+S.type+";base64,"+r.btoa(p)}this.readyState=d.DONE,this.trigger("load"),this.trigger("loadend")}else this.connectRuntime(S.ruid),this.exec("FileReader","read",b,S)}g.call(this),l.extend(this,{uid:l.guid("uid_"),readyState:d.EMPTY,result:null,error:null,readAsBinaryString:function(b){c.call(this,"readAsBinaryString",b)},readAsDataURL:function(b){c.call(this,"readAsDataURL",b)},readAsText:function(b){c.call(this,"readAsText",b)},abort:function(){this.result=null,l.inArray(this.readyState,[d.EMPTY,d.DONE])===-1&&(this.readyState===d.LOADING&&(this.readyState=d.DONE),this.exec("FileReader","abort"),this.trigger("abort"),this.trigger("loadend"))},destroy:function(){this.abort(),this.exec("FileReader","destroy"),this.disconnectRuntime(),this.unbindAll()}}),this.handleEventProps(h),this.bind("Error",function(b,S){this.readyState=d.DONE,this.error=S},999),this.bind("Load",function(){this.readyState=d.DONE},999)}var h=["loadstart","progress","load","abort","error","loadend"];return d.EMPTY=0,d.LOADING=1,d.DONE=2,d.prototype=f.instance,d}),s("moxie/core/utils/Url",["moxie/core/utils/Basic"],function(l){var r=function(o,g){var d,h=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],c=h.length,b={http:80,https:443},S={},p=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@\/]*):?([^:@\/]*))?@)?(\[[\da-fA-F:]+\]|[^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,m=p.exec(o||""),x=/^\/\/\w/.test(o);switch(l.typeOf(g)){case"undefined":g=r(document.location.href,!1);break;case"string":g=r(g,!1)}for(;c--;)m[c]&&(S[h[c]]=m[c]);if(d=!x&&!S.scheme,(x||d)&&(S.scheme=g.scheme),d){S.host=g.host,S.port=g.port;var v="";/^[^\/]/.test(S.path)&&(v=g.path,v=/\/[^\/]*\.[^\/]*$/.test(v)?v.replace(/\/[^\/]+$/,"/"):v.replace(/\/?$/,"/")),S.path=v+(S.path||"")}return S.port||(S.port=b[S.scheme]||80),S.port=parseInt(S.port,10),S.path||(S.path="/"),delete S.source,S},a=function(o){var g={http:80,https:443},d=typeof o=="object"?o:r(o);return d.scheme+"://"+d.host+(d.port!==g[d.scheme]?":"+d.port:"")+d.path+(d.query?d.query:"")},f=function(o){function g(d){return[d.scheme,d.host,d.port].join("/")}return typeof o=="string"&&(o=r(o)),g(r())===g(o)};return{parseUrl:r,resolveUrl:a,hasSameOrigin:f}}),s("moxie/runtime/RuntimeTarget",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(l,r,a){function f(){this.uid=l.guid("uid_"),r.call(this),this.destroy=function(){this.disconnectRuntime(),this.unbindAll()}}return f.prototype=a.instance,f}),s("moxie/file/FileReaderSync",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/utils/Encode"],function(l,r,a){return function(){function f(o,g){if(!g.isDetached()){var d=this.connectRuntime(g.ruid).exec.call(this,"FileReaderSync","read",o,g);return this.disconnectRuntime(),d}var h=g.getSource();switch(o){case"readAsBinaryString":return h;case"readAsDataURL":return"data:"+g.type+";base64,"+a.btoa(h);case"readAsText":for(var c="",b=0,S=h.length;S>b;b++)c+=String.fromCharCode(h[b]);return c}}r.call(this),l.extend(this,{uid:l.guid("uid_"),readAsBinaryString:function(o){return f.call(this,"readAsBinaryString",o)},readAsDataURL:function(o){return f.call(this,"readAsDataURL",o)},readAsText:function(o){return f.call(this,"readAsText",o)}})}}),s("moxie/xhr/FormData",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/file/Blob"],function(l,r,a){function f(){var o,g=[];r.extend(this,{append:function(d,h){var c=this,b=r.typeOf(h);h instanceof a?o={name:d,value:h}:b==="array"?(d+="[]",r.each(h,function(S){c.append(d,S)})):b==="object"?r.each(h,function(S,p){c.append(d+"["+p+"]",S)}):b==="null"||b==="undefined"||b==="number"&&isNaN(h)?c.append(d,"false"):g.push({name:d,value:h.toString()})},hasBlob:function(){return!!this.getBlob()},getBlob:function(){return o&&o.value||null},getBlobName:function(){return o&&o.name||null},each:function(d){r.each(g,function(h){d(h.value,h.name)}),o&&d(o.value,o.name)},destroy:function(){o=null,g=[]}})}return f}),s("moxie/xhr/XMLHttpRequest",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/utils/Encode","moxie/core/utils/Url","moxie/runtime/Runtime","moxie/runtime/RuntimeTarget","moxie/file/Blob","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/core/utils/Env","moxie/core/utils/Mime"],function(l,r,a,f,o,g,d,h,c,b,S,p){function m(){this.uid=l.guid("uid_")}function x(){function D(H,z){return G.hasOwnProperty(H)?arguments.length===1?S.can("define_property")?G[H]:B[H]:(S.can("define_property")?G[H]=z:B[H]=z,void 0):void 0}function k(H){function z(){M&&(M.destroy(),M=null),Z.dispatchEvent("loadend"),Z=null}function W(J){M.bind("LoadStart",function(Y){D("readyState",x.LOADING),Z.dispatchEvent("readystatechange"),Z.dispatchEvent(Y),fe&&Z.upload.dispatchEvent(Y)}),M.bind("Progress",function(Y){D("readyState")!==x.LOADING&&(D("readyState",x.LOADING),Z.dispatchEvent("readystatechange")),Z.dispatchEvent(Y)}),M.bind("UploadProgress",function(Y){fe&&Z.upload.dispatchEvent({type:"progress",lengthComputable:!1,total:Y.total,loaded:Y.loaded})}),M.bind("Load",function(Y){D("readyState",x.DONE),D("status",Number(J.exec.call(M,"XMLHttpRequest","getStatus")||0)),D("statusText",v[D("status")]||""),D("response",J.exec.call(M,"XMLHttpRequest","getResponse",D("responseType"))),~l.inArray(D("responseType"),["text",""])?D("responseText",D("response")):D("responseType")==="document"&&D("responseXML",D("response")),Te=J.exec.call(M,"XMLHttpRequest","getAllResponseHeaders"),Z.dispatchEvent("readystatechange"),D("status")>0?(fe&&Z.upload.dispatchEvent(Y),Z.dispatchEvent(Y)):(be=!0,Z.dispatchEvent("error")),z()}),M.bind("Abort",function(Y){Z.dispatchEvent(Y),z()}),M.bind("Error",function(Y){be=!0,D("readyState",x.DONE),Z.dispatchEvent("readystatechange"),xe=!0,Z.dispatchEvent(Y),z()}),J.exec.call(M,"XMLHttpRequest","send",{url:T,method:A,async:$,user:C,password:R,headers:te,mimeType:X,encoding:V,responseType:Z.responseType,withCredentials:Z.withCredentials,options:ge},H)}var Z=this;new Date().getTime(),M=new d,typeof ge.required_caps=="string"&&(ge.required_caps=g.parseCaps(ge.required_caps)),ge.required_caps=l.extend({},ge.required_caps,{return_response_type:Z.responseType}),H instanceof b&&(ge.required_caps.send_multipart=!0),l.isEmptyObj(te)||(ge.required_caps.send_custom_headers=!0),oe||(ge.required_caps.do_cors=!0),ge.ruid?W(M.connectRuntime(ge)):(M.bind("RuntimeInit",function(J,Y){W(Y)}),M.bind("RuntimeError",function(J,Y){Z.dispatchEvent("RuntimeError",Y)}),M.connectRuntime(ge))}function P(){D("responseText",""),D("responseXML",null),D("response",null),D("status",0),D("statusText","")}var T,A,C,R,M,O,B=this,G={timeout:0,readyState:x.UNSENT,withCredentials:!1,status:0,statusText:"",responseType:"",responseXML:null,responseText:null,response:null},$=!0,te={},V=null,X=null,ie=!1,ne=!1,fe=!1,xe=!1,be=!1,oe=!1,ge={},Te="";l.extend(this,G,{uid:l.guid("uid_"),upload:new m,open:function(H,z,W,Z,J){var Y;if(!H||!z)throw new r.DOMException(r.DOMException.SYNTAX_ERR);if(/[\u0100-\uffff]/.test(H)||f.utf8_encode(H)!==H)throw new r.DOMException(r.DOMException.SYNTAX_ERR);if(~l.inArray(H.toUpperCase(),["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"])&&(A=H.toUpperCase()),~l.inArray(A,["CONNECT","TRACE","TRACK"]))throw new r.DOMException(r.DOMException.SECURITY_ERR);if(z=f.utf8_encode(z),Y=o.parseUrl(z),oe=o.hasSameOrigin(Y),T=o.resolveUrl(z),(Z||J)&&!oe)throw new r.DOMException(r.DOMException.INVALID_ACCESS_ERR);if(C=Z||Y.user,R=J||Y.pass,$=W||!0,$===!1&&(D("timeout")||D("withCredentials")||D("responseType")!==""))throw new r.DOMException(r.DOMException.INVALID_ACCESS_ERR);ie=!$,ne=!1,te={},P.call(this),D("readyState",x.OPENED),this.dispatchEvent("readystatechange")},setRequestHeader:function(H,z){var W=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];if(D("readyState")!==x.OPENED||ne)throw new r.DOMException(r.DOMException.INVALID_STATE_ERR);if(/[\u0100-\uffff]/.test(H)||f.utf8_encode(H)!==H)throw new r.DOMException(r.DOMException.SYNTAX_ERR);return H=l.trim(H).toLowerCase(),~l.inArray(H,W)||/^(proxy\-|sec\-)/.test(H)?!1:(te[H]?te[H]+=", "+z:te[H]=z,!0)},hasRequestHeader:function(H){return H&&te[H.toLowerCase()]||!1},getAllResponseHeaders:function(){return Te||""},getResponseHeader:function(H){return H=H.toLowerCase(),be||~l.inArray(H,["set-cookie","set-cookie2"])?null:Te&&Te!==""&&(O||(O={},l.each(Te.split(/\r\n/),function(z){var W=z.split(/:\s+/);W.length===2&&(W[0]=l.trim(W[0]),O[W[0].toLowerCase()]={header:W[0],value:l.trim(W[1])})})),O.hasOwnProperty(H))?O[H].header+": "+O[H].value:null},overrideMimeType:function(H){var z;if(~l.inArray(D("readyState"),[x.LOADING,x.DONE]))throw new r.DOMException(r.DOMException.INVALID_STATE_ERR);if(H=l.trim(H.toLowerCase()),/;/.test(H)&&(z=H.match(/^([^;]+)(?:;\scharset\=)?(.*)$/))&&(H=z[1],z[2]&&z[2]),!p.mimes[H])throw new r.DOMException(r.DOMException.SYNTAX_ERR)},send:function(H,z){if(ge=l.typeOf(z)==="string"?{ruid:z}:z||{},this.readyState!==x.OPENED||ne)throw new r.DOMException(r.DOMException.INVALID_STATE_ERR);if(H instanceof h)ge.ruid=H.ruid,X=H.type||"application/octet-stream";else if(H instanceof b){if(H.hasBlob()){var W=H.getBlob();ge.ruid=W.ruid,X=W.type||"application/octet-stream"}}else typeof H=="string"&&(V="UTF-8",X="text/plain;charset=UTF-8",H=f.utf8_encode(H));this.withCredentials||(this.withCredentials=ge.required_caps&&ge.required_caps.send_browser_cookies&&!oe),fe=!ie&&this.upload.hasEventListener(),be=!1,xe=!H,ie||(ne=!0),k.call(this,H)},abort:function(){if(be=!0,ie=!1,~l.inArray(D("readyState"),[x.UNSENT,x.OPENED,x.DONE]))D("readyState",x.UNSENT);else{if(D("readyState",x.DONE),ne=!1,!M)throw new r.DOMException(r.DOMException.INVALID_STATE_ERR);M.getRuntime().exec.call(M,"XMLHttpRequest","abort",xe),xe=!0}},destroy:function(){M&&(l.typeOf(M.destroy)==="function"&&M.destroy(),M=null),this.unbindAll(),this.upload&&(this.upload.unbindAll(),this.upload=null)}}),this.handleEventProps(I.concat(["readystatechange"])),this.upload.handleEventProps(I)}var v={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Reserved",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",510:"Not Extended"};m.prototype=a.instance;var I=["loadstart","progress","abort","error","load","timeout","loadend"];return x.UNSENT=0,x.OPENED=1,x.HEADERS_RECEIVED=2,x.LOADING=3,x.DONE=4,x.prototype=a.instance,x}),s("moxie/runtime/Transporter",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(l,r,a,f){function o(){function g(){p=m=0,S=this.result=null}function d(v,I){var D=this;b=I,D.bind("TransportingProgress",function(k){m=k.loaded,p>m&&l.inArray(D.state,[o.IDLE,o.DONE])===-1&&h.call(D)},999),D.bind("TransportingComplete",function(){m=p,D.state=o.DONE,S=null,D.result=b.exec.call(D,"Transporter","getAsBlob",v||"")},999),D.state=o.BUSY,D.trigger("TransportingStarted"),h.call(D)}function h(){var v,I=this,D=p-m;x>D&&(x=D),v=r.btoa(S.substr(m,x)),b.exec.call(I,"Transporter","receive",v,p)}var c,b,S,p,m,x;a.call(this),l.extend(this,{uid:l.guid("uid_"),state:o.IDLE,result:null,transport:function(v,I,D){var k=this;if(D=l.extend({chunk_size:204798},D),(c=D.chunk_size%3)&&(D.chunk_size+=3-c),x=D.chunk_size,g.call(this),S=v,p=v.length,l.typeOf(D)==="string"||D.ruid)d.call(k,I,this.connectRuntime(D));else{var P=function(T,A){k.unbind("RuntimeInit",P),d.call(k,I,A)};this.bind("RuntimeInit",P),this.connectRuntime(D)}},abort:function(){var v=this;v.state=o.IDLE,b&&(b.exec.call(v,"Transporter","clear"),v.trigger("TransportingAborted")),g.call(v)},destroy:function(){this.unbindAll(),b=null,this.disconnectRuntime(),g.call(this)}})}return o.IDLE=0,o.BUSY=1,o.DONE=2,o.prototype=f.instance,o}),s("moxie/image/Image",["moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/file/FileReaderSync","moxie/xhr/XMLHttpRequest","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/runtime/Transporter","moxie/core/utils/Env","moxie/core/EventTarget","moxie/file/Blob","moxie/file/File","moxie/core/utils/Encode"],function(l,r,a,f,o,g,d,h,c,b,S,p,m){function x(){function I(A){try{return A||(A=this.exec("Image","getInfo")),this.size=A.size,this.width=A.width,this.height=A.height,this.type=A.type,this.meta=A.meta,this.name===""&&(this.name=A.name),!0}catch(C){return this.trigger("error",C.code),!1}}function D(A){var C=l.typeOf(A);try{if(A instanceof x){if(!A.size)throw new a.DOMException(a.DOMException.INVALID_STATE_ERR);k.apply(this,arguments)}else if(A instanceof S){if(!~l.inArray(A.type,["image/jpeg","image/png"]))throw new a.ImageError(a.ImageError.WRONG_FORMAT);P.apply(this,arguments)}else if(l.inArray(C,["blob","file"])!==-1)D.call(this,new p(null,A),arguments[1]);else if(C==="string")A.substr(0,5)==="data:"?D.call(this,new S(null,{data:A}),arguments[1]):T.apply(this,arguments);else{if(C!=="node"||A.nodeName.toLowerCase()!=="img")throw new a.DOMException(a.DOMException.TYPE_MISMATCH_ERR);D.call(this,A.src,arguments[1])}}catch(R){this.trigger("error",R.code)}}function k(A,C){var R=this.connectRuntime(A.ruid);this.ruid=R.uid,R.exec.call(this,"Image","loadFromImage",A,l.typeOf(C)==="undefined"?!0:C)}function P(A,C){function R(O){M.ruid=O.uid,O.exec.call(M,"Image","loadFromBlob",A)}var M=this;M.name=A.name||"",A.isDetached()?(this.bind("RuntimeInit",function(O,B){R(B)}),C&&typeof C.required_caps=="string"&&(C.required_caps=g.parseCaps(C.required_caps)),this.connectRuntime(l.extend({required_caps:{access_image_binary:!0,resize_image:!0}},C))):R(this.connectRuntime(A.ruid))}function T(A,C){var R,M=this;R=new o,R.open("get",A),R.responseType="blob",R.onprogress=function(O){M.trigger(O)},R.onload=function(){P.call(M,R.response,!0)},R.onerror=function(O){M.trigger(O)},R.onloadend=function(){R.destroy()},R.bind("RuntimeError",function(O,B){M.trigger("RuntimeError",B)}),R.send(null,C)}d.call(this),l.extend(this,{uid:l.guid("uid_"),ruid:null,name:"",size:0,width:0,height:0,type:"",meta:{},clone:function(){this.load.apply(this,arguments)},load:function(){D.apply(this,arguments)},resize:function(A){var C,R,M=this,O={x:0,y:0,width:M.width,height:M.height},B=l.extendIf({width:M.width,height:M.height,type:M.type||"image/jpeg",quality:90,crop:!1,fit:!0,preserveHeaders:!0,resample:"default",multipass:!0},A);try{if(!M.size)throw new a.DOMException(a.DOMException.INVALID_STATE_ERR);if(M.width>x.MAX_RESIZE_WIDTH||M.height>x.MAX_RESIZE_HEIGHT)throw new a.ImageError(a.ImageError.MAX_RESOLUTION_ERR);if(C=M.meta&&M.meta.tiff&&M.meta.tiff.Orientation||1,l.inArray(C,[5,6,7,8])!==-1){var G=B.width;B.width=B.height,B.height=G}if(B.crop){switch(R=Math.max(B.width/M.width,B.height/M.height),A.fit?(O.width=Math.min(Math.ceil(B.width/R),M.width),O.height=Math.min(Math.ceil(B.height/R),M.height),R=B.width/O.width):(O.width=Math.min(B.width,M.width),O.height=Math.min(B.height,M.height),R=1),typeof B.crop=="boolean"&&(B.crop="cc"),B.crop.toLowerCase().replace(/_/,"-")){case"rb":case"right-bottom":O.x=M.width-O.width,O.y=M.height-O.height;break;case"cb":case"center-bottom":O.x=Math.floor((M.width-O.width)/2),O.y=M.height-O.height;break;case"lb":case"left-bottom":O.x=0,O.y=M.height-O.height;break;case"lt":case"left-top":O.x=0,O.y=0;break;case"ct":case"center-top":O.x=Math.floor((M.width-O.width)/2),O.y=0;break;case"rt":case"right-top":O.x=M.width-O.width,O.y=0;break;case"rc":case"right-center":case"right-middle":O.x=M.width-O.width,O.y=Math.floor((M.height-O.height)/2);break;case"lc":case"left-center":case"left-middle":O.x=0,O.y=Math.floor((M.height-O.height)/2);break;case"cc":case"center-center":case"center-middle":default:O.x=Math.floor((M.width-O.width)/2),O.y=Math.floor((M.height-O.height)/2)}O.x=Math.max(O.x,0),O.y=Math.max(O.y,0)}else R=Math.min(B.width/M.width,B.height/M.height),R>1&&!B.fit&&(R=1);this.exec("Image","resize",O,R,B)}catch($){M.trigger("error",$.code)}},downsize:function(A){var C,R={width:this.width,height:this.height,type:this.type||"image/jpeg",quality:90,crop:!1,fit:!1,preserveHeaders:!0,resample:"default"};C=typeof A=="object"?l.extend(R,A):l.extend(R,{width:arguments[0],height:arguments[1],crop:arguments[2],preserveHeaders:arguments[3]}),this.resize(C)},crop:function(A,C,R){this.downsize(A,C,!0,R)},getAsCanvas:function(){if(!c.can("create_canvas"))throw new a.RuntimeError(a.RuntimeError.NOT_SUPPORTED_ERR);return this.exec("Image","getAsCanvas")},getAsBlob:function(A,C){if(!this.size)throw new a.DOMException(a.DOMException.INVALID_STATE_ERR);return this.exec("Image","getAsBlob",A||"image/jpeg",C||90)},getAsDataURL:function(A,C){if(!this.size)throw new a.DOMException(a.DOMException.INVALID_STATE_ERR);return this.exec("Image","getAsDataURL",A||"image/jpeg",C||90)},getAsBinaryString:function(A,C){var R=this.getAsDataURL(A,C);return m.atob(R.substring(R.indexOf("base64,")+7))},embed:function(A,C){function R($,te){var V=this;if(c.can("create_canvas")){var X=V.getAsCanvas();if(X)return A.appendChild(X),X=null,V.destroy(),O.trigger("embedded"),void 0}var ie=V.getAsDataURL($,te);if(!ie)throw new a.ImageError(a.ImageError.WRONG_FORMAT);if(c.can("use_data_uri_of",ie.length))A.innerHTML='<img src="'+ie+'" width="'+V.width+'" height="'+V.height+'" alt="" />',V.destroy(),O.trigger("embedded");else{var ne=new h;ne.bind("TransportingComplete",function(){M=O.connectRuntime(this.result.ruid),O.bind("Embedded",function(){l.extend(M.getShimContainer().style,{top:"0px",left:"0px",width:V.width+"px",height:V.height+"px"}),M=null},999),M.exec.call(O,"ImageView","display",this.result.uid,width,height),V.destroy()}),ne.transport(m.atob(ie.substring(ie.indexOf("base64,")+7)),$,{required_caps:{display_media:!0},runtime_order:"flash,silverlight",container:A})}}var M,O=this,B=l.extend({width:this.width,height:this.height,type:this.type||"image/jpeg",quality:90,fit:!0,resample:"nearest"},C);try{if(!(A=r.get(A)))throw new a.DOMException(a.DOMException.INVALID_NODE_TYPE_ERR);if(!this.size)throw new a.DOMException(a.DOMException.INVALID_STATE_ERR);this.width>x.MAX_RESIZE_WIDTH||this.height>x.MAX_RESIZE_HEIGHT;var G=new x;return G.bind("Resize",function(){R.call(this,B.type,B.quality)}),G.bind("Load",function(){this.downsize(B)}),this.meta.thumb&&this.meta.thumb.width>=B.width&&this.meta.thumb.height>=B.height?G.load(this.meta.thumb.data):G.clone(this,!1),G}catch($){this.trigger("error",$.code)}},destroy:function(){this.ruid&&(this.getRuntime().exec.call(this,"Image","destroy"),this.disconnectRuntime()),this.meta&&this.meta.thumb&&this.meta.thumb.data.destroy(),this.unbindAll()}}),this.handleEventProps(v),this.bind("Load Resize",function(){return I.call(this)},999)}var v=["progress","load","error","resize","embedded"];return x.MAX_RESIZE_WIDTH=8192,x.MAX_RESIZE_HEIGHT=8192,x.prototype=b.instance,x}),s("moxie/runtime/html5/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(l,r,a,f){function o(h){var c=this,b=a.capTest,S=a.capTrue,p=l.extend({access_binary:b(window.FileReader||window.File&&window.File.getAsDataURL),access_image_binary:function(){return c.can("access_binary")&&!!d.Image},display_media:b((f.can("create_canvas")||f.can("use_data_uri_over32kb"))&&u("moxie/image/Image")),do_cors:b(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),drag_and_drop:b(function(){var m=document.createElement("div");return("draggable"in m||"ondragstart"in m&&"ondrop"in m)&&(f.browser!=="IE"||f.verComp(f.version,9,">"))}()),filter_by_extension:b(function(){return!(f.browser==="Chrome"&&f.verComp(f.version,28,"<")||f.browser==="IE"&&f.verComp(f.version,10,"<")||f.browser==="Safari"&&f.verComp(f.version,7,"<")||f.browser==="Firefox"&&f.verComp(f.version,37,"<"))}()),return_response_headers:S,return_response_type:function(m){return m==="json"&&window.JSON?!0:f.can("return_response_type",m)},return_status_code:S,report_upload_progress:b(window.XMLHttpRequest&&new XMLHttpRequest().upload),resize_image:function(){return c.can("access_binary")&&f.can("create_canvas")},select_file:function(){return f.can("use_fileinput")&&window.File},select_folder:function(){return c.can("select_file")&&(f.browser==="Chrome"&&f.verComp(f.version,21,">=")||f.browser==="Firefox"&&f.verComp(f.version,42,">="))},select_multiple:function(){return!(!c.can("select_file")||f.browser==="Safari"&&f.os==="Windows"||f.os==="iOS"&&f.verComp(f.osVersion,"7.0.0",">")&&f.verComp(f.osVersion,"8.0.0","<"))},send_binary_string:b(window.XMLHttpRequest&&(new XMLHttpRequest().sendAsBinary||window.Uint8Array&&window.ArrayBuffer)),send_custom_headers:b(window.XMLHttpRequest),send_multipart:function(){return!!(window.XMLHttpRequest&&new XMLHttpRequest().upload&&window.FormData)||c.can("send_binary_string")},slice_blob:b(window.File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),stream_upload:function(){return c.can("slice_blob")&&c.can("send_multipart")},summon_file_dialog:function(){return c.can("select_file")&&!(f.browser==="Firefox"&&f.verComp(f.version,4,"<")||f.browser==="Opera"&&f.verComp(f.version,12,"<")||f.browser==="IE"&&f.verComp(f.version,10,"<"))},upload_filesize:S,use_http_method:S},arguments[2]);a.call(this,h,arguments[1]||g,p),l.extend(this,{init:function(){this.trigger("Init")},destroy:function(m){return function(){m.call(c),m=c=null}}(this.destroy)}),l.extend(this.getShim(),d)}var g="html5",d={};return a.addConstructor(g,o),d}),s("moxie/runtime/html5/file/Blob",["moxie/runtime/html5/Runtime","moxie/file/Blob"],function(l,r){function a(){function f(o,g,d){var h;if(!window.File.prototype.slice)return(h=window.File.prototype.webkitSlice||window.File.prototype.mozSlice)?h.call(o,g,d):null;try{return o.slice(),o.slice(g,d)}catch{return o.slice(g,d-g)}}this.slice=function(){return new r(this.getRuntime().uid,f.apply(this,arguments))},this.destroy=function(){this.getRuntime().getShim().removeInstance(this.uid)}}return l.Blob=a}),s("moxie/core/utils/Events",["moxie/core/utils/Basic"],function(l){function r(){this.returnValue=!1}function a(){this.cancelBubble=!0}var f={},o="moxie_"+l.guid(),g=function(c,b,S,p){var m,x;b=b.toLowerCase(),c.addEventListener?(m=S,c.addEventListener(b,m,!1)):c.attachEvent&&(m=function(){var v=window.event;v.target||(v.target=v.srcElement),v.preventDefault=r,v.stopPropagation=a,S(v)},c.attachEvent("on"+b,m)),c[o]||(c[o]=l.guid()),f.hasOwnProperty(c[o])||(f[c[o]]={}),x=f[c[o]],x.hasOwnProperty(b)||(x[b]=[]),x[b].push({func:m,orig:S,key:p})},d=function(c,b,S){var p,m;if(b=b.toLowerCase(),c[o]&&f[c[o]]&&f[c[o]][b]){p=f[c[o]][b];for(var x=p.length-1;x>=0&&(p[x].orig!==S&&p[x].key!==S||(c.removeEventListener?c.removeEventListener(b,p[x].func,!1):c.detachEvent&&c.detachEvent("on"+b,p[x].func),p[x].orig=null,p[x].func=null,p.splice(x,1),S===m));x--);if(p.length||delete f[c[o]][b],l.isEmptyObj(f[c[o]])){delete f[c[o]];try{delete c[o]}catch{c[o]=m}}}},h=function(c,b){c&&c[o]&&l.each(f[c[o]],function(S,p){d(c,p,b)})};return{addEvent:g,removeEvent:d,removeAllEvents:h}}),s("moxie/runtime/html5/file/FileInput",["moxie/runtime/html5/Runtime","moxie/file/File","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime","moxie/core/utils/Env"],function(l,r,a,f,o,g,d){function h(){var c,b;a.extend(this,{init:function(S){var p,m,x,v,I,D,k=this,P=k.getRuntime();c=S,x=g.extList2mimes(c.accept,P.can("filter_by_extension")),m=P.getShimContainer(),m.innerHTML='<input id="'+P.uid+'" type="file" style="font-size:999px;opacity:0;"'+(c.multiple&&P.can("select_multiple")?"multiple":"")+(c.directory&&P.can("select_folder")?"webkitdirectory directory":"")+(x?' accept="'+x.join(",")+'"':"")+" />",p=f.get(P.uid),a.extend(p.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),v=f.get(c.browse_button),b=f.getStyle(v,"z-index")||"auto",P.can("summon_file_dialog")&&(f.getStyle(v,"position")==="static"&&(v.style.position="relative"),o.addEvent(v,"click",function(T){var A=f.get(P.uid);A&&!A.disabled&&A.click(),T.preventDefault()},k.uid),k.bind("Refresh",function(){I=parseInt(b,10)||1,f.get(c.browse_button).style.zIndex=I,this.getRuntime().getShimContainer().style.zIndex=I-1})),D=P.can("summon_file_dialog")?v:m,o.addEvent(D,"mouseover",function(){k.trigger("mouseenter")},k.uid),o.addEvent(D,"mouseout",function(){k.trigger("mouseleave")},k.uid),o.addEvent(D,"mousedown",function(){k.trigger("mousedown")},k.uid),o.addEvent(f.get(c.container),"mouseup",function(){k.trigger("mouseup")},k.uid),(P.can("summon_file_dialog")?p:v).setAttribute("tabindex",-1),p.onchange=function T(){if(k.files=[],a.each(this.files,function(C){var R="";return c.directory&&C.name=="."?!0:(C.webkitRelativePath&&(R="/"+C.webkitRelativePath.replace(/^\//,"")),C=new r(P.uid,C),C.relativePath=R,k.files.push(C),void 0)}),d.browser!=="IE"&&d.browser!=="IEMobile")this.value="";else{var A=this.cloneNode(!0);this.parentNode.replaceChild(A,this),A.onchange=T}k.files.length&&k.trigger("change")},k.trigger({type:"ready",async:!0}),m=null},setOption:function(S,p){var m=this.getRuntime(),x=f.get(m.uid);switch(S){case"accept":if(p){var v=p.mimes||g.extList2mimes(p,m.can("filter_by_extension"));x.setAttribute("accept",v.join(","))}else x.removeAttribute("accept");break;case"directory":p&&m.can("select_folder")?(x.setAttribute("directory",""),x.setAttribute("webkitdirectory","")):(x.removeAttribute("directory"),x.removeAttribute("webkitdirectory"));break;case"multiple":p&&m.can("select_multiple")?x.setAttribute("multiple",""):x.removeAttribute("multiple")}},disable:function(S){var p,m=this.getRuntime();(p=f.get(m.uid))&&(p.disabled=!!S)},destroy:function(){var S=this.getRuntime(),p=S.getShim(),m=S.getShimContainer(),x=c&&f.get(c.container),v=c&&f.get(c.browse_button);x&&o.removeAllEvents(x,this.uid),v&&(o.removeAllEvents(v,this.uid),v.style.zIndex=b),m&&(o.removeAllEvents(m,this.uid),m.innerHTML=""),p.removeInstance(this.uid),c=m=x=v=p=null}})}return l.FileInput=h}),s("moxie/runtime/html5/file/FileDrop",["moxie/runtime/html5/Runtime","moxie/file/File","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime"],function(l,r,a,f,o,g){function d(){function h(T){if(!T.dataTransfer||!T.dataTransfer.types)return!1;var A=a.toArray(T.dataTransfer.types||[]);return a.inArray("Files",A)!==-1||a.inArray("public.file-url",A)!==-1||a.inArray("application/x-moz-file",A)!==-1}function c(T,A){if(S(T)){var C=new r(D,T);C.relativePath=A||"",k.push(C)}}function b(T){for(var A=[],C=0;C<T.length;C++)[].push.apply(A,T[C].extensions.split(/\s*,\s*/));return a.inArray("*",A)===-1?A:[]}function S(T){if(!P.length)return!0;var A=g.getFileExtension(T.name);return!A||a.inArray(A,P)!==-1}function p(T,A){var C=[];a.each(T,function(R){var M=R.webkitGetAsEntry();M&&(M.isFile?c(R.getAsFile(),M.fullPath):C.push(M))}),C.length?m(C,A):A()}function m(T,A){var C=[];a.each(T,function(R){C.push(function(M){x(R,M)})}),a.inSeries(C,function(){A()})}function x(T,A){T.isFile?T.file(function(C){c(C,T.fullPath),A()},function(){A()}):T.isDirectory?v(T,A):A()}function v(T,A){function C(O){M.readEntries(function(B){B.length?([].push.apply(R,B),C(O)):O()},O)}var R=[],M=T.createReader();C(function(){m(R,A)})}var I,D,k=[],P=[];a.extend(this,{init:function(T){var A,C=this;I=T,D=C.ruid,P=b(I.accept),A=I.container,o.addEvent(A,"dragover",function(R){h(R)&&(R.preventDefault(),R.dataTransfer.dropEffect="copy")},C.uid),o.addEvent(A,"drop",function(R){h(R)&&(R.preventDefault(),k=[],R.dataTransfer.items&&R.dataTransfer.items[0].webkitGetAsEntry?p(R.dataTransfer.items,function(){C.files=k,C.trigger("drop")}):(a.each(R.dataTransfer.files,function(M){c(M)}),C.files=k,C.trigger("drop")))},C.uid),o.addEvent(A,"dragenter",function(){C.trigger("dragenter")},C.uid),o.addEvent(A,"dragleave",function(){C.trigger("dragleave")},C.uid)},destroy:function(){o.removeAllEvents(I&&f.get(I.container),this.uid),D=k=P=I=null,this.getRuntime().getShim().removeInstance(this.uid)}})}return l.FileDrop=d}),s("moxie/runtime/html5/file/FileReader",["moxie/runtime/html5/Runtime","moxie/core/utils/Encode","moxie/core/utils/Basic"],function(l,r,a){function f(){function o(h){return r.atob(h.substring(h.indexOf("base64,")+7))}var g,d=!1;a.extend(this,{read:function(h,c){var b=this;b.result="",g=new window.FileReader,g.addEventListener("progress",function(S){b.trigger(S)}),g.addEventListener("load",function(S){b.result=d?o(g.result):g.result,b.trigger(S)}),g.addEventListener("error",function(S){b.trigger(S,g.error)}),g.addEventListener("loadend",function(S){g=null,b.trigger(S)}),a.typeOf(g[h])==="function"?(d=!1,g[h](c.getSource())):h==="readAsBinaryString"&&(d=!0,g.readAsDataURL(c.getSource()))},abort:function(){g&&g.abort()},destroy:function(){g=null,this.getRuntime().getShim().removeInstance(this.uid)}})}return l.FileReader=f}),s("moxie/runtime/html5/xhr/XMLHttpRequest",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/core/utils/Url","moxie/file/File","moxie/file/Blob","moxie/xhr/FormData","moxie/core/Exceptions","moxie/core/utils/Env"],function(l,r,a,f,o,g,d,h,c){function b(){function S(k,P){var T,A,C=this;T=P.getBlob().getSource(),A=new window.FileReader,A.onload=function(){P.append(P.getBlobName(),new g(null,{type:T.type,data:A.result})),D.send.call(C,k,P)},A.readAsBinaryString(T)}function p(){return!window.XMLHttpRequest||c.browser==="IE"&&c.verComp(c.version,8,"<")?function(){for(var k=["Msxml2.XMLHTTP.6.0","Microsoft.XMLHTTP"],P=0;P<k.length;P++)try{return new ActiveXObject(k[P])}catch{}}():new window.XMLHttpRequest}function m(k){var P=k.responseXML,T=k.responseText;return c.browser==="IE"&&T&&P&&!P.documentElement&&/[^\/]+\/[^\+]+\+xml/.test(k.getResponseHeader("Content-Type"))&&(P=new window.ActiveXObject("Microsoft.XMLDOM"),P.async=!1,P.validateOnParse=!1,P.loadXML(T)),P&&(c.browser==="IE"&&P.parseError!==0||!P.documentElement||P.documentElement.tagName==="parsererror")?null:P}function x(k){var P="----moxieboundary"+new Date().getTime(),T="--",A=`\r
`,C="",R=this.getRuntime();if(!R.can("send_binary_string"))throw new h.RuntimeError(h.RuntimeError.NOT_SUPPORTED_ERR);return v.setRequestHeader("Content-Type","multipart/form-data; boundary="+P),k.each(function(M,O){C+=M instanceof g?T+P+A+'Content-Disposition: form-data; name="'+O+'"; filename="'+unescape(encodeURIComponent(M.name||"blob"))+'"'+A+"Content-Type: "+(M.type||"application/octet-stream")+A+A+M.getSource()+A:T+P+A+'Content-Disposition: form-data; name="'+O+'"'+A+A+unescape(encodeURIComponent(M))+A}),C+=T+P+T+A}var v,I,D=this;r.extend(this,{send:function(k,P){var T=this,A=c.browser==="Mozilla"&&c.verComp(c.version,4,">=")&&c.verComp(c.version,7,"<"),C=c.browser==="Android Browser",R=!1;if(I=k.url.replace(/^.+?\/([\w\-\.]+)$/,"$1").toLowerCase(),v=p(),v.open(k.method,k.url,k.async,k.user,k.password),P instanceof g)P.isDetached()&&(R=!0),P=P.getSource();else if(P instanceof d){if(P.hasBlob()){if(P.getBlob().isDetached())P=x.call(T,P),R=!0;else if((A||C)&&r.typeOf(P.getBlob().getSource())==="blob"&&window.FileReader)return S.call(T,k,P),void 0}if(P instanceof d){var M=new window.FormData;P.each(function(O,B){O instanceof g?M.append(B,O.getSource()):M.append(B,O)}),P=M}}v.upload?(k.withCredentials&&(v.withCredentials=!0),v.addEventListener("load",function(O){T.trigger(O)}),v.addEventListener("error",function(O){T.trigger(O)}),v.addEventListener("progress",function(O){T.trigger(O)}),v.upload.addEventListener("progress",function(O){T.trigger({type:"UploadProgress",loaded:O.loaded,total:O.total})})):v.onreadystatechange=function(){switch(v.readyState){case 1:break;case 2:break;case 3:var O,B;try{f.hasSameOrigin(k.url)&&(O=v.getResponseHeader("Content-Length")||0),v.responseText&&(B=v.responseText.length)}catch{O=B=0}T.trigger({type:"progress",lengthComputable:!!O,total:parseInt(O,10),loaded:B});break;case 4:v.onreadystatechange=function(){};try{if(v.status>=200&&v.status<400){T.trigger("load");break}}catch{}T.trigger("error")}},r.isEmptyObj(k.headers)||r.each(k.headers,function(O,B){v.setRequestHeader(B,O)}),k.responseType!==""&&"responseType"in v&&(v.responseType=k.responseType!=="json"||c.can("return_response_type","json")?k.responseType:"text"),R?v.sendAsBinary?v.sendAsBinary(P):function(){for(var O=new Uint8Array(P.length),B=0;B<P.length;B++)O[B]=255&P.charCodeAt(B);v.send(O.buffer)}():v.send(P),T.trigger("loadstart")},getStatus:function(){try{if(v)return v.status}catch{}return 0},getResponse:function(k){var P=this.getRuntime();try{switch(k){case"blob":var T=new o(P.uid,v.response),A=v.getResponseHeader("Content-Disposition");if(A){var C=A.match(/filename=([\'\"'])([^\1]+)\1/);C&&(I=C[2])}return T.name=I,T.type||(T.type=a.getFileMime(I)),T;case"json":return c.can("return_response_type","json")?v.response:v.status===200&&window.JSON?JSON.parse(v.responseText):null;case"document":return m(v);default:return v.responseText!==""?v.responseText:null}}catch{return null}},getAllResponseHeaders:function(){try{return v.getAllResponseHeaders()}catch{}return""},abort:function(){v&&v.abort()},destroy:function(){D=I=null,this.getRuntime().getShim().removeInstance(this.uid)}})}return l.XMLHttpRequest=b}),s("moxie/runtime/html5/utils/BinaryReader",["moxie/core/utils/Basic"],function(l){function r(o){o instanceof ArrayBuffer?a.apply(this,arguments):f.apply(this,arguments)}function a(o){var g=new DataView(o);l.extend(this,{readByteAt:function(d){return g.getUint8(d)},writeByteAt:function(d,h){g.setUint8(d,h)},SEGMENT:function(d,h,c){switch(arguments.length){case 2:return o.slice(d,d+h);case 1:return o.slice(d);case 3:if(c===null&&(c=new ArrayBuffer),c instanceof ArrayBuffer){var b=new Uint8Array(this.length()-h+c.byteLength);d>0&&b.set(new Uint8Array(o.slice(0,d)),0),b.set(new Uint8Array(c),d),b.set(new Uint8Array(o.slice(d+h)),d+c.byteLength),this.clear(),o=b.buffer,g=new DataView(o);break}default:return o}},length:function(){return o?o.byteLength:0},clear:function(){g=o=null}})}function f(o){function g(d,h,c){c=arguments.length===3?c:o.length-h-1,o=o.substr(0,h)+d+o.substr(c+h)}l.extend(this,{readByteAt:function(d){return o.charCodeAt(d)},writeByteAt:function(d,h){g(String.fromCharCode(h),d,1)},SEGMENT:function(d,h,c){switch(arguments.length){case 1:return o.substr(d);case 2:return o.substr(d,h);case 3:g(c!==null?c:"",d,h);break;default:return o}},length:function(){return o?o.length:0},clear:function(){o=null}})}return l.extend(r.prototype,{littleEndian:!1,read:function(o,g){var d,h,c;if(o+g>this.length())throw new Error("You are trying to read outside the source boundaries.");for(h=this.littleEndian?0:-8*(g-1),c=0,d=0;g>c;c++)d|=this.readByteAt(o+c)<<Math.abs(h+8*c);return d},write:function(o,g,d){var h,c;if(o>this.length())throw new Error("You are trying to write outside the source boundaries.");for(h=this.littleEndian?0:-8*(d-1),c=0;d>c;c++)this.writeByteAt(o+c,255&g>>Math.abs(h+8*c))},BYTE:function(o){return this.read(o,1)},SHORT:function(o){return this.read(o,2)},LONG:function(o){return this.read(o,4)},SLONG:function(o){var g=this.read(o,4);return g>2147483647?g-4294967296:g},CHAR:function(o){return String.fromCharCode(this.read(o,1))},STRING:function(o,g){return this.asArray("CHAR",o,g).join("")},asArray:function(o,g,d){for(var h=[],c=0;d>c;c++)h[c]=this[o](g+c);return h}}),r}),s("moxie/runtime/html5/image/JPEGHeaders",["moxie/runtime/html5/utils/BinaryReader","moxie/core/Exceptions"],function(l,r){return function a(f){var o,g,d,h=[],c=0;if(o=new l(f),o.SHORT(0)!==65496)throw o.clear(),new r.ImageError(r.ImageError.WRONG_FORMAT);for(g=2;g<=o.length();)if(d=o.SHORT(g),d>=65488&&65495>=d)g+=2;else{if(d===65498||d===65497)break;c=o.SHORT(g+2)+2,d>=65505&&65519>=d&&h.push({hex:d,name:"APP"+(15&d),start:g,length:c,segment:o.SEGMENT(g,c)}),g+=c}return o.clear(),{headers:h,restore:function(b){var S,p,m;for(m=new l(b),g=m.SHORT(2)==65504?4+m.SHORT(4):2,p=0,S=h.length;S>p;p++)m.SEGMENT(g,0,h[p].segment),g+=h[p].length;return b=m.SEGMENT(),m.clear(),b},strip:function(b){var S,p,m,x;for(m=new a(b),p=m.headers,m.purge(),S=new l(b),x=p.length;x--;)S.SEGMENT(p[x].start,p[x].length,"");return b=S.SEGMENT(),S.clear(),b},get:function(b){for(var S=[],p=0,m=h.length;m>p;p++)h[p].name===b.toUpperCase()&&S.push(h[p].segment);return S},set:function(b,S){var p,m,x,v=[];for(typeof S=="string"?v.push(S):v=S,p=m=0,x=h.length;x>p&&(h[p].name===b.toUpperCase()&&(h[p].segment=v[m],h[p].length=v[m].length,m++),!(m>=v.length));p++);},purge:function(){this.headers=h=[]}}}}),s("moxie/runtime/html5/image/ExifParser",["moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader","moxie/core/Exceptions"],function(l,r,a){function f(o){function g(v,I){var D,k,P,T,A,C,R,M,O=this,B=[],G={},$={1:"BYTE",7:"UNDEFINED",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",9:"SLONG",10:"SRATIONAL"},te={BYTE:1,UNDEFINED:1,ASCII:1,SHORT:2,LONG:4,RATIONAL:8,SLONG:4,SRATIONAL:8};for(D=O.SHORT(v),k=0;D>k;k++)if(B=[],R=v+2+12*k,P=I[O.SHORT(R)],P!==i){if(T=$[O.SHORT(R+=2)],A=O.LONG(R+=2),C=te[T],!C)throw new a.ImageError(a.ImageError.INVALID_META_ERR);if(R+=4,C*A>4&&(R=O.LONG(R)+S.tiffHeader),R+C*A>=this.length())throw new a.ImageError(a.ImageError.INVALID_META_ERR);T!=="ASCII"?(B=O.asArray(T,R,A),M=A==1?B[0]:B,G[P]=b.hasOwnProperty(P)&&typeof M!="object"?b[P][M]:M):G[P]=l.trim(O.STRING(R,A).replace(/\0$/,""))}return G}function d(v,I,D){var k,P,T,A=0;if(typeof I=="string"){var C=c[v.toLowerCase()];for(var R in C)if(C[R]===I){I=R;break}}k=S[v.toLowerCase()+"IFD"],P=this.SHORT(k);for(var M=0;P>M;M++)if(T=k+12*M+2,this.SHORT(T)==I){A=T+8;break}if(!A)return!1;try{this.write(A,D,4)}catch{return!1}return!0}var h,c,b,S,p,m;if(r.call(this,o),c={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"},thumb:{513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength"}},b={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},S={tiffHeader:10},p=S.tiffHeader,h={clear:this.clear},l.extend(this,{read:function(){try{return f.prototype.read.apply(this,arguments)}catch{throw new a.ImageError(a.ImageError.INVALID_META_ERR)}},write:function(){try{return f.prototype.write.apply(this,arguments)}catch{throw new a.ImageError(a.ImageError.INVALID_META_ERR)}},UNDEFINED:function(){return this.BYTE.apply(this,arguments)},RATIONAL:function(v){return this.LONG(v)/this.LONG(v+4)},SRATIONAL:function(v){return this.SLONG(v)/this.SLONG(v+4)},ASCII:function(v){return this.CHAR(v)},TIFF:function(){return m||null},EXIF:function(){var v=null;if(S.exifIFD){try{v=g.call(this,S.exifIFD,c.exif)}catch{return null}if(v.ExifVersion&&l.typeOf(v.ExifVersion)==="array"){for(var I=0,D="";I<v.ExifVersion.length;I++)D+=String.fromCharCode(v.ExifVersion[I]);v.ExifVersion=D}}return v},GPS:function(){var v=null;if(S.gpsIFD){try{v=g.call(this,S.gpsIFD,c.gps)}catch{return null}v.GPSVersionID&&l.typeOf(v.GPSVersionID)==="array"&&(v.GPSVersionID=v.GPSVersionID.join("."))}return v},thumb:function(){if(S.IFD1)try{var v=g.call(this,S.IFD1,c.thumb);if("JPEGInterchangeFormat"in v)return this.SEGMENT(S.tiffHeader+v.JPEGInterchangeFormat,v.JPEGInterchangeFormatLength)}catch{}return null},setExif:function(v,I){return v!=="PixelXDimension"&&v!=="PixelYDimension"?!1:d.call(this,"exif",v,I)},clear:function(){h.clear(),o=c=b=m=S=h=null}}),this.SHORT(0)!==65505||this.STRING(4,5).toUpperCase()!=="EXIF\0")throw new a.ImageError(a.ImageError.INVALID_META_ERR);if(this.littleEndian=this.SHORT(p)==18761,this.SHORT(p+=2)!==42)throw new a.ImageError(a.ImageError.INVALID_META_ERR);S.IFD0=S.tiffHeader+this.LONG(p+=2),m=g.call(this,S.IFD0,c.tiff),"ExifIFDPointer"in m&&(S.exifIFD=S.tiffHeader+m.ExifIFDPointer,delete m.ExifIFDPointer),"GPSInfoIFDPointer"in m&&(S.gpsIFD=S.tiffHeader+m.GPSInfoIFDPointer,delete m.GPSInfoIFDPointer),l.isEmptyObj(m)&&(m=null);var x=this.LONG(S.IFD0+12*this.SHORT(S.IFD0)+2);x&&(S.IFD1=S.tiffHeader+x)}return f.prototype=r.prototype,f}),s("moxie/runtime/html5/image/JPEG",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEGHeaders","moxie/runtime/html5/utils/BinaryReader","moxie/runtime/html5/image/ExifParser"],function(l,r,a,f,o){function g(d){function h(v){var I,D,k=0;for(v||(v=S);k<=v.length();){if(I=v.SHORT(k+=2),I>=65472&&65475>=I)return k+=5,{height:v.SHORT(k),width:v.SHORT(k+=2)};D=v.SHORT(k+=2),k+=D-2}return null}function c(){var v,I,D=m.thumb();return D&&(v=new f(D),I=h(v),v.clear(),I)?(I.data=D,I):null}function b(){m&&p&&S&&(m.clear(),p.purge(),S.clear(),x=p=m=S=null)}var S,p,m,x;if(S=new f(d),S.SHORT(0)!==65496)throw new r.ImageError(r.ImageError.WRONG_FORMAT);p=new a(d);try{m=new o(p.get("app1")[0])}catch{}x=h.call(this),l.extend(this,{type:"image/jpeg",size:S.length(),width:x&&x.width||0,height:x&&x.height||0,setExif:function(v,I){return m?(l.typeOf(v)==="object"?l.each(v,function(D,k){m.setExif(k,D)}):m.setExif(v,I),p.set("app1",m.SEGMENT()),void 0):!1},writeHeaders:function(){return arguments.length?p.restore(arguments[0]):p.restore(d)},stripHeaders:function(v){return p.strip(v)},purge:function(){b.call(this)}}),m&&(this.meta={tiff:m.TIFF(),exif:m.EXIF(),gps:m.GPS(),thumb:c()})}return g}),s("moxie/runtime/html5/image/PNG",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader"],function(l,r,a){function f(o){function g(){var S,p;return S=h.call(this,8),S.type=="IHDR"?(p=S.start,{width:c.LONG(p),height:c.LONG(p+=4)}):null}function d(){c&&(c.clear(),o=b=c=null)}function h(S){var p,m,x,v;return p=c.LONG(S),m=c.STRING(S+=4,4),x=S+=4,v=c.LONG(S+p),{length:p,type:m,start:x,CRC:v}}var c,b;c=new a(o),function(){var S=0,p=0,m=[35152,20039,3338,6666];for(p=0;p<m.length;p++,S+=2)if(m[p]!=c.SHORT(S))throw new l.ImageError(l.ImageError.WRONG_FORMAT)}(),b=g.call(this),r.extend(this,{type:"image/png",size:c.length(),width:b.width,height:b.height,purge:function(){d.call(this)}}),d.call(this)}return f}),s("moxie/runtime/html5/image/ImageInfo",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEG","moxie/runtime/html5/image/PNG"],function(l,r,a,f){return function(o){var g,d=[a,f];g=function(){for(var h=0;h<d.length;h++)try{return new d[h](o)}catch{}throw new r.ImageError(r.ImageError.WRONG_FORMAT)}(),l.extend(this,{type:"",size:0,width:0,height:0,setExif:function(){},writeHeaders:function(h){return h},stripHeaders:function(h){return h},purge:function(){o=null}}),l.extend(this,g),this.purge=function(){g.purge(),g=null}}}),s("moxie/runtime/html5/image/ResizerCanvas",[],function(){function l(a,f,o){var g=a.width>a.height?"width":"height",d=Math.round(a[g]*f),h=!1;o!=="nearest"&&(.5>f||f>2)&&(f=.5>f?.5:2,h=!0);var c=r(a,f);return h?l(c,d/c[g],o):c}function r(a,f){var o=a.width,g=a.height,d=Math.round(o*f),h=Math.round(g*f),c=document.createElement("canvas");return c.width=d,c.height=h,c.getContext("2d").drawImage(a,0,0,o,g,0,0,d,h),a=null,c}return{scale:l}}),s("moxie/runtime/html5/image/Image",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/Exceptions","moxie/core/utils/Encode","moxie/file/Blob","moxie/file/File","moxie/runtime/html5/image/ImageInfo","moxie/runtime/html5/image/ResizerCanvas","moxie/core/utils/Mime","moxie/core/utils/Env"],function(l,r,a,f,o,g,d,h,c){function b(){function S(){if(!A&&!P)throw new a.ImageError(a.DOMException.INVALID_STATE_ERR);return A||P}function p(){var G=S();return G.nodeName.toLowerCase()=="canvas"?G:(A=document.createElement("canvas"),A.width=G.width,A.height=G.height,A.getContext("2d").drawImage(G,0,0),A)}function m(G){return f.atob(G.substring(G.indexOf("base64,")+7))}function x(G,$){return"data:"+($||"")+";base64,"+f.btoa(G)}function v(G){var $=this;P=new Image,P.onerror=function(){k.call(this),$.trigger("error",a.ImageError.WRONG_FORMAT)},P.onload=function(){$.trigger("load")},P.src=G.substr(0,5)=="data:"?G:x(G,R.type)}function I(G,$){var te,V=this;return window.FileReader?(te=new FileReader,te.onload=function(){$.call(V,this.result)},te.onerror=function(){V.trigger("error",a.ImageError.WRONG_FORMAT)},te.readAsDataURL(G),void 0):$.call(this,G.getAsDataURL())}function D(G,$){var te=Math.PI/180,V=document.createElement("canvas"),X=V.getContext("2d"),ie=G.width,ne=G.height;switch(r.inArray($,[5,6,7,8])>-1?(V.width=ne,V.height=ie):(V.width=ie,V.height=ne),$){case 2:X.translate(ie,0),X.scale(-1,1);break;case 3:X.translate(ie,ne),X.rotate(180*te);break;case 4:X.translate(0,ne),X.scale(1,-1);break;case 5:X.rotate(90*te),X.scale(1,-1);break;case 6:X.rotate(90*te),X.translate(0,-ne);break;case 7:X.rotate(90*te),X.translate(ie,-ne),X.scale(-1,1);break;case 8:X.rotate(-90*te),X.translate(-ie,0)}return X.drawImage(G,0,0,ie,ne),V}function k(){T&&(T.purge(),T=null),C=P=A=R=null,O=!1}var P,T,A,C,R,M=this,O=!1,B=!0;r.extend(this,{loadFromBlob:function(G){var $=this.getRuntime(),te=arguments.length>1?arguments[1]:!0;if(!$.can("access_binary"))throw new a.RuntimeError(a.RuntimeError.NOT_SUPPORTED_ERR);return R=G,G.isDetached()?(C=G.getSource(),v.call(this,C),void 0):(I.call(this,G.getSource(),function(V){te&&(C=m(V)),v.call(this,V)}),void 0)},loadFromImage:function(G,$){this.meta=G.meta,R=new g(null,{name:G.name,size:G.size,type:G.type}),v.call(this,$?C=G.getAsBinaryString():G.getAsDataURL())},getInfo:function(){var G,$=this.getRuntime();return!T&&C&&$.can("access_image_binary")&&(T=new d(C)),G={width:S().width||0,height:S().height||0,type:R.type||c.getFileMime(R.name),size:C&&C.length||R.size||0,name:R.name||"",meta:null},B&&(G.meta=T&&T.meta||this.meta||{},!G.meta||!G.meta.thumb||G.meta.thumb.data instanceof o||(G.meta.thumb.data=new o(null,{type:"image/jpeg",data:G.meta.thumb.data}))),G},resize:function(G,$,te){var V=document.createElement("canvas");if(V.width=G.width,V.height=G.height,V.getContext("2d").drawImage(S(),G.x,G.y,G.width,G.height,0,0,V.width,V.height),A=h.scale(V,$),B=te.preserveHeaders,!B){var X=this.meta&&this.meta.tiff&&this.meta.tiff.Orientation||1;A=D(A,X)}this.width=A.width,this.height=A.height,O=!0,this.trigger("Resize")},getAsCanvas:function(){return A||(A=p()),A.id=this.uid+"_canvas",A},getAsBlob:function(G,$){return G!==this.type?(O=!0,new g(null,{name:R.name||"",type:G,data:M.getAsDataURL(G,$)})):new g(null,{name:R.name||"",type:G,data:M.getAsBinaryString(G,$)})},getAsDataURL:function(G){var $=arguments[1]||90;if(!O)return P.src;if(p(),G!=="image/jpeg")return A.toDataURL("image/png");try{return A.toDataURL("image/jpeg",$/100)}catch{return A.toDataURL("image/jpeg")}},getAsBinaryString:function(G,$){if(!O)return C||(C=m(M.getAsDataURL(G,$))),C;if(G!=="image/jpeg")C=m(M.getAsDataURL(G,$));else{var te;$||($=90),p();try{te=A.toDataURL("image/jpeg",$/100)}catch{te=A.toDataURL("image/jpeg")}C=m(te),T&&(C=T.stripHeaders(C),B&&(T.meta&&T.meta.exif&&T.setExif({PixelXDimension:this.width,PixelYDimension:this.height}),C=T.writeHeaders(C)),T.purge(),T=null)}return O=!1,C},destroy:function(){M=null,k.call(this),this.getRuntime().getShim().removeInstance(this.uid)}})}return l.Image=b}),s("moxie/runtime/flash/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(l,r,a,f,o){function g(){var p;try{p=navigator.plugins["Shockwave Flash"],p=p.description}catch{try{p=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch{p="0.0"}}return p=p.match(/\d+/g),parseFloat(p[0]+"."+p[1])}function d(p){var m=a.get(p);m&&m.nodeName=="OBJECT"&&(r.browser==="IE"?(m.style.display="none",function x(){m.readyState==4?h(p):setTimeout(x,10)}()):m.parentNode.removeChild(m))}function h(p){var m=a.get(p);if(m){for(var x in m)typeof m[x]=="function"&&(m[x]=null);m.parentNode.removeChild(m)}}function c(p){var m,x=this;p=l.extend({swf_url:r.swf_url},p),o.call(this,p,b,{access_binary:function(v){return v&&x.mode==="browser"},access_image_binary:function(v){return v&&x.mode==="browser"},display_media:o.capTest(u("moxie/image/Image")),do_cors:o.capTrue,drag_and_drop:!1,report_upload_progress:function(){return x.mode==="client"},resize_image:o.capTrue,return_response_headers:!1,return_response_type:function(v){return v==="json"&&window.JSON?!0:!l.arrayDiff(v,["","text","document"])||x.mode==="browser"},return_status_code:function(v){return x.mode==="browser"||!l.arrayDiff(v,[200,404])},select_file:o.capTrue,select_multiple:o.capTrue,send_binary_string:function(v){return v&&x.mode==="browser"},send_browser_cookies:function(v){return v&&x.mode==="browser"},send_custom_headers:function(v){return v&&x.mode==="browser"},send_multipart:o.capTrue,slice_blob:function(v){return v&&x.mode==="browser"},stream_upload:function(v){return v&&x.mode==="browser"},summon_file_dialog:!1,upload_filesize:function(v){return l.parseSizeStr(v)<=2097152||x.mode==="client"},use_http_method:function(v){return!l.arrayDiff(v,["GET","POST"])}},{access_binary:function(v){return v?"browser":"client"},access_image_binary:function(v){return v?"browser":"client"},report_upload_progress:function(v){return v?"browser":"client"},return_response_type:function(v){return l.arrayDiff(v,["","text","json","document"])?"browser":["client","browser"]},return_status_code:function(v){return l.arrayDiff(v,[200,404])?"browser":["client","browser"]},send_binary_string:function(v){return v?"browser":"client"},send_browser_cookies:function(v){return v?"browser":"client"},send_custom_headers:function(v){return v?"browser":"client"},slice_blob:function(v){return v?"browser":"client"},stream_upload:function(v){return v?"client":"browser"},upload_filesize:function(v){return l.parseSizeStr(v)>=2097152?"client":"browser"}},"client"),g()<11.3&&(this.mode=!1),l.extend(this,{getShim:function(){return a.get(this.uid)},shimExec:function(v,I){var D=[].slice.call(arguments,2);return x.getShim().exec(this.uid,v,I,D)},init:function(){var v,I,D;D=this.getShimContainer(),l.extend(D.style,{position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),v='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+p.swf_url+'" ',r.browser==="IE"&&(v+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),v+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+p.swf_url+'" /><param name="flashvars" value="uid='+escape(this.uid)+"&target="+o.getGlobalEventTarget()+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',r.browser==="IE"?(I=document.createElement("div"),D.appendChild(I),I.outerHTML=v,I=D=null):D.innerHTML=v,m=setTimeout(function(){x&&!x.initialized&&x.trigger("Error",new f.RuntimeError(f.RuntimeError.NOT_INIT_ERR))},5e3)},destroy:function(v){return function(){d(x.uid),v.call(x),clearTimeout(m),p=m=v=x=null}}(this.destroy)},S)}var b="flash",S={};return o.addConstructor(b,c),S}),s("moxie/runtime/flash/file/Blob",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(l,r){var a={slice:function(f,o,g,d){var h=this.getRuntime();return 0>o?o=Math.max(f.size+o,0):o>0&&(o=Math.min(o,f.size)),0>g?g=Math.max(f.size+g,0):g>0&&(g=Math.min(g,f.size)),f=h.shimExec.call(this,"Blob","slice",o,g,d||""),f&&(f=new r(h.uid,f)),f}};return l.Blob=a}),s("moxie/runtime/flash/file/FileInput",["moxie/runtime/flash/Runtime","moxie/file/File","moxie/core/utils/Dom","moxie/core/utils/Basic"],function(l,r,a,f){var o={init:function(g){var d=this,h=this.getRuntime(),c=a.get(g.browse_button);c&&(c.setAttribute("tabindex",-1),c=null),this.bind("Change",function(){var b=h.shimExec.call(d,"FileInput","getFiles");d.files=[],f.each(b,function(S){d.files.push(new r(h.uid,S))})},999),this.getRuntime().shimExec.call(this,"FileInput","init",{accept:g.accept,multiple:g.multiple}),this.trigger("ready")}};return l.FileInput=o}),s("moxie/runtime/flash/file/FileReader",["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(l,r){function a(o,g){switch(g){case"readAsText":return r.atob(o,"utf8");case"readAsBinaryString":return r.atob(o);case"readAsDataURL":return o}return null}var f={read:function(o,g){var d=this;return d.result="",o==="readAsDataURL"&&(d.result="data:"+(g.type||"")+";base64,"),d.bind("Progress",function(h,c){c&&(d.result+=a(c,o))},999),d.getRuntime().shimExec.call(this,"FileReader","readAsBase64",g.uid)}};return l.FileReader=f}),s("moxie/runtime/flash/file/FileReaderSync",["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(l,r){function a(o,g){switch(g){case"readAsText":return r.atob(o,"utf8");case"readAsBinaryString":return r.atob(o);case"readAsDataURL":return o}return null}var f={read:function(o,g){var d,h=this.getRuntime();return(d=h.shimExec.call(this,"FileReaderSync","readAsBase64",g.uid))?(o==="readAsDataURL"&&(d="data:"+(g.type||"")+";base64,"+d),a(d,o,g.type)):null}};return l.FileReaderSync=f}),s("moxie/runtime/flash/runtime/Transporter",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(l,r){var a={getAsBlob:function(f){var o=this.getRuntime(),g=o.shimExec.call(this,"Transporter","getAsBlob",f);return g?new r(o.uid,g):null}};return l.Transporter=a}),s("moxie/runtime/flash/xhr/XMLHttpRequest",["moxie/runtime/flash/Runtime","moxie/core/utils/Basic","moxie/file/Blob","moxie/file/File","moxie/file/FileReaderSync","moxie/runtime/flash/file/FileReaderSync","moxie/xhr/FormData","moxie/runtime/Transporter","moxie/runtime/flash/runtime/Transporter"],function(l,r,a,f,o,g,d,h){var c={send:function(b,S){function p(){b.transport=I.mode,I.shimExec.call(v,"XMLHttpRequest","send",b,S)}function m(P,T){I.shimExec.call(v,"XMLHttpRequest","appendBlob",P,T.uid),S=null,p()}function x(P,T){var A=new h;A.bind("TransportingComplete",function(){T(this.result)}),A.transport(P.getSource(),P.type,{ruid:I.uid})}var v=this,I=v.getRuntime();if(r.isEmptyObj(b.headers)||r.each(b.headers,function(P,T){I.shimExec.call(v,"XMLHttpRequest","setRequestHeader",T,P.toString())}),S instanceof d){var D;if(S.each(function(P,T){P instanceof a?D=T:I.shimExec.call(v,"XMLHttpRequest","append",T,P)}),S.hasBlob()){var k=S.getBlob();k.isDetached()?x(k,function(P){k.destroy(),m(D,P)}):m(D,k)}else S=null,p()}else S instanceof a?S.isDetached()?x(S,function(P){S.destroy(),S=P.uid,p()}):(S=S.uid,p()):p()},getResponse:function(b){var S,p,m=this.getRuntime();if(p=m.shimExec.call(this,"XMLHttpRequest","getResponseAsBlob")){if(p=new f(m.uid,p),b==="blob")return p;try{if(S=new o,~r.inArray(b,["","text"]))return S.readAsText(p);if(b==="json"&&window.JSON)return JSON.parse(S.readAsText(p))}finally{p.destroy()}}return null},abort:function(){var b=this.getRuntime();b.shimExec.call(this,"XMLHttpRequest","abort"),this.dispatchEvent("readystatechange"),this.dispatchEvent("abort")}};return l.XMLHttpRequest=c}),s("moxie/runtime/flash/image/Image",["moxie/runtime/flash/Runtime","moxie/core/utils/Basic","moxie/runtime/Transporter","moxie/file/Blob","moxie/file/FileReaderSync"],function(l,r,a,f,o){var g={loadFromBlob:function(d){function h(p){b.shimExec.call(c,"Image","loadFromBlob",p.uid),c=b=null}var c=this,b=c.getRuntime();if(d.isDetached()){var S=new a;S.bind("TransportingComplete",function(){h(S.result.getSource())}),S.transport(d.getSource(),d.type,{ruid:b.uid})}else h(d.getSource())},loadFromImage:function(d){var h=this.getRuntime();return h.shimExec.call(this,"Image","loadFromImage",d.uid)},getInfo:function(){var d=this.getRuntime(),h=d.shimExec.call(this,"Image","getInfo");return h.meta&&h.meta.thumb&&h.meta.thumb.data&&!(d.meta.thumb.data instanceof f)&&(h.meta.thumb.data=new f(d.uid,h.meta.thumb.data)),h},getAsBlob:function(d,h){var c=this.getRuntime(),b=c.shimExec.call(this,"Image","getAsBlob",d,h);return b?new f(c.uid,b):null},getAsDataURL:function(){var d,h=this.getRuntime(),c=h.Image.getAsBlob.apply(this,arguments);return c?(d=new o,d.readAsDataURL(c)):null}};return l.Image=g}),s("moxie/runtime/silverlight/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(l,r,a,f,o){function g(b){var S,p,m,x,v,I=!1,D=null,k=0;try{try{D=new ActiveXObject("AgControl.AgControl"),D.IsVersionSupported(b)&&(I=!0),D=null}catch{var P=navigator.plugins["Silverlight Plug-In"];if(P){for(S=P.description,S==="1.0.30226.2"&&(S="2.0.30226.2"),p=S.split(".");p.length>3;)p.pop();for(;p.length<4;)p.push(0);for(m=b.split(".");m.length>4;)m.pop();do x=parseInt(m[k],10),v=parseInt(p[k],10),k++;while(k<m.length&&x===v);v>=x&&!isNaN(x)&&(I=!0)}}}catch{I=!1}return I}function d(b){var S,p=this;b=l.extend({xap_url:r.xap_url},b),o.call(this,b,h,{access_binary:o.capTrue,access_image_binary:o.capTrue,display_media:o.capTest(u("moxie/image/Image")),do_cors:o.capTrue,drag_and_drop:!1,report_upload_progress:o.capTrue,resize_image:o.capTrue,return_response_headers:function(m){return m&&p.mode==="client"},return_response_type:function(m){return m!=="json"?!0:!!window.JSON},return_status_code:function(m){return p.mode==="client"||!l.arrayDiff(m,[200,404])},select_file:o.capTrue,select_multiple:o.capTrue,send_binary_string:o.capTrue,send_browser_cookies:function(m){return m&&p.mode==="browser"},send_custom_headers:function(m){return m&&p.mode==="client"},send_multipart:o.capTrue,slice_blob:o.capTrue,stream_upload:!0,summon_file_dialog:!1,upload_filesize:o.capTrue,use_http_method:function(m){return p.mode==="client"||!l.arrayDiff(m,["GET","POST"])}},{return_response_headers:function(m){return m?"client":"browser"},return_status_code:function(m){return l.arrayDiff(m,[200,404])?"client":["client","browser"]},send_browser_cookies:function(m){return m?"browser":"client"},send_custom_headers:function(m){return m?"client":"browser"},use_http_method:function(m){return l.arrayDiff(m,["GET","POST"])?"client":["client","browser"]}}),g("2.0.31005.0")&&r.browser!=="Opera"||(this.mode=!1),l.extend(this,{getShim:function(){return a.get(this.uid).content.Moxie},shimExec:function(m,x){var v=[].slice.call(arguments,2);return p.getShim().exec(this.uid,m,x,v)},init:function(){var m;m=this.getShimContainer(),m.innerHTML='<object id="'+this.uid+'" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%" style="outline:none;"><param name="source" value="'+b.xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="uid='+this.uid+",target="+o.getGlobalEventTarget()+'"/></object>',S=setTimeout(function(){p&&!p.initialized&&p.trigger("Error",new f.RuntimeError(f.RuntimeError.NOT_INIT_ERR))},r.OS!=="Windows"?1e4:5e3)},destroy:function(m){return function(){m.call(p),clearTimeout(S),b=S=m=p=null}}(this.destroy)},c)}var h="silverlight",c={};return o.addConstructor(h,d),c}),s("moxie/runtime/silverlight/file/Blob",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/Blob"],function(l,r,a){return l.Blob=r.extend({},a)}),s("moxie/runtime/silverlight/file/FileInput",["moxie/runtime/silverlight/Runtime","moxie/file/File","moxie/core/utils/Dom","moxie/core/utils/Basic"],function(l,r,a,f){function o(d){for(var h="",c=0;c<d.length;c++)h+=(h!==""?"|":"")+d[c].title+" | *."+d[c].extensions.replace(/,/g,";*.");return h}var g={init:function(d){var h=this,c=this.getRuntime(),b=a.get(d.browse_button);b&&(b.setAttribute("tabindex",-1),b=null),this.bind("Change",function(){var S=c.shimExec.call(h,"FileInput","getFiles");h.files=[],f.each(S,function(p){h.files.push(new r(c.uid,p))})},999),c.shimExec.call(this,"FileInput","init",o(d.accept),d.multiple),this.trigger("ready")},setOption:function(d,h){d=="accept"&&(h=o(h)),this.getRuntime().shimExec.call(this,"FileInput","setOption",d,h)}};return l.FileInput=g}),s("moxie/runtime/silverlight/file/FileDrop",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Dom","moxie/core/utils/Events"],function(l,r,a){var f={init:function(){var o,g=this,d=g.getRuntime();return o=d.getShimContainer(),a.addEvent(o,"dragover",function(h){h.preventDefault(),h.stopPropagation(),h.dataTransfer.dropEffect="copy"},g.uid),a.addEvent(o,"dragenter",function(h){h.preventDefault();var c=r.get(d.uid).dragEnter(h);c&&h.stopPropagation()},g.uid),a.addEvent(o,"drop",function(h){h.preventDefault();var c=r.get(d.uid).dragDrop(h);c&&h.stopPropagation()},g.uid),d.shimExec.call(this,"FileDrop","init")}};return l.FileDrop=f}),s("moxie/runtime/silverlight/file/FileReader",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReader"],function(l,r,a){return l.FileReader=r.extend({},a)}),s("moxie/runtime/silverlight/file/FileReaderSync",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReaderSync"],function(l,r,a){return l.FileReaderSync=r.extend({},a)}),s("moxie/runtime/silverlight/runtime/Transporter",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/runtime/Transporter"],function(l,r,a){return l.Transporter=r.extend({},a)}),s("moxie/runtime/silverlight/xhr/XMLHttpRequest",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/xhr/XMLHttpRequest","moxie/runtime/silverlight/file/FileReaderSync","moxie/runtime/silverlight/runtime/Transporter"],function(l,r,a){return l.XMLHttpRequest=r.extend({},a)}),s("moxie/runtime/silverlight/image/Image",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/file/Blob","moxie/runtime/flash/image/Image"],function(l,r,a,f){return l.Image=r.extend({},f,{getInfo:function(){var o=this.getRuntime(),g=["tiff","exif","gps","thumb"],d={meta:{}},h=o.shimExec.call(this,"Image","getInfo");return h.meta&&(r.each(g,function(c){var b,S,p,m,x=h.meta[c];if(x&&x.keys)for(d.meta[c]={},S=0,p=x.keys.length;p>S;S++)b=x.keys[S],m=x[b],m&&(/^(\d|[1-9]\d+)$/.test(m)?m=parseInt(m,10):/^\d*\.\d+$/.test(m)&&(m=parseFloat(m)),d.meta[c][b]=m)}),d.meta&&d.meta.thumb&&d.meta.thumb.data&&!(o.meta.thumb.data instanceof a)&&(d.meta.thumb.data=new a(o.uid,d.meta.thumb.data))),d.width=parseInt(h.width,10),d.height=parseInt(h.height,10),d.size=parseInt(h.size,10),d.type=h.type,d.name=h.name,d},resize:function(o,g,d){this.getRuntime().shimExec.call(this,"Image","resize",o.x,o.y,o.width,o.height,g,d.preserveHeaders,d.resample)}})}),s("moxie/runtime/html4/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(l,r,a,f){function o(h){var c=this,b=a.capTest,S=a.capTrue;a.call(this,h,g,{access_binary:b(window.FileReader||window.File&&File.getAsDataURL),access_image_binary:!1,display_media:b((f.can("create_canvas")||f.can("use_data_uri_over32kb"))&&u("moxie/image/Image")),do_cors:!1,drag_and_drop:!1,filter_by_extension:b(function(){return!(f.browser==="Chrome"&&f.verComp(f.version,28,"<")||f.browser==="IE"&&f.verComp(f.version,10,"<")||f.browser==="Safari"&&f.verComp(f.version,7,"<")||f.browser==="Firefox"&&f.verComp(f.version,37,"<"))}()),resize_image:function(){return d.Image&&c.can("access_binary")&&f.can("create_canvas")},report_upload_progress:!1,return_response_headers:!1,return_response_type:function(p){return p==="json"&&window.JSON?!0:!!~l.inArray(p,["text","document",""])},return_status_code:function(p){return!l.arrayDiff(p,[200,404])},select_file:function(){return f.can("use_fileinput")},select_multiple:!1,send_binary_string:!1,send_custom_headers:!1,send_multipart:!0,slice_blob:!1,stream_upload:function(){return c.can("select_file")},summon_file_dialog:function(){return c.can("select_file")&&!(f.browser==="Firefox"&&f.verComp(f.version,4,"<")||f.browser==="Opera"&&f.verComp(f.version,12,"<")||f.browser==="IE"&&f.verComp(f.version,10,"<"))},upload_filesize:S,use_http_method:function(p){return!l.arrayDiff(p,["GET","POST"])}}),l.extend(this,{init:function(){this.trigger("Init")},destroy:function(p){return function(){p.call(c),p=c=null}}(this.destroy)}),l.extend(this.getShim(),d)}var g="html4",d={};return a.addConstructor(g,o),d}),s("moxie/runtime/html4/file/FileInput",["moxie/runtime/html4/Runtime","moxie/file/File","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime","moxie/core/utils/Env"],function(l,r,a,f,o,g,d){function h(){function c(){var x,v,I,D,k,P,T=this,A=T.getRuntime();P=a.guid("uid_"),x=A.getShimContainer(),b&&(I=f.get(b+"_form"),I&&(a.extend(I.style,{top:"100%"}),I.firstChild.setAttribute("tabindex",-1))),D=document.createElement("form"),D.setAttribute("id",P+"_form"),D.setAttribute("method","post"),D.setAttribute("enctype","multipart/form-data"),D.setAttribute("encoding","multipart/form-data"),a.extend(D.style,{overflow:"hidden",position:"absolute",top:0,left:0,width:"100%",height:"100%"}),k=document.createElement("input"),k.setAttribute("id",P),k.setAttribute("type","file"),k.setAttribute("accept",m.join(",")),A.can("summon_file_dialog")&&k.setAttribute("tabindex",-1),a.extend(k.style,{fontSize:"999px",opacity:0}),D.appendChild(k),x.appendChild(D),a.extend(k.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),d.browser==="IE"&&d.verComp(d.version,10,"<")&&a.extend(k.style,{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"}),k.onchange=function(){var C;this.value&&(C=this.files?this.files[0]:{name:this.value},C=new r(A.uid,C),this.onchange=function(){},c.call(T),T.files=[C],k.setAttribute("id",C.uid),D.setAttribute("id",C.uid+"_form"),T.trigger("change"),k=D=null)},A.can("summon_file_dialog")&&(v=f.get(S.browse_button),o.removeEvent(v,"click",T.uid),o.addEvent(v,"click",function(C){k&&!k.disabled&&k.click(),C.preventDefault()},T.uid)),b=P,x=I=v=null}var b,S,p,m=[];a.extend(this,{init:function(x){var v,I=this,D=I.getRuntime();S=x,m=g.extList2mimes(x.accept,D.can("filter_by_extension")),v=D.getShimContainer(),function(){var k,P,T;k=f.get(x.browse_button),p=f.getStyle(k,"z-index")||"auto",D.can("summon_file_dialog")?(f.getStyle(k,"position")==="static"&&(k.style.position="relative"),I.bind("Refresh",function(){P=parseInt(p,10)||1,f.get(S.browse_button).style.zIndex=P,this.getRuntime().getShimContainer().style.zIndex=P-1})):k.setAttribute("tabindex",-1),T=D.can("summon_file_dialog")?k:v,o.addEvent(T,"mouseover",function(){I.trigger("mouseenter")},I.uid),o.addEvent(T,"mouseout",function(){I.trigger("mouseleave")},I.uid),o.addEvent(T,"mousedown",function(){I.trigger("mousedown")},I.uid),o.addEvent(f.get(x.container),"mouseup",function(){I.trigger("mouseup")},I.uid),k=null}(),c.call(this),v=null,I.trigger({type:"ready",async:!0})},setOption:function(x,v){var I,D=this.getRuntime();x=="accept"&&(m=v.mimes||g.extList2mimes(v,D.can("filter_by_extension"))),I=f.get(b),I&&I.setAttribute("accept",m.join(","))},disable:function(x){var v;(v=f.get(b))&&(v.disabled=!!x)},destroy:function(){var x=this.getRuntime(),v=x.getShim(),I=x.getShimContainer(),D=S&&f.get(S.container),k=S&&f.get(S.browse_button);D&&o.removeAllEvents(D,this.uid),k&&(o.removeAllEvents(k,this.uid),k.style.zIndex=p),I&&(o.removeAllEvents(I,this.uid),I.innerHTML=""),v.removeInstance(this.uid),b=m=S=I=D=k=v=null}})}return l.FileInput=h}),s("moxie/runtime/html4/file/FileReader",["moxie/runtime/html4/Runtime","moxie/runtime/html5/file/FileReader"],function(l,r){return l.FileReader=r}),s("moxie/runtime/html4/xhr/XMLHttpRequest",["moxie/runtime/html4/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Url","moxie/core/Exceptions","moxie/core/utils/Events","moxie/file/Blob","moxie/xhr/FormData"],function(l,r,a,f,o,g,d,h){function c(){function b(x){var v,I,D,k,P=this,T=!1;if(m){if(v=m.id.replace(/_iframe$/,""),I=a.get(v+"_form")){for(D=I.getElementsByTagName("input"),k=D.length;k--;)switch(D[k].getAttribute("type")){case"hidden":D[k].parentNode.removeChild(D[k]);break;case"file":T=!0}D=[],T||I.parentNode.removeChild(I),I=null}setTimeout(function(){g.removeEvent(m,"load",P.uid),m.parentNode&&m.parentNode.removeChild(m);var A=P.getRuntime().getShimContainer();A.children.length||A.parentNode.removeChild(A),A=m=null,x()},1)}}var S,p,m;r.extend(this,{send:function(x,v){function I(){var R=C.getShimContainer()||document.body,M=document.createElement("div");M.innerHTML='<iframe id="'+D+'_iframe" name="'+D+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>',m=M.firstChild,R.appendChild(m),g.addEvent(m,"load",function(){var O;try{O=m.contentWindow.document||m.contentDocument||window.frames[m.id].document,/^4(0[0-9]|1[0-7]|2[2346])\s/.test(O.title)?S=O.title.replace(/^(\d+).*$/,"$1"):(S=200,p=r.trim(O.body.innerHTML),A.trigger({type:"progress",loaded:p.length,total:p.length}),T&&A.trigger({type:"uploadprogress",loaded:T.size||1025,total:T.size||1025}))}catch{if(!f.hasSameOrigin(x.url))return b.call(A,function(){A.trigger("error")}),void 0;S=404}b.call(A,function(){A.trigger("load")})},A.uid)}var D,k,P,T,A=this,C=A.getRuntime();if(S=p=null,v instanceof h&&v.hasBlob()){if(T=v.getBlob(),D=T.uid,P=a.get(D),k=a.get(D+"_form"),!k)throw new o.DOMException(o.DOMException.NOT_FOUND_ERR)}else D=r.guid("uid_"),k=document.createElement("form"),k.setAttribute("id",D+"_form"),k.setAttribute("method",x.method),k.setAttribute("enctype","multipart/form-data"),k.setAttribute("encoding","multipart/form-data"),C.getShimContainer().appendChild(k);k.setAttribute("target",D+"_iframe"),v instanceof h&&v.each(function(R,M){if(R instanceof d)P&&P.setAttribute("name",M);else{var O=document.createElement("input");r.extend(O,{type:"hidden",name:M,value:R}),P?k.insertBefore(O,P):k.appendChild(O)}}),k.setAttribute("action",x.url),I(),k.submit(),A.trigger("loadstart")},getStatus:function(){return S},getResponse:function(x){if(x==="json"&&r.typeOf(p)==="string"&&window.JSON)try{return JSON.parse(p.replace(/^\s*<pre[^>]*>/,"").replace(/<\/pre>\s*$/,""))}catch{return null}return p},abort:function(){var x=this;m&&m.contentWindow&&(m.contentWindow.stop?m.contentWindow.stop():m.contentWindow.document.execCommand?m.contentWindow.document.execCommand("Stop"):m.src="about:blank"),b.call(this,function(){x.dispatchEvent("abort")})},destroy:function(){this.getRuntime().getShim().removeInstance(this.uid)}})}return l.XMLHttpRequest=c}),s("moxie/runtime/html4/image/Image",["moxie/runtime/html4/Runtime","moxie/runtime/html5/image/Image"],function(l,r){return l.Image=r}),E(["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/core/utils/Env","moxie/core/Exceptions","moxie/core/utils/Dom","moxie/core/EventTarget","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/file/Blob","moxie/core/I18n","moxie/core/utils/Mime","moxie/file/FileInput","moxie/file/File","moxie/file/FileDrop","moxie/file/FileReader","moxie/core/utils/Url","moxie/runtime/RuntimeTarget","moxie/xhr/FormData","moxie/xhr/XMLHttpRequest","moxie/image/Image","moxie/core/utils/Events","moxie/runtime/html5/image/ResizerCanvas"])})(this)}),function(t,i){var n=function(){var s={};return i.apply(s,arguments),s.plupload};e.exports?e.exports=n(wf()):t.plupload=n(t.moxie)}(zo||window,function(t){(function(i,n,s){function u(a){function f(d,h,c){var b={chunks:"slice_blob",jpgresize:"send_binary_string",pngresize:"send_binary_string",progress:"report_upload_progress",multi_selection:"select_multiple",dragdrop:"drag_and_drop",drop_element:"drag_and_drop",headers:"send_custom_headers",urlstream_upload:"send_binary_string",canSendBinary:"send_binary",triggerDialog:"summon_file_dialog"};b[d]?g[b[d]]=h:c||(g[d]=h)}var o=a.required_features,g={};return typeof o=="string"?r.each(o.split(/\s*,\s*/),function(d){f(d,!0)}):typeof o=="object"?r.each(o,function(d,h){f(h,d)}):o===!0&&(a.chunk_size&&a.chunk_size>0&&(g.slice_blob=!0),r.isEmptyObj(a.resize)&&a.multipart!==!1||(g.send_binary_string=!0),a.http_method&&(g.use_http_method=a.http_method),r.each(a,function(d,h){f(h,!!d,!0)})),g}var _=window.setTimeout,E={},w=n.core.utils,l=n.runtime.Runtime,r={VERSION:"2.3.6",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,FILE_DUPLICATE_ERROR:-602,IMAGE_FORMAT_ERROR:-700,MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,moxie:n,mimeTypes:w.Mime.mimes,ua:w.Env,typeOf:w.Basic.typeOf,extend:w.Basic.extend,guid:w.Basic.guid,getAll:function(a){var f,o=[];r.typeOf(a)!=="array"&&(a=[a]);for(var g=a.length;g--;)f=r.get(a[g]),f&&o.push(f);return o.length?o:null},get:w.Dom.get,each:w.Basic.each,getPos:w.Dom.getPos,getSize:w.Dom.getSize,xmlEncode:function(a){var f={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},o=/[<>&\"\']/g;return a&&(""+a).replace(o,function(g){return f[g]?"&"+f[g]+";":g})},toArray:w.Basic.toArray,inArray:w.Basic.inArray,inSeries:w.Basic.inSeries,addI18n:n.core.I18n.addI18n,translate:n.core.I18n.translate,sprintf:w.Basic.sprintf,isEmptyObj:w.Basic.isEmptyObj,hasClass:w.Dom.hasClass,addClass:w.Dom.addClass,removeClass:w.Dom.removeClass,getStyle:w.Dom.getStyle,addEvent:w.Events.addEvent,removeEvent:w.Events.removeEvent,removeAllEvents:w.Events.removeAllEvents,cleanName:function(a){var f,o;for(o=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"],f=0;f<o.length;f+=2)a=a.replace(o[f],o[f+1]);return a=a.replace(/\s+/g,"_"),a=a.replace(/[^a-z0-9_\-\.]+/gi,"")},buildUrl:function(a,f){var o="";return r.each(f,function(g,d){o+=(o?"&":"")+encodeURIComponent(d)+"="+encodeURIComponent(g)}),o&&(a+=(a.indexOf("?")>0?"&":"?")+o),a},formatSize:function(a){function f(g,d){return Math.round(g*Math.pow(10,d))/Math.pow(10,d)}if(a===s||/\D/.test(a))return r.translate("N/A");var o=Math.pow(1024,4);return a>o?f(a/o,1)+" "+r.translate("tb"):a>(o/=1024)?f(a/o,1)+" "+r.translate("gb"):a>(o/=1024)?f(a/o,1)+" "+r.translate("mb"):a>1024?Math.round(a/1024)+" "+r.translate("kb"):a+" "+r.translate("b")},parseSize:w.Basic.parseSizeStr,predictRuntime:function(a,f){var o,g;return o=new r.Uploader(a),g=l.thatCan(o.getOption().required_features,f||a.runtimes),o.destroy(),g},addFileFilter:function(a,f){E[a]=f}};r.addFileFilter("mime_types",function(a,f,o){a.length&&!a.regexp.test(f.name)?(this.trigger("Error",{code:r.FILE_EXTENSION_ERROR,message:r.translate("File extension error."),file:f}),o(!1)):o(!0)}),r.addFileFilter("max_file_size",function(a,f,o){var g;a=r.parseSize(a),f.size!==g&&a&&f.size>a?(this.trigger("Error",{code:r.FILE_SIZE_ERROR,message:r.translate("File size error."),file:f}),o(!1)):o(!0)}),r.addFileFilter("prevent_duplicates",function(a,f,o){if(a){for(var g=this.files.length;g--;)if(f.name===this.files[g].name&&f.size===this.files[g].size)return this.trigger("Error",{code:r.FILE_DUPLICATE_ERROR,message:r.translate("Duplicate file error."),file:f}),o(!1),void 0}o(!0)}),r.addFileFilter("prevent_empty",function(a,f,o){a&&!f.size&&f.size!==s?(this.trigger("Error",{code:r.FILE_SIZE_ERROR,message:r.translate("File size error."),file:f}),o(!1)):o(!0)}),r.Uploader=function(a){function f(){var V,X,ie=0;if(this.state==r.STARTED){for(X=0;X<O.length;X++)V||O[X].status!=r.QUEUED?ie++:(V=O[X],this.trigger("BeforeUpload",V)&&(V.status=r.UPLOADING,this.trigger("UploadFile",V)));ie==O.length&&(this.state!==r.STOPPED&&(this.state=r.STOPPED,this.trigger("StateChanged")),this.trigger("UploadComplete",O))}}function o(V){V.percent=V.size>0?Math.ceil(100*(V.loaded/V.size)):100,g()}function g(){var V,X,ie,ne=0;for(C.reset(),V=0;V<O.length;V++)X=O[V],X.size!==s?(C.size+=X.origSize,ie=X.loaded*X.origSize/X.size,(!X.completeTimestamp||X.completeTimestamp>A)&&(ne+=ie),C.loaded+=ie):C.size=s,X.status==r.DONE?C.uploaded++:X.status==r.FAILED?C.failed++:C.queued++;C.size===s?C.percent=O.length>0?Math.ceil(100*(C.uploaded/O.length)):0:(C.bytesPerSec=Math.ceil(ne/((+new Date-A||1)/1e3)),C.percent=C.size>0?Math.ceil(100*(C.loaded/C.size)):0)}function d(){var V=G[0]||$[0];return V?V.getRuntime().uid:!1}function h(){this.bind("FilesAdded FilesRemoved",function(V){V.trigger("QueueChanged"),V.refresh()}),this.bind("CancelUpload",I),this.bind("BeforeUpload",p),this.bind("UploadFile",m),this.bind("UploadProgress",x),this.bind("StateChanged",v),this.bind("QueueChanged",g),this.bind("Error",k),this.bind("FileUploaded",D),this.bind("Destroy",P)}function c(V,X){var ie=this,ne=0,fe=[],xe={runtime_order:V.runtimes,required_caps:V.required_features,preferred_caps:B,swf_url:V.flash_swf_url,xap_url:V.silverlight_xap_url};r.each(V.runtimes.split(/\s*,\s*/),function(be){V[be]&&(xe[be]=V[be])}),V.browse_button&&r.each(V.browse_button,function(be){fe.push(function(oe){var ge=new n.file.FileInput(r.extend({},xe,{accept:V.filters.mime_types,name:V.file_data_name,multiple:V.multi_selection,container:V.container,browse_button:be}));ge.onready=function(){var Te=l.getInfo(this.ruid);r.extend(ie.features,{chunks:Te.can("slice_blob"),multipart:Te.can("send_multipart"),multi_selection:Te.can("select_multiple")}),ne++,G.push(this),oe()},ge.onchange=function(){ie.addFile(this.files)},ge.bind("mouseenter mouseleave mousedown mouseup",function(Te){te||(V.browse_button_hover&&(Te.type==="mouseenter"?r.addClass(be,V.browse_button_hover):Te.type==="mouseleave"&&r.removeClass(be,V.browse_button_hover)),V.browse_button_active&&(Te.type==="mousedown"?r.addClass(be,V.browse_button_active):Te.type==="mouseup"&&r.removeClass(be,V.browse_button_active)))}),ge.bind("mousedown",function(){ie.trigger("Browse")}),ge.bind("error runtimeerror",function(){ge=null,oe()}),ge.init()})}),V.drop_element&&r.each(V.drop_element,function(be){fe.push(function(oe){var ge=new n.file.FileDrop(r.extend({},xe,{drop_zone:be}));ge.onready=function(){var Te=l.getInfo(this.ruid);r.extend(ie.features,{chunks:Te.can("slice_blob"),multipart:Te.can("send_multipart"),dragdrop:Te.can("drag_and_drop")}),ne++,$.push(this),oe()},ge.ondrop=function(){ie.addFile(this.files)},ge.bind("error runtimeerror",function(){ge=null,oe()}),ge.init()})}),r.inSeries(fe,function(){typeof X=="function"&&X(ne)})}function b(V,X,ie,ne){var fe=new n.image.Image;try{fe.onload=function(){X.width>this.width&&X.height>this.height&&X.quality===s&&X.preserve_headers&&!X.crop?(this.destroy(),ne(V)):fe.downsize(X.width,X.height,X.crop,X.preserve_headers)},fe.onresize=function(){var xe=this.getAsBlob(V.type,X.quality);this.destroy(),ne(xe)},fe.bind("error runtimeerror",function(){this.destroy(),ne(V)}),fe.load(V,ie)}catch{ne(V)}}function S(V,X,ie){function ne(be,oe,ge){var Te=T[be];switch(be){case"max_file_size":be==="max_file_size"&&(T.max_file_size=T.filters.max_file_size=oe);break;case"chunk_size":(oe=r.parseSize(oe))&&(T[be]=oe,T.send_file_name=!0);break;case"multipart":T[be]=oe,oe||(T.send_file_name=!0);break;case"http_method":T[be]=oe.toUpperCase()==="PUT"?"PUT":"POST";break;case"unique_names":T[be]=oe,oe&&(T.send_file_name=!0);break;case"filters":r.typeOf(oe)==="array"&&(oe={mime_types:oe}),ge?r.extend(T.filters,oe):T.filters=oe,oe.mime_types&&(r.typeOf(oe.mime_types)==="string"&&(oe.mime_types=n.core.utils.Mime.mimes2extList(oe.mime_types)),oe.mime_types.regexp=function(H){var z=[];return r.each(H,function(W){r.each(W.extensions.split(/,/),function(Z){/^\s*\*\s*$/.test(Z)?z.push("\\.*"):z.push("\\."+Z.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),new RegExp("("+z.join("|")+")$","i")}(oe.mime_types),T.filters.mime_types=oe.mime_types);break;case"resize":T.resize=oe?r.extend({preserve_headers:!0,crop:!1},oe):!1;break;case"prevent_duplicates":T.prevent_duplicates=T.filters.prevent_duplicates=!!oe;break;case"container":case"browse_button":case"drop_element":oe=be==="container"?r.get(oe):r.getAll(oe);case"runtimes":case"multi_selection":case"flash_swf_url":case"silverlight_xap_url":T[be]=oe,ge||(xe=!0);break;default:T[be]=oe}ge||fe.trigger("OptionChanged",be,oe,Te)}var fe=this,xe=!1;typeof V=="object"?r.each(V,function(be,oe){ne(oe,be,ie)}):ne(V,X,ie),ie?(T.required_features=u(r.extend({},T)),B=u(r.extend({},T,{required_features:!0}))):xe&&(fe.trigger("Destroy"),c.call(fe,T,function(be){be?(fe.runtime=l.getInfo(d()).type,fe.trigger("Init",{runtime:fe.runtime}),fe.trigger("PostInit")):fe.trigger("Error",{code:r.INIT_ERROR,message:r.translate("Init error.")})}))}function p(V,X){if(V.settings.unique_names){var ie=X.name.match(/\.([^.]+)$/),ne="part";ie&&(ne=ie[1]),X.target_name=X.id+"."+ne}}function m(V,X){function ie(){ge-- >0?_(ne,1e3):(X.loaded=H,V.trigger("Error",{code:r.HTTP_ERROR,message:r.translate("HTTP Error."),file:X,response:R.responseText,status:R.status,responseHeaders:R.getAllResponseHeaders()}))}function ne(){var W,Z,J={};X.status===r.UPLOADING&&V.state!==r.STOPPED&&(V.settings.send_file_name&&(J.name=X.target_name||X.name),oe&&Te.chunks&&xe.size>oe?(Z=Math.min(oe,xe.size-H),W=xe.slice(H,H+Z)):(Z=xe.size,W=xe),oe&&Te.chunks&&(V.settings.send_chunk_number?(J.chunk=Math.ceil(H/oe),J.chunks=Math.ceil(xe.size/oe)):(J.offset=H,J.total=xe.size)),V.trigger("BeforeChunkUpload",X,J,W,H)&&fe(J,W,Z))}function fe(W,Z,J){var Y;R=new n.xhr.XMLHttpRequest,R.upload&&(R.upload.onprogress=function(he){X.loaded=Math.min(X.size,H+he.loaded),V.trigger("UploadProgress",X)}),R.onload=function(){return R.status<200||R.status>=400?(ie(),void 0):(ge=V.settings.max_retries,J<xe.size?(Z.destroy(),H+=J,X.loaded=Math.min(H,xe.size),V.trigger("ChunkUploaded",X,{offset:X.loaded,total:xe.size,response:R.responseText,status:R.status,responseHeaders:R.getAllResponseHeaders()}),r.ua.browser==="Android Browser"&&V.trigger("UploadProgress",X)):X.loaded=X.size,Z=Y=null,!H||H>=xe.size?(X.size!=X.origSize&&(xe.destroy(),xe=null),V.trigger("UploadProgress",X),X.status=r.DONE,X.completeTimestamp=+new Date,V.trigger("FileUploaded",X,{response:R.responseText,status:R.status,responseHeaders:R.getAllResponseHeaders()})):_(ne,1),void 0)},R.onerror=function(){ie()},R.onloadend=function(){this.destroy()},V.settings.multipart&&Te.multipart?(R.open(V.settings.http_method,be,!0),r.each(V.settings.headers,function(he,de){R.setRequestHeader(de,he)}),Y=new n.xhr.FormData,r.each(r.extend(W,V.settings.multipart_params),function(he,de){Y.append(de,he)}),Y.append(V.settings.file_data_name,Z),R.send(Y,z)):(be=r.buildUrl(V.settings.url,r.extend(W,V.settings.multipart_params)),R.open(V.settings.http_method,be,!0),r.each(V.settings.headers,function(he,de){R.setRequestHeader(de,he)}),R.hasRequestHeader("Content-Type")||R.setRequestHeader("Content-Type","application/octet-stream"),R.send(Z,z))}var xe,be=V.settings.url,oe=V.settings.chunk_size,ge=V.settings.max_retries,Te=V.features,H=0,z={runtime_order:V.settings.runtimes,required_caps:V.settings.required_features,preferred_caps:B,swf_url:V.settings.flash_swf_url,xap_url:V.settings.silverlight_xap_url};X.loaded&&(H=X.loaded=oe?oe*Math.floor(X.loaded/oe):0),xe=X.getSource(),r.isEmptyObj(V.settings.resize)||r.inArray(xe.type,["image/jpeg","image/png"])===-1?ne():b(xe,V.settings.resize,z,function(W){xe=W,X.size=W.size,ne()})}function x(V,X){o(X)}function v(V){if(V.state==r.STARTED)A=+new Date;else if(V.state==r.STOPPED)for(var X=V.files.length-1;X>=0;X--)V.files[X].status==r.UPLOADING&&(V.files[X].status=r.QUEUED,g())}function I(){R&&R.abort()}function D(V){g(),_(function(){f.call(V)},1)}function k(V,X){X.code===r.INIT_ERROR?V.destroy():X.code===r.HTTP_ERROR&&(X.file.status=r.FAILED,X.file.completeTimestamp=+new Date,o(X.file),V.state==r.STARTED&&(V.trigger("CancelUpload"),_(function(){f.call(V)},1)))}function P(V){V.stop(),r.each(O,function(X){X.destroy()}),O=[],G.length&&(r.each(G,function(X){X.destroy()}),G=[]),$.length&&(r.each($,function(X){X.destroy()}),$=[]),B={},te=!1,A=R=null,C.reset()}var T,A,C,R,M=r.guid(),O=[],B={},G=[],$=[],te=!1;T={chunk_size:0,file_data_name:"file",filters:{mime_types:[],max_file_size:0,prevent_duplicates:!1,prevent_empty:!0},flash_swf_url:"js/Moxie.swf",http_method:"POST",max_retries:0,multipart:!0,multi_selection:!0,resize:!1,runtimes:l.order,send_file_name:!0,send_chunk_number:!0,silverlight_xap_url:"js/Moxie.xap"},S.call(this,a,null,!0),C=new r.QueueProgress,r.extend(this,{id:M,uid:M,state:r.STOPPED,features:{},runtime:null,files:O,settings:T,total:C,init:function(){var V,X,ie=this;return V=ie.getOption("preinit"),typeof V=="function"?V(ie):r.each(V,function(ne,fe){ie.bind(fe,ne)}),h.call(ie),r.each(["container","browse_button","drop_element"],function(ne){return ie.getOption(ne)===null?(X={code:r.INIT_ERROR,message:r.sprintf(r.translate("%s specified, but cannot be found."),ne)},!1):void 0}),X?ie.trigger("Error",X):T.browse_button||T.drop_element?(c.call(ie,T,function(ne){var fe=ie.getOption("init");typeof fe=="function"?fe(ie):r.each(fe,function(xe,be){ie.bind(be,xe)}),ne?(ie.runtime=l.getInfo(d()).type,ie.trigger("Init",{runtime:ie.runtime}),ie.trigger("PostInit")):ie.trigger("Error",{code:r.INIT_ERROR,message:r.translate("Init error.")})}),void 0):ie.trigger("Error",{code:r.INIT_ERROR,message:r.translate("You must specify either browse_button or drop_element.")})},setOption:function(V,X){S.call(this,V,X,!this.runtime)},getOption:function(V){return V?T[V]:T},refresh:function(){G.length&&r.each(G,function(V){V.trigger("Refresh")}),this.trigger("Refresh")},start:function(){this.state!=r.STARTED&&(this.state=r.STARTED,this.trigger("StateChanged"),f.call(this))},stop:function(){this.state!=r.STOPPED&&(this.state=r.STOPPED,this.trigger("StateChanged"),this.trigger("CancelUpload"))},disableBrowse:function(){te=arguments[0]!==s?arguments[0]:!0,G.length&&r.each(G,function(V){V.disable(te)}),this.trigger("DisableBrowse",te)},getFile:function(V){var X;for(X=O.length-1;X>=0;X--)if(O[X].id===V)return O[X]},addFile:function(V,X){function ie(ge,Te){var H=[];r.each(xe.settings.filters,function(z,W){E[W]&&H.push(function(Z){E[W].call(xe,z,ge,function(J){Z(!J)})})}),r.inSeries(H,Te)}function ne(ge){var Te=r.typeOf(ge);if(ge instanceof n.file.File){if(!ge.ruid&&!ge.isDetached()){if(!fe)return!1;ge.ruid=fe,ge.connectRuntime(fe)}ne(new r.File(ge))}else ge instanceof n.file.Blob?(ne(ge.getSource()),ge.destroy()):ge instanceof r.File?(X&&(ge.name=X),be.push(function(H){ie(ge,function(z){z||(O.push(ge),oe.push(ge),xe.trigger("FileFiltered",ge)),_(H,1)})})):r.inArray(Te,["file","blob"])!==-1?ne(new n.file.File(null,ge)):Te==="node"&&r.typeOf(ge.files)==="filelist"?r.each(ge.files,ne):Te==="array"&&(X=null,r.each(ge,ne))}var fe,xe=this,be=[],oe=[];fe=d(),ne(V),be.length&&r.inSeries(be,function(){oe.length&&xe.trigger("FilesAdded",oe)})},removeFile:function(V){for(var X=typeof V=="string"?V:V.id,ie=O.length-1;ie>=0;ie--)if(O[ie].id===X)return this.splice(ie,1)[0]},splice:function(V,X){var ie=O.splice(V===s?0:V,X===s?O.length:X),ne=!1;return this.state==r.STARTED&&(r.each(ie,function(fe){return fe.status===r.UPLOADING?(ne=!0,!1):void 0}),ne&&this.stop()),this.trigger("FilesRemoved",ie),r.each(ie,function(fe){fe.destroy()}),ne&&this.start(),ie},dispatchEvent:function(V){var X,ie;if(V=V.toLowerCase(),X=this.hasEventListener(V)){X.sort(function(fe,xe){return xe.priority-fe.priority}),ie=[].slice.call(arguments),ie.shift(),ie.unshift(this);for(var ne=0;ne<X.length;ne++)if(X[ne].fn.apply(X[ne].scope,ie)===!1)return!1}return!0},bind:function(V,X,ie,ne){r.Uploader.prototype.bind.call(this,V,X,ne,ie)},destroy:function(){this.trigger("Destroy"),T=C=null,this.unbindAll()}})},r.Uploader.prototype=n.core.EventTarget.instance,r.File=function(){function a(o){r.extend(this,{id:r.guid(),name:o.name||o.fileName,type:o.type||"",relativePath:o.relativePath||"",size:o.fileSize||o.size,origSize:o.fileSize||o.size,loaded:0,percent:0,status:r.QUEUED,lastModifiedDate:o.lastModifiedDate||new Date().toLocaleString(),completeTimestamp:0,getNative:function(){var g=this.getSource().getSource();return r.inArray(r.typeOf(g),["blob","file"])!==-1?g:null},getSource:function(){return f[this.id]?f[this.id]:null},destroy:function(){var g=this.getSource();g&&(g.destroy(),delete f[this.id])}}),f[this.id]=o}var f={};return a}(),r.QueueProgress=function(){var a=this;a.size=0,a.loaded=0,a.uploaded=0,a.failed=0,a.queued=0,a.percent=0,a.bytesPerSec=0,a.reset=function(){a.size=a.loaded=a.uploaded=a.failed=a.queued=a.percent=a.bytesPerSec=0}},i.plupload=r})(this,t)})}(Xr)),Xr.exports}var Sf=_f();const tr=bf(Sf);var jo;const on=(jo=document.querySelector('meta[name="csrf-token"]'))==null?void 0:jo.getAttribute("content"),an=(e,{method:t="get",params:i={},json:n=!0,signal:s=null})=>{const u={method:t};if(u.signal=s,t=="get")e+="?"+new URLSearchParams(i);else{u.headers={},on&&(u.headers["X-CSRF-Token"]=on);let _=new FormData;for(const[E,w]of Object.entries(i))_.append(E,w);u.body=_}return fetch(e,u).then(_=>_.ok?n?_.json():_.text():_.json().then(Promise.reject.bind(Promise)))};function Ef(e){return{all:e=e||new Map,on:function(t,i){var n=e.get(t);n?n.push(i):e.set(t,[i])},off:function(t,i){var n=e.get(t);n&&(i?n.splice(n.indexOf(i)>>>0,1):e.set(t,[]))},emit:function(t,i){var n=e.get(t);n&&n.slice().map(function(s){s(i)}),(n=e.get("*"))&&n.slice().map(function(s){s(t,i)})}}}function ns(e){let t=localStorage.getItem(e+"_storage");const i=ve(JSON.parse(t));Si(i,n);function n(){i.value===null||i.value===""?localStorage.removeItem(e+"_storage"):localStorage.setItem(e+"_storage",JSON.stringify(i.value))}function s(_,E){i.value=Object.assign({...i.value},{[_]:E})}function u(){i.value=null}return{getStore:(_,E=null)=>i.value===null||i.value===""?E:i.value.hasOwnProperty(_)?i.value[_]:E,setStore:s,clearStore:u}}const Uo=ve("");function Bt(){function e(t){Uo.value=t}return{apiUrl:Uo,setApiUrl:e}}const Rf={class:"border-neutral-300 flex justify-between items-center py-1 text-sm"},Df={key:0,class:"flex text-center"},If=["aria-label"],Tf=j("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 10.5v6m3-3H9m4.06-7.19l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z"})],-1),Af=[Tf],Cf=["aria-label"],kf=j("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})],-1),Of=[kf],Mf=["aria-label"],Lf=j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"},null,-1),Nf=[Lf],Ff=["aria-label"],Pf=j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"},null,-1),Hf=[Pf],zf=["aria-label"],Bf=j("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})],-1),jf=[Bf],Uf=["aria-label"],Vf=j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5m6 4.125l2.25 2.25m0 0l2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"},null,-1),qf=[Vf],Gf=["aria-label"],Xf=j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"},null,-1),Wf=[Xf],Kf={key:1,class:"flex text-center"},$f={class:"pl-2"},Yf={class:"dark:bg-gray-700 bg-gray-200 text-xs px-2 py-1 rounded"},Zf={key:0,class:"animate-spin p-0.5 h-5 w-5 text-white ml-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Jf=j("circle",{class:"opacity-25 stroke-blue-900 dark:stroke-blue-100",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),Qf=j("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),eh=[Jf,Qf],th={class:"flex text-center items-center justify-end"},ih=["aria-label"],rh=j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z"},null,-1),nh=[rh],sh=["aria-label"],oh={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 md:h-8 md:w-8 m-auto cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},ah={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9V4.5M9 9H4.5M9 9L3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5l5.25 5.25"},lh={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},uh=["aria-label"],ch={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"},dh={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z"},fh={name:"VFToolbar"},hh=Object.assign(fh,{props:{data:Object},setup(e){const t=ye("emitter"),i=ye("usePropDarkMode"),{getStore:n,setStore:s}=ye("storage"),{t:u}=ye("i18n"),_=ve(n("viewport","grid")),E=ve([]),w=ve(n("full-screen",!1)),l=ve("");t.on("vf-search-query",({newQuery:o})=>{l.value=o});const r=ye("loadingState"),a=()=>r.value,f=()=>{w.value=!w.value,t.emit("vf-fullscreen-toggle")};return t.on("vf-nodes-selected",o=>{E.value=o}),t.on("vf-view-toggle",o=>{s("viewport",o),_.value=o}),(o,g)=>(Q(),se("div",Rf,[l.value.length?(Q(),se("div",Kf,[j("div",$f,[Ge(ae(ee(u)("Search results for"))+" ",1),j("span",Yf,ae(l.value),1)]),a()?(Q(),se("svg",Zf,eh)):ke("",!0)])):(Q(),se("div",Df,[j("div",{class:"mx-1.5","aria-label":ee(u)("New Folder"),"data-microtip-position":"bottom-right",role:"tooltip",onClick:g[0]||(g[0]=d=>ee(t).emit("vf-modal-show",{type:"new-folder",items:E.value}))},Af,8,If),j("div",{class:"mx-1.5","aria-label":ee(u)("New File"),"data-microtip-position":"bottom",role:"tooltip",onClick:g[1]||(g[1]=d=>ee(t).emit("vf-modal-show",{type:"new-file",items:E.value}))},Of,8,Cf),j("div",{class:"mx-1.5","aria-label":ee(u)("Rename"),"data-microtip-position":"bottom",role:"tooltip",onClick:g[2]||(g[2]=d=>E.value.length!=1||ee(t).emit("vf-modal-show",{type:"rename",items:E.value}))},[(Q(),se("svg",{xmlns:"http://www.w3.org/2000/svg",class:Ye([E.value.length==1?"cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300":"stroke-gray-200  dark:stroke-gray-700","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Nf,2))],8,Mf),j("div",{class:"mx-1.5","aria-label":ee(u)("Delete"),"data-microtip-position":"bottom",role:"tooltip",onClick:g[3]||(g[3]=d=>!E.value.length||ee(t).emit("vf-modal-show",{type:"delete",items:E.value}))},[(Q(),se("svg",{xmlns:"http://www.w3.org/2000/svg",class:Ye([E.value.length?"cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300":"stroke-gray-200  dark:stroke-gray-700","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Hf,2))],8,Ff),j("div",{class:"mx-1.5","aria-label":ee(u)("Upload"),"data-microtip-position":"bottom",role:"tooltip",onClick:g[4]||(g[4]=d=>ee(t).emit("vf-modal-show",{type:"upload",items:E.value}))},jf,8,zf),E.value.length==1&&E.value[0].mime_type=="application/zip"?(Q(),se("div",{key:0,class:"mx-1.5","aria-label":ee(u)("Unarchive"),"data-microtip-position":"bottom",role:"tooltip",onClick:g[5]||(g[5]=d=>!E.value.length||ee(t).emit("vf-modal-show",{type:"unarchive",items:E.value}))},[(Q(),se("svg",{xmlns:"http://www.w3.org/2000/svg",class:Ye([E.value.length?"cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300":"stroke-gray-200  dark:stroke-gray-700","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},qf,2))],8,Uf)):(Q(),se("div",{key:1,class:"mx-1.5","aria-label":ee(u)("Archive"),"data-microtip-position":"bottom",role:"tooltip",onClick:g[6]||(g[6]=d=>!E.value.length||ee(t).emit("vf-modal-show",{type:"archive",items:E.value}))},[(Q(),se("svg",{xmlns:"http://www.w3.org/2000/svg",class:Ye([E.value.length?"cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300":"stroke-gray-200  dark:stroke-gray-700","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},Wf,2))],8,Gf))])),j("div",th,[pt(j("div",{class:"mx-1.5","aria-label":ee(u)("Dark Mode"),"data-microtip-position":"bottom",role:"tooltip"},[(Q(),se("svg",{onClick:g[7]||(g[7]=d=>ee(t).emit("vf-darkMode-toggle")),viewBox:"0 0 24 24","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-6 w-6 m-auto cursor-pointer stroke-sky-500 fill-sky-100 hover:stroke-sky-600 dark:stroke-gray-400 dark:fill-gray-400/20 dark:hover:stroke-gray-300"},nh))],8,ih),[[ar,!ee(i)]]),j("div",{class:"mx-1.5","aria-label":ee(u)("Toggle Full Screen"),"data-microtip-position":"bottom-left",role:"tooltip",onClick:f},[(Q(),se("svg",oh,[w.value?(Q(),se("path",ah)):(Q(),se("path",lh))]))],8,sh),j("div",{class:"mx-1.5","aria-label":ee(u)("Change View"),"data-microtip-position":"bottom-left",role:"tooltip",onClick:g[8]||(g[8]=d=>l.value.length||ee(t).emit("vf-view-toggle",_.value=="list"?"grid":"list"))},[(Q(),se("svg",{xmlns:"http://www.w3.org/2000/svg",class:Ye([l.value.length?"stroke-gray-200  dark:stroke-gray-700":"cursor-pointer stroke-gray-500 hover:stroke-cyan-700 dark:stroke-gray-400 dark:hover:stroke-gray-300","h-6 w-6 md:h-8 md:w-8 m-auto"]),fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[_.value=="grid"?(Q(),se("path",ch)):ke("",!0),_.value=="list"?(Q(),se("path",dh)):ke("",!0)],2))],8,uh)])]))}});var mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ph(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wl={exports:{}};(function(e,t){(function(i,n){e.exports=n()})(mh,function(){function i(F,N){var y=F==null?null:typeof Symbol<"u"&&F[Symbol.iterator]||F["@@iterator"];if(y!=null){var U,L,q,K,re=[],ce=!0,De=!1;try{if(q=(y=y.call(F)).next,N!==0)for(;!(ce=(U=q.call(y)).done)&&(re.push(U.value),re.length!==N);ce=!0);}catch(Ie){De=!0,L=Ie}finally{try{if(!ce&&y.return!=null&&(K=y.return(),Object(K)!==K))return}finally{if(De)throw L}}return re}}function n(F,N){var y=Object.keys(F);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(F);N&&(U=U.filter(function(L){return Object.getOwnPropertyDescriptor(F,L).enumerable})),y.push.apply(y,U)}return y}function s(F){for(var N=1;N<arguments.length;N++){var y=arguments[N]!=null?arguments[N]:{};N%2?n(Object(y),!0).forEach(function(U){w(F,U,y[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(y)):n(Object(y)).forEach(function(U){Object.defineProperty(F,U,Object.getOwnPropertyDescriptor(y,U))})}return F}function u(F,N){if(!(F instanceof N))throw new TypeError("Cannot call a class as a function")}function _(F,N){for(var y=0;y<N.length;y++){var U=N[y];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(F,M(U.key),U)}}function E(F,N,y){return N&&_(F.prototype,N),Object.defineProperty(F,"prototype",{writable:!1}),F}function w(F,N,y){return N=M(N),N in F?Object.defineProperty(F,N,{value:y,enumerable:!0,configurable:!0,writable:!0}):F[N]=y,F}function l(F,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function");F.prototype=Object.create(N&&N.prototype,{constructor:{value:F,writable:!0,configurable:!0}}),Object.defineProperty(F,"prototype",{writable:!1}),N&&a(F,N)}function r(F){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(N){return N.__proto__||Object.getPrototypeOf(N)},r(F)}function a(F,N){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,U){return y.__proto__=U,y},a(F,N)}function f(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function o(F,N,y){return f()?o=Reflect.construct.bind():o=function(U,L,q){var K=[null];K.push.apply(K,L);var re=Function.bind.apply(U,K),ce=new re;return q&&a(ce,q.prototype),ce},o.apply(null,arguments)}function g(F){return Function.toString.call(F).indexOf("[native code]")!==-1}function d(F){var N=typeof Map=="function"?new Map:void 0;return d=function(y){if(y===null||!g(y))return y;if(typeof y!="function")throw new TypeError("Super expression must either be null or a function");if(typeof N<"u"){if(N.has(y))return N.get(y);N.set(y,U)}function U(){return o(y,arguments,r(this).constructor)}return U.prototype=Object.create(y.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),a(U,y)},d(F)}function h(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}function c(F,N){if(N&&(typeof N=="object"||typeof N=="function"))return N;if(N!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h(F)}function b(F){var N=f();return function(){var y=r(F),U;if(N){var L=r(this).constructor;U=Reflect.construct(y,arguments,L)}else U=y.apply(this,arguments);return c(this,U)}}function S(F,N){for(;!Object.prototype.hasOwnProperty.call(F,N)&&(F=r(F),F!==null););return F}function p(){return typeof Reflect<"u"&&Reflect.get?p=Reflect.get.bind():p=function(F,N,y){var U=S(F,N);if(U){var L=Object.getOwnPropertyDescriptor(U,N);return L.get?L.get.call(arguments.length<3?F:y):L.value}},p.apply(this,arguments)}function m(F,N){return I(F)||i(F,N)||k(F,N)||A()}function x(F){return v(F)||D(F)||k(F)||T()}function v(F){if(Array.isArray(F))return P(F)}function I(F){if(Array.isArray(F))return F}function D(F){if(typeof Symbol<"u"&&F[Symbol.iterator]!=null||F["@@iterator"]!=null)return Array.from(F)}function k(F,N){if(F){if(typeof F=="string")return P(F,N);var y=Object.prototype.toString.call(F).slice(8,-1);if(y==="Object"&&F.constructor&&(y=F.constructor.name),y==="Map"||y==="Set")return Array.from(F);if(y==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(y))return P(F,N)}}function P(F,N){(N==null||N>F.length)&&(N=F.length);for(var y=0,U=new Array(N);y<N;y++)U[y]=F[y];return U}function T(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C(F,N){var y=typeof Symbol<"u"&&F[Symbol.iterator]||F["@@iterator"];if(!y){if(Array.isArray(F)||(y=k(F))||N){y&&(F=y);var U=0,L=function(){};return{s:L,n:function(){return U>=F.length?{done:!0}:{done:!1,value:F[U++]}},e:function(ce){throw ce},f:L}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var q=!0,K=!1,re;return{s:function(){y=y.call(F)},n:function(){var ce=y.next();return q=ce.done,ce},e:function(ce){K=!0,re=ce},f:function(){try{!q&&y.return!=null&&y.return()}finally{if(K)throw re}}}}function R(F,N){if(typeof F!="object"||F===null)return F;var y=F[Symbol.toPrimitive];if(y!==void 0){var U=y.call(F,N);if(typeof U!="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return(N==="string"?String:Number)(F)}function M(F){var N=R(F,"string");return typeof N=="symbol"?N:String(N)}var O=function(F,N,y){var U=F.x,L=F.y,q=y.x,K=y.y,re={"+":{x:U+q,y:L+K},"-":{x:U-q,y:L-K},"*":{x:U*q,y:L*K},"/":{x:U/q,y:L/K}};return re[N]},B=function(F){return{x:F.left,y:F.top}},G=function(F){var N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return{left:F.x,top:F.y,right:F.x,bottom:F.y,width:N,height:N}},$=function(F){return{x:F,y:F}},te=function(F,N){var y=N;window.addEventListener("resize",y),window.addEventListener("scroll",y);var U=new MutationObserver(y);F.forEach(function(q,K){U.observe(q,{childList:K!==0,attributes:!0})});var L=function(){return Me(U,y)};return{observer:U,callback:y,cleanup:L}},V=function(F){var N=ge(F);return N.x||N.y?!0:F instanceof Document?F.body?!!(F.body.scrollTop=1):!!(F.documentElement.scrollTop=1):!!(F.scrollTop=1)},X=function(){var F=document.createElement("div");return F.style.position="fixed",F.style.overflow="hidden",F.style.pointerEvents="none",F.style.zIndex="999999999999999999",F},ie=function(F){var N=document.createElement("div");return N.style.position="absolute",F||(N.style.background="rgba(0, 175, 255, 0.2)",N.style.border="1px solid rgba(0, 175, 255, 0.8)",N.style.display="none",N.style.pointerEvents="none"),N},ne=function(F,N){var y;return function(){for(var U=arguments.length,L=new Array(U),q=0;q<U;q++)L[q]=arguments[q];var K=function(){y=null,F.apply(void 0,L)};clearTimeout(y),y=setTimeout(K,N)}},fe=function(){var F,N,y,U;return{y:((F=document.body)===null||F===void 0?void 0:F.scrollTop)||((N=document.documentElement)===null||N===void 0?void 0:N.scrollTop)||0,x:((y=document.body)===null||y===void 0?void 0:y.scrollLeft)||((U=document.documentElement)===null||U===void 0?void 0:U.scrollLeft)||0}},xe=function(F){var N=function y(U){var L,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,K=(L=U[q])===null||L===void 0?void 0:L.parentNode;return K?(U.push(K),q++,y(U,q)):U};return N([F])},be=function(F,N){if(F instanceof Document)return{top:0,left:0,bottom:0,right:0,width:window.innerWidth,height:window.innerHeight};var y=F.getBoundingClientRect();return{top:y.top,left:y.left,bottom:y.bottom,right:y.right,width:(F.clientWidth||y.width)*N,height:(F.clientHeight||y.height)*N}},oe=function(F,N){var y={top:Number.POSITIVE_INFINITY,left:Number.POSITIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,right:Number.NEGATIVE_INFINITY,width:Number.NEGATIVE_INFINITY,height:Number.NEGATIVE_INFINITY};return Ke(F).forEach(function(U){var L=N.getRect(U);y.top=Math.min(y.top,L.top),y.left=Math.min(y.left,L.left),y.bottom=Math.max(y.bottom,L.bottom),y.right=Math.max(y.right,L.right)}),y.height=y.bottom-y.top,y.width=y.right-y.left,y},ge=function(F){return!F||F instanceof Document?fe():{x:F.scrollLeft>=0?F.scrollLeft:fe().x,y:F.scrollTop>=0?F.scrollTop:fe().y}},Te=function(F){var N=F.elementRect,y=F.containerRect,U=F.tolerance,L=U===void 0?{x:0,y:0}:U,q=[];return N.top-L.y<y.top&&q.push("top"),N.left-L.x<y.left&&q.push("left"),N.bottom+L.y>y.bottom&&q.push("bottom"),N.right+L.y>y.right&&q.push("right"),q},H=function(F){var N=F.event;return{x:N.clientX,y:N.clientY}},z=function(F){var N=F.scrollAmount,y=F.initialPointerPos,U=F.pointerPos,L={};return U.x>y.x-N.x?(L.left=y.x-N.x,L.width=U.x-y.x+N.x):(L.left=U.x,L.width=y.x-U.x-N.x),U.y>y.y-N.y?(L.top=y.y-N.y,L.height=U.y-y.y+N.y):(L.top=U.y,L.height=y.y-U.y-N.y),L},W=function(F){var N={x:0,y:0},y=window.getComputedStyle(F);if(!y.transform||y.transform==="none")return N;if(y.transform.indexOf("3d")>=0){var U=y.transform.trim().match(/matrix3d\((.*?)\)/);if(U&&U.length){var L,q=(L=U[1])===null||L===void 0?void 0:L.split(",");N.x=parseInt(q[12])||0,N.y=parseInt(q[13])||0}return N}var K=y.transform.trim().match(/matrix\((.*?)\)/);if(K&&K.length){var re,ce=(re=K[1])===null||re===void 0?void 0:re.split(",");N.x=parseInt(ce[4])||0,N.y=parseInt(ce[5])||0}return N},Z=function(F){var N=F.style.transform;if(!N||N.indexOf("translate")<0)return W(F);var y={x:0,y:0},U=N.trim().match(/translate[3dD]*?\(.*?\)/);if(U){var L,q=(L=U[0])===null||L===void 0?void 0:L.split("(");if(q){var K,re=(K=q[1])===null||K===void 0?void 0:K.split(",");y.x=parseInt(re[0])||0,y.y=parseInt(re[1])||0}}return!y.x&&!y.x?W(F):y},J=function(F){var N=F.style,y={x:parseInt(N.left)||0,y:parseInt(N.top)||0};if(!y.x&&!y.x){var U=window.getComputedStyle(F);return{x:parseInt(U.left)||0,y:parseInt(U.top)||0}}return y},Y=function(F,N){return N?Z(F):J(F)},he=function(F){var N=F.element,y=F.edges,U=F.elementRect,L=F.containerRect,q=F.elementPos,K=F.useTransform;y.includes("top")&&Xe(N,{y:q.y+L.top-U.top,x:q.x},K),y.includes("left")&&Xe(N,{y:q.y,x:q.x+L.left-U.left},K),y.includes("bottom")&&Xe(N,{y:q.y+L.bottom-U.bottom,x:q.x},K),y.includes("right")&&Xe(N,{y:q.y,x:q.x+L.right-U.right},K)},de=function(F){var N=F.computedStyle,y=F.node,U=N.position,L=U==="absolute"||U==="relative"||U==="fixed";!(y instanceof Document)&&!L&&(y.style.position="relative")},me=function(F){var N=F.shiftKey,y=F.keyboardDragSpeed,U=F.zoom,L=F.key,q=F.dragKeys,K=F.scrollDiff,re=F.canScroll,ce=F.scrollCallback,De={x:0,y:0},Ie=N?y*4*U:y*U;return q.left.includes(L)&&(De.x=K.x||-Ie,!N&&!K.x&&re&&ce(["left"],y)),q.right.includes(L)&&(De.x=K.x||Ie,!N&&!K.x&&re&&ce(["right"],y)),q.up.includes(L)&&(De.y=K.y||-Ie,!N&&!K.y&&re&&ce(["top"],y)),q.down.includes(L)&&(De.y=K.y||Ie,!N&&!K.y&&re&&ce(["bottom"],y)),De},le=function(F){var N=F.element,y=F.force,U=F.multiSelectionToggle,L=F.SelectedSet,q=F.hoverClassName;N.classList.contains(q)&&!y||(L.has(N)?U&&L.delete(N):L.add(N),N.classList.add(q))},we=function(F){var N=F.element,y=F.force,U=F.SelectedSet,L=F.PrevSelectedSet,q=F.hoverClassName;if(!N.classList.contains(q)&&!y)return!1;var K=U.has(N),re=L.has(N);K&&!re?U.delete(N):!K&&re&&U.add(N),N.classList.remove(q)},pe=function(F,N,y){return console.warn('[DragSelect] TypeIssue: setting "'.concat(F,'" is not of type "').concat(N,'".'))},ue=function(F,N,y,U){if(N===void 0)return y?w({},F,U):{};if(N===null)return w({},F,null);var L=!0,q=!1,K=typeof U=="string";K&&(L=typeof N=="string"||N instanceof String),K&&!L&&(q=!0,pe(F,"string"));var re=!Number.isNaN(U)&&typeof U=="number";re&&(L=!Number.isNaN(N)&&typeof N=="number"),re&&!L&&(q=!0,pe(F,"number"));var ce=Object.prototype.toString.call(U)==="[object Object]";ce&&(L=Object.prototype.toString.call(N)==="[object Object]"),ce&&!L&&(q=!0,pe(F,"object"));var De=typeof U=="boolean";De&&(L=typeof N=="boolean"),De&&!L&&(q=!0,pe(F,"boolean"));var Ie=Array.isArray(U);Ie&&(L=Array.isArray(N)),Ie&&!L&&(q=!0,pe(F,"array"));var ft=q||y;return F==="dragKeys"&&L?w({},F,Object.assign(U,N)):F==="dragKeys"&&!L?ft?w({},F,U):{}:(F==="dropZones"&&L&&new Set(N.map(function(ht){return ht.id})).size!==N.length&&console.warn('[DragSelect] UniqueConstraintsIssue: setting "dropZones" contains duplicate ids.'),L?w({},F,N):ft?w({},F,U):{})},Se=function(F,N){return s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s(s({},ue("area",F.area,N,document)),ue("selectables",F.selectables,N,null)),ue("autoScrollSpeed",F.autoScrollSpeed,N,5)),ue("overflowTolerance",F.overflowTolerance,N,{x:25,y:25})),ue("zoom",F.zoom,N,1)),ue("customStyles",F.customStyles,N,!1)),ue("multiSelectMode",F.multiSelectMode,N,!1)),ue("multiSelectToggling",F.multiSelectToggling,N,!0)),ue("multiSelectKeys",F.multiSelectKeys,N,["Control","Shift","Meta"])),ue("selector",F.selector,N,null)),ue("selectionThreshold",F.selectionThreshold,N,0)),ue("draggability",F.draggability,N,!0)),ue("immediateDrag",F.immediateDrag,N,!0)),ue("keyboardDrag",F.keyboardDrag,N,!0)),ue("dragKeys",F.dragKeys,N,{up:["ArrowUp"],down:["ArrowDown"],left:["ArrowLeft"],right:["ArrowRight"]})),ue("keyboardDragSpeed",F.keyboardDragSpeed,N,10)),ue("useTransform",F.useTransform,N,!0)),ue("refreshMemoryRate",F.refreshMemoryRate,N,80)),ue("dropZones",F.dropZones,N,[])),ue("dropInsideThreshold",F.dropInsideThreshold,N,1)),ue("dropTargetThreshold",F.dropTargetThreshold,N,0)),ue("usePointerEvents",F.usePointerEvents,N,!1)),ue("hoverClass",F.hoverClass,N,"ds-hover")),ue("selectableClass",F.selectableClass,N,"ds-selectable")),ue("selectedClass",F.selectedClass,N,"ds-selected")),ue("selectorClass",F.selectorClass,N,"ds-selector")),ue("selectorAreaClass",F.selectorAreaClass,N,"ds-selector-area")),ue("droppedTargetClass",F.droppedTargetClass,N,"ds-dropped-target")),ue("droppedInsideClass",F.droppedInsideClass,N,"ds-dropped-inside")),ue("droppableClass",F.droppableClass,N,"ds-droppable")),ue("dropZoneClass",F.dropZoneClass,N,"ds-dropzone")),ue("dropZoneReadyClass",F.dropZoneReadyClass,N,"ds-dropzone-ready")),ue("dropZoneTargetClass",F.dropZoneTargetClass,N,"ds-dropzone-target")),ue("dropZoneInsideClass",F.dropZoneInsideClass,N,"ds-dropzone-inside")),ue("dragAsBlock",F.dragAsBlock,N,!1))},Re=function(F,N){var y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,U=F;if(y>0){var L=(F.right-F.left)*y,q=(F.bottom-F.top)*y;U={left:F.left+L,right:F.right-L,top:F.top+q,bottom:F.bottom-q}}return U.left<N.right&&U.right>N.left&&U.top<N.bottom&&U.bottom>N.top},Pe=function(F){var N=F.element,y=F.posDirection,U=F.containerRect,L=F.useTransform,q=Y(N,L),K=O(q,"+",y);Xe(N,K,L);var re=N.getBoundingClientRect(),ce=Te({elementRect:re,containerRect:U});he({element:N,edges:ce,elementRect:re,containerRect:U,elementPos:K,useTransform:L})},Me=function(F,N){window.removeEventListener("resize",N),window.removeEventListener("scroll",N),F.disconnect()},rt=function(F,N,y){if(N.length){var U=document&&document.documentElement&&document.documentElement.scrollTop&&document.documentElement,L=F instanceof Document?U||document.body:F,q=N.includes("top")&&L.scrollTop>0,K=N.includes("bottom")&&L.scrollTop<L.scrollHeight,re=N.includes("left")&&L.scrollLeft>0,ce=N.includes("right")&&L.scrollLeft<L.scrollWidth;q&&(L.scrollTop-=1*y),K&&(L.scrollTop+=1*y),re&&(L.scrollLeft-=1*y),ce&&(L.scrollLeft+=1*y)}},Xe=function(F,N,y){if(y){var U=F.style.transform;F.style.transform="translate3d(".concat(N.x,"px,").concat(N.y,"px,1px) ").concat(U.replace(/translate.*?\)/g,""))}else F.style.left="".concat(N.x,"px"),F.style.top="".concat(N.y,"px");return F},yt=function(F){for(var N=F.subscribe,y=F.publish,U=F.Interaction,L=F.SelectedSet,q=F.DropZones,K={"Selected:added":[{name:"elementselect"}],"Selected:removed":[{name:"elementunselect"}],"Area:scroll":[{name:"autoscroll"}],"Interaction:start":[{name:"dragstart"}],"Interaction:update":[{name:"dragmove",condition:function(Ie){return Ie.event}}],"Interaction:end":[{name:"callback",extraData:function(){var Ie=q.getTarget();return s({},Ie?{dropTarget:Ie.toObject()}:{})}}]},re=function(){var Ie=m(De[ce],2),ft=Ie[0],ht=Ie[1];["pre",!1].forEach(function(Ct){return N(Ct?"".concat(ft,":").concat(Ct):ft,function($e){return ht.forEach(function(Rt){return(!Rt.condition||Rt.condition($e))&&y(Ct?"".concat(Ct).concat(Rt.name):Rt.name,s(s({items:L.elements,isDragging:U.isDragging},$e),Rt.extraData?Rt.extraData($e):{}))})})})},ce=0,De=Object.entries(K);ce<De.length;ce++)re()},Ke=function(F){return F?!Array.isArray(F)&&(F instanceof HTMLElement||F instanceof SVGElement)?[F]:x(new Set(x(F))):[]},Jt=function(F,N){F.style.left="".concat(N.left,"px"),F.style.top="".concat(N.top,"px"),F.style.width="".concat(N.width,"px"),F.style.height="".concat(N.height,"px")},kr=function(){function F(N){var y=this,U=N.DS;u(this,F),w(this,"DS",void 0),w(this,"_observers",void 0),w(this,"_node",void 0),w(this,"_parentNodes",void 0),w(this,"_computedStyle",void 0),w(this,"_computedBorder",void 0),w(this,"_rect",void 0),w(this,"setArea",function(L){y.reset(),y._node=L,de({computedStyle:y.computedStyle,node:y._node}),setTimeout(function(){y.DS.PubSub.publish("Area:modified:pre",{item:y}),y.reset(),y.DS.PubSub.publish("Area:modified",{item:y})})}),w(this,"start",function(){y._observers=te(y.parentNodes,ne(function(L){y.DS.PubSub.publish("Area:modified:pre",{event:L,item:y}),y.reset(),y.DS.PubSub.publish("Area:modified",{event:L,item:y})},60))}),w(this,"reset",function(){y._computedStyle=void 0,y._rect=void 0,y._computedBorder=void 0,y._parentNodes=void 0}),w(this,"stop",function(){y._observers.cleanup(),y.reset()}),w(this,"scroll",function(L,q){var K={scroll_directions:L,scroll_multiplier:q};y.DS.PubSub.publish("Area:scroll:pre",K),rt(y._node,L,q),y.DS.PubSub.publish("Area:scroll",K)}),this.DS=U,this.setArea(this.DS.stores.SettingsStore.s.area),this.DS.PubSub.subscribe("Settings:updated:area",function(L){var q=L.settings;y.setArea(q.area)}),this.DS.PubSub.subscribe("Interaction:init",this.start),this.DS.PubSub.subscribe("Interaction:end",this.reset)}return E(F,[{key:"HTMLNode",get:function(){return this._node}},{key:"computedBorder",get:function(){return this._computedBorder?this._computedBorder:{top:parseInt(this.computedStyle.borderTopWidth),bottom:parseInt(this.computedStyle.borderBottomWidth),left:parseInt(this.computedStyle.borderLeftWidth),right:parseInt(this.computedStyle.borderRightWidth)}}},{key:"computedStyle",get:function(){return this._computedStyle?this._computedStyle:this.HTMLNode instanceof Document?this._computedStyle=window.getComputedStyle(this.HTMLNode.body||this.HTMLNode.documentElement):this._computedStyle=window.getComputedStyle(this.HTMLNode)}},{key:"rect",get:function(){return this._rect?this._rect:this._rect=be(this.HTMLNode,this.DS.stores.SettingsStore.s.zoom)}},{key:"parentNodes",get:function(){return this._parentNodes?this._parentNodes:this._parentNodes=xe(this.HTMLNode)}}]),F}(),st=function(){function F(N){var y=this,U=N.DS;u(this,F),w(this,"_prevCursorPos",void 0),w(this,"_prevScrollPos",void 0),w(this,"_elements",[]),w(this,"_dragKeys",void 0),w(this,"_dragKeysFlat",[]),w(this,"_selectionRect",void 0),w(this,"assignDragkeys",function(){y._dragKeys={up:y.DS.stores.SettingsStore.s.dragKeys.up.map(function(L){return L.toLowerCase()}),down:y.DS.stores.SettingsStore.s.dragKeys.down.map(function(L){return L.toLowerCase()}),left:y.DS.stores.SettingsStore.s.dragKeys.left.map(function(L){return L.toLowerCase()}),right:y.DS.stores.SettingsStore.s.dragKeys.right.map(function(L){return L.toLowerCase()})},y._dragKeysFlat=[].concat(x(y._dragKeys.up),x(y._dragKeys.down),x(y._dragKeys.left),x(y._dragKeys.right))}),w(this,"keyboardDrag",function(L){var q=L.event,K=L.key,re=K.toLowerCase();if(!(!y.DS.stores.SettingsStore.s.keyboardDrag||!y._dragKeysFlat.includes(re)||!y.DS.SelectedSet.size||!y.DS.stores.SettingsStore.s.draggability||y.DS.continue)){var ce={event:q,isDragging:!0,isDraggingKeyboard:!0};y.DS.publish(["Interaction:start:pre","Interaction:start"],ce),y._elements=y.DS.getSelection(),y.DS.stores.SettingsStore.s.dragAsBlock&&(y._selectionRect=oe(y._elements,y.DS.SelectableSet)),y.handleZIndex(!0);var De=me({shiftKey:y.DS.stores.KeyStore.currentValues.includes("shift"),keyboardDragSpeed:y.DS.stores.SettingsStore.s.keyboardDragSpeed,zoom:y.DS.stores.SettingsStore.s.zoom,key:re,scrollCallback:y.DS.Area.scroll,scrollDiff:y._scrollDiff,canScroll:y.DS.stores.ScrollStore.canScroll,dragKeys:y._dragKeys});y.DS.stores.SettingsStore.s.dragAsBlock&&(De=y.limitDirection(De)),y._elements.forEach(function(Ie){return Pe({element:Ie,posDirection:De,containerRect:y.DS.SelectorArea.rect,useTransform:y.DS.stores.SettingsStore.s.useTransform})}),y.DS.publish(["Interaction:update:pre","Interaction:update"],ce)}}),w(this,"keyboardEnd",function(L){var q=L.event,K=L.key,re=K.toLowerCase();if(!(!y.DS.stores.SettingsStore.s.keyboardDrag||!y._dragKeysFlat.includes(re)||!y.DS.SelectedSet.size||!y.DS.stores.SettingsStore.s.draggability)){var ce={event:q,isDragging:y.DS.stores.SettingsStore.s.draggability,isDraggingKeyboard:!0};y.DS.publish(["Interaction:end:pre","Interaction:end"],ce)}}),w(this,"start",function(L){var q=L.isDragging,K=L.isDraggingKeyboard;!q||K||(y._prevCursorPos=null,y._prevScrollPos=null,y._elements=y.DS.getSelection(),y.DS.stores.SettingsStore.s.dragAsBlock&&(y._selectionRect=oe(y._elements,y.DS.SelectableSet)),y.handleZIndex(!0))}),w(this,"stop",function(L){L!=null&&L.isKeyboard||(y._prevCursorPos=null,y._prevScrollPos=null,y.handleZIndex(!1),y._elements=[])}),w(this,"update",function(L){var q=L.isDragging,K=L.isDraggingKeyboard;if(!(!q||!y._elements.length||K||y.DS.continue)){var re=O(y._cursorDiff,"+",y._scrollDiff);y.DS.stores.SettingsStore.s.dragAsBlock&&(re=y.limitDirection(re)),y._elements.forEach(function(ce){return Pe({element:ce,posDirection:re,containerRect:y.DS.SelectorArea.rect,useTransform:y.DS.stores.SettingsStore.s.useTransform})})}}),w(this,"limitDirection",function(L){var q=y.DS.SelectorArea.rect,K=y.DS.stores.ScrollStore.scrollAmount,re={top:q.top-y._selectionRect.top+K.y,left:q.left-y._selectionRect.left+K.x,bottom:q.bottom-y._selectionRect.bottom+K.y,right:q.right-y._selectionRect.right+K.x};return L.x===0&&L.y===0||(L.y<0&&(L.y=Math.max(L.y,re.top)),L.x<0&&(L.x=Math.max(L.x,re.left)),L.y>0&&(L.y=Math.min(L.y,re.bottom)),L.x>0&&(L.x=Math.min(L.x,re.right)),y._selectionRect.top+=L.y,y._selectionRect.bottom+=L.y,y._selectionRect.left+=L.x,y._selectionRect.right+=L.x),L}),w(this,"handleZIndex",function(L){y._elements.forEach(function(q){return q.style.zIndex="".concat((parseInt(q.style.zIndex)||0)+L?9999:-9998)})}),this.DS=U,this.DS.subscribe("Settings:updated:dragKeys",this.assignDragkeys),this.assignDragkeys(),this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:end",this.stop),this.DS.subscribe("Interaction:update",this.update),this.DS.subscribe("KeyStore:down",this.keyboardDrag),this.DS.subscribe("KeyStore:up",this.keyboardEnd)}return E(F,[{key:"_cursorDiff",get:function(){var N=this.DS.stores.PointerStore.currentVal,y=this._prevCursorPos?O(N,"-",this._prevCursorPos):{x:0,y:0};return this._prevCursorPos=N,y}},{key:"_scrollDiff",get:function(){var N=this.DS.stores.ScrollStore.currentVal,y=this._prevScrollPos?O(N,"-",this._prevScrollPos):{x:0,y:0};return this._prevScrollPos=N,y}}]),F}(),bt=function(){function F(N){var y=this,U=N.DS,L=N.id,q=N.element,K=N.droppables;u(this,F),w(this,"id",void 0),w(this,"element",void 0),w(this,"_droppables",void 0),w(this,"_rect",void 0),w(this,"_observers",void 0),w(this,"_timeout",void 0),w(this,"_itemsDropped",[]),w(this,"_itemsInside",void 0),w(this,"setReadyClasses",function(re){if(!y.isDestroyed){var ce=y.droppables.filter(function(De){return y.DS.SelectedSet.has(De)});ce.length&&(ce.forEach(function(De){De.classList[re]("".concat(y.Settings.droppableClass)),De.classList[re]("".concat(y.Settings.droppableClass,"-").concat(y.id))}),y.element.classList[re]("".concat(y.Settings.dropZoneReadyClass)))}}),w(this,"handleNoDrop",function(){var re;y.isDestroyed||(y.DS.SelectedSet.forEach(function(ce){ce.classList.remove(y.Settings.droppedTargetClass),ce.classList.remove("".concat(y.Settings.droppedTargetClass,"-").concat(y.id))}),y._itemsDropped=y._itemsDropped.filter(function(ce){return!y.DS.SelectedSet.has(ce)}),(re=y._itemsDropped)!==null&&re!==void 0&&re.length||y.element.classList.remove("".concat(y.Settings.dropZoneTargetClass)))}),w(this,"handleDrop",function(){var re,ce,De;y.isDestroyed||(y._itemsDropped=x(new Set([].concat(x(y._itemsDropped),x((re=y.droppables)===null||re===void 0?void 0:re.filter(function(Ie){return y.DS.SelectedSet.has(Ie)}))))),(ce=y._itemsDropped)===null||ce===void 0||ce.forEach(function(Ie){Ie.classList.add("".concat(y.Settings.droppedTargetClass)),Ie.classList.add("".concat(y.Settings.droppedTargetClass,"-").concat(y.id))}),(De=y._itemsDropped)!==null&&De!==void 0&&De.length&&y.element.classList.add("".concat(y.Settings.dropZoneTargetClass)))}),w(this,"handleItemsInsideClasses",function(){var re=!1;y.droppables.forEach(function(ce){y.itemsInside.includes(ce)?(ce.classList.add("".concat(y.Settings.droppedInsideClass)),ce.classList.add("".concat(y.Settings.droppedInsideClass,"-").concat(y.id)),re=!0):(ce.classList.remove("".concat(y.Settings.droppedInsideClass,"-").concat(y.id)),ce.className.includes("".concat(y.Settings.droppedInsideClass,"-"))||ce.classList.remove("".concat(y.Settings.droppedInsideClass)))}),re?y.element.classList.add("".concat(y.Settings.dropZoneInsideClass)):y.element.classList.remove("".concat(y.Settings.dropZoneInsideClass))}),w(this,"start",function(re){var ce=re.isDragging;!ce||y.isDestroyed||y.setReadyClasses("add")}),w(this,"stop",function(re){var ce=re.isDragging;!ce||y.isDestroyed||(y.setReadyClasses("remove"),y.handleItemsInsideClasses())}),w(this,"toObject",function(){return{id:y.id,element:y.element,droppables:y.droppables,itemsDropped:y.itemsDropped,itemsInside:y.itemsInside}}),this.DS=U,this.Settings=U.stores.SettingsStore.s,this.id=L,this.element=q,K&&(this.droppables=Ke(K)),this.element.classList.add("".concat(this.Settings.dropZoneClass)),this.DS.subscribe("Settings:updated:dropZoneClass",function(re){var ce=re.settings;y.element&&(y.element.classList.remove(ce["dropZoneClass:pre"]),y.element.classList.add(ce.dropZoneClass))}),this._observers=te(this.parentNodes,ne(function(){return y._rect=null},this.Settings.refreshMemoryRate)),this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:end",this.stop)}return E(F,[{key:"destroy",value:function(){var N=this;this._observers.cleanup(),this.element.classList.remove("".concat(this.Settings.dropZoneClass)),this.element.classList.remove("".concat(this.Settings.dropZoneTargetClass)),this.element.classList.remove("".concat(this.Settings.dropZoneReadyClass)),this.droppables.forEach(function(y){y.classList.remove("".concat(N.Settings.droppedTargetClass)),y.classList.remove("".concat(N.Settings.droppedTargetClass,"-").concat(N.id)),y.classList.remove("".concat(N.Settings.droppableClass)),y.classList.remove("".concat(N.Settings.droppableClass,"-").concat(N.id))}),this.DS.unsubscribe("Interaction:start",this.start),this.DS.unsubscribe("Interaction:end",this.stop),this.element=null,this.droppables=null,this.id=null,this._itemsDropped=null,this._itemsInside=null,this.isDestroyed=!0}},{key:"rect",get:function(){return this.isDestroyed?null:this._rect?this._rect:this._rect=this.element.getBoundingClientRect()}},{key:"itemsDropped",get:function(){return this.isDestroyed?null:this._itemsDropped}},{key:"itemsInside",get:function(){var N=this;return this.isDestroyed?null:this._itemsInside?this._itemsInside:(this._itemsInside=this.droppables.flatMap(function(y){return Re(N.DS.SelectableSet.rects.get(y),N.rect,N.Settings.dropInsideThreshold)?[y]:[]}),this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){return N._itemsInside=null},this.Settings.refreshMemoryRate),this._itemsInside)}},{key:"parentNodes",get:function(){return this._parentNodes?this._parentNodes:this._parentNodes=xe(this.element)}},{key:"droppables",get:function(){return this._droppables?this._droppables:this.DS.SelectableSet.elements},set:function(N){this._droppables=N}}]),F}(),Or=E(function F(N){var y=this,U=N.DS;u(this,F),w(this,"_zoneByElement",new Map),w(this,"_zoneById",new Map),w(this,"_zonesByDroppable",new Map),w(this,"_zones",void 0),w(this,"setDropZones",function(L){var q=L.dropZones;q&&(y._zones&&y._zones.forEach(function(K){return K.destroy()}),y._zones=q.map(function(K){return new bt(s({DS:y.DS},K))}),y._zones.forEach(function(K){y._zoneByElement.set(K.element,K),y._zoneById.set(K.id,K),K.droppables.forEach(function(re){var ce=y._zonesByDroppable.get(re);if(!(ce!=null&&ce.length))return y._zonesByDroppable.set(re,[K]);y._zonesByDroppable.set(re,x(new Set([].concat(x(ce),[K]))))})}))}),w(this,"_handleDrop",function(L){y._zones.forEach(function(q){q!==L&&q.handleNoDrop()}),L&&L.handleDrop()}),w(this,"_getZoneByElementsFromPoint",function(L,q){for(var K=q.x,re=q.y,ce=0,De=L.length;ce<De;ce++){var Ie=y._zoneByElement.get(L[ce]);if(Ie&&Re(Ie.rect,{left:K,right:K,top:re,bottom:re},Math.min(y.Settings.dropTargetThreshold,.5)))return Ie}}),w(this,"stop",function(L){var q=L.isDragging;if(q){var K=y.getTarget();y._handleDrop(K)}}),w(this,"getItemsDroppedById",function(L){var q=y._zoneById.get(L);return q?q.itemsDropped:console.warn("[DragSelect] No zone found (id: ".concat(L,")"))}),w(this,"getItemsInsideById",function(L,q){var K=y._zoneById.get(L);if(!K)return console.warn("[DragSelect] No zone found (id: ".concat(L,")"));var re=K.itemsInside;return q&&K.handleItemsInsideClasses(),re}),w(this,"getTarget",function(L){var q;if((q=y._zones)!==null&&q!==void 0&&q.length){var K=L?.x||y.DS.stores.PointerStore.currentVal.x,re=L?.y||y.DS.stores.PointerStore.currentVal.y,ce=document.elementsFromPoint(K,re);return y._getZoneByElementsFromPoint(ce,{x:K,y:re})}}),this.DS=U,this.Settings=U.stores.SettingsStore.s,this.DS.subscribe("Settings:updated:dropZones",function(L){var q=L.settings;return y.setDropZones(q)}),this.setDropZones({dropZones:this.DS.stores.SettingsStore.s.dropZones}),this.DS.subscribe("Interaction:end",this.stop)}),pu=function(){function F(N){var y=this,U=N.DS;u(this,F),w(this,"isInteracting",void 0),w(this,"isDragging",void 0),w(this,"init",function(){return y.DS.publish("Interaction:init:pre",{})}),w(this,"_init",function(){y.stop(),y.Settings.usePointerEvents?y.DS.Area.HTMLNode.addEventListener("pointerdown",y.start,{passive:!1}):y.DS.Area.HTMLNode.addEventListener("mousedown",y.start),y.DS.Area.HTMLNode.addEventListener("touchstart",y.start,{passive:!1}),y.DS.publish("Interaction:init",{})}),w(this,"start",function(L){return y.DS.publish("Interaction:start:pre",{event:L,isDragging:y.isDragging})}),w(this,"_start",function(L){L.type==="touchstart"&&L.preventDefault(),y._canInteract(L)&&(y.isInteracting=!0,y.isDragging=y.isDragEvent(L),y.DS.publish("Interaction:start",{event:L,isDragging:y.isDragging}),y.Settings.usePointerEvents?(document.addEventListener("pointerup",y.reset),document.addEventListener("pointercancel",y.reset)):document.addEventListener("mouseup",y.reset),document.addEventListener("touchend",y.reset))}),w(this,"isDragEvent",function(L){var q=L.target.closest(".".concat(y.Settings.selectableClass));return!y.Settings.draggability||y.DS.stores.KeyStore.isMultiSelectKeyPressed(L)||!q?!1:(y.Settings.immediateDrag&&(y.DS.SelectedSet.size?y.DS.SelectedSet.has(q)||(y.DS.SelectedSet.clear(),y.DS.SelectedSet.add(q)):y.DS.SelectedSet.add(q)),!!y.DS.SelectedSet.has(q))}),w(this,"onClick",function(L){var q=L.event;if(y._canInteract(q)&&!(q.detail>0)){var K=y.DS,re=K.stores,ce=re.PointerStore,De=re.KeyStore,Ie=K.SelectableSet,ft=K.SelectedSet;ce.start(q);var ht=q.target;Ie.has(ht)&&(De.isMultiSelectKeyPressed(q)||ft.clear(),ft.toggle(ht),y.reset())}}),w(this,"stop",function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.DS.Area.HTMLNode;y.isInteracting=!1,y.isDragging=!1,y.Settings.usePointerEvents?(L.removeEventListener("pointerdown",y.start,{passive:!1}),document.removeEventListener("pointerup",y.reset),document.removeEventListener("pointercancel",y.reset)):(L.removeEventListener("mousedown",y.start),document.removeEventListener("mouseup",y.reset)),L.removeEventListener("touchstart",y.start,{passive:!1}),document.removeEventListener("touchend",y.reset)}),w(this,"update",function(L){var q=L.event,K=L.scroll_directions,re=L.scroll_multiplier;y.isInteracting&&y.DS.publish(["Interaction:update:pre","Interaction:update"],{event:q,scroll_directions:K,scroll_multiplier:re,isDragging:y.isDragging})}),w(this,"reset",function(L){return y.DS.publish("Interaction:end:pre",{event:L,isDragging:y.isDragging})}),w(this,"_reset",function(L){var q=y.isDragging;y.stop(),y.init(),y.DS.publish("Interaction:end",{event:L,isDragging:q})}),this.DS=U,this.Settings=U.stores.SettingsStore.s,this.DS.subscribe("Settings:updated:area",function(L){var q=L.settings;y.stop(q["area:pre"]),y.init()}),this.DS.subscribe("PointerStore:updated",this.update),this.DS.subscribe("Selectable:click",this.onClick),this.DS.subscribe("Selectable:pointer",function(L){var q=L.event;return y.start(q)}),this.DS.subscribe("Interaction:start:pre",function(L){var q=L.event;return y._start(q)}),this.DS.subscribe("Interaction:init:pre",this._init),this.DS.subscribe("Interaction:end:pre",function(L){var q=L.event;return y._reset(q)}),this.DS.subscribe("Area:scroll",this.update)}return E(F,[{key:"_canInteract",value:function(N){var y=N.clientX===0&&N.clientY===0&&N.detail===0&&N.target;return!(N.button===2||this.isInteracting||N.target&&!this.DS.SelectorArea.isInside(N.target)||!y&&!this.DS.SelectorArea.isClicked(N))}}]),F}(),gu=E(function F(N){var y=this,U=N.DS;u(this,F),w(this,"subscribers",{}),w(this,"subscribe",function(L,q){return Array.isArray(y.subscribers[L])||(y.subscribers[L]=[]),y.subscribers[L].push(q),y.subscribers[L].length-1}),w(this,"unsubscribe",function(L,q,K){K>=0?y.subscribers[L].splice(K,1):q&&(y.subscribers[L]=y.subscribers[L].filter(function(re){return re!==q}))}),w(this,"publish",function(L,q){Array.isArray(L)?L.forEach(function(K){return y._publish(K,q)}):y._publish(L,q)}),w(this,"_publish",function(L,q){var K=y.subscribers[L];Array.isArray(K)&&(L.includes(":pre")?y._handlePrePublish(K,q):y._handlePublish(K,q))}),w(this,"_handlePublish",function(L,q){for(var K=0,re=L.length;K<re;K++){if(y.DS.stopped)return;L[K](q)}}),w(this,"_handlePrePublish",function(L,q){for(var K=L.length;K--;){if(y.DS.stopped)return;L[K](q)}}),this.DS=U}),vu=function(F){l(y,F);var N=b(y);function y(U){var L,q=U.DS;return u(this,y),L=N.call(this),w(h(L),"_rects",void 0),w(h(L),"_timeout",void 0),w(h(L),"init",function(){return Ke(L.Settings.selectables).forEach(function(K){return L.add(K)})}),w(h(L),"clear",function(){return L.forEach(function(K){return L.delete(K)})}),w(h(L),"_onClick",function(K){return L.DS.publish(["Selectable:click:pre","Selectable:click"],{event:K})}),w(h(L),"_onPointer",function(K){return L.DS.publish(["Selectable:pointer:pre","Selectable:pointer"],{event:K})}),w(h(L),"addAll",function(K){return K.forEach(function(re){return L.add(re)})}),w(h(L),"deleteAll",function(K){return K.forEach(function(re){return L.delete(re)})}),w(h(L),"getRect",function(K){return L._rects?L.rects.get(K):K.getBoundingClientRect()}),L.DS=q,L.Settings=q.stores.SettingsStore.s,L.DS.subscribe("Interaction:init",L.init),L.DS.PubSub.subscribe("Settings:updated:selectables",function(){L.clear(),L.init()}),L.DS.subscribe("Settings:updated:selectableClass",function(K){var re=K.settings;L.forEach(function(ce){ce.classList.remove(re["selectableClass:pre"]),ce.classList.add(re.selectableClass)})}),L}return E(y,[{key:"add",value:function(U){if(p(r(y.prototype),"has",this).call(this,U))return this;var L={items:this.elements,item:U};return this.DS.publish("Selectable:added:pre",L),U.classList.add(this.Settings.selectableClass),U.addEventListener("click",this._onClick),this.Settings.usePointerEvents?U.addEventListener("pointerdown",this._onPointer,{passive:!1}):U.addEventListener("mousedown",this._onPointer),U.addEventListener("touchstart",this._onPointer,{passive:!1}),this.Settings.draggability&&!this.Settings.useTransform&&de({computedStyle:window.getComputedStyle(U),node:U}),p(r(y.prototype),"add",this).call(this,U),this.DS.publish("Selectable:added",L),this}},{key:"delete",value:function(U){if(!p(r(y.prototype),"has",this).call(this,U))return!0;var L={items:this.elements,item:U};return this.DS.publish("Selectable:removed:pre",L),U.classList.remove(this.Settings.selectableClass),U.classList.remove(this.Settings.hoverClass),U.removeEventListener("click",this._onClick),this.Settings.usePointerEvents?U.removeEventListener("pointerdown",this._onPointer,{passive:!1}):U.removeEventListener("mousedown",this._onPointer),U.removeEventListener("touchstart",this._onPointer,{passive:!1}),p(r(y.prototype),"delete",this).call(this,U),this.DS.publish("Selectable:removed",L),!0}},{key:"elements",get:function(){return Array.from(this.values())}},{key:"rects",get:function(){var U=this;return this._rects?this._rects:(this._rects=new Map,this.forEach(function(L){return U._rects.set(L,L.getBoundingClientRect())}),this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(function(){return U._rects=null},this.Settings.refreshMemoryRate),this._rects)}}]),y}(d(Set)),yu=function(F){l(y,F);var N=b(y);function y(U){var L,q=U.DS;return u(this,y),L=N.call(this),w(h(L),"clear",function(){return L.forEach(function(K){return L.delete(K)})}),w(h(L),"addAll",function(K){return K.forEach(function(re){return L.add(re)})}),w(h(L),"deleteAll",function(K){return K.forEach(function(re){return L.delete(re)})}),L.DS=q,L}return E(y,[{key:"add",value:function(U){if(p(r(y.prototype),"has",this).call(this,U))return this;var L={items:this.elements,item:U};return this.DS.publish("Selected:added:pre",L),p(r(y.prototype),"add",this).call(this,U),U.classList.add(this.DS.stores.SettingsStore.s.selectedClass),U.style.zIndex="".concat((parseInt(U.style.zIndex)||0)+1),this.DS.publish("Selected:added",L),this}},{key:"delete",value:function(U){if(!p(r(y.prototype),"has",this).call(this,U))return!0;var L={items:this.elements,item:U};this.DS.publish("Selected:removed:pre",L);var q=p(r(y.prototype),"delete",this).call(this,U);return U.classList.remove(this.DS.stores.SettingsStore.s.selectedClass),U.style.zIndex="".concat((parseInt(U.style.zIndex)||0)-1),this.DS.publish("Selected:removed",L),q}},{key:"toggle",value:function(U){return this.has(U)?this.delete(U):this.add(U),U}},{key:"elements",get:function(){return Array.from(this.values())}}]),y}(d(Set)),bu=function(){function F(N){var y=this,U=N.DS;u(this,F),w(this,"_prevSelectedSet",void 0),w(this,"start",function(L){var q=L.event,K=L.isDragging;K||(y._storePrevious(q),y._handleInsideSelection(!0,q))}),w(this,"update",function(L){var q=L.isDragging;q||y.DS.continue||y._handleInsideSelection()}),w(this,"_handleInsideSelection",function(L,q){var K=y.DS,re=K.SelectableSet,ce=K.SelectorArea,De=K.Selector,Ie=y.DS.stores.KeyStore.isMultiSelectKeyPressed(q)&&y.Settings.multiSelectToggling,ft=y.Settings.selectionThreshold,ht=re.rects,Ct=De.rect,$e=new Map,Rt=new Map,hi=C(ht),Mr;try{for(hi.s();!(Mr=hi.n()).done;){var Ys=m(Mr.value,2),Tn=Ys[0],Lr=Ys[1];ce.isInside(Tn,Lr)&&(Re(Lr,Ct,ft)?$e.set(Tn,Lr):Rt.set(Tn,Lr))}}catch(An){hi.e(An)}finally{hi.f()}if(!y.DS.continue){var Zs=y.filterSelected({select:$e,unselect:Rt,selectorRect:Ct}),Du=Zs.select,Iu=Zs.unselect;Du.forEach(function(An,Cn){return le({element:Cn,force:L,multiSelectionToggle:Ie,SelectedSet:y.DS.SelectedSet,hoverClassName:y.Settings.hoverClass})}),Iu.forEach(function(An,Cn){return we({element:Cn,force:L,SelectedSet:y.DS.SelectedSet,hoverClassName:y.Settings.hoverClass,PrevSelectedSet:y._prevSelectedSet})})}}),w(this,"filterSelected",function(L){var q=L.select,K=L.unselect;return L.selectorRect,{select:q,unselect:K}}),this.DS=U,this.Settings=this.DS.stores.SettingsStore.s,this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:update",this.update)}return E(F,[{key:"_storePrevious",value:function(N){var y=this.DS,U=y.stores.KeyStore,L=y.SelectedSet;U.isMultiSelectKeyPressed(N)?this._prevSelectedSet=new Set(L):this._prevSelectedSet=new Set}}]),F}(),xu=function(){function F(N){var y=this,U=N.DS;u(this,F),w(this,"_rect",void 0),w(this,"attachSelector",function(){var L,q;y.HTMLNode&&(L=y.DS.SelectorArea)!==null&&L!==void 0&&L.HTMLNode&&y.DS.SelectorArea.HTMLNode.removeChild(y.HTMLNode),y.HTMLNode=y.DS.stores.SettingsStore.s.selector||ie(y.DS.stores.SettingsStore.s.customStyles),y.HTMLNode.classList.add(y.DS.stores.SettingsStore.s.selectorClass),y.HTMLNode&&(q=y.DS.SelectorArea)!==null&&q!==void 0&&q.HTMLNode&&y.DS.SelectorArea.HTMLNode.appendChild(y.HTMLNode)}),w(this,"start",function(L){var q=L.isDragging;if(!q){var K=y.DS.stores.PointerStore,re=K.initialValArea;Jt(y.HTMLNode,G(re,1)),y.HTMLNode.style.display="block",y._rect=null}}),w(this,"stop",function(){y.HTMLNode.style.width="0",y.HTMLNode.style.height="0",y.HTMLNode.style.display="none"}),w(this,"update",function(L){var q=L.isDragging;if(!(q||y.DS.continue)){var K=y.DS.stores,re=K.ScrollStore,ce=K.PointerStore,De=z({scrollAmount:re.scrollAmount,initialPointerPos:ce.initialValArea,pointerPos:ce.currentValArea});Jt(y.HTMLNode,De),y._rect=null}}),this.DS=U,this.DS.subscribe("Settings:updated:selectorClass",function(L){var q=L.settings;y.HTMLNode.classList.remove(q["selectorClass:pre"]),y.HTMLNode.classList.add(q.selectorClass)}),this.DS.subscribe("Settings:updated:selector",this.attachSelector),this.DS.subscribe("Settings:updated:customStyles",this.attachSelector),this.attachSelector(),this.DS.subscribe("Interaction:start",this.start),this.DS.subscribe("Interaction:update",this.update),this.DS.subscribe("Interaction:end",this.stop)}return E(F,[{key:"rect",get:function(){return this._rect?this._rect:this._rect=this.HTMLNode.getBoundingClientRect()}}]),F}(),wu=function(){function F(N){var y=this,U=N.DS;u(this,F),w(this,"_scrollInterval",void 0),w(this,"_rect",void 0),w(this,"currentEdges",[]),w(this,"start",function(){y.applyElements("append"),y.updatePos()}),w(this,"applyElements",function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"append",q=document.body?"body":"documentElement",K="".concat(L,"Child");y.HTMLNode[K](y.DS.Selector.HTMLNode),document[q][K](y.HTMLNode)}),w(this,"updatePos",function(){y._rect=null;var L=y.DS.Area.rect,q=y.DS.Area.computedBorder,K=y.HTMLNode.style,re="".concat(L.top+q.top,"px"),ce="".concat(L.left+q.left,"px"),De="".concat(L.width,"px"),Ie="".concat(L.height,"px");K.top!==re&&(K.top=re),K.left!==ce&&(K.left=ce),K.width!==De&&(K.width=De),K.height!==Ie&&(K.height=Ie)}),w(this,"stop",function(L){y.stopAutoScroll(),L&&y.applyElements("remove")}),w(this,"startAutoScroll",function(){y.currentEdges=[],y._scrollInterval=setInterval(function(){return y.handleAutoScroll()},16)}),w(this,"handleAutoScroll",function(){if(!y.DS.continue){var L=y.DS,q=L.stores.PointerStore,K=L.Area;y.currentEdges=Te({elementRect:G(q.currentVal),containerRect:y.rect,tolerance:y.DS.stores.SettingsStore.s.overflowTolerance}),y.currentEdges.length&&K.scroll(y.currentEdges,y.DS.stores.SettingsStore.s.autoScrollSpeed)}}),w(this,"stopAutoScroll",function(){y.currentEdges=[],clearInterval(y._scrollInterval)}),w(this,"isInside",function(L,q){return y.DS.Area.HTMLNode.contains(L)&&y.DS.stores.ScrollStore.canScroll?!0:Re(y.rect,q||L.getBoundingClientRect())}),this.DS=U,this.HTMLNode=X(),this.DS.subscribe("Settings:updated:selectorAreaClass",function(L){var q=L.settings;y.HTMLNode.classList.remove(q["selectorAreaClass:pre"]),y.HTMLNode.classList.add(q.selectorAreaClass)}),this.HTMLNode.classList.add(this.DS.stores.SettingsStore.s.selectorAreaClass),this.DS.subscribe("Area:modified",this.updatePos),this.DS.subscribe("Area:modified",this.updatePos),this.DS.subscribe("Interaction:init",this.start),this.DS.subscribe("Interaction:start",this.startAutoScroll),this.DS.subscribe("Interaction:end",function(){y.updatePos(),y.stopAutoScroll()})}return E(F,[{key:"isClicked",value:function(N){var y=this.DS.stores.PointerStore,U=N?y.getPointerPosition(N):y.initialVal;return Re({left:U.x,top:U.y,right:U.x,bottom:U.y},this.rect)}},{key:"rect",get:function(){return this._rect?this._rect:this._rect=this.HTMLNode.getBoundingClientRect()}}]),F}(),_u=function(){function F(N){var y=this,U=N.DS;u(this,F),w(this,"_currentValues",new Set),w(this,"_keyMapping",{control:"ctrlKey",shift:"shiftKey",meta:"metaKey"}),w(this,"init",function(){document.addEventListener("keydown",y.keydown),document.addEventListener("keyup",y.keyup),window.addEventListener("blur",y.reset)}),w(this,"keydown",function(L){var q=L.key.toLowerCase();y.DS.publish("KeyStore:down:pre",{event:L,key:q}),y._currentValues.add(q),y.DS.publish("KeyStore:down",{event:L,key:q})}),w(this,"keyup",function(L){var q=L.key.toLowerCase();y.DS.publish("KeyStore:up:pre",{event:L,key:q}),y._currentValues.delete(q),y.DS.publish("KeyStore:up",{event:L,key:q})}),w(this,"stop",function(){document.removeEventListener("keydown",y.keydown),document.removeEventListener("keyup",y.reset),window.removeEventListener("blur",y.reset),y.reset()}),w(this,"reset",function(){return y._currentValues.clear()}),this.DS=U,this.DS.subscribe("Interaction:init",this.init)}return E(F,[{key:"isMultiSelectKeyPressed",value:function(N){var y=this;if(this.DS.stores.SettingsStore.s.multiSelectMode)return!0;var U=this.DS.stores.SettingsStore.s.multiSelectKeys.map(function(L){return L.toLocaleLowerCase()});return!!(this.currentValues.some(function(L){return U.includes(L.toLocaleLowerCase())})||N&&U.some(function(L){return N[y._keyMapping[L]]}))}},{key:"currentValues",get:function(){return Array.from(this._currentValues.values())}}]),F}(),Su=function(){function F(N){var y=this,U=N.DS;u(this,F),w(this,"_isMouseInteraction",!1),w(this,"_initialValArea",void 0),w(this,"_currentValArea",void 0),w(this,"_lastValArea",void 0),w(this,"_initialVal",void 0),w(this,"_currentVal",void 0),w(this,"_lastVal",void 0),w(this,"_lastTouch",void 0),w(this,"init",function(){y.Settings.usePointerEvents?document.addEventListener("pointermove",y.update,{passive:!1}):document.addEventListener("mousemove",y.update),document.addEventListener("touchmove",y.update,{passive:!1})}),w(this,"getPointerPosition",function(L){return H({event:y._normalizedEvent(L)})}),w(this,"update",function(L){L&&(y.DS.publish("PointerStore:updated:pre",{event:L}),y.currentVal=y.getPointerPosition(L),y._isMouseInteraction&&y.DS.publish("PointerStore:updated",{event:L}))}),w(this,"stop",function(){y.Settings.usePointerEvents?document.removeEventListener("pointermove",y.update,{passive:!1}):document.removeEventListener("mousemove",y.update),document.removeEventListener("touchmove",y.update,{passive:!1}),setTimeout(function(){return y._isMouseInteraction=!1},100)}),w(this,"reset",function(L){L&&(y.currentVal=y.lastVal=y.getPointerPosition(L),y.stop(),y.init())}),this.DS=U,this.Settings=U.stores.SettingsStore.s,this.DS.subscribe("Interaction:init",this.init),this.DS.subscribe("Interaction:start",function(L){var q=L.event;return y.start(q)}),this.DS.subscribe("Interaction:end",function(L){var q=L.event;return y.reset(q)})}return E(F,[{key:"start",value:function(N){N&&(this._isMouseInteraction=!0,this.currentVal=this.initialVal=this.getPointerPosition(N))}},{key:"_normalizedEvent",value:function(N){return"touches"in N&&N.type!=="touchend"&&(this._lastTouch=N),"touches"in N?this._lastTouch.touches[0]:N}},{key:"initialValArea",get:function(){return this._initialValArea?this._initialValArea:{x:0,y:0}}},{key:"currentValArea",get:function(){return this._currentValArea?this._currentValArea:{x:0,y:0}}},{key:"lastValArea",get:function(){return this._lastValArea?this._lastValArea:{x:0,y:0}}},{key:"initialVal",get:function(){return this._initialVal?this._initialVal:{x:0,y:0}},set:function(N){this._initialVal=N,this._initialValArea=N&&O(N,"-",O(B(this.DS.Area.rect),"+",B(this.DS.Area.computedBorder)))}},{key:"currentVal",get:function(){return this._currentVal?this._currentVal:{x:0,y:0}},set:function(N){this._currentVal=N,this._currentValArea=N&&O(N,"-",O(B(this.DS.Area.rect),"+",B(this.DS.Area.computedBorder)))}},{key:"lastVal",get:function(){return this._lastVal?this._lastVal:{x:0,y:0}},set:function(N){this._lastVal=N,this._lastValArea=N&&O(N,"-",O(B(this.DS.Area.rect),"+",B(this.DS.Area.computedBorder)))}}]),F}(),Eu=function(){function F(N){var y=this,U=N.DS;u(this,F),w(this,"_initialVal",void 0),w(this,"_currentVal",void 0),w(this,"_canScroll",void 0),w(this,"init",function(){return y.DS.stores.SettingsStore.s.area.addEventListener("scroll",y.update)}),w(this,"start",function(){y._currentVal=y._initialVal=ge(y.DS.stores.SettingsStore.s.area),y.DS.stores.SettingsStore.s.area.addEventListener("scroll",y.update)}),w(this,"update",function(){return y._currentVal=ge(y.DS.stores.SettingsStore.s.area)}),w(this,"stop",function(){y.DS.stores.SettingsStore.s.area.removeEventListener("scroll",y.update),y._initialVal={x:0,y:0},y._canScroll=null}),w(this,"reset",function(){y.stop(),y.start()}),this.DS=U,this.DS.subscribe("Interaction:init",this.init),this.DS.subscribe("Interaction:start",function(){return y.start()}),this.DS.subscribe("Interaction:end",function(){return y.reset()})}return E(F,[{key:"canScroll",get:function(){return typeof this._canScroll=="boolean"?this._canScroll:this._canScroll=V(this.DS.stores.SettingsStore.s.area)}},{key:"scrollAmount",get:function(){var N=O(this.currentVal,"-",this.initialVal),y=$(this.DS.stores.SettingsStore.s.zoom),U=O(O(N,"*",y),"-",N);return{x:N.x+U.x,y:N.y+U.y}}},{key:"initialVal",get:function(){return this._initialVal?this._initialVal:{x:0,y:0}}},{key:"currentVal",get:function(){return this._currentVal||(this._currentVal=ge(this.DS.stores.SettingsStore.s.area)),this._currentVal}}]),F}(),Ru=E(function F(N){var y=this,U=N.DS,L=N.settings;u(this,F),w(this,"_settings",{}),w(this,"s",{}),w(this,"update",function(q){var K=q.settings,re=q.init;return y.DS.publish("Settings:updated:pre",s({settings:K},re?{init:re}:{}))}),w(this,"_update",function(q){for(var K=q.settings,re=q.init,ce=Se(K,re),De=function(){var ht,Ct=m(ft[Ie],2),$e=Ct[0],Rt=Ct[1];$e in y._settings||Object.defineProperty(y.s,$e,{get:function(){return y._settings[$e]},set:function(Mr){return y.update({settings:w({},$e,Mr)})}}),y._settings["".concat($e,":pre")]=y._settings[$e],y._settings[$e]=Rt;var hi={settings:(ht={},w(ht,$e,y._settings[$e]),w(ht,"".concat($e,":pre"),y._settings["".concat($e,":pre")]),ht)};y.DS.publish("Settings:updated",hi),y.DS.publish("Settings:updated:".concat($e),hi)},Ie=0,ft=Object.entries(ce);Ie<ft.length;Ie++)De()}),this.DS=U,this.DS.subscribe("Settings:updated:pre",this._update),this.update({settings:L,init:!0})}),$s=function(){function F(N){var y=this;u(this,F),w(this,"continue",!1),w(this,"start",function(){y.stopped=!1,y.Interaction.init()}),w(this,"break",function(){return y.continue=!0}),w(this,"setSettings",function(U){return y.stores.SettingsStore.update({settings:U})}),w(this,"getSelection",function(){return y.SelectedSet.elements}),w(this,"getSelectables",function(){return y.SelectableSet.elements}),w(this,"getInitialCursorPosition",function(){return y.stores.PointerStore.initialVal}),w(this,"getCurrentCursorPosition",function(){return y.stores.PointerStore.currentVal}),w(this,"getPreviousCursorPosition",function(){return y.stores.PointerStore.lastVal}),w(this,"getInitialCursorPositionArea",function(){return y.stores.PointerStore.initialValArea}),w(this,"getCurrentCursorPositionArea",function(){return y.stores.PointerStore.currentValArea}),w(this,"getPreviousCursorPositionArea",function(){return y.stores.PointerStore.lastValArea}),w(this,"isMultiSelect",function(U){return y.stores.KeyStore.isMultiSelectKeyPressed(U)}),w(this,"isDragging",function(){return y.Interaction.isDragging}),w(this,"getZoneByCoordinates",function(U){var L;return(L=y.DropZones.getTarget(U))===null||L===void 0?void 0:L.toObject()}),w(this,"getItemsDroppedByZoneId",function(U){return y.DropZones.getItemsDroppedById(U)}),w(this,"getItemsInsideByZoneId",function(U,L){return y.DropZones.getItemsInsideById(U,L)}),this.PubSub=new gu({DS:this}),this.subscribe=this.PubSub.subscribe,this.unsubscribe=this.PubSub.unsubscribe,this.publish=this.PubSub.publish,this.stores={},this.stores.SettingsStore=new Ru({DS:this,settings:N}),this.stores.PointerStore=new Su({DS:this}),this.stores.ScrollStore=new Eu({DS:this}),this.stores.KeyStore=new _u({DS:this}),this.Area=new kr({DS:this}),this.Selector=new xu({DS:this}),this.SelectorArea=new wu({DS:this}),this.SelectableSet=new vu({DS:this}),this.SelectedSet=new yu({DS:this}),this.Selection=new bu({DS:this}),this.Drag=new st({DS:this}),this.DropZones=new Or({DS:this}),this.Interaction=new pu({DS:this}),yt({subscribe:this.subscribe,publish:this.publish,SelectedSet:this.SelectedSet,Interaction:this.Interaction,DropZones:this.DropZones}),this.subscribe("Interaction:end",function(){return y.continue=!1}),this.start()}return E(F,[{key:"stop",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;U&&this.publish("callback",{items:this.getSelection()}),this.Interaction.stop(),this.Area.stop(),this.Drag.stop(),this.Selector.stop(),this.SelectorArea.stop(N),this.stores.KeyStore.stop(),this.stores.PointerStore.stop(),this.stores.ScrollStore.stop(),N&&this.SelectableSet.clear(),y&&this.SelectedSet.clear(),this.stopped=!0}},{key:"addSelection",value:function(N){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.SelectedSet.addAll(Ke(N)),U||this.addSelectables(N),y&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"removeSelection",value:function(N){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.SelectedSet.deleteAll(Ke(N)),U&&this.removeSelectables(N),y&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"toggleSelection",value:function(N){var y=this,U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return Ke(N).forEach(function(q){return y.SelectedSet.has(q)?y.removeSelection(N,U,L):y.addSelection(N,U,L)}),U&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"setSelection",value:function(N){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return this.clearSelection(),this.addSelection(N,y,U),this.getSelection()}},{key:"clearSelection",value:function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.SelectedSet.clear(),N&&this.PubSub.publish("callback",{items:this.getSelection()}),this.getSelection()}},{key:"addSelectables",value:function(N,y,U){var L=Ke(N);return this.SelectableSet.addAll(L),y&&this.SelectedSet.addAll(L),U&&this.PubSub.publish("callback",{items:this.getSelection()}),N}},{key:"setSelectables",value:function(N){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return console.warn('[DragSelect] DEPRECATION ".setSelectables" is deprecated and will be removed soon. Please use "ds.setSettings({ selectables: << new dom elements >> })" instead (see docs)'),this.removeSelectables(N,y),this.addSelectables(N,U)}},{key:"removeSelectables",value:function(N,y,U){return this.SelectableSet.deleteAll(Ke(N)),y&&this.removeSelection(N),U&&this.PubSub.publish("callback",{items:this.getSelection()}),N}}]),F}();return $s.isCollision=Re,$s})})(wl);var gh=wl.exports;const vh=ph(gh),_l=(e,t,i,n,s)=>(t=Math,i=t.log,n=1024,s=i(e)/i(n)|0,e/t.pow(n,s)).toFixed(0)+" "+(s?"KMGTPEZY"[--s]+"iB":"B"),Sl=(e,t=null)=>new Date(e*1e3).toLocaleString(t??navigator.language??"en-US"),yh={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},bh=j("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1),xh=[bh],wh={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},_h=j("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z","clip-rule":"evenodd"},null,-1),Sh=[_h],Eh={name:"VFSortIcon"},zr=Object.assign(Eh,{props:{direction:String},setup(e){return(t,i)=>(Q(),se("div",null,[e.direction=="down"?(Q(),se("svg",yh,xh)):ke("",!0),e.direction=="up"?(Q(),se("svg",wh,Sh)):ke("",!0)]))}}),Rh=["onClick"],Dh={name:"VFToast.vue"},Ih=Object.assign(Dh,{setup(e){const t=ye("emitter"),{getStore:i}=ye("storage"),n=ve(i("full-screen",!1)),s=w=>w=="error"?"text-red-400 border-red-400 dark:text-red-300 dark:border-red-300":"text-lime-600 border-lime-600 dark:text-lime-300 dark:border-lime-1300",u=ve([]),_=w=>{u.value.splice(w,1)},E=w=>{let l=u.value.findIndex(r=>r.id===w);l!==-1&&_(l)};return t.on("vf-toast-clear",()=>{u.value=[]}),t.on("vf-toast-push",w=>{let l=new Date().getTime().toString(36).concat(performance.now().toString(),Math.random().toString()).replace(/\./g,"");w.id=l,u.value.push(w),setTimeout(()=>{E(l)},5e3)}),(w,l)=>(Q(),se("div",{class:Ye([n.value.value?"fixed":"absolute","bottom-0 max-w-fit flex flex-col bottom-0 left-1/2 -translate-x-1/2"])},[Ve(Jd,{name:"vf-toast-item","leave-active-class":"transition-all duration-1000","leave-to-class":"opacity-0"},{default:Oe(()=>[(Q(!0),se(Ce,null,St(u.value,(r,a)=>(Q(),se("div",{onClick:f=>_(a),key:r,class:Ye([s(r.type),"inline-block mx-auto my-0.5 py-0.5 px-2 min-w-max bg-gray-50 dark:bg-gray-600 border text-xs sm:text-sm rounded cursor-pointer"])},ae(r.label),11,Rh))),128))]),_:1})],2))}}),Ti=e=>Object.entries(e).map(t=>t.map(encodeURIComponent).join("=")).join("&"),{apiUrl:Th}=Bt(),ss=(e,t)=>Th.value+"?"+Ti({q:"preview",adapter:e,path:t}),di=typeof window<"u",El=di&&!("onscroll"in window)||typeof navigator<"u"&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),Rl=di&&"IntersectionObserver"in window,Dl=di&&"classList"in document.createElement("p"),Il=di&&window.devicePixelRatio>1,Ah={elements_selector:".lazy",container:El||di?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},Tl=e=>Object.assign({},Ah,e),Vo=function(e,t){let i;const n="LazyLoad::Initialized",s=new e(t);try{i=new CustomEvent(n,{detail:{instance:s}})}catch{i=document.createEvent("CustomEvent"),i.initCustomEvent(n,!1,!1,{instance:s})}window.dispatchEvent(i)},Ch=(e,t)=>{if(t)if(!t.length)Vo(e,t);else for(let i=0,n;n=t[i];i+=1)Vo(e,n)},Yt="src",Ms="srcset",Ls="sizes",Al="poster",Tr="llOriginalAttrs",Cl="data",Ns="loading",kl="loaded",Ol="applied",kh="entered",Fs="error",Ml="native",Ll="data-",Nl="ll-status",dt=(e,t)=>e.getAttribute(Ll+t),Oh=(e,t,i)=>{const n=Ll+t;if(i===null){e.removeAttribute(n);return}e.setAttribute(n,i)},Ar=e=>dt(e,Nl),Ai=(e,t)=>Oh(e,Nl,t),Sn=e=>Ai(e,null),Ps=e=>Ar(e)===null,Mh=e=>Ar(e)===Ns,Lh=e=>Ar(e)===Fs,Hs=e=>Ar(e)===Ml,Nh=[Ns,kl,Ol,Fs],Fh=e=>Nh.indexOf(Ar(e))>=0,fi=(e,t,i,n)=>{if(!(!e||typeof e!="function")){if(n!==void 0){e(t,i,n);return}if(i!==void 0){e(t,i);return}e(t)}},Zi=(e,t)=>{if(Dl){e.classList.add(t);return}e.className+=(e.className?" ":"")+t},Nt=(e,t)=>{if(Dl){e.classList.remove(t);return}e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},Ph=e=>{e.llTempImage=document.createElement("IMG")},Hh=e=>{delete e.llTempImage},Fl=e=>e.llTempImage,En=(e,t)=>{if(!t)return;const i=t._observer;i&&i.unobserve(e)},zh=e=>{e.disconnect()},Bh=(e,t,i)=>{t.unobserve_entered&&En(e,i)},zs=(e,t)=>{e&&(e.loadingCount+=t)},jh=e=>{e&&(e.toLoadCount-=1)},Pl=(e,t)=>{e&&(e.toLoadCount=t)},Uh=e=>e.loadingCount>0,Vh=e=>e.toLoadCount>0,Hl=e=>{let t=[];for(let i=0,n;n=e.children[i];i+=1)n.tagName==="SOURCE"&&t.push(n);return t},Bs=(e,t)=>{const i=e.parentNode;!i||i.tagName!=="PICTURE"||Hl(i).forEach(t)},zl=(e,t)=>{Hl(e).forEach(t)},Rn=[Yt],Bl=[Yt,Al],wr=[Yt,Ms,Ls],jl=[Cl],Dn=e=>!!e[Tr],Ul=e=>e[Tr],Vl=e=>delete e[Tr],Wi=(e,t)=>{if(Dn(e))return;const i={};t.forEach(n=>{i[n]=e.getAttribute(n)}),e[Tr]=i},qh=e=>{Dn(e)||(e[Tr]={backgroundImage:e.style.backgroundImage})},Gh=(e,t,i)=>{if(!i){e.removeAttribute(t);return}e.setAttribute(t,i)},Di=(e,t)=>{if(!Dn(e))return;const i=Ul(e);t.forEach(n=>{Gh(e,n,i[n])})},Xh=e=>{if(!Dn(e))return;const t=Ul(e);e.style.backgroundImage=t.backgroundImage},ql=(e,t,i)=>{Zi(e,t.class_applied),Ai(e,Ol),i&&(t.unobserve_completed&&En(e,t),fi(t.callback_applied,e,i))},Gl=(e,t,i)=>{Zi(e,t.class_loading),Ai(e,Ns),i&&(zs(i,1),fi(t.callback_loading,e,i))},li=(e,t,i)=>{i&&e.setAttribute(t,i)},qo=(e,t)=>{li(e,Ls,dt(e,t.data_sizes)),li(e,Ms,dt(e,t.data_srcset)),li(e,Yt,dt(e,t.data_src))},Wh=(e,t)=>{Bs(e,i=>{Wi(i,wr),qo(i,t)}),Wi(e,wr),qo(e,t)},Kh=(e,t)=>{Wi(e,Rn),li(e,Yt,dt(e,t.data_src))},$h=(e,t)=>{zl(e,i=>{Wi(i,Rn),li(i,Yt,dt(i,t.data_src))}),Wi(e,Bl),li(e,Al,dt(e,t.data_poster)),li(e,Yt,dt(e,t.data_src)),e.load()},Yh=(e,t)=>{Wi(e,jl),li(e,Cl,dt(e,t.data_src))},Zh=(e,t,i)=>{const n=dt(e,t.data_bg),s=dt(e,t.data_bg_hidpi),u=Il&&s?s:n;u&&(e.style.backgroundImage=`url("${u}")`,Fl(e).setAttribute(Yt,u),Gl(e,t,i))},Jh=(e,t,i)=>{const n=dt(e,t.data_bg_multi),s=dt(e,t.data_bg_multi_hidpi),u=Il&&s?s:n;u&&(e.style.backgroundImage=u,ql(e,t,i))},Qh=(e,t,i)=>{const n=dt(e,t.data_bg_set);if(!n)return;const s=n.split("|");let u=s.map(_=>`image-set(${_})`);e.style.backgroundImage=u.join(),e.style.backgroundImage===""&&(u=s.map(_=>`-webkit-image-set(${_})`),e.style.backgroundImage=u.join()),ql(e,t,i)},Xl={IMG:Wh,IFRAME:Kh,VIDEO:$h,OBJECT:Yh},em=(e,t)=>{const i=Xl[e.tagName];i&&i(e,t)},tm=(e,t,i)=>{const n=Xl[e.tagName];n&&(n(e,t),Gl(e,t,i))},im=["IMG","IFRAME","VIDEO","OBJECT"],rm=e=>im.indexOf(e.tagName)>-1,Wl=(e,t)=>{t&&!Uh(t)&&!Vh(t)&&fi(e.callback_finish,t)},Go=(e,t,i)=>{e.addEventListener(t,i),e.llEvLisnrs[t]=i},nm=(e,t,i)=>{e.removeEventListener(t,i)},js=e=>!!e.llEvLisnrs,sm=(e,t,i)=>{js(e)||(e.llEvLisnrs={});const n=e.tagName==="VIDEO"?"loadeddata":"load";Go(e,n,t),Go(e,"error",i)},os=e=>{if(!js(e))return;const t=e.llEvLisnrs;for(let i in t){const n=t[i];nm(e,i,n)}delete e.llEvLisnrs},Kl=(e,t,i)=>{Hh(e),zs(i,-1),jh(i),Nt(e,t.class_loading),t.unobserve_completed&&En(e,i)},om=(e,t,i,n)=>{const s=Hs(t);Kl(t,i,n),Zi(t,i.class_loaded),Ai(t,kl),fi(i.callback_loaded,t,n),s||Wl(i,n)},am=(e,t,i,n)=>{const s=Hs(t);Kl(t,i,n),Zi(t,i.class_error),Ai(t,Fs),fi(i.callback_error,t,n),i.restore_on_error&&Di(t,wr),s||Wl(i,n)},Us=(e,t,i)=>{const n=Fl(e)||e;js(n)||sm(n,s=>{om(s,e,t,i),os(n)},s=>{am(s,e,t,i),os(n)})},lm=(e,t,i)=>{Ph(e),Us(e,t,i),qh(e),Zh(e,t,i),Jh(e,t,i),Qh(e,t,i)},um=(e,t,i)=>{Us(e,t,i),tm(e,t,i)},Vs=(e,t,i)=>{rm(e)?um(e,t,i):lm(e,t,i)},cm=(e,t,i)=>{e.setAttribute("loading","lazy"),Us(e,t,i),em(e,t),Ai(e,Ml)},Xo=e=>{e.removeAttribute(Yt),e.removeAttribute(Ms),e.removeAttribute(Ls)},dm=e=>{Bs(e,t=>{Xo(t)}),Xo(e)},$l=e=>{Bs(e,t=>{Di(t,wr)}),Di(e,wr)},fm=e=>{zl(e,t=>{Di(t,Rn)}),Di(e,Bl),e.load()},hm=e=>{Di(e,Rn)},mm=e=>{Di(e,jl)},pm={IMG:$l,IFRAME:hm,VIDEO:fm,OBJECT:mm},gm=e=>{const t=pm[e.tagName];if(!t){Xh(e);return}t(e)},vm=(e,t)=>{Ps(e)||Hs(e)||(Nt(e,t.class_entered),Nt(e,t.class_exited),Nt(e,t.class_applied),Nt(e,t.class_loading),Nt(e,t.class_loaded),Nt(e,t.class_error))},ym=(e,t)=>{gm(e),vm(e,t),Sn(e),Vl(e)},bm=(e,t,i,n)=>{i.cancel_on_exit&&Mh(e)&&e.tagName==="IMG"&&(os(e),dm(e),$l(e),Nt(e,i.class_loading),zs(n,-1),Sn(e),fi(i.callback_cancel,e,t,n))},xm=(e,t,i,n)=>{const s=Fh(e);Ai(e,kh),Zi(e,i.class_entered),Nt(e,i.class_exited),Bh(e,i,n),fi(i.callback_enter,e,t,n),!s&&Vs(e,i,n)},wm=(e,t,i,n)=>{Ps(e)||(Zi(e,i.class_exited),bm(e,t,i,n),fi(i.callback_exit,e,t,n))},_m=["IMG","IFRAME","VIDEO"],Yl=e=>e.use_native&&"loading"in HTMLImageElement.prototype,Sm=(e,t,i)=>{e.forEach(n=>{_m.indexOf(n.tagName)!==-1&&cm(n,t,i)}),Pl(i,0)},Em=e=>e.isIntersecting||e.intersectionRatio>0,Rm=e=>({root:e.container===document?null:e.container,rootMargin:e.thresholds||e.threshold+"px"}),Dm=(e,t,i)=>{e.forEach(n=>Em(n)?xm(n.target,n,t,i):wm(n.target,n,t,i))},Im=(e,t)=>{t.forEach(i=>{e.observe(i)})},Tm=(e,t)=>{zh(e),Im(e,t)},Am=(e,t)=>{!Rl||Yl(e)||(t._observer=new IntersectionObserver(i=>{Dm(i,e,t)},Rm(e)))},Zl=e=>Array.prototype.slice.call(e),ln=e=>e.container.querySelectorAll(e.elements_selector),Cm=e=>Zl(e).filter(Ps),km=e=>Lh(e),Om=e=>Zl(e).filter(km),Wo=(e,t)=>Cm(e||ln(t)),Mm=(e,t)=>{Om(ln(e)).forEach(i=>{Nt(i,e.class_error),Sn(i)}),t.update()},Lm=(e,t)=>{di&&(t._onlineHandler=()=>{Mm(e,t)},window.addEventListener("online",t._onlineHandler))},Nm=e=>{di&&window.removeEventListener("online",e._onlineHandler)},Cr=function(e,t){const i=Tl(e);this._settings=i,this.loadingCount=0,Am(i,this),Lm(i,this),this.update(t)};Cr.prototype={update:function(e){const t=this._settings,i=Wo(e,t);if(Pl(this,i.length),El||!Rl){this.loadAll(i);return}if(Yl(t)){Sm(i,t,this);return}Tm(this._observer,i)},destroy:function(){this._observer&&this._observer.disconnect(),Nm(this),ln(this._settings).forEach(e=>{Vl(e)}),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(e){const t=this._settings;Wo(e,t).forEach(i=>{En(i,this),Vs(i,t,this)})},restoreAll:function(){const e=this._settings;ln(e).forEach(t=>{ym(t,e)})}};Cr.load=(e,t)=>{const i=Tl(t);Vs(e,i)};Cr.resetStatus=e=>{Sn(e)};di&&Ch(Cr,window.lazyLoadOptions);const Fm={class:"relative flex-auto flex flex-col overflow-hidden"},Pm={key:0,class:"grid grid-cols-12 border-b border-neutral-300 border-gray-200 dark:border-gray-700 text-xs select-none"},Hm={class:"absolute"},zm=j("svg",{xmlns:"http://www.w3.org/2000/svg",class:"absolute h-6 w-6 md:h-12 md:w-12 m-auto stroke-neutral-500 fill-white dark:fill-gray-700 dark:stroke-gray-600 z-10",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1),Bm={class:"text-neutral-700 dark:text-neutral-300 p-1 absolute text-center top-4 right-[-2rem] md:top-5 md:right-[-2.4rem] z-20 text-xs"},jm=["onDblclick","onContextmenu","data-type","data-item","data-index"],Um={class:"grid grid-cols-12 items-center"},Vm={class:"flex col-span-7 items-center"},qm={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Gm=j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),Xm=[Gm],Wm={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Km=j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),$m=[Km],Ym={class:"overflow-ellipsis overflow-hidden whitespace-nowrap"},Zm={class:"col-span-5 overflow-ellipsis overflow-hidden whitespace-nowrap"},Jm=["onDblclick","onContextmenu","onDragstart","onDragover","onDrop","data-type","data-item","data-index"],Qm={class:"grid grid-cols-12 items-center"},ep={class:"flex col-span-7 items-center"},tp={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},ip=j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),rp=[ip],np={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},sp=j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),op=[sp],ap={class:"overflow-ellipsis overflow-hidden whitespace-nowrap"},lp={class:"col-span-2 text-center"},up={class:"col-span-3 overflow-ellipsis overflow-hidden whitespace-nowrap"},cp=["onDblclick","onContextmenu","onDragstart","onDragover","onDrop","data-type","data-item","data-index"],dp={class:"relative"},fp={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 md:h-12 md:w-12 m-auto fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},hp=j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),mp=[hp],pp=["data-src","alt"],gp={key:2,xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 md:h-12 md:w-12 m-auto text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},vp=j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),yp=[vp],bp={key:3,class:"absolute hidden md:block top-1/2 w-full text-center text-neutral-500"},xp={class:"break-all"},wp={name:"VFExplorer"},_p=Object.assign(wp,{props:{view:String,data:Object,search:Object},setup(e){const t=e,i=ye("emitter"),{setStore:n,getStore:s}=ye("storage"),u=ye("adapter"),_=C=>C?.substring(0,3),E=C=>C.replace(/((?=([\w\W]{0,14}))([\w\W]{8,})([\w\W]{8,}))/,"$2..$4"),w=ve(null),l=ve(null),r=ve(0),a=ve(null),{t:f}=ye("i18n"),o=Math.floor(Math.random()*2**32),g=ve(s("full-screen",!1)),d=new Cr;i.on("vf-fullscreen-toggle",()=>{w.value.style.height=null,g.value=!g.value,n("full-screen",g.value)});const h=ve("");i.on("vf-search-query",({newQuery:C})=>{h.value=C,C?i.emit("vf-fetch",{params:{q:"search",adapter:t.data.adapter,path:t.data.dirname,filter:C},onSuccess:R=>{R.files.length||i.emit("vf-toast-push",{label:f("No search result found.")})}}):i.emit("vf-fetch",{params:{q:"index",adapter:t.data.adapter,path:t.data.dirname}})});let c=null;const b=()=>{c&&clearTimeout(c)},S=ve(!0),p=C=>{C.touches.length>1&&(S.value?(a.value.stop(),i.emit("vf-toast-push",{label:f("Drag&Drop: off")})):(a.value.start(),i.emit("vf-toast-push",{label:f("Drag&Drop: on")}),i.emit("vf-explorer-update")),S.value=!S.value)},m=C=>{c=setTimeout(()=>{const R=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!1,view:window,button:2,buttons:0,clientX:C.target.getBoundingClientRect().x,clientY:C.target.getBoundingClientRect().y});C.target.dispatchEvent(R)},500)},x=C=>{C.type=="dir"?(i.emit("vf-search-exit"),i.emit("vf-fetch",{params:{q:"index",adapter:t.data.adapter,path:C.path}})):i.emit("vf-modal-show",{type:"preview",adapter:t.data.adapter,item:C})},v=Ei({active:!1,column:"",order:""}),I=(C=!0)=>{let R=[...t.data.files],M=v.column,O=v.order=="asc"?1:-1;if(!C)return R;const B=(G,$)=>typeof G=="string"&&typeof $=="string"?G.toLowerCase().localeCompare($.toLowerCase()):G<$?-1:G>$?1:0;return v.active&&(R=R.slice().sort((G,$)=>B(G[M],$[M])*O)),R},D=C=>{v.active&&v.column==C?(v.active=v.order=="asc",v.column=C,v.order="desc"):(v.active=!0,v.column=C,v.order="asc")},k=()=>a.value.getSelection().map(C=>JSON.parse(C.dataset.item)),P=(C,R)=>{if(C.altKey||C.ctrlKey||C.metaKey)return C.preventDefault(),!1;C.dataTransfer.setDragImage(l.value,0,15),C.dataTransfer.effectAllowed="all",C.dataTransfer.dropEffect="copy",C.dataTransfer.setData("items",JSON.stringify(k()))},T=(C,R)=>{C.preventDefault();let M=JSON.parse(C.dataTransfer.getData("items"));if(M.find(O=>O.storage!=u.value)){alert("Moving items between different storages is not supported yet.");return}i.emit("vf-modal-show",{type:"move",items:{from:M,to:R}})},A=(C,R)=>{C.preventDefault(),!R||R.type!=="dir"||a.value.getSelection().find(M=>M==C.currentTarget)?(C.dataTransfer.dropEffect="none",C.dataTransfer.effectAllowed="none"):C.dataTransfer.dropEffect="copy"};return vt(()=>{a.value=new vh({area:w.value,keyboardDrag:!1,selectedClass:"vf-explorer-selected",selectorClass:"vf-explorer-selector"}),i.on("vf-explorer-update",()=>Ki(()=>{a.value.clearSelection(),a.value.setSelectables(document.getElementsByClassName("vf-item-"+o))})),a.value.subscribe("predragstart",({event:C,isDragging:R})=>{if(R)r.value=a.value.getSelection().length,a.value.break();else{const M=C.target.offsetWidth-C.offsetX,O=C.target.offsetHeight-C.offsetY;M<15&&O<15&&(a.value.clearSelection(),a.value.break())}}),a.value.subscribe("predragmove",({isDragging:C})=>{C&&a.value.break()}),a.value.subscribe("callback",({items:C,event:R,isDragging:M})=>{i.emit("vf-nodes-selected",k()),r.value=a.value.getSelection().length})}),Ts(()=>{a.value.Area.reset(),a.value.SelectorArea.updatePos(),d.update()}),vt(()=>{Si(()=>t.view,()=>i.emit("vf-explorer-update"))}),(C,R)=>(Q(),se("div",Fm,[e.view=="list"||h.value.length?(Q(),se("div",Pm,[j("div",{onClick:R[0]||(R[0]=M=>D("basename")),class:"col-span-7 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 dark:hover:bg-gray-700/10 flex items-center pl-1"},[Ge(ae(ee(f)("Name"))+" ",1),pt(Ve(zr,{direction:v.order=="asc"?"down":"up"},null,8,["direction"]),[[ar,v.active&&v.column=="basename"]])]),h.value.length?ke("",!0):(Q(),se("div",{key:0,onClick:R[1]||(R[1]=M=>D("file_size")),class:"col-span-2 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 dark:hover:bg-gray-700/10 flex items-center justify-center border-l border-r dark:border-gray-700"},[Ge(ae(ee(f)("Size"))+" ",1),pt(Ve(zr,{direction:v.order=="asc"?"down":"up"},null,8,["direction"]),[[ar,v.active&&v.column=="file_size"]])])),h.value.length?ke("",!0):(Q(),se("div",{key:1,onClick:R[2]||(R[2]=M=>D("last_modified")),class:"col-span-3 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 dark:hover:bg-gray-700/10 flex items-center justify-center"},[Ge(ae(ee(f)("Date"))+" ",1),pt(Ve(zr,{direction:v.order=="asc"?"down":"up"},null,8,["direction"]),[[ar,v.active&&v.column=="last_modified"]])])),h.value.length?(Q(),se("div",{key:2,onClick:R[3]||(R[3]=M=>D("path")),class:"col-span-5 py-1 leading-6 hover:bg-neutral-100 bg-neutral-50 dark:bg-gray-800 dark:hover:bg-gray-700/10 flex items-center justify-center border-l dark:border-gray-700"},[Ge(ae(ee(f)("Filepath"))+" ",1),pt(Ve(zr,{direction:v.order=="asc"?"down":"up"},null,8,["direction"]),[[ar,v.active&&v.column=="path"]])])):ke("",!0)])):ke("",!0),j("div",Hm,[j("div",{ref_key:"dragImage",ref:l,class:"absolute -z-50 -top-96"},[zm,j("div",Bm,ae(r.value),1)],512)]),j("div",{onTouchstart:p,onContextmenu:R[10]||(R[10]=wi(M=>ee(i).emit("vf-contextmenu-show",{event:M,area:w.value,items:k()}),["self","prevent"])),class:Ye([g.value?"":"resize-y","h-full w-full text-xs vf-selector-area min-h-[150px] overflow-auto p-1 z-0"]),ref_key:"selectorArea",ref:w},[h.value.length?(Q(!0),se(Ce,{key:0},St(I(),(M,O)=>(Q(),se("div",{onDblclick:B=>x(M),onTouchstart:R[4]||(R[4]=B=>m(B)),onTouchend:R[5]||(R[5]=B=>b()),onContextmenu:wi(B=>ee(i).emit("vf-contextmenu-show",{event:B,area:w.value,items:k(),target:M}),["prevent"]),class:Ye(["vf-item-"+ee(o),"grid grid-cols-1 border hover:bg-neutral-50 dark:hover:bg-gray-700 border-transparent my-0.5 w-full select-none"]),"data-type":M.type,"data-item":JSON.stringify(M),"data-index":O},[j("div",Um,[j("div",Vm,[M.type=="dir"?(Q(),se("svg",qm,Xm)):(Q(),se("svg",Wm,$m)),j("span",Ym,ae(M.basename),1)]),j("div",Zm,ae(M.path),1)])],42,jm))),256)):ke("",!0),e.view=="list"&&!h.value.length?(Q(!0),se(Ce,{key:1},St(I(),(M,O)=>(Q(),se("div",{draggable:"true",onDblclick:B=>x(M),onTouchstart:R[6]||(R[6]=B=>m(B)),onTouchend:R[7]||(R[7]=B=>b()),onContextmenu:wi(B=>ee(i).emit("vf-contextmenu-show",{event:B,area:w.value,items:k(),target:M}),["prevent"]),onDragstart:B=>P(B),onDragover:B=>A(B,M),onDrop:B=>T(B,M),class:Ye(["vf-item-"+ee(o),"grid grid-cols-1 border hover:bg-neutral-50 dark:hover:bg-gray-700 border-transparent my-0.5 w-full select-none"]),"data-type":M.type,"data-item":JSON.stringify(M),"data-index":O},[j("div",Qm,[j("div",ep,[M.type=="dir"?(Q(),se("svg",tp,rp)):(Q(),se("svg",np,op)),j("span",ap,ae(M.basename),1)]),j("div",lp,ae(M.file_size?ee(_l)(M.file_size):""),1),j("div",up,ae(ee(Sl)(M.last_modified)),1)])],42,Jm))),256)):ke("",!0),e.view=="grid"&&!h.value.length?(Q(!0),se(Ce,{key:2},St(I(!1),(M,O)=>(Q(),se("div",{draggable:"true",onDblclick:B=>x(M),onTouchstart:R[8]||(R[8]=B=>m(B)),onTouchend:R[9]||(R[9]=B=>b()),onContextmenu:wi(B=>ee(i).emit("vf-contextmenu-show",{event:B,area:w.value,items:k(),target:M}),["prevent"]),onDragstart:B=>P(B),onDragover:B=>A(B,M),onDrop:B=>T(B,M),class:Ye(["vf-item-"+ee(o),"border border-transparent hover:bg-neutral-50 m-1 dark:hover:bg-gray-700 inline-flex w-[5.5rem] h-20 md:w-24 text-center justify-center select-none"]),"data-type":M.type,"data-item":JSON.stringify(M),"data-index":O},[j("div",null,[j("div",dp,[M.type=="dir"?(Q(),se("svg",fp,mp)):(M.mime_type??"").startsWith("image")?(Q(),se("img",{key:1,class:"lazy h-10 md:h-12 m-auto","data-src":ee(ss)(ee(u).value,M.path),alt:M.basename},null,8,pp)):(Q(),se("svg",gp,yp)),!(M.mime_type??"").startsWith("image")&&M.type!="dir"?(Q(),se("div",bp,ae(_(M.extension)),1)):ke("",!0)]),j("span",xp,ae(E(M.basename)),1)])],42,cp))),256)):ke("",!0)],34),Ve(Ih)]))}}),Sp="1.2.8",Ep={class:"p-1 text-xs border-t border-neutral-300 dark:border-gray-700/50 flex justify-between select-none"},Rp={class:"flex leading-5 items-center"},Dp=["aria-label"],Ip=j("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})],-1),Tp=[Ip],Ap=["value"],Cp={class:"ml-3"},kp={key:0},Op={class:"ml-1"},Mp={class:"flex leading-5 items-center"},Lp={value:"",disabled:""},Np=gd('<option value="en">English</option><option value="fr">French (Franais)</option><option value="de">German (Deutsch)</option><option value="tr">Hebrew ()</option><option value="hi">Hindi ()</option><option value="fa">Persian ()</option><option value="ru">Russian (P)</option><option value="sv">Swedish (Svenska)</option><option value="tr">Turkish (Trke)</option>',9),Fp=["aria-label"],Pp=j("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 stroke-slate-500 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),Hp=[Pp],zp={name:"VFStatusbar"},Bp=Object.assign(zp,{props:{data:Object},setup(e){const t=ye("emitter"),{getStore:i,setStore:n}=ye("storage"),s=ve(0),u=ye("adapter"),{t:_,changeLocale:E}=ye("i18n"),w=ve(i("locale","")),l=()=>{t.emit("vf-search-exit"),t.emit("vf-fetch",{params:{q:"index",adapter:u.value}}),n("adapter",u.value)};t.on("vf-nodes-selected",a=>{s.value=a.length});const r=ve("");return t.on("vf-search-query",({newQuery:a})=>{r.value=a}),(a,f)=>(Q(),se("div",Ep,[j("div",Rp,[j("div",{class:"mx-2","aria-label":ee(_)("Storage"),"data-microtip-position":"top-right",role:"tooltip"},Tp,8,Dp),pt(j("select",{"onUpdate:modelValue":f[0]||(f[0]=o=>et(u)?u.value=o:null),onChange:l,class:"py-0.5 text-sm text-slate-500 dark:text-neutral-50 dark:bg-gray-700 rounded pl-2 pr-8"},[(Q(!0),se(Ce,null,St(e.data.storages,o=>(Q(),se("option",{value:o},ae(o),9,Ap))),256))],544),[[Mo,ee(u)]]),j("div",Cp,[r.value.length?(Q(),se("span",kp,ae(e.data.files.length)+" items found. ",1)):ke("",!0),j("span",Op,ae(s.value>0?s.value+" "+ee(_)("item(s) selected."):""),1)])]),j("div",Mp,[pt(j("select",{"onUpdate:modelValue":f[1]||(f[1]=o=>w.value=o),onChange:f[2]||(f[2]=o=>ee(E)(o.target.value)),class:"py-0.5 text-sm text-slate-500 dark:text-neutral-50 dark:bg-gray-700 rounded pl-2 pr-8 mr-3"},[j("option",Lp,ae(ee(_)("Language")),1),Np],544),[[Mo,w.value]]),j("span",{class:"mr-1","aria-label":ee(_)("About"),"data-microtip-position":"top-left",role:"tooltip",onClick:f[3]||(f[3]=o=>ee(t).emit("vf-modal-show",{type:"message",title:"Vuefinder "+ee(Sp),message:ee(_)("Vuefinder is a file manager component for vue 3.")}))},Hp,8,Fp)])]))}}),jp=(e,t=0,i=!1)=>{let n;return(...s)=>{i&&!n&&e(...s),clearTimeout(n),n=setTimeout(()=>{e(...s)},t)}},Up=(e,t,i)=>{const n=ve(e);return mc((s,u)=>({get(){return s(),n.value},set:jp(_=>{n.value=_,u()},t,i)}))},Vp={class:"flex p-1.5 bg-neutral-100 dark:bg-gray-800 border-t border-b border-neutral-300 dark:border-gray-700/50 items-center select-none text-xs"},qp=["aria-label"],Gp=j("path",{"fill-rule":"evenodd",d:"M5.293 9.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 7.414V15a1 1 0 11-2 0V7.414L6.707 9.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"},null,-1),Xp=[Gp],Wp=["aria-label"],Kp=j("path",{d:"M463.5 224H472c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1c-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8H463.5z"},null,-1),$p=[Kp],Yp=["aria-label"],Zp=j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1),Jp=[Zp],Qp=["onClick"],eg=j("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"},null,-1),tg=[eg],ig={class:"flex leading-5"},rg=j("span",{class:"text-neutral-300 dark:text-gray-600 mx-0.5"},"/",-1),ng=["title","onClick"],sg={key:0,class:"animate-spin p-1 h-6 w-6 text-white ml-auto",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},og=j("circle",{class:"opacity-25 stroke-blue-900 dark:stroke-blue-100",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),ag=j("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1),lg=[og,ag],ug={key:3,class:"relative flex bg-white dark:bg-gray-700 items-center rounded p-1 ml-2 w-full"},cg=j("svg",{class:"h-6 w-6 p-1 m-auto stroke-gray-400 fill-gray-100 dark:stroke-gray-400 dark:fill-gray-400/20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})],-1),dg=j("div",{class:"w-full"},null,-1),fg=["onKeydown","placeholder"],hg=j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"},null,-1),mg=[hg],pg={name:"VFBreadcrumb"},gg=Object.assign(pg,{props:{data:Object},setup(e){const t=e,i=ye("emitter");ye("storage");const n=ye("adapter"),s=ve(null),u=ve([]),_=ve(!1),E=ve(null),{t:w}=ye("i18n"),l=ye("loadingState");i.on("vf-explorer-update",()=>{let b=[],S=[];s.value=t.data.dirname??n.value+"://",s.value.length==0&&(u.value=[]),s.value.replace(n.value+"://","").split("/").forEach(function(p){b.push(p),b.join("/")!=""&&S.push({basename:p,name:p,path:n.value+"://"+b.join("/"),type:"dir"})}),S.length>4&&(S=S.slice(-5),S[0].name=".."),u.value=S});const r=()=>{_.value=!1,f.value=""};i.on("vf-search-exit",()=>{r()});const a=()=>{_.value=!0,Ki(()=>E.value.focus())},f=Up("",400),o=()=>l.value;Si(f,b=>{i.emit("vf-toast-clear"),i.emit("vf-search-query",{newQuery:b})});const g=()=>u.value.length&&!_.value,d=b=>{b.preventDefault();let S=JSON.parse(b.dataTransfer.getData("items"));if(S.find(p=>p.storage!=n.value)){alert("Moving items between different storages is not supported yet.");return}i.emit("vf-modal-show",{type:"move",items:{from:S,to:u.value[u.value.length-2]??{path:n.value+"://"}}})},h=b=>{b.preventDefault(),g()?b.dataTransfer.dropEffect="copy":(b.dataTransfer.dropEffect="none",b.dataTransfer.effectAllowed="none")},c=()=>{f.value==""&&r()};return(b,S)=>(Q(),se("div",Vp,[j("span",{"aria-label":ee(w)("Go up a directory"),"data-microtip-position":"bottom-right",role:"tooltip"},[(Q(),se("svg",{onDragover:S[0]||(S[0]=p=>h(p)),onDrop:S[1]||(S[1]=p=>d(p)),onClick:S[2]||(S[2]=p=>{var m;return!g()||ee(i).emit("vf-fetch",{params:{q:"index",adapter:e.data.adapter,path:((m=u.value[u.value.length-2])==null?void 0:m.path)??ee(n)+"://"}})}),class:Ye(["h-6 w-6 p-0.5 rounded",g()?"text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer":"text-gray-400 dark:text-neutral-500"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Xp,34))],8,qp),o()?(Q(),se("span",{key:1,"aria-label":ee(w)("Cancel"),"data-microtip-position":"bottom-right",role:"tooltip"},[(Q(),se("svg",{onClick:S[4]||(S[4]=p=>ee(i).emit("vf-fetch-abort")),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer"},Jp))],8,Yp)):(Q(),se("span",{key:0,"aria-label":ee(w)("Refresh"),"data-microtip-position":"bottom-right",role:"tooltip"},[(Q(),se("svg",{onClick:S[3]||(S[3]=p=>{ee(i).emit("vf-fetch",{params:{q:"index",adapter:e.data.adapter,path:e.data.dirname}})}),class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer",xmlns:"http://www.w3.org/2000/svg",viewBox:"-40 -40 580 580",fill:"currentColor"},$p))],8,Wp)),_.value?(Q(),se("div",ug,[cg,dg,pt(j("input",{ref_key:"searchInput",ref:E,onKeydown:Yi(r,["esc"]),onBlur:c,"onUpdate:modelValue":S[6]||(S[6]=p=>et(f)?f.value=p:null),placeholder:ee(w)("Search anything.."),class:"absolute ml-4 pt-1 pb-0 px-2 border-0 ring-0 outline-0 text-gray-600 focus:ring-transparent focus:border-transparent dark:focus:ring-transparent dark:focus:border-transparent dark:text-gray-300 bg-transparent",type:"text"},null,40,fg),[[$i,ee(f)]]),(Q(),se("svg",{class:"w-6 h-6 cursor-pointer",onClick:r,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},mg))])):(Q(),se("div",{key:2,class:"group flex bg-white dark:bg-gray-700 items-center rounded p-1 ml-2 w-full",onClick:wi(a,["self"])},[(Q(),se("svg",{onClick:S[5]||(S[5]=p=>ee(i).emit("vf-fetch",{params:{q:"index",adapter:e.data.adapter}})),class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-gray-800 cursor-pointer",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},tg)),j("div",ig,[(Q(!0),se(Ce,null,St(u.value,(p,m)=>(Q(),se("div",{key:m},[rg,j("span",{class:"px-1.5 py-1 text-slate-700 dark:text-slate-200 hover:bg-neutral-100 dark:hover:bg-gray-800 rounded cursor-pointer",title:p.basename,onClick:x=>ee(i).emit("vf-fetch",{params:{q:"index",adapter:e.data.adapter,path:p.path}})},ae(p.name),9,ng)]))),128))]),o()?(Q(),se("svg",sg,lg)):ke("",!0)],8,Qp))]))}}),vg=["onClick"],yg=j("span",{class:"px-1"},null,-1),bg={name:"VFContextMenu"},xg=Object.assign(bg,{props:{current:Object},setup(e){const t=e,i=ye("emitter"),n=ve(null),{apiUrl:s}=Bt(),u=Ei({active:!1,items:[],positions:{left:0,top:0}}),_=ve([]);i.on("vf-context-selected",f=>{_.value=f});const{t:E}=ye("i18n"),w={newfolder:{title:()=>E("New Folder"),action:()=>{i.emit("vf-modal-show",{type:"new-folder"})}},delete:{title:()=>E("Delete"),action:()=>{i.emit("vf-modal-show",{type:"delete",items:_})}},refresh:{title:()=>E("Refresh"),action:()=>{i.emit("vf-fetch",{params:{q:"index",adapter:t.current.adapter,path:t.current.dirname}})}},preview:{title:()=>E("Preview"),action:()=>{i.emit("vf-modal-show",{type:"preview",adapter:t.current.adapter,item:_.value[0]})}},open:{title:()=>E("Open"),action:()=>{i.emit("vf-search-exit"),i.emit("vf-fetch",{params:{q:"index",adapter:t.current.adapter,path:_.value[0].path}})}},openDir:{title:()=>E("Open containing folder"),action:()=>{i.emit("vf-search-exit"),i.emit("vf-fetch",{params:{q:"index",adapter:t.current.adapter,path:_.value[0].dir}})}},download:{title:()=>E("Download"),action:()=>{const f=s.value+"?"+Ti({q:"download",adapter:t.current.adapter,path:_.value[0].path});i.emit("vf-download",f)}},archive:{title:()=>E("Archive"),action:()=>{i.emit("vf-modal-show",{type:"archive",items:_})}},unarchive:{title:()=>E("Unarchive"),action:()=>{i.emit("vf-modal-show",{type:"unarchive",items:_})}},rename:{title:()=>E("Rename"),action:()=>{i.emit("vf-modal-show",{type:"rename",items:_})}}},l=f=>{i.emit("vf-contextmenu-hide"),f.action()},r=ve("");i.on("vf-search-query",({newQuery:f})=>{r.value=f}),i.on("vf-contextmenu-show",({event:f,area:o,items:g,target:d=null})=>{if(u.items=[],r.value)if(d)u.items.push(w.openDir),i.emit("vf-context-selected",[d]);else return;else!d&&!r.value?(u.items.push(w.refresh),u.items.push(w.newfolder),i.emit("vf-context-selected",[])):g.length>1&&g.some(h=>h.path===d.path)?(u.items.push(w.refresh),u.items.push(w.archive),u.items.push(w.delete),i.emit("vf-context-selected",g)):(d.type=="dir"?u.items.push(w.open):(u.items.push(w.preview),u.items.push(w.download)),u.items.push(w.rename),d.mime_type=="application/zip"?u.items.push(w.unarchive):u.items.push(w.archive),u.items.push(w.delete),i.emit("vf-context-selected",[d]));a(f,o)}),i.on("vf-contextmenu-hide",()=>{u.active=!1});const a=(f,o)=>{u.active=!0,Ki(()=>{let g=o.getBoundingClientRect(),d=f.pageX,h=f.pageY,c=n.value.offsetHeight,b=n.value.offsetWidth;d=g.right-f.pageX+window.scrollX<b?d-b:d,h=g.bottom-f.pageY+window.scrollY<c?h-c:h,u.positions={left:d+"px",top:h+"px"}})};return(f,o)=>u.active?(Q(),se("ul",{key:0,class:"z-30 absolute text-xs bg-neutral-50 dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-neutral-300 dark:border-gray-600 shadow rounded select-none",ref_key:"contextmenu",ref:n,style:Rr(u.positions)},[(Q(!0),se(Ce,null,St(u.items,g=>(Q(),se("li",{class:"px-2 py-1.5 cursor-pointer hover:bg-neutral-200 dark:hover:bg-gray-700",key:g.title,onClick:d=>l(g)},[yg,j("span",null,ae(g.title()),1)],8,vg))),128))],4)):ke("",!0)}}),wg=(e,t)=>{const i=e[t];return i?typeof i=="function"?i():Promise.resolve(i):new Promise((n,s)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(s.bind(null,new Error("Unknown variable dynamic import: "+t)))})};async function _g(e){const t=await wg(Object.assign({"../locales/de.json":()=>ei(()=>import("./de-81b457a7-yUhgpt7l.js"),[],import.meta.url),"../locales/en.json":()=>ei(()=>import("./en-ed1f1848-CDch7uJ2.js"),[],import.meta.url),"../locales/fa.json":()=>ei(()=>import("./fa-49628944-pBw3CTrn.js"),[],import.meta.url),"../locales/he.json":()=>ei(()=>import("./he-736e9ea8-LO2Geo4r.js"),[],import.meta.url),"../locales/hi.json":()=>ei(()=>import("./hi-a0031fe7-CaSxBEu-.js"),[],import.meta.url),"../locales/ru.json":()=>ei(()=>import("./ru-d8535e72-D2qjs1Tm.js"),[],import.meta.url),"../locales/sv.json":()=>ei(()=>import("./sv-316febc7-CoAgND-x.js"),[],import.meta.url),"../locales/tr.json":()=>ei(()=>import("./tr-6f9ffcfe-Bv-WWCLT.js"),[],import.meta.url)}),`../locales/${e}.json`);return JSON.parse(t.default)}function Sg(e,t,i){const{getStore:n,setStore:s}=ns(e),u=ve({}),_=(l,r="en")=>{_g(l).then(a=>{u.value=a,s("locale",l),s("translations",a),i.emit("vf-toast-push",{label:"The language is set to "+l})}).catch(a=>{r?(i.emit("vf-toast-push",{label:"The selected locale is not yet supported!",type:"error"}),_(r,null)):i.emit("vf-toast-push",{label:"Locale cannot be loaded!",type:"error"})})};n("locale")?u.value=n("translations"):_(t);const E=(l,...r)=>r.length?E(l=l.replace("%s",r.shift()),...r):l;function w(l,...r){return u.value.hasOwnProperty(l)?E(u.value[l],...r):E(l,...r)}return{t:w,changeLocale:_}}const Eg={class:"vuefinder"},Rg=j("iframe",{id:"download_frame",style:{display:"none"}},null,-1),Dg={name:"VueFinder"},Ig=Object.assign(Dg,{props:{url:{type:[String]},id:{type:String,default:"vf"},dark:{type:Boolean,default:!1},usePropDarkMode:{type:Boolean,default:!1},locale:{type:String,default:"en"},maxHeight:{type:String,default:"600px"},maxFileSize:{type:String,default:"10mb"},postData:{type:Object,default:{}}},setup(e){const t=e,i=Ef(),{setStore:n,getStore:s}=ns(t.id),u=ve(s("adapter"));qt("emitter",i),qt("storage",ns(t.id)),qt("postData",t.postData),qt("adapter",u),qt("maxFileSize",t.maxFileSize),qt("usePropDarkMode",t.usePropDarkMode);const _=Sg(t.id,t.locale,i);qt("i18n",_);const{apiUrl:E,setApiUrl:w}=Bt();w(t.url);const l=Ei({adapter:u.value,storages:[],dirname:".",files:[]}),r=ve(s("viewport","grid")),a=t.usePropDarkMode?ml(()=>t.dark):ve(s("darkMode",t.dark));i.on("vf-darkMode-toggle",()=>{a.value=!a.value,n("darkMode",a.value)});const f=ve(!1);qt("loadingState",f);const o=ve(s("full-screen",!1));i.on("vf-fullscreen-toggle",()=>{o.value=!o.value,n("full-screen",o.value)}),i.on("vf-view-toggle",c=>{r.value=c});const g=Ei({active:!1,type:"delete",data:{}});i.on("vf-modal-close",()=>{g.active=!1}),i.on("vf-modal-show",c=>{g.active=!0,g.type=c.type,g.data=c});const d=c=>{Object.assign(l,c),i.emit("vf-nodes-selected",{}),i.emit("vf-explorer-update")};let h;return i.on("vf-fetch-abort",()=>{h.abort(),f.value=!1}),i.on("vf-fetch",({params:c,onSuccess:b=null,onError:S=null})=>{["index","search"].includes(c.q)&&(h&&h.abort(),f.value=!0),h=new AbortController;const p=h.signal;an(E.value,{params:c,signal:p}).then(m=>{u.value=m.adapter,["index","search"].includes(c.q)&&(f.value=!1),i.emit("vf-modal-close"),d(m),b(m)}).catch(m=>{S&&S(m)}).finally(()=>{})}),i.on("vf-download",c=>{document.getElementById("download_frame").src=c,i.emit("vf-modal-close")}),vt(()=>{i.emit("vf-fetch",{params:{q:"index",adapter:u.value}})}),(c,b)=>(Q(),se("div",Eg,[j("div",{class:Ye(ee(a)?"dark":"")},[j("div",{class:Ye([o.value?"fixed w-screen inset-0 z-20":"relative rounded-md","border flex flex-col bg-white dark:bg-gray-800 text-gray-700 dark:text-neutral-400 border-neutral-300 dark:border-gray-900 min-w-min select-none"]),style:Rr(o.value?"":"max-height: "+e.maxHeight),onMousedown:b[0]||(b[0]=S=>ee(i).emit("vf-contextmenu-hide")),onTouchstart:b[1]||(b[1]=S=>ee(i).emit("vf-contextmenu-hide"))},[Ve(hh,{data:l},null,8,["data"]),Ve(gg,{data:l},null,8,["data"]),Ve(_p,{view:r.value,data:l},null,8,["view","data"]),Ve(Bp,{data:l},null,8,["data"])],38),g.active?(Q(),Fe(Hc("v-f-modal-"+g.type),{key:0,selection:g.data,current:l},null,8,["selection","current"])):ke("",!0),Ve(xg,{current:l},null,8,["current"]),Rg],2)]))}}),Tg=j("div",{class:"fixed inset-0 bg-gray-500 dark:bg-gray-600 dark:bg-opacity-75 bg-opacity-75 transition-opacity"},null,-1),Ag={class:"fixed z-10 inset-0 overflow-hidden"},Cg={class:"relative bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:max-w-4xl md:max-w-2xl lg:max-w-3xl xl:max-w-5xl w-full"},kg={class:"bg-white dark:bg-gray-800 px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Og={class:"bg-gray-50 dark:bg-gray-800 dark:border-t dark:border-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},jt={__name:"ModalLayout",setup(e){const t=ye("emitter");return vt(()=>{const i=document.querySelector(".v-f-modal input");i&&i.focus()}),(i,n)=>(Q(),se("div",{class:"v-f-modal relative z-30","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onKeyup:n[1]||(n[1]=Yi(s=>ee(t).emit("vf-modal-close"),["esc"])),tabindex:"0"},[Tg,j("div",Ag,[j("div",{class:"flex items-end sm:items-center justify-center min-h-full p-4 text-center sm:p-0",onMousedown:n[0]||(n[0]=wi(s=>ee(t).emit("vf-modal-close"),["self"]))},[j("div",Cg,[j("div",kg,[Yn(i.$slots,"default")]),j("div",Og,[Yn(i.$slots,"buttons")])])],32)])],32))}},Mg=["aria-label"],Lg=j("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),Ng=[Lg],Fg={name:"Message"},Ut=Object.assign(Fg,{props:{error:{type:Boolean,default:!1}},emits:["hidden"],setup(e,{emit:t}){var i;const{t:n}=ye("i18n"),s=ve(!1),u=ve(null),_=ve((i=u.value)==null?void 0:i.strMessage);Si(_,()=>s.value=!1);const E=()=>{t("hidden"),s.value=!0};return(w,l)=>(Q(),se("div",null,[s.value?ke("",!0):(Q(),se("div",{key:0,ref_key:"strMessage",ref:u,class:Ye(["flex mt-1 p-1 px-2 rounded text-sm",e.error?"bg-red-100 text-red-600":"bg-emerald-100 text-emerald-600"])},[Yn(w.$slots,"default"),j("div",{class:"ml-auto cursor-pointer",onClick:E,"aria-label":ee(n)("Close"),"data-microtip-position":"top-left",role:"tooltip"},Ng,8,Mg)],2))]))}}),Pg={class:"sm:flex sm:items-start"},Hg=j("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[j("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-red-600 dark:stroke-red-200",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})])],-1),zg={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Bg={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},jg={class:"mt-2"},Ug={class:"text-sm text-gray-500"},Vg={class:"flex text-sm text-gray-800 dark:text-gray-400"},qg={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Gg=j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),Xg=[Gg],Wg={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Kg=j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),$g=[Kg],Yg={class:"ml-1.5"},Zg={class:"m-auto font-bold text-red-500 text-sm dark:text-red-200 text-center"},Jg={name:"VFModalDelete"},Qg=Object.assign(Jg,{props:{selection:Object,current:Object},setup(e){const t=e,i=ye("emitter");ye("storage");const n=ye("adapter"),{t:s}=ye("i18n"),u=ve(t.selection.items),_=ve(""),E=()=>{u.value.length&&i.emit("vf-fetch",{params:{q:"delete",adapter:n.value,path:t.current.dirname,items:JSON.stringify(u.value.map(({path:w,type:l})=>({path:w,type:l})))},onSuccess:()=>{i.emit("vf-toast-push",{label:s("Files deleted.")})},onError:w=>{_.value=s(w.message)}})};return(w,l)=>(Q(),Fe(jt,null,{buttons:Oe(()=>[j("button",{type:"button",onClick:E,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},ae(ee(s)("Yes, Delete!")),1),j("button",{type:"button",onClick:l[1]||(l[1]=r=>ee(i).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},ae(ee(s)("Cancel")),1),j("div",Zg,ae(ee(s)("This action cannot be undone.")),1)]),default:Oe(()=>[j("div",Pg,[Hg,j("div",zg,[j("h3",Bg,ae(ee(s)("Delete files")),1),j("div",jg,[j("p",Ug,ae(ee(s)("Are you sure you want to delete these files?")),1),(Q(!0),se(Ce,null,St(u.value,r=>(Q(),se("p",Vg,[r.type=="dir"?(Q(),se("svg",qg,Xg)):(Q(),se("svg",Wg,$g)),j("span",Yg,ae(r.basename),1)]))),256)),_.value.length?(Q(),Fe(Ut,{key:0,onHidden:l[0]||(l[0]=r=>_.value=""),error:""},{default:Oe(()=>[Ge(ae(_.value),1)]),_:1})):ke("",!0)])])])]),_:1}))}}),e0={class:"sm:flex sm:items-start"},t0=j("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[j("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},[j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1),i0={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},r0={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},n0={class:"mt-2"},s0={class:"text-sm text-gray-500"},o0={name:"VFModalMessage"},a0=Object.assign(o0,{props:{selection:Object},setup(e){const t=ye("emitter"),{t:i}=ye("i18n");return(n,s)=>(Q(),Fe(jt,null,{buttons:Oe(()=>[j("button",{type:"button",onClick:s[0]||(s[0]=u=>ee(t).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},ae(ee(i)("Close")),1)]),default:Oe(()=>{var u,_;return[j("div",e0,[t0,j("div",i0,[j("h3",r0,ae(((u=e.selection)==null?void 0:u.title)??"Title"),1),j("div",n0,[j("p",s0,ae(((_=e.selection)==null?void 0:_.message)??"Message")+".",1)])])])]}),_:1}))}}),l0={class:"sm:flex sm:items-start"},u0=j("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[j("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})])],-1),c0={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},d0={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},f0={class:"mt-2"},h0={class:"text-sm text-gray-500"},m0=["onKeyup","placeholder"],p0={name:"VFModalNewFolder"},g0=Object.assign(p0,{props:{selection:Object,current:Object},setup(e){const t=e,i=ye("emitter");ye("storage");const n=ye("adapter"),{t:s}=ye("i18n"),u=ve(""),_=ve(""),E=()=>{u.value!=""&&i.emit("vf-fetch",{params:{q:"newfolder",adapter:n.value,path:t.current.dirname,name:u.value},onSuccess:()=>{i.emit("vf-toast-push",{label:s("%s is created.",u.value)})},onError:w=>{_.value=s(w.message)}})};return(w,l)=>(Q(),Fe(jt,null,{buttons:Oe(()=>[j("button",{type:"button",onClick:E,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 dark:bg-gray-700 dark:hover:bg-gray-600/75 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},ae(ee(s)("Create")),1),j("button",{type:"button",onClick:l[2]||(l[2]=r=>ee(i).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},ae(ee(s)("Cancel")),1)]),default:Oe(()=>[j("div",l0,[u0,j("div",c0,[j("h3",d0,ae(ee(s)("New Folder")),1),j("div",f0,[j("p",h0,ae(ee(s)("Create a new folder")),1),pt(j("input",{"onUpdate:modelValue":l[0]||(l[0]=r=>u.value=r),onKeyup:Yi(E,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:ee(s)("Folder Name"),type:"text"},null,40,m0),[[$i,u.value]]),_.value.length?(Q(),Fe(Ut,{key:0,onHidden:l[1]||(l[1]=r=>_.value=""),error:""},{default:Oe(()=>[Ge(ae(_.value),1)]),_:1})):ke("",!0)])])])]),_:1}))}}),v0={class:"sm:flex sm:items-start"},y0=j("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[j("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),b0={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},x0={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},w0={class:"mt-2"},_0={class:"text-sm text-gray-500"},S0=["onKeyup","placeholder"],E0={name:"VFModalNewFile"},R0=Object.assign(E0,{props:{selection:Object,current:Object},setup(e){const t=e,i=ye("emitter");ye("storage");const n=ye("adapter"),{t:s}=ye("i18n"),u=ve(""),_=ve(""),E=()=>{u.value!=""&&i.emit("vf-fetch",{params:{q:"newfile",adapter:n.value,path:t.current.dirname,name:u.value},onSuccess:()=>{i.emit("vf-toast-push",{label:s("%s is created.",u.value)})},onError:w=>{_.value=s(w.message)}})};return(w,l)=>(Q(),Fe(jt,null,{buttons:Oe(()=>[j("button",{type:"button",onClick:E,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 dark:bg-gray-700 dark:hover:bg-gray-600/75 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},ae(ee(s)("Create")),1),j("button",{type:"button",onClick:l[2]||(l[2]=r=>ee(i).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},ae(ee(s)("Cancel")),1)]),default:Oe(()=>[j("div",v0,[y0,j("div",b0,[j("h3",x0,ae(ee(s)("New File")),1),j("div",w0,[j("p",_0,ae(ee(s)("Create a new file")),1),pt(j("input",{"onUpdate:modelValue":l[0]||(l[0]=r=>u.value=r),onKeyup:Yi(E,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:ee(s)("File Name"),type:"text"},null,40,S0),[[$i,u.value]]),_.value.length?(Q(),Fe(Ut,{key:0,onHidden:l[1]||(l[1]=r=>_.value=""),error:""},{default:Oe(()=>[Ge(ae(_.value),1)]),_:1})):ke("",!0)])])])]),_:1}))}}),D0={class:"flex"},I0=["aria-label"],T0={class:"ml-auto mb-2"},A0={key:0,class:"p-2 border font-normal whitespace-pre-wrap border-gray-200 dark:border-gray-700/50 dark:text-gray-200 rounded min-h-[200px] max-h-[60vh] text-xs overflow-auto"},C0={key:1},k0={__name:"Text",props:{selection:Object},emits:["load"],setup(e,{emit:t}){const i=e,n=ve(""),s=ve(""),u=ve(null),_=ve(!1),{apiUrl:E}=Bt(),w=ve(""),l=ve(!1),{t:r}=ye("i18n");vt(()=>{an(E.value,{params:{q:"preview",adapter:i.selection.adapter,path:i.selection.item.path},json:!1}).then(g=>{n.value=g,t("load")})});const a=()=>{_.value=!_.value,s.value=n.value,_.value==!0&&Ki(()=>{u.value.focus()})},f=ye("postData"),o=()=>{w.value="",l.value=!1,an(E.value,{method:"POST",params:Object.assign(f,{q:"save",adapter:i.selection.adapter,path:i.selection.item.path,content:s.value}),json:!1}).then(g=>{w.value=r("Updated."),n.value=g,t("load"),_.value=!_.value}).catch(g=>{w.value=r(g.message),l.value=!0})};return(g,d)=>(Q(),se(Ce,null,[j("div",D0,[j("div",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":e.selection.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},ae(e.selection.item.basename),9,I0),j("div",T0,[_.value?(Q(),se("button",{key:0,onClick:o,class:"ml-1 px-2 py-1 rounded border border-transparent shadow-sm bg-blue-700/75 hover:bg-blue-700 dark:bg-gray-700 dark:hover:bg-gray-700/50 text-base font-medium text-white sm:ml-3 sm:w-auto sm:text-sm"},ae(ee(r)("Save")),1)):ke("",!0),j("button",{class:"ml-1 px-2 py-1 text-blue-500",onClick:d[0]||(d[0]=h=>a())},ae(_.value?ee(r)("Cancel"):ee(r)("Edit")),1)])]),j("div",null,[_.value?(Q(),se("div",C0,[pt(j("textarea",{ref_key:"editInput",ref:u,"onUpdate:modelValue":d[1]||(d[1]=h=>s.value=h),class:"w-full p-2 rounded dark:bg-gray-700 dark:text-gray-200 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:selection:bg-gray-500 min-h-[200px] max-h-[60vh] text-xs",name:"text",id:"",cols:"30",rows:"10"},null,512),[[$i,s.value]])])):(Q(),se("pre",A0,ae(n.value),1)),w.value.length?(Q(),Fe(Ut,{key:2,onHidden:d[2]||(d[2]=h=>w.value=""),error:l.value},{default:Oe(()=>[Ge(ae(w.value),1)]),_:1},8,["error"])):ke("",!0)])],64))}};/*!
 * Cropper.js v1.6.1
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-09-17T03:44:19.860Z
 */function Ko(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),i.push.apply(i,n)}return i}function Jl(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?Ko(Object(i),!0).forEach(function(n){L0(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ko(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}function as(e){"@babel/helpers - typeof";return as=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},as(e)}function O0(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eu(n.key),n)}}function M0(e,t,i){return t&&$o(e.prototype,t),i&&$o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function L0(e,t,i){return t=eu(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Ql(e){return N0(e)||F0(e)||P0(e)||H0()}function N0(e){if(Array.isArray(e))return ls(e)}function F0(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function P0(e,t){if(e){if(typeof e=="string")return ls(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ls(e,t)}}function ls(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function H0(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z0(e,t){if(typeof e!="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var n=i.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function eu(e){var t=z0(e,"string");return typeof t=="symbol"?t:String(t)}var In=typeof window<"u"&&typeof window.document<"u",zt=In?window:{},qs=In&&zt.document.documentElement?"ontouchstart"in zt.document.documentElement:!1,Gs=In?"PointerEvent"in zt:!1,je="cropper",Xs="all",tu="crop",iu="move",ru="zoom",vi="e",yi="w",Oi="s",ti="n",ir="ne",rr="nw",nr="se",sr="sw",us="".concat(je,"-crop"),Yo="".concat(je,"-disabled"),ct="".concat(je,"-hidden"),Zo="".concat(je,"-hide"),B0="".concat(je,"-invisible"),un="".concat(je,"-modal"),cs="".concat(je,"-move"),_r="".concat(je,"Action"),Br="".concat(je,"Preview"),Ws="crop",nu="move",su="none",ds="crop",fs="cropend",hs="cropmove",ms="cropstart",Jo="dblclick",j0=qs?"touchstart":"mousedown",U0=qs?"touchmove":"mousemove",V0=qs?"touchend touchcancel":"mouseup",Qo=Gs?"pointerdown":j0,ea=Gs?"pointermove":U0,ta=Gs?"pointerup pointercancel":V0,ia="ready",ra="resize",na="wheel",ps="zoom",sa="image/jpeg",q0=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,G0=/^data:/,X0=/^data:image\/jpeg;base64,/,W0=/^img|canvas$/i,ou=200,au=100,oa={viewMode:0,dragMode:Ws,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:ou,minContainerHeight:au,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},K0='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',$0=Number.isNaN||zt.isNaN;function Ae(e){return typeof e=="number"&&!$0(e)}var aa=function(e){return e>0&&e<1/0};function jn(e){return typeof e>"u"}function Ii(e){return as(e)==="object"&&e!==null}var Y0=Object.prototype.hasOwnProperty;function Ni(e){if(!Ii(e))return!1;try{var t=e.constructor,i=t.prototype;return t&&i&&Y0.call(i,"isPrototypeOf")}catch{return!1}}function ut(e){return typeof e=="function"}var Z0=Array.prototype.slice;function lu(e){return Array.from?Array.from(e):Z0.call(e)}function We(e,t){return e&&ut(t)&&(Array.isArray(e)||Ae(e.length)?lu(e).forEach(function(i,n){t.call(e,i,n,e)}):Ii(e)&&Object.keys(e).forEach(function(i){t.call(e,e[i],i,e)})),e}var Ue=Object.assign||function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return Ii(e)&&i.length>0&&i.forEach(function(s){Ii(s)&&Object.keys(s).forEach(function(u){e[u]=s[u]})}),e},J0=/\.\d*(?:0|9){12}\d*$/;function qi(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return J0.test(e)?Math.round(e*t)/t:e}var Q0=/^width|height|left|top|marginLeft|marginTop$/;function si(e,t){var i=e.style;We(t,function(n,s){Q0.test(s)&&Ae(n)&&(n="".concat(n,"px")),i[s]=n})}function ev(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function Je(e,t){if(t){if(Ae(e.length)){We(e,function(n){Je(n,t)});return}if(e.classList){e.classList.add(t);return}var i=e.className.trim();i?i.indexOf(t)<0&&(e.className="".concat(i," ").concat(t)):e.className=t}}function Pt(e,t){if(t){if(Ae(e.length)){We(e,function(i){Pt(i,t)});return}if(e.classList){e.classList.remove(t);return}e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,""))}}function Fi(e,t,i){if(t){if(Ae(e.length)){We(e,function(n){Fi(n,t,i)});return}i?Je(e,t):Pt(e,t)}}var tv=/([a-z\d])([A-Z])/g;function Ks(e){return e.replace(tv,"$1-$2").toLowerCase()}function gs(e,t){return Ii(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(Ks(t)))}function Sr(e,t,i){Ii(i)?e[t]=i:e.dataset?e.dataset[t]=i:e.setAttribute("data-".concat(Ks(t)),i)}function iv(e,t){if(Ii(e[t]))try{delete e[t]}catch{e[t]=void 0}else if(e.dataset)try{delete e.dataset[t]}catch{e.dataset[t]=void 0}else e.removeAttribute("data-".concat(Ks(t)))}var uu=/\s\s*/,cu=function(){var e=!1;if(In){var t=!1,i=function(){},n=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(s){t=s}});zt.addEventListener("test",i,n),zt.removeEventListener("test",i,n)}return e}();function Dt(e,t,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=i;t.trim().split(uu).forEach(function(u){if(!cu){var _=e.listeners;_&&_[u]&&_[u][i]&&(s=_[u][i],delete _[u][i],Object.keys(_[u]).length===0&&delete _[u],Object.keys(_).length===0&&delete e.listeners)}e.removeEventListener(u,s,n)})}function wt(e,t,i){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=i;t.trim().split(uu).forEach(function(u){if(n.once&&!cu){var _=e.listeners,E=_===void 0?{}:_;s=function(){delete E[u][i],e.removeEventListener(u,s,n);for(var w=arguments.length,l=new Array(w),r=0;r<w;r++)l[r]=arguments[r];i.apply(e,l)},E[u]||(E[u]={}),E[u][i]&&e.removeEventListener(u,E[u][i],n),E[u][i]=s,e.listeners=E}e.addEventListener(u,s,n)})}function Gi(e,t,i){var n;return ut(Event)&&ut(CustomEvent)?n=new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent"),n.initCustomEvent(t,!0,!0,i)),e.dispatchEvent(n)}function du(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var Un=zt.location,rv=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function la(e){var t=e.match(rv);return t!==null&&(t[1]!==Un.protocol||t[2]!==Un.hostname||t[3]!==Un.port)}function ua(e){var t="timestamp=".concat(new Date().getTime());return e+(e.indexOf("?")===-1?"?":"&")+t}function mr(e){var t=e.rotate,i=e.scaleX,n=e.scaleY,s=e.translateX,u=e.translateY,_=[];Ae(s)&&s!==0&&_.push("translateX(".concat(s,"px)")),Ae(u)&&u!==0&&_.push("translateY(".concat(u,"px)")),Ae(t)&&t!==0&&_.push("rotate(".concat(t,"deg)")),Ae(i)&&i!==1&&_.push("scaleX(".concat(i,")")),Ae(n)&&n!==1&&_.push("scaleY(".concat(n,")"));var E=_.length?_.join(" "):"none";return{WebkitTransform:E,msTransform:E,transform:E}}function nv(e){var t=Jl({},e),i=0;return We(e,function(n,s){delete t[s],We(t,function(u){var _=Math.abs(n.startX-u.startX),E=Math.abs(n.startY-u.startY),w=Math.abs(n.endX-u.endX),l=Math.abs(n.endY-u.endY),r=Math.sqrt(_*_+E*E),a=Math.sqrt(w*w+l*l),f=(a-r)/r;Math.abs(f)>Math.abs(i)&&(i=f)})}),i}function jr(e,t){var i=e.pageX,n=e.pageY,s={endX:i,endY:n};return t?s:Jl({startX:i,startY:n},s)}function sv(e){var t=0,i=0,n=0;return We(e,function(s){var u=s.startX,_=s.startY;t+=u,i+=_,n+=1}),t/=n,i/=n,{pageX:t,pageY:i}}function oi(e){var t=e.aspectRatio,i=e.height,n=e.width,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",u=aa(n),_=aa(i);if(u&&_){var E=i*t;s==="contain"&&E>n||s==="cover"&&E<n?i=n/t:n=i*t}else u?i=n/t:_&&(n=i*t);return{width:n,height:i}}function ov(e){var t=e.width,i=e.height,n=e.degree;if(n=Math.abs(n)%180,n===90)return{width:i,height:t};var s=n%90*Math.PI/180,u=Math.sin(s),_=Math.cos(s),E=t*_+i*u,w=t*u+i*_;return n>90?{width:w,height:E}:{width:E,height:w}}function av(e,t,i,n){var s=t.aspectRatio,u=t.naturalWidth,_=t.naturalHeight,E=t.rotate,w=E===void 0?0:E,l=t.scaleX,r=l===void 0?1:l,a=t.scaleY,f=a===void 0?1:a,o=i.aspectRatio,g=i.naturalWidth,d=i.naturalHeight,h=n.fillColor,c=h===void 0?"transparent":h,b=n.imageSmoothingEnabled,S=b===void 0?!0:b,p=n.imageSmoothingQuality,m=p===void 0?"low":p,x=n.maxWidth,v=x===void 0?1/0:x,I=n.maxHeight,D=I===void 0?1/0:I,k=n.minWidth,P=k===void 0?0:k,T=n.minHeight,A=T===void 0?0:T,C=document.createElement("canvas"),R=C.getContext("2d"),M=oi({aspectRatio:o,width:v,height:D}),O=oi({aspectRatio:o,width:P,height:A},"cover"),B=Math.min(M.width,Math.max(O.width,g)),G=Math.min(M.height,Math.max(O.height,d)),$=oi({aspectRatio:s,width:v,height:D}),te=oi({aspectRatio:s,width:P,height:A},"cover"),V=Math.min($.width,Math.max(te.width,u)),X=Math.min($.height,Math.max(te.height,_)),ie=[-V/2,-X/2,V,X];return C.width=qi(B),C.height=qi(G),R.fillStyle=c,R.fillRect(0,0,B,G),R.save(),R.translate(B/2,G/2),R.rotate(w*Math.PI/180),R.scale(r,f),R.imageSmoothingEnabled=S,R.imageSmoothingQuality=m,R.drawImage.apply(R,[e].concat(Ql(ie.map(function(ne){return Math.floor(qi(ne))})))),R.restore(),C}var fu=String.fromCharCode;function lv(e,t,i){var n="";i+=t;for(var s=t;s<i;s+=1)n+=fu(e.getUint8(s));return n}var uv=/^data:.*,/;function cv(e){var t=e.replace(uv,""),i=atob(t),n=new ArrayBuffer(i.length),s=new Uint8Array(n);return We(s,function(u,_){s[_]=i.charCodeAt(_)}),n}function dv(e,t){for(var i=[],n=8192,s=new Uint8Array(e);s.length>0;)i.push(fu.apply(null,lu(s.subarray(0,n)))),s=s.subarray(n);return"data:".concat(t,";base64,").concat(btoa(i.join("")))}function fv(e){var t=new DataView(e),i;try{var n,s,u;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var _=t.byteLength,E=2;E+1<_;){if(t.getUint8(E)===255&&t.getUint8(E+1)===225){s=E;break}E+=1}if(s){var w=s+4,l=s+10;if(lv(t,w,4)==="Exif"){var r=t.getUint16(l);if(n=r===18761,(n||r===19789)&&t.getUint16(l+2,n)===42){var a=t.getUint32(l+4,n);a>=8&&(u=l+a)}}}if(u){var f=t.getUint16(u,n),o,g;for(g=0;g<f;g+=1)if(o=u+g*12+2,t.getUint16(o,n)===274){o+=8,i=t.getUint16(o,n),t.setUint16(o,1,n);break}}}catch{i=1}return i}function hv(e){var t=0,i=1,n=1;switch(e){case 2:i=-1;break;case 3:t=-180;break;case 4:n=-1;break;case 5:t=90,n=-1;break;case 6:t=90;break;case 7:t=90,i=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:i,scaleY:n}}var mv={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,t=this.options,i=this.container,n=this.cropper,s=Number(t.minContainerWidth),u=Number(t.minContainerHeight);Je(n,ct),Pt(e,ct);var _={width:Math.max(i.offsetWidth,s>=0?s:ou),height:Math.max(i.offsetHeight,u>=0?u:au)};this.containerData=_,si(n,{width:_.width,height:_.height}),Je(e,ct),Pt(n,ct)},initCanvas:function(){var e=this.containerData,t=this.imageData,i=this.options.viewMode,n=Math.abs(t.rotate)%180===90,s=n?t.naturalHeight:t.naturalWidth,u=n?t.naturalWidth:t.naturalHeight,_=s/u,E=e.width,w=e.height;e.height*_>e.width?i===3?E=e.height*_:w=e.width/_:i===3?w=e.width/_:E=e.height*_;var l={aspectRatio:_,naturalWidth:s,naturalHeight:u,width:E,height:w};this.canvasData=l,this.limited=i===1||i===2,this.limitCanvas(!0,!0),l.width=Math.min(Math.max(l.width,l.minWidth),l.maxWidth),l.height=Math.min(Math.max(l.height,l.minHeight),l.maxHeight),l.left=(e.width-l.width)/2,l.top=(e.height-l.height)/2,l.oldLeft=l.left,l.oldTop=l.top,this.initialCanvasData=Ue({},l)},limitCanvas:function(e,t){var i=this.options,n=this.containerData,s=this.canvasData,u=this.cropBoxData,_=i.viewMode,E=s.aspectRatio,w=this.cropped&&u;if(e){var l=Number(i.minCanvasWidth)||0,r=Number(i.minCanvasHeight)||0;_>1?(l=Math.max(l,n.width),r=Math.max(r,n.height),_===3&&(r*E>l?l=r*E:r=l/E)):_>0&&(l?l=Math.max(l,w?u.width:0):r?r=Math.max(r,w?u.height:0):w&&(l=u.width,r=u.height,r*E>l?l=r*E:r=l/E));var a=oi({aspectRatio:E,width:l,height:r});l=a.width,r=a.height,s.minWidth=l,s.minHeight=r,s.maxWidth=1/0,s.maxHeight=1/0}if(t)if(_>(w?0:1)){var f=n.width-s.width,o=n.height-s.height;s.minLeft=Math.min(0,f),s.minTop=Math.min(0,o),s.maxLeft=Math.max(0,f),s.maxTop=Math.max(0,o),w&&this.limited&&(s.minLeft=Math.min(u.left,u.left+(u.width-s.width)),s.minTop=Math.min(u.top,u.top+(u.height-s.height)),s.maxLeft=u.left,s.maxTop=u.top,_===2&&(s.width>=n.width&&(s.minLeft=Math.min(0,f),s.maxLeft=Math.max(0,f)),s.height>=n.height&&(s.minTop=Math.min(0,o),s.maxTop=Math.max(0,o))))}else s.minLeft=-s.width,s.minTop=-s.height,s.maxLeft=n.width,s.maxTop=n.height},renderCanvas:function(e,t){var i=this.canvasData,n=this.imageData;if(t){var s=ov({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),u=s.width,_=s.height,E=i.width*(u/i.naturalWidth),w=i.height*(_/i.naturalHeight);i.left-=(E-i.width)/2,i.top-=(w-i.height)/2,i.width=E,i.height=w,i.aspectRatio=u/_,i.naturalWidth=u,i.naturalHeight=_,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,si(this.canvas,Ue({width:i.width,height:i.height},mr({translateX:i.left,translateY:i.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var t=this.canvasData,i=this.imageData,n=i.naturalWidth*(t.width/t.naturalWidth),s=i.naturalHeight*(t.height/t.naturalHeight);Ue(i,{width:n,height:s,left:(t.width-n)/2,top:(t.height-s)/2}),si(this.image,Ue({width:i.width,height:i.height},mr(Ue({translateX:i.left,translateY:i.top},i)))),e&&this.output()},initCropBox:function(){var e=this.options,t=this.canvasData,i=e.aspectRatio||e.initialAspectRatio,n=Number(e.autoCropArea)||.8,s={width:t.width,height:t.height};i&&(t.height*i>t.width?s.height=s.width/i:s.width=s.height*i),this.cropBoxData=s,this.limitCropBox(!0,!0),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),s.width=Math.max(s.minWidth,s.width*n),s.height=Math.max(s.minHeight,s.height*n),s.left=t.left+(t.width-s.width)/2,s.top=t.top+(t.height-s.height)/2,s.oldLeft=s.left,s.oldTop=s.top,this.initialCropBoxData=Ue({},s)},limitCropBox:function(e,t){var i=this.options,n=this.containerData,s=this.canvasData,u=this.cropBoxData,_=this.limited,E=i.aspectRatio;if(e){var w=Number(i.minCropBoxWidth)||0,l=Number(i.minCropBoxHeight)||0,r=_?Math.min(n.width,s.width,s.width+s.left,n.width-s.left):n.width,a=_?Math.min(n.height,s.height,s.height+s.top,n.height-s.top):n.height;w=Math.min(w,n.width),l=Math.min(l,n.height),E&&(w&&l?l*E>w?l=w/E:w=l*E:w?l=w/E:l&&(w=l*E),a*E>r?a=r/E:r=a*E),u.minWidth=Math.min(w,r),u.minHeight=Math.min(l,a),u.maxWidth=r,u.maxHeight=a}t&&(_?(u.minLeft=Math.max(0,s.left),u.minTop=Math.max(0,s.top),u.maxLeft=Math.min(n.width,s.left+s.width)-u.width,u.maxTop=Math.min(n.height,s.top+s.height)-u.height):(u.minLeft=0,u.minTop=0,u.maxLeft=n.width-u.width,u.maxTop=n.height-u.height))},renderCropBox:function(){var e=this.options,t=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,e.movable&&e.cropBoxMovable&&Sr(this.face,_r,i.width>=t.width&&i.height>=t.height?iu:Xs),si(this.cropBox,Ue({width:i.width,height:i.height},mr({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Gi(this.element,ds,this.getData())}},pv={initPreview:function(){var e=this.element,t=this.crossOrigin,i=this.options.preview,n=t?this.crossOriginUrl:this.url,s=e.alt||"The image to preview",u=document.createElement("img");if(t&&(u.crossOrigin=t),u.src=n,u.alt=s,this.viewBox.appendChild(u),this.viewBoxImage=u,!!i){var _=i;typeof i=="string"?_=e.ownerDocument.querySelectorAll(i):i.querySelector&&(_=[i]),this.previews=_,We(_,function(E){var w=document.createElement("img");Sr(E,Br,{width:E.offsetWidth,height:E.offsetHeight,html:E.innerHTML}),t&&(w.crossOrigin=t),w.src=n,w.alt=s,w.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',E.innerHTML="",E.appendChild(w)})}},resetPreview:function(){We(this.previews,function(e){var t=gs(e,Br);si(e,{width:t.width,height:t.height}),e.innerHTML=t.html,iv(e,Br)})},preview:function(){var e=this.imageData,t=this.canvasData,i=this.cropBoxData,n=i.width,s=i.height,u=e.width,_=e.height,E=i.left-t.left-e.left,w=i.top-t.top-e.top;!this.cropped||this.disabled||(si(this.viewBoxImage,Ue({width:u,height:_},mr(Ue({translateX:-E,translateY:-w},e)))),We(this.previews,function(l){var r=gs(l,Br),a=r.width,f=r.height,o=a,g=f,d=1;n&&(d=a/n,g=s*d),s&&g>f&&(d=f/s,o=n*d,g=f),si(l,{width:o,height:g}),si(l.getElementsByTagName("img")[0],Ue({width:u*d,height:_*d},mr(Ue({translateX:-E*d,translateY:-w*d},e))))}))}},gv={bind:function(){var e=this.element,t=this.options,i=this.cropper;ut(t.cropstart)&&wt(e,ms,t.cropstart),ut(t.cropmove)&&wt(e,hs,t.cropmove),ut(t.cropend)&&wt(e,fs,t.cropend),ut(t.crop)&&wt(e,ds,t.crop),ut(t.zoom)&&wt(e,ps,t.zoom),wt(i,Qo,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&wt(i,na,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&wt(i,Jo,this.onDblclick=this.dblclick.bind(this)),wt(e.ownerDocument,ea,this.onCropMove=this.cropMove.bind(this)),wt(e.ownerDocument,ta,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&wt(window,ra,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,t=this.options,i=this.cropper;ut(t.cropstart)&&Dt(e,ms,t.cropstart),ut(t.cropmove)&&Dt(e,hs,t.cropmove),ut(t.cropend)&&Dt(e,fs,t.cropend),ut(t.crop)&&Dt(e,ds,t.crop),ut(t.zoom)&&Dt(e,ps,t.zoom),Dt(i,Qo,this.onCropStart),t.zoomable&&t.zoomOnWheel&&Dt(i,na,this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&Dt(i,Jo,this.onDblclick),Dt(e.ownerDocument,ea,this.onCropMove),Dt(e.ownerDocument,ta,this.onCropEnd),t.responsive&&Dt(window,ra,this.onResize)}},vv={resize:function(){if(!this.disabled){var e=this.options,t=this.container,i=this.containerData,n=t.offsetWidth/i.width,s=t.offsetHeight/i.height,u=Math.abs(n-1)>Math.abs(s-1)?n:s;if(u!==1){var _,E;e.restore&&(_=this.getCanvasData(),E=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(We(_,function(w,l){_[l]=w*u})),this.setCropBoxData(We(E,function(w,l){E[l]=w*u})))}}},dblclick:function(){this.disabled||this.options.dragMode===su||this.setDragMode(ev(this.dragBox,us)?nu:Ws)},wheel:function(e){var t=this,i=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),e.deltaY?n=e.deltaY>0?1:-1:e.wheelDelta?n=-e.wheelDelta/120:e.detail&&(n=e.detail>0?1:-1),this.zoom(-n*i,e)))},cropStart:function(e){var t=e.buttons,i=e.button;if(!(this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(Ae(t)&&t!==1||Ae(i)&&i!==0||e.ctrlKey))){var n=this.options,s=this.pointers,u;e.changedTouches?We(e.changedTouches,function(_){s[_.identifier]=jr(_)}):s[e.pointerId||0]=jr(e),Object.keys(s).length>1&&n.zoomable&&n.zoomOnTouch?u=ru:u=gs(e.target,_r),q0.test(u)&&Gi(this.element,ms,{originalEvent:e,action:u})!==!1&&(e.preventDefault(),this.action=u,this.cropping=!1,u===tu&&(this.cropping=!0,Je(this.dragBox,un)))}},cropMove:function(e){var t=this.action;if(!(this.disabled||!t)){var i=this.pointers;e.preventDefault(),Gi(this.element,hs,{originalEvent:e,action:t})!==!1&&(e.changedTouches?We(e.changedTouches,function(n){Ue(i[n.identifier]||{},jr(n,!0))}):Ue(i[e.pointerId||0]||{},jr(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var t=this.action,i=this.pointers;e.changedTouches?We(e.changedTouches,function(n){delete i[n.identifier]}):delete i[e.pointerId||0],t&&(e.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,Fi(this.dragBox,un,this.cropped&&this.options.modal)),Gi(this.element,fs,{originalEvent:e,action:t}))}}},yv={change:function(e){var t=this.options,i=this.canvasData,n=this.containerData,s=this.cropBoxData,u=this.pointers,_=this.action,E=t.aspectRatio,w=s.left,l=s.top,r=s.width,a=s.height,f=w+r,o=l+a,g=0,d=0,h=n.width,c=n.height,b=!0,S;!E&&e.shiftKey&&(E=r&&a?r/a:1),this.limited&&(g=s.minLeft,d=s.minTop,h=g+Math.min(n.width,i.width,i.left+i.width),c=d+Math.min(n.height,i.height,i.top+i.height));var p=u[Object.keys(u)[0]],m={x:p.endX-p.startX,y:p.endY-p.startY},x=function(v){switch(v){case vi:f+m.x>h&&(m.x=h-f);break;case yi:w+m.x<g&&(m.x=g-w);break;case ti:l+m.y<d&&(m.y=d-l);break;case Oi:o+m.y>c&&(m.y=c-o);break}};switch(_){case Xs:w+=m.x,l+=m.y;break;case vi:if(m.x>=0&&(f>=h||E&&(l<=d||o>=c))){b=!1;break}x(vi),r+=m.x,r<0&&(_=yi,r=-r,w-=r),E&&(a=r/E,l+=(s.height-a)/2);break;case ti:if(m.y<=0&&(l<=d||E&&(w<=g||f>=h))){b=!1;break}x(ti),a-=m.y,l+=m.y,a<0&&(_=Oi,a=-a,l-=a),E&&(r=a*E,w+=(s.width-r)/2);break;case yi:if(m.x<=0&&(w<=g||E&&(l<=d||o>=c))){b=!1;break}x(yi),r-=m.x,w+=m.x,r<0&&(_=vi,r=-r,w-=r),E&&(a=r/E,l+=(s.height-a)/2);break;case Oi:if(m.y>=0&&(o>=c||E&&(w<=g||f>=h))){b=!1;break}x(Oi),a+=m.y,a<0&&(_=ti,a=-a,l-=a),E&&(r=a*E,w+=(s.width-r)/2);break;case ir:if(E){if(m.y<=0&&(l<=d||f>=h)){b=!1;break}x(ti),a-=m.y,l+=m.y,r=a*E}else x(ti),x(vi),m.x>=0?f<h?r+=m.x:m.y<=0&&l<=d&&(b=!1):r+=m.x,m.y<=0?l>d&&(a-=m.y,l+=m.y):(a-=m.y,l+=m.y);r<0&&a<0?(_=sr,a=-a,r=-r,l-=a,w-=r):r<0?(_=rr,r=-r,w-=r):a<0&&(_=nr,a=-a,l-=a);break;case rr:if(E){if(m.y<=0&&(l<=d||w<=g)){b=!1;break}x(ti),a-=m.y,l+=m.y,r=a*E,w+=s.width-r}else x(ti),x(yi),m.x<=0?w>g?(r-=m.x,w+=m.x):m.y<=0&&l<=d&&(b=!1):(r-=m.x,w+=m.x),m.y<=0?l>d&&(a-=m.y,l+=m.y):(a-=m.y,l+=m.y);r<0&&a<0?(_=nr,a=-a,r=-r,l-=a,w-=r):r<0?(_=ir,r=-r,w-=r):a<0&&(_=sr,a=-a,l-=a);break;case sr:if(E){if(m.x<=0&&(w<=g||o>=c)){b=!1;break}x(yi),r-=m.x,w+=m.x,a=r/E}else x(Oi),x(yi),m.x<=0?w>g?(r-=m.x,w+=m.x):m.y>=0&&o>=c&&(b=!1):(r-=m.x,w+=m.x),m.y>=0?o<c&&(a+=m.y):a+=m.y;r<0&&a<0?(_=ir,a=-a,r=-r,l-=a,w-=r):r<0?(_=nr,r=-r,w-=r):a<0&&(_=rr,a=-a,l-=a);break;case nr:if(E){if(m.x>=0&&(f>=h||o>=c)){b=!1;break}x(vi),r+=m.x,a=r/E}else x(Oi),x(vi),m.x>=0?f<h?r+=m.x:m.y>=0&&o>=c&&(b=!1):r+=m.x,m.y>=0?o<c&&(a+=m.y):a+=m.y;r<0&&a<0?(_=rr,a=-a,r=-r,l-=a,w-=r):r<0?(_=sr,r=-r,w-=r):a<0&&(_=ir,a=-a,l-=a);break;case iu:this.move(m.x,m.y),b=!1;break;case ru:this.zoom(nv(u),e),b=!1;break;case tu:if(!m.x||!m.y){b=!1;break}S=du(this.cropper),w=p.startX-S.left,l=p.startY-S.top,r=s.minWidth,a=s.minHeight,m.x>0?_=m.y>0?nr:ir:m.x<0&&(w-=r,_=m.y>0?sr:rr),m.y<0&&(l-=a),this.cropped||(Pt(this.cropBox,ct),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}b&&(s.width=r,s.height=a,s.left=w,s.top=l,this.action=_,this.renderCropBox()),We(u,function(v){v.startX=v.endX,v.startY=v.endY})}},bv={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&Je(this.dragBox,un),Pt(this.cropBox,ct),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=Ue({},this.initialImageData),this.canvasData=Ue({},this.initialCanvasData),this.cropBoxData=Ue({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(Ue(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),Pt(this.dragBox,un),Je(this.cropBox,ct)),this},replace:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&e&&(this.isImg&&(this.element.src=e),t?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,We(this.previews,function(i){i.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,Pt(this.cropper,Yo)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,Je(this.cropper,Yo)),this},destroy:function(){var e=this.element;return e[je]?(e[je]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.canvasData,n=i.left,s=i.top;return this.moveTo(jn(e)?e:n+Number(e),jn(t)?t:s+Number(t))},moveTo:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.canvasData,n=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(Ae(e)&&(i.left=e,n=!0),Ae(t)&&(i.top=t,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(e,t){var i=this.canvasData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(i.width*e/i.naturalWidth,null,t)},zoomTo:function(e,t,i){var n=this.options,s=this.canvasData,u=s.width,_=s.height,E=s.naturalWidth,w=s.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&n.zoomable){var l=E*e,r=w*e;if(Gi(this.element,ps,{ratio:e,oldRatio:u/E,originalEvent:i})===!1)return this;if(i){var a=this.pointers,f=du(this.cropper),o=a&&Object.keys(a).length?sv(a):{pageX:i.pageX,pageY:i.pageY};s.left-=(l-u)*((o.pageX-f.left-s.left)/u),s.top-=(r-_)*((o.pageY-f.top-s.top)/_)}else Ni(t)&&Ae(t.x)&&Ae(t.y)?(s.left-=(l-u)*((t.x-s.left)/u),s.top-=(r-_)*((t.y-s.top)/_)):(s.left-=(l-u)/2,s.top-=(r-_)/2);s.width=l,s.height=r,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),Ae(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,Ae(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(Ae(t)?t:1,e)},scale:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,i=this.imageData,n=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(Ae(e)&&(i.scaleX=e,n=!0),Ae(t)&&(i.scaleY=t,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.options,i=this.imageData,n=this.canvasData,s=this.cropBoxData,u;if(this.ready&&this.cropped){u={x:s.left-n.left,y:s.top-n.top,width:s.width,height:s.height};var _=i.width/i.naturalWidth;if(We(u,function(l,r){u[r]=l/_}),e){var E=Math.round(u.y+u.height),w=Math.round(u.x+u.width);u.x=Math.round(u.x),u.y=Math.round(u.y),u.width=w-u.x,u.height=E-u.y}}else u={x:0,y:0,width:0,height:0};return t.rotatable&&(u.rotate=i.rotate||0),t.scalable&&(u.scaleX=i.scaleX||1,u.scaleY=i.scaleY||1),u},setData:function(e){var t=this.options,i=this.imageData,n=this.canvasData,s={};if(this.ready&&!this.disabled&&Ni(e)){var u=!1;t.rotatable&&Ae(e.rotate)&&e.rotate!==i.rotate&&(i.rotate=e.rotate,u=!0),t.scalable&&(Ae(e.scaleX)&&e.scaleX!==i.scaleX&&(i.scaleX=e.scaleX,u=!0),Ae(e.scaleY)&&e.scaleY!==i.scaleY&&(i.scaleY=e.scaleY,u=!0)),u&&this.renderCanvas(!0,!0);var _=i.width/i.naturalWidth;Ae(e.x)&&(s.left=e.x*_+n.left),Ae(e.y)&&(s.top=e.y*_+n.top),Ae(e.width)&&(s.width=e.width*_),Ae(e.height)&&(s.height=e.height*_),this.setCropBoxData(s)}return this},getContainerData:function(){return this.ready?Ue({},this.containerData):{}},getImageData:function(){return this.sized?Ue({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,t={};return this.ready&&We(["left","top","width","height","naturalWidth","naturalHeight"],function(i){t[i]=e[i]}),t},setCanvasData:function(e){var t=this.canvasData,i=t.aspectRatio;return this.ready&&!this.disabled&&Ni(e)&&(Ae(e.left)&&(t.left=e.left),Ae(e.top)&&(t.top=e.top),Ae(e.width)?(t.width=e.width,t.height=e.width/i):Ae(e.height)&&(t.height=e.height,t.width=e.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,t;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(e){var t=this.cropBoxData,i=this.options.aspectRatio,n,s;return this.ready&&this.cropped&&!this.disabled&&Ni(e)&&(Ae(e.left)&&(t.left=e.left),Ae(e.top)&&(t.top=e.top),Ae(e.width)&&e.width!==t.width&&(n=!0,t.width=e.width),Ae(e.height)&&e.height!==t.height&&(s=!0,t.height=e.height),i&&(n?t.height=t.width/i:s&&(t.width=t.height*i)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,i=av(this.image,this.imageData,t,e);if(!this.cropped)return i;var n=this.getData(e.rounded),s=n.x,u=n.y,_=n.width,E=n.height,w=i.width/Math.floor(t.naturalWidth);w!==1&&(s*=w,u*=w,_*=w,E*=w);var l=_/E,r=oi({aspectRatio:l,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),a=oi({aspectRatio:l,width:e.minWidth||0,height:e.minHeight||0},"cover"),f=oi({aspectRatio:l,width:e.width||(w!==1?i.width:_),height:e.height||(w!==1?i.height:E)}),o=f.width,g=f.height;o=Math.min(r.width,Math.max(a.width,o)),g=Math.min(r.height,Math.max(a.height,g));var d=document.createElement("canvas"),h=d.getContext("2d");d.width=qi(o),d.height=qi(g),h.fillStyle=e.fillColor||"transparent",h.fillRect(0,0,o,g);var c=e.imageSmoothingEnabled,b=c===void 0?!0:c,S=e.imageSmoothingQuality;h.imageSmoothingEnabled=b,S&&(h.imageSmoothingQuality=S);var p=i.width,m=i.height,x=s,v=u,I,D,k,P,T,A;x<=-_||x>p?(x=0,I=0,k=0,T=0):x<=0?(k=-x,x=0,I=Math.min(p,_+x),T=I):x<=p&&(k=0,I=Math.min(_,p-x),T=I),I<=0||v<=-E||v>m?(v=0,D=0,P=0,A=0):v<=0?(P=-v,v=0,D=Math.min(m,E+v),A=D):v<=m&&(P=0,D=Math.min(E,m-v),A=D);var C=[x,v,I,D];if(T>0&&A>0){var R=o/_;C.push(k*R,P*R,T*R,A*R)}return h.drawImage.apply(h,[i].concat(Ql(C.map(function(M){return Math.floor(qi(M))})))),d},setAspectRatio:function(e){var t=this.options;return!this.disabled&&!jn(e)&&(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t=this.options,i=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var s=e===Ws,u=t.movable&&e===nu;e=s||u?e:su,t.dragMode=e,Sr(i,_r,e),Fi(i,us,s),Fi(i,cs,u),t.cropBoxMovable||(Sr(n,_r,e),Fi(n,us,s),Fi(n,cs,u))}return this}},xv=zt.Cropper,hu=function(){function e(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(O0(this,e),!t||!W0.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=Ue({},oa,Ni(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return M0(e,[{key:"init",value:function(){var t=this.element,i=t.tagName.toLowerCase(),n;if(!t[je]){if(t[je]=this,i==="img"){if(this.isImg=!0,n=t.getAttribute("src")||"",this.originalUrl=n,!n)return;n=t.src}else i==="canvas"&&window.HTMLCanvasElement&&(n=t.toDataURL());this.load(n)}}},{key:"load",value:function(t){var i=this;if(t){this.url=t,this.imageData={};var n=this.element,s=this.options;if(!s.rotatable&&!s.scalable&&(s.checkOrientation=!1),!s.checkOrientation||!window.ArrayBuffer){this.clone();return}if(G0.test(t)){X0.test(t)?this.read(cv(t)):this.clone();return}var u=new XMLHttpRequest,_=this.clone.bind(this);this.reloading=!0,this.xhr=u,u.onabort=_,u.onerror=_,u.ontimeout=_,u.onprogress=function(){u.getResponseHeader("content-type")!==sa&&u.abort()},u.onload=function(){i.read(u.response)},u.onloadend=function(){i.reloading=!1,i.xhr=null},s.checkCrossOrigin&&la(t)&&n.crossOrigin&&(t=ua(t)),u.open("GET",t,!0),u.responseType="arraybuffer",u.withCredentials=n.crossOrigin==="use-credentials",u.send()}}},{key:"read",value:function(t){var i=this.options,n=this.imageData,s=fv(t),u=0,_=1,E=1;if(s>1){this.url=dv(t,sa);var w=hv(s);u=w.rotate,_=w.scaleX,E=w.scaleY}i.rotatable&&(n.rotate=u),i.scalable&&(n.scaleX=_,n.scaleY=E),this.clone()}},{key:"clone",value:function(){var t=this.element,i=this.url,n=t.crossOrigin,s=i;this.options.checkCrossOrigin&&la(i)&&(n||(n="anonymous"),s=ua(i)),this.crossOrigin=n,this.crossOriginUrl=s;var u=document.createElement("img");n&&(u.crossOrigin=n),u.src=s||i,u.alt=t.alt||"The image to crop",this.image=u,u.onload=this.start.bind(this),u.onerror=this.stop.bind(this),Je(u,Zo),t.parentNode.insertBefore(u,t.nextSibling)}},{key:"start",value:function(){var t=this,i=this.image;i.onload=null,i.onerror=null,this.sizing=!0;var n=zt.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(zt.navigator.userAgent),s=function(E,w){Ue(t.imageData,{naturalWidth:E,naturalHeight:w,aspectRatio:E/w}),t.initialImageData=Ue({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(i.naturalWidth&&!n){s(i.naturalWidth,i.naturalHeight);return}var u=document.createElement("img"),_=document.body||document.documentElement;this.sizingImage=u,u.onload=function(){s(u.width,u.height),n||_.removeChild(u)},u.src=i.src,n||(u.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",_.appendChild(u))}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var t=this.element,i=this.options,n=this.image,s=t.parentNode,u=document.createElement("div");u.innerHTML=K0;var _=u.querySelector(".".concat(je,"-container")),E=_.querySelector(".".concat(je,"-canvas")),w=_.querySelector(".".concat(je,"-drag-box")),l=_.querySelector(".".concat(je,"-crop-box")),r=l.querySelector(".".concat(je,"-face"));this.container=s,this.cropper=_,this.canvas=E,this.dragBox=w,this.cropBox=l,this.viewBox=_.querySelector(".".concat(je,"-view-box")),this.face=r,E.appendChild(n),Je(t,ct),s.insertBefore(_,t.nextSibling),Pt(n,Zo),this.initPreview(),this.bind(),i.initialAspectRatio=Math.max(0,i.initialAspectRatio)||NaN,i.aspectRatio=Math.max(0,i.aspectRatio)||NaN,i.viewMode=Math.max(0,Math.min(3,Math.round(i.viewMode)))||0,Je(l,ct),i.guides||Je(l.getElementsByClassName("".concat(je,"-dashed")),ct),i.center||Je(l.getElementsByClassName("".concat(je,"-center")),ct),i.background&&Je(_,"".concat(je,"-bg")),i.highlight||Je(r,B0),i.cropBoxMovable&&(Je(r,cs),Sr(r,_r,Xs)),i.cropBoxResizable||(Je(l.getElementsByClassName("".concat(je,"-line")),ct),Je(l.getElementsByClassName("".concat(je,"-point")),ct)),this.render(),this.ready=!0,this.setDragMode(i.dragMode),i.autoCrop&&this.crop(),this.setData(i.data),ut(i.ready)&&wt(t,ia,i.ready,{once:!0}),Gi(t,ia)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var t=this.cropper.parentNode;t&&t.removeChild(this.cropper),Pt(this.element,ct)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=xv,e}},{key:"setDefaults",value:function(t){Ue(oa,Ni(t)&&t)}}]),e}();Ue(hu.prototype,mv,pv,gv,vv,yv,bv);const wv={class:"flex"},_v=["aria-label"],Sv={class:"ml-auto mb-2"},Ev={class:"w-full flex justify-center"},Rv=["src"],Dv={__name:"Image",props:{selection:Object},emits:["load"],setup(e,{emit:t}){const i=e,{t:n}=ye("i18n"),{apiUrl:s}=Bt(),u=ve(null),_=ve(null),E=ve(!1),w=ve(""),l=ve(!1),r=()=>{E.value=!E.value,E.value?_.value=new hu(u.value,{crop(o){}}):_.value.destroy()},a=ye("postData"),f=()=>{_.value.getCroppedCanvas({width:795,height:341}).toBlob(o=>{w.value="",l.value=!1,an(s.value,{method:"POST",params:Object.assign(a,{q:"upload",adapter:i.selection.adapter,path:i.selection.item.path,file:o}),name:i.selection.item.basename,json:!1}).then(g=>{w.value=n("Updated."),u.value.src=ss(i.selection.adapter,i.selection.item.path),r(),t("load")}).catch(g=>{w.value=n(g.message),l.value=!0})})};return vt(()=>{t("load")}),(o,g)=>(Q(),se(Ce,null,[j("div",wv,[j("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":e.selection.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},ae(e.selection.item.basename),9,_v),j("div",Sv,[E.value?(Q(),se("button",{key:0,onClick:f,class:"ml-1 px-2 py-1 rounded border border-transparent shadow-sm bg-blue-700/75 hover:bg-blue-700 dark:bg-gray-700 dark:hover:bg-gray-700/50 text-base font-medium text-white sm:ml-3 sm:w-auto sm:text-sm"},ae(ee(n)("Crop")),1)):ke("",!0),j("button",{class:"ml-1 px-2 py-1 text-blue-500",onClick:g[0]||(g[0]=d=>r())},ae(E.value?ee(n)("Cancel"):ee(n)("Edit")),1)])]),j("div",Ev,[j("img",{ref_key:"image",ref:u,class:"max-w-[50vh] max-h-[50vh]",src:ee(ss)(i.selection.adapter,i.selection.item.path),alt:""},null,8,Rv)]),w.value.length?(Q(),Fe(Ut,{key:0,onHidden:g[1]||(g[1]=d=>w.value=""),error:l.value},{default:Oe(()=>[Ge(ae(w.value),1)]),_:1},8,["error"])):ke("",!0)],64))}},Iv={class:"flex"},Tv=["aria-label"],Av=j("div",null,null,-1),Cv={__name:"Default",props:{selection:Object},emits:["load"],setup(e,{emit:t}){return vt(()=>{t("load")}),(i,n)=>(Q(),se(Ce,null,[j("div",Iv,[j("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":e.selection.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},ae(e.selection.item.basename),9,Tv)]),Av],64))}},kv=["aria-label"],Ov={class:"w-full",preload:"",controls:""},Mv=["src"],Lv={__name:"Video",props:{selection:Object},emits:["load"],setup(e,{emit:t}){const i=e,{apiUrl:n}=Bt(),s=()=>n.value+"?"+Ti({q:"preview",adapter:i.selection.adapter,path:i.selection.item.path});return vt(()=>{t("load")}),(u,_)=>(Q(),se(Ce,null,[j("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":e.selection.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},ae(e.selection.item.basename),9,kv),j("div",null,[j("video",Ov,[j("source",{src:s(),type:"video/mp4"},null,8,Mv),Ge(" Your browser does not support the video tag. ")])])],64))}},Nv=["aria-label"],Fv={class:"w-full",controls:""},Pv=["src"],Hv={__name:"Audio",props:{selection:Object},emits:["load"],setup(e,{emit:t}){const i=e,{apiUrl:n}=Bt(),s=()=>n.value+"?"+Ti({q:"preview",adapter:i.selection.adapter,path:i.selection.item.path});return vt(()=>{t("load")}),(u,_)=>(Q(),se(Ce,null,[j("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":e.selection.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},ae(e.selection.item.basename),9,Nv),j("div",null,[j("audio",Fv,[j("source",{src:s(),type:"audio/mpeg"},null,8,Pv),Ge(" Your browser does not support the audio element. ")])])],64))}},zv=["aria-label"],Bv=["data"],jv=["src"],Uv={__name:"Pdf",props:{selection:Object},emits:["load"],setup(e,{emit:t}){const i=e,{apiUrl:n}=Bt(),s=()=>n.value+"?"+Ti({q:"preview",adapter:i.selection.adapter,path:i.selection.item.path});return vt(()=>{t("load")}),(u,_)=>(Q(),se(Ce,null,[j("h3",{class:"mb-2 text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title","aria-label":e.selection.item.path,"data-microtip-position":"bottom-right",role:"tooltip"},ae(e.selection.item.basename),9,zv),j("div",null,[j("object",{class:"h-[60vh]",data:s(),type:"application/pdf",width:"100%",height:"100%"},[j("iframe",{class:"border-0",src:s(),width:"100%",height:"100%"},`
          <p>
            Your browser does not support PDFs.
            <a href="https://example.com/test.pdf">Download the PDF</a>
            .
          </p>
        `,8,jv)],8,Bv)])],64))}},Vv={class:"sm:flex sm:items-start"},qv={class:"mt-3 text-center sm:mt-0 sm:text-left w-full"},Gv={class:"text-gray-700 dark:text-gray-200 text-sm"},Xv={key:0,class:"flex leading-5"},Wv=j("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[j("circle",{class:"opacity-25 stroke-blue-900 dark:stroke-blue-100",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),j("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Kv={class:"py-2 flex font-normal break-all dark:text-gray-200 rounded text-xs"},$v={class:"font-bold pl-2"},Yv={class:"font-bold pl-2"},Zv={name:"VFModalPreview"},Jv=Object.assign(Zv,{props:{selection:Object},setup(e){const t=e,{apiUrl:i}=Bt(),n=ye("emitter"),{t:s}=ye("i18n"),u=ve(!1),_=l=>u.value=l,E=l=>(t.selection.item.mime_type??"").startsWith(l),w=()=>{const l=i.value+"?"+Ti({q:"download",adapter:t.selection.adapter,path:t.selection.item.path});n.emit("vf-download",l)};return(l,r)=>(Q(),Fe(jt,null,{buttons:Oe(()=>[j("button",{type:"button",onClick:r[6]||(r[6]=a=>ee(n).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-gray-400 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},ae(ee(s)("Close")),1),j("button",{type:"button",onClick:r[7]||(r[7]=a=>w()),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-gray-400 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},ae(ee(s)("Download")),1)]),default:Oe(()=>[j("div",Vv,[j("div",qv,[j("div",null,[E("text")?(Q(),Fe(k0,{key:0,selection:e.selection,onLoad:r[0]||(r[0]=a=>_(!0))},null,8,["selection"])):E("image")?(Q(),Fe(Dv,{key:1,selection:e.selection,onLoad:r[1]||(r[1]=a=>_(!0))},null,8,["selection"])):E("video")?(Q(),Fe(Lv,{key:2,selection:e.selection,onLoad:r[2]||(r[2]=a=>_(!0))},null,8,["selection"])):E("audio")?(Q(),Fe(Hv,{key:3,selection:e.selection,onLoad:r[3]||(r[3]=a=>_(!0))},null,8,["selection"])):E("application/pdf")?(Q(),Fe(Uv,{key:4,selection:e.selection,onLoad:r[4]||(r[4]=a=>_(!0))},null,8,["selection"])):(Q(),Fe(Cv,{key:5,selection:e.selection,onLoad:r[5]||(r[5]=a=>_(!0))},null,8,["selection"]))]),j("div",Gv,[u.value==!1?(Q(),se("div",Xv,[Wv,j("span",null,ae(ee(s)("Loading")),1)])):ke("",!0)])])]),j("div",Kv,[j("div",null,[j("span",$v,ae(ee(s)("File Size"))+": ",1),Ge(ae(ee(_l)(e.selection.item.file_size)),1)]),j("div",null,[j("span",Yv,ae(ee(s)("Last Modified"))+": ",1),Ge(" "+ae(ee(Sl)(e.selection.item.last_modified)),1)])])]),_:1}))}}),Qv={class:"sm:flex sm:items-start"},ey=j("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[j("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})])],-1),ty={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},iy={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},ry={class:"mt-2"},ny={class:"flex text-sm text-gray-800 dark:text-gray-400 py-2"},sy={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},oy=j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),ay=[oy],ly={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},uy=j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),cy=[uy],dy={class:"ml-1.5"},fy=["onKeyup"],hy={name:"VFModalRename"},my=Object.assign(hy,{props:{selection:Object,current:Object},setup(e){const t=e,i=ye("emitter");ye("storage");const n=ye("adapter"),{t:s}=ye("i18n"),u=ve(t.selection.items[0]),_=ve(t.selection.items[0].basename),E=ve(""),w=()=>{_.value!=""&&i.emit("vf-fetch",{params:{q:"rename",adapter:n.value,path:t.current.dirname,item:u.value.path,name:_.value},onSuccess:()=>{i.emit("vf-toast-push",{label:s("%s is renamed.",_.value)})},onError:l=>{E.value=s(l.message)}})};return(l,r)=>(Q(),Fe(jt,null,{buttons:Oe(()=>[j("button",{type:"button",onClick:w,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 dark:bg-gray-700 dark:hover:bg-gray-600/75 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},ae(ee(s)("Rename")),1),j("button",{type:"button",onClick:r[2]||(r[2]=a=>ee(i).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},ae(ee(s)("Cancel")),1)]),default:Oe(()=>[j("div",Qv,[ey,j("div",ty,[j("h3",iy,ae(ee(s)("Rename")),1),j("div",ry,[j("p",ny,[u.value.type=="dir"?(Q(),se("svg",sy,ay)):(Q(),se("svg",ly,cy)),j("span",dy,ae(u.value.basename),1)]),pt(j("input",{"onUpdate:modelValue":r[0]||(r[0]=a=>_.value=a),onKeyup:Yi(w,["enter"]),class:"px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:"Name",type:"text"},null,40,fy),[[$i,_.value]]),E.value.length?(Q(),Fe(Ut,{key:0,onHidden:r[1]||(r[1]=a=>E.value=""),error:""},{default:Oe(()=>[Ge(ae(E.value),1)]),_:1})):ke("",!0)])])])]),_:1}))}}),py={class:"sm:flex sm:items-start"},gy=j("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[j("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})])],-1),vy={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},yy={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},by={class:"mt-2"},xy={class:"text-gray-500 mb-1"},wy=["id"],_y={key:0,class:"py-2"},Sy=["disabled","onClick"],Ey={name:"VFModalUpload"},Ry=Object.assign(Ey,{props:{current:Object},setup(e){const t=e,i=ye("emitter"),{apiUrl:n}=Bt(),{t:s}=ye("i18n"),u=ye("maxFileSize"),_=ve(null),E=ve(null),w=ve(null),l=ve([]),r=ve(""),a=ve(!0),f=()=>{r.value="",_.value.start()},o=ye("postData");return vt(()=>{_.value=new tr.Uploader({runtimes:"html5",browse_button:w.value,container:E.value,max_file_size:u,multiple_queues:!0,file_data_name:"file",url:n.value+"?"+Ti(Object.assign(o,{q:"upload",adapter:t.current.adapter,path:t.current.dirname})),headers:{...on&&{"X-CSRF-Token":on}},init:{PostInit:function(){},FilesAdded:function(g,d){a.value=!1,tr.each(d,function(h){l.value.push({id:h.id,name:h.name,size:tr.formatSize(h.size),percent:""})})},UploadProgress:function(g,d){l.value[l.value.findIndex(h=>h.id==d.id)].percent=d.percent+"%"},UploadComplete:function(){a.value=!0,i.emit("vf-fetch",{params:{q:"index",adapter:t.current.adapter,path:t.current.dirname}})},Error:function(g,d){_.value.stop(),d.code==tr.HTTP_ERROR?r.value=s(JSON.parse(d.response).message):d.code==tr.FILE_SIZE_ERROR?r.value=s("The selected file exceeds the maximum file size. You cannot upload files greater than %s",[u]):r.value=s(d.message)}}}),_.value.init()}),(g,d)=>(Q(),Fe(jt,null,{buttons:Oe(()=>[j("button",{disabled:a.value,onClick:wi(f,["prevent"]),type:"button",class:Ye([a.value?"bg-blue-200 hover:bg-blue-200 dark:bg-gray-700/50 dark:hover:bg-gray-700/50 dark:text-gray-500":"bg-blue-600 hover:bg-blue-700 dark:bg-gray-700 dark:hover:bg-gray-500","w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"])},ae(ee(s)("Upload")),11,Sy),j("button",{type:"button",onClick:d[1]||(d[1]=h=>ee(i).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},ae(ee(s)("Cancel")),1)]),default:Oe(()=>[j("div",py,[gy,j("div",vy,[j("h3",yy,ae(ee(s)("Upload files")),1),j("div",by,[j("div",xy,[(Q(!0),se(Ce,null,St(l.value,h=>(Q(),se("div",null,[j("div",{id:h.id},[Ge(ae(h.name)+" ( "+ae(h.size)+") ",1),j("b",null,ae(h.percent),1)],8,wy)]))),256)),l.value.length?ke("",!0):(Q(),se("div",_y,ae(ee(s)("No files selected!")),1))]),j("div",{class:"text-gray-500",ref_key:"container",ref:E},[j("button",{ref_key:"pickFiles",ref:w,type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},ae(ee(s)("Select Files")),513)],512),r.value.length?(Q(),Fe(Ut,{key:0,onHidden:d[0]||(d[0]=h=>r.value=""),error:""},{default:Oe(()=>[Ge(ae(r.value),1)]),_:1})):ke("",!0)])])])]),_:1}))}}),Dy={class:"sm:flex sm:items-start"},Iy=j("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[j("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})])],-1),Ty={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Ay={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Cy={class:"mt-2"},ky={class:"flex text-sm text-gray-800 dark:text-gray-400"},Oy={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},My=j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),Ly=[My],Ny={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Fy=j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),Py=[Fy],Hy={class:"ml-1.5"},zy=["onKeyup","placeholder"],By={name:"VFModalArchive"},jy=Object.assign(By,{props:{selection:Object,current:Object},setup(e){const t=e,i=ye("emitter");ye("storage");const n=ye("adapter"),{t:s}=ye("i18n"),u=ve(""),_=ve(""),E=ve(t.selection.items),w=()=>{E.value.length&&i.emit("vf-fetch",{params:{q:"archive",adapter:n.value,path:t.current.dirname,items:JSON.stringify(E.value.map(({path:l,type:r})=>({path:l,type:r}))),name:u.value},onSuccess:()=>{i.emit("vf-toast-push",{label:s("The file(s) archived.")})},onError:l=>{_.value=s(l.message)}})};return(l,r)=>(Q(),Fe(jt,null,{buttons:Oe(()=>[j("button",{type:"button",onClick:w,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 dark:bg-gray-700 dark:hover:bg-gray-600/75 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},ae(ee(s)("Archive")),1),j("button",{type:"button",onClick:r[2]||(r[2]=a=>ee(i).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},ae(ee(s)("Cancel")),1)]),default:Oe(()=>[j("div",Dy,[Iy,j("div",Ty,[j("h3",Ay,ae(ee(s)("Archive the files")),1),j("div",Cy,[(Q(!0),se(Ce,null,St(E.value,a=>(Q(),se("p",ky,[a.type=="dir"?(Q(),se("svg",Oy,Ly)):(Q(),se("svg",Ny,Py)),j("span",Hy,ae(a.basename),1)]))),256)),pt(j("input",{"onUpdate:modelValue":r[0]||(r[0]=a=>u.value=a),onKeyup:Yi(w,["enter"]),class:"my-1 px-2 py-1 border rounded dark:bg-gray-700/25 dark:focus:ring-gray-600 dark:focus:border-gray-600 dark:text-gray-100 w-full",placeholder:ee(s)("Archive name. (.zip file will be created)"),type:"text"},null,40,zy),[[$i,u.value]]),_.value.length?(Q(),Fe(Ut,{key:0,onHidden:r[1]||(r[1]=a=>_.value=""),error:""},{default:Oe(()=>[Ge(ae(_.value),1)]),_:1})):ke("",!0)])])])]),_:1}))}}),Uy={class:"sm:flex sm:items-start"},Vy=j("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-50 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[j("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",fill:"none",viewBox:"0 0 24 24",stroke:"none","stroke-width":"1.5"},[j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5m6 4.125l2.25 2.25m0 0l2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z"})])],-1),qy={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},Gy={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},Xy={class:"mt-2"},Wy={class:"flex text-sm text-gray-800 dark:text-gray-400"},Ky={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},$y=j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),Yy=[$y],Zy={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Jy=j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),Qy=[Jy],eb={class:"ml-1.5"},tb={class:"my-1 text-sm text-gray-500"},ib={name:"VFModalUnarchive"},rb=Object.assign(ib,{props:{selection:Object,current:Object},setup(e){const t=e,i=ye("emitter");ye("storage");const n=ye("adapter"),{t:s}=ye("i18n");ve("");const u=ve(t.selection.items[0]),_=ve(""),E=ve([]),w=()=>{i.emit("vf-fetch",{params:{q:"unarchive",adapter:n.value,path:t.current.dirname,item:u.value.path},onSuccess:()=>{i.emit("vf-toast-push",{label:s("The file unarchived.")})},onError:l=>{_.value=s(l.message)}})};return(l,r)=>(Q(),Fe(jt,null,{buttons:Oe(()=>[j("button",{type:"button",onClick:w,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 dark:bg-gray-700 dark:hover:bg-gray-600/75 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},ae(ee(s)("Unarchive")),1),j("button",{type:"button",onClick:r[1]||(r[1]=a=>ee(i).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},ae(ee(s)("Cancel")),1)]),default:Oe(()=>[j("div",Uy,[Vy,j("div",qy,[j("h3",Gy,ae(ee(s)("Unarchive")),1),j("div",Xy,[(Q(!0),se(Ce,null,St(E.value,a=>(Q(),se("p",Wy,[a.type=="dir"?(Q(),se("svg",Ky,Yy)):(Q(),se("svg",Zy,Qy)),j("span",eb,ae(a.basename),1)]))),256)),j("p",tb,ae(ee(s)("The archive will be unarchived at"))+" ("+ae(e.current.dirname)+")",1),_.value.length?(Q(),Fe(Ut,{key:0,onHidden:r[0]||(r[0]=a=>_.value=""),error:""},{default:Oe(()=>[Ge(ae(_.value),1)]),_:1})):ke("",!0)])])])]),_:1}))}}),nb={class:"sm:flex sm:items-start"},sb=j("div",{class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-gray-500 sm:mx-0 sm:h-10 sm:w-10"},[j("svg",{class:"h-6 w-6 stroke-red-600 dark:stroke-red-200",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor","aria-hidden":"true"},[j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1),ob={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},ab={class:"text-lg leading-6 font-medium text-gray-900 dark:text-gray-400",id:"modal-title"},lb={class:"mt-2"},ub={class:"flex text-sm text-gray-800 dark:text-gray-400"},cb={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},db=j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),fb=[db],hb={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},mb=j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),pb=[mb],gb={class:"ml-1.5"},vb={class:"text-sm text-gray-500 pb-1 pt-3"},yb={class:"flex text-sm text-gray-800 dark:text-gray-400"},bb=j("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[j("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1),xb={class:"ml-1.5 overflow-auto"},wb={name:"VFModalMove"},_b=Object.assign(wb,{props:{selection:Object,current:Object},setup(e){const t=e,i=ye("emitter"),{t:n}=ye("i18n");ye("storage");const s=ye("adapter"),u=ve(t.selection.items.from),_=ve(""),E=()=>{u.value.length&&i.emit("vf-fetch",{params:{q:"move",adapter:s.value,path:t.current.dirname,items:JSON.stringify(u.value.map(({path:w,type:l})=>({path:w,type:l}))),item:t.selection.items.to.path},onSuccess:()=>{i.emit("vf-toast-push",{label:n("Files moved.",t.selection.items.to.name)})},onError:w=>{_.value=n(w.message)}})};return(w,l)=>(Q(),Fe(jt,null,{buttons:Oe(()=>[j("button",{type:"button",onClick:E,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 dark:bg-gray-700 dark:hover:bg-gray-600/75 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm"},ae(ee(n)("Yes, Move!")),1),j("button",{type:"button",onClick:l[1]||(l[1]=r=>ee(i).emit("vf-modal-close")),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},ae(ee(n)("Cancel")),1)]),default:Oe(()=>[j("div",nb,[sb,j("div",ob,[j("h3",ab,ae(ee(n)("Move files")),1),j("div",lb,[(Q(!0),se(Ce,null,St(u.value,r=>(Q(),se("p",ub,[r.type=="dir"?(Q(),se("svg",cb,fb)):(Q(),se("svg",hb,pb)),j("span",gb,ae(r.path),1)]))),256)),j("p",vb,ae(ee(n)("Are you sure you want to move these files?")),1),j("p",yb,[bb,j("span",xb,ae(e.selection.items.to.path),1)]),_.value.length?(Q(),Fe(Ut,{key:0,onHidden:l[0]||(l[0]=r=>_.value=""),error:""},{default:Oe(()=>[Ge(ae(_.value),1)]),_:1})):ke("",!0)])])])]),_:1}))}}),Sb=Object.freeze(Object.defineProperty({__proto__:null,ModalArchive:jy,ModalDelete:Qg,ModalMessage:a0,ModalMove:_b,ModalNewFile:R0,ModalNewFolder:g0,ModalPreview:Jv,ModalRename:my,ModalUnarchive:rb,ModalUpload:Ry},Symbol.toStringTag,{value:"Module"})),Vn={VueFinder:Ig,...Sb},Eb={install(e){for(const t in Vn)if(Vn.hasOwnProperty(t)){const i=Vn[t];e.component(i.name,i)}}},mu=cf(gf);mu.use(Eb);mu.mount("#app");
