/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /npm/vuefinder@2.7.1/dist/vuefinder.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var Fs,nr=Object.defineProperty,sr=(e,t,a)=>t in e?nr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,kn=(e,t,a)=>sr(e,"symbol"!=typeof t?t+"":t,a);import{reactive as kt,watch as De,ref as A,shallowRef as or,onMounted as xe,onUnmounted as Wn,onUpdated as Rs,nextTick as dt,computed as bt,inject as re,openBlock as v,createElementBlock as g,withKeys as xt,unref as o,createElementVNode as a,withModifiers as et,renderSlot as Dt,normalizeClass as ae,toDisplayString as b,createBlock as W,resolveDynamicComponent as Is,withCtx as Z,createVNode as P,Fragment as ge,renderList as ke,createCommentVNode as q,withDirectives as ue,vModelCheckbox as jt,createTextVNode as Q,vModelSelect as An,vModelText as St,onBeforeUnmount as Hs,customRef as rr,vShow as Pe,isRef as ar,TransitionGroup as lr,normalizeStyle as ln,mergeModels as ir,useModel as Bs,resolveComponent as cr,provide as dr,Transition as ur}from"vue";import _r from"mitt";import vr from"dragselect";import fr from"@uppy/core";import mr from"@uppy/xhr-upload";import hr from"vanilla-lazyload";import"cropperjs/dist/cropper.css";import pr from"cropperjs";const xn=null==(Fs=document.querySelector('meta[name="csrf-token"]'))?void 0:Fs.getAttribute("content");class gr{constructor(e){kn(this,"config"),kn(this,"customFetch",(async(...e)=>{let[t,a]=e;this.config.fetchRequestInterceptor&&(a=this.config.fetchRequestInterceptor(a));let n=await fetch(t,a);return this.config.fetchResponseInterceptor&&(n=await this.config.fetchResponseInterceptor(n)),n})),this.config=e}get config(){return this.config}transformRequestParams(e){const t=this.config,a={};null!=xn&&""!==xn&&(a[t.xsrfHeaderName]=xn);const n=Object.assign({},t.headers,a,e.headers),o=Object.assign({},t.params,e.params),l=e.body,r=t.baseUrl+e.url,s=e.method;let i;"get"!==s&&(l instanceof FormData?(i=l,null!=t.body&&Object.entries(this.config.body).forEach((([e,t])=>{i.append(e,t)}))):(i={...l},null!=t.body&&Object.assign(i,this.config.body)));const d={url:r,method:s,headers:n,params:o,body:i};if(null!=t.transformRequest){const e=t.transformRequest({url:r,method:s,headers:n,params:o,body:i});null!=e.url&&(d.url=e.url),null!=e.method&&(d.method=e.method),null!=e.params&&(d.params=e.params??{}),null!=e.headers&&(d.headers=e.headers??{}),null!=e.body&&(d.body=e.body)}return d}getDownloadUrl(e,t){if(null!=t.url)return t.url;const a=this.transformRequestParams({url:"",method:"get",params:{q:"download",adapter:e,path:t.path}});return a.url+"?"+new URLSearchParams(a.params).toString()}getPreviewUrl(e,t){if(null!=t.url)return t.url;const a=this.transformRequestParams({url:"",method:"get",params:{q:"preview",adapter:e,path:t.path}});return a.url+"?"+new URLSearchParams(a.params).toString()}async send(e){const t=this.transformRequestParams(e),a=e.responseType||"json",n={method:e.method,headers:t.headers,signal:e.abortSignal},o=t.url+"?"+new URLSearchParams(t.params);if("get"!==t.method&&null!=t.body){let a;t.body instanceof FormData?a=e.body:(a=JSON.stringify(t.body),n.headers["Content-Type"]="application/json"),n.body=a}this.config.fetchParams&&Object.assign(n,this.config.fetchParams);const l=await this.customFetch(o,n);if(l.ok)return await l[a]();throw await l.json()}}function br(e){const t={baseUrl:"",headers:{},params:{},body:{},xsrfHeaderName:"X-CSRF-Token",fetchParams:{}};return"string"==typeof e?Object.assign(t,{baseUrl:e}):Object.assign(t,e),new gr(t)}function wr(e){let t=localStorage.getItem(e+"_storage");const a=kt(JSON.parse(t??"{}"));function n(e){delete a[e]}return De(a,(function(){Object.keys(a).length?localStorage.setItem(e+"_storage",JSON.stringify(a)):localStorage.removeItem(e+"_storage")})),{getStore:(e,t=null)=>a.hasOwnProperty(e)?a[e]:t,setStore:function(e,t){a[e]=t},removeStore:n,clearStore:function(){Object.keys(a).map((e=>n(e)))}}}async function yr(e,t){const a=t[e];return"function"==typeof a?(await a()).default:a}function $r(e,t,a,n){const{getStore:o,setStore:l}=e,r=A({}),s=A(o("locale",t)),i=(e,o=t)=>{yr(e,n).then((t=>{r.value=t,l("locale",e),s.value=e,l("translations",t),Object.values(n).length>1&&(a.emit("vf-toast-push",{label:"The language is set to "+e}),a.emit("vf-language-saved"))})).catch((e=>{o?(a.emit("vf-toast-push",{label:"The selected locale is not yet supported!",type:"error"}),i(o,null)):a.emit("vf-toast-push",{label:"Locale cannot be loaded!",type:"error"})}))};De(s,(e=>{i(e)})),o("locale")||n.length?r.value=o("translations"):i(t);const d=(e,...t)=>t.length?d(e=e.replace("%s",t.shift()),...t):e;return kt({t:function(e,...t){return r.value&&r.value.hasOwnProperty(e)?d(r.value[e],...t):d(e,...t)},locale:s})}const de={EDIT:"edit",NEW_FILE:"newfile",NEW_FOLDER:"newfolder",PREVIEW:"preview",ARCHIVE:"archive",UNARCHIVE:"unarchive",SEARCH:"search",RENAME:"rename",UPLOAD:"upload",DELETE:"delete",FULL_SCREEN:"fullscreen",DOWNLOAD:"download",LANGUAGE:"language"},kr=Object.values(de),xr="2.7.1";function Ns(e,t,a,n,o){return(t=Math,a=t.log,o=a(e)/a(1024)|0,e/t.pow(1024,o)).toFixed(0)+" "+(o?"KMGTPEZY"[--o]+"iB":"B")}function Us(e,t,a,n,o){return(t=Math,a=t.log,o=a(e)/a(1e3)|0,e/t.pow(1e3,o)).toFixed(0)+" "+(o?"KMGTPEZY"[--o]+"B":"B")}function Sr(e){const t=/(\d+(?:\.\d+)?)\s?(k|m|g|t)?b?/i.exec(e);return t[1]*Math.pow(1024,{k:1,m:2,g:3,t:4}[t[2].toLowerCase()])}const ot={SYSTEM:"system",LIGHT:"light",DARK:"dark"};function Cr(e,t){const a=A(ot.SYSTEM),n=A(ot.LIGHT);a.value=e.getStore("theme",t??ot.SYSTEM);const o=window.matchMedia("(prefers-color-scheme: dark)"),l=e=>{a.value===ot.DARK||a.value===ot.SYSTEM&&e.matches?n.value=ot.DARK:n.value=ot.LIGHT};return l(o),o.addEventListener("change",l),{value:a,actualValue:n,set(t){a.value=t,t!==ot.SYSTEM?e.setStore("theme",t):e.removeStore("theme"),l(o)}}}function Er(){const e=or(null),t=A(!1),a=A();return{visible:t,type:e,data:a,open:(n,o=null)=>{document.querySelector("body").style.overflow="hidden",t.value=!0,e.value=n,a.value=o},close:()=>{document.querySelector("body").style.overflow="",t.value=!1,e.value=null}}}
/*!
 * OverlayScrollbars
 * Version: 2.10.0
 *
 * Copyright (c) Rene Haas | KingSora.
 * https://github.com/KingSora
 *
 * Released under the MIT license.
 */const Oe=(e,t)=>{const{o:a,i:n,u:o}=e;let l,r=a;const s=(e,t)=>{const a=r,s=e,i=t||(n?!n(a,s):a!==s);return(i||o)&&(r=s,l=a),[r,i,l]};return[t?e=>s(t(r,l),e):s,e=>[r,!!e,l]]},Tr=typeof window<"u"&&typeof HTMLElement<"u"&&!!window.document,Ve=Tr?window:{},qs=Math.max,Mr=Math.min,Dn=Math.round,Zt=Math.abs,ms=Math.sign,Ps=Ve.cancelAnimationFrame,Yn=Ve.requestAnimationFrame,en=Ve.setTimeout,Vn=Ve.clearTimeout,cn=e=>typeof Ve[e]<"u"?Ve[e]:void 0,Ar=cn("MutationObserver"),hs=cn("IntersectionObserver"),tn=cn("ResizeObserver"),Yt=cn("ScrollTimeline"),Xn=e=>void 0===e,dn=e=>null===e,je=e=>"number"==typeof e,Ft=e=>"string"==typeof e,Qn=e=>"boolean"==typeof e,He=e=>"function"==typeof e,Ge=e=>Array.isArray(e),nn=e=>"object"==typeof e&&!Ge(e)&&!dn(e),Jn=e=>{const t=!!e&&e.length,a=je(t)&&t>-1&&t%1==0;return!!(Ge(e)||!He(e)&&a)&&(!(t>0&&nn(e))||t-1 in e)},sn=e=>!!e&&e.constructor===Object,on=e=>e instanceof HTMLElement,un=e=>e instanceof Element;function le(e,t){if(Jn(e))for(let a=0;a<e.length&&!1!==t(e[a],a,e);a++);else e&&le(Object.keys(e),(a=>t(e[a],a,e)));return e}const zs=(e,t)=>e.indexOf(t)>=0,Vt=(e,t)=>e.concat(t),me=(e,t,a)=>(!Ft(t)&&Jn(t)?Array.prototype.push.apply(e,t):e.push(t),e),lt=e=>Array.from(e||[]),Zn=e=>Ge(e)?e:!Ft(e)&&Jn(e)?lt(e):[e],On=e=>!!e&&!e.length,Ln=e=>lt(new Set(e)),Re=(e,t,a)=>{le(e,(e=>!e||e.apply(void 0,t||[]))),!a&&(e.length=0)},js="paddingTop",Gs="paddingRight",Ks="paddingLeft",Ws="paddingBottom",Ys="marginLeft",Xs="marginRight",Qs="marginBottom",Js="overflowX",Zs="overflowY",_n="width",vn="height",rt="visible",ct="hidden",wt="scroll",Dr=e=>{const t=String(e||"");return t?t[0].toUpperCase()+t.slice(1):""},fn=(e,t,a,n)=>{if(e&&t){let n=!0;return le(a,(a=>{e[a]!==t[a]&&(n=!1)})),n}return!1},eo=(e,t)=>fn(e,t,["w","h"]),Xt=(e,t)=>fn(e,t,["x","y"]),Vr=(e,t)=>fn(e,t,["t","r","b","l"]),ut=()=>{},X=(e,...t)=>e.bind(0,...t),mt=e=>{let t;const a=e?en:Yn,n=e?Vn:Ps;return[o=>{n(t),t=a((()=>o()),He(e)?e():e)},()=>n(t)]},Fn=(e,t)=>{const{_:a,v:n,p:o,S:l}=t||{};let r,s,i,d,u=ut;const c=function(t){u(),Vn(r),d=r=s=void 0,u=ut,e.apply(this,t)},v=e=>l&&s?l(s,e):e,m=()=>{u!==ut&&c(v(i)||i)},f=function(){const e=lt(arguments),t=He(a)?a():a;if(je(t)&&t>=0){const a=He(n)?n():n,l=je(a)&&a>=0,f=t>0?en:Yn,_=t>0?Vn:Ps,p=v(e)||e,h=c.bind(0,p);let g;u(),o&&!d?(h(),d=!0,g=f((()=>d=void 0),t)):(g=f(h,t),l&&!r&&(r=en(m,a))),u=()=>_(g),s=i=p}else c(e)};return f.m=m,f},to=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Ne=e=>e?Object.keys(e):[],oe=(e,t,a,n,o,l,r)=>{const s=[t,a,n,o,l,r];return("object"!=typeof e||dn(e))&&!He(e)&&(e={}),le(s,(t=>{le(t,((a,n)=>{const o=t[n];if(e===o)return!0;const l=Ge(o);if(o&&sn(o)){const t=e[n];let a=t;l&&!Ge(t)?a=[]:!l&&!sn(t)&&(a={}),e[n]=oe(a,o)}else e[n]=l?o.slice():o}))})),e},no=(e,t)=>le(oe({},e),((e,t,a)=>{void 0===e?delete a[t]:e&&sn(e)&&(a[t]=no(e))})),es=e=>!Ne(e).length,so=(e,t,a)=>qs(e,Mr(t,a)),_t=e=>Ln((Ge(e)?e:(e||"").split(" ")).filter((e=>e))),ts=(e,t)=>e&&e.getAttribute(t),ps=(e,t)=>e&&e.hasAttribute(t),Je=(e,t,a)=>{le(_t(t),(t=>{e&&e.setAttribute(t,String(a||""))}))},qe=(e,t)=>{le(_t(t),(t=>e&&e.removeAttribute(t)))},mn=(e,t)=>{const a=_t(ts(e,t)),n=X(Je,e,t),o=(e,t)=>{const n=new Set(a);return le(_t(e),(e=>{n[t](e)})),lt(n).join(" ")};return{O:e=>n(o(e,"delete")),$:e=>n(o(e,"add")),C:e=>{const t=_t(e);return t.reduce(((e,t)=>e&&a.includes(t)),t.length>0)}}},oo=(e,t,a)=>(mn(e,t).O(a),X(ns,e,t,a)),ns=(e,t,a)=>(mn(e,t).$(a),X(oo,e,t,a)),rn=(e,t,a,n)=>(n?ns:oo)(e,t,a),ss=(e,t,a)=>mn(e,t).C(a),ro=e=>mn(e,"class"),ao=(e,t)=>{ro(e).O(t)},os=(e,t)=>(ro(e).$(t),X(ao,e,t)),lo=(e,t)=>{const a=t?un(t)&&t:document;return a?lt(a.querySelectorAll(e)):[]},Or=(e,t)=>{const a=t?un(t)&&t:document;return a&&a.querySelector(e)},Rn=(e,t)=>un(e)&&e.matches(t),io=e=>Rn(e,"body"),In=e=>e?lt(e.childNodes):[],Ot=e=>e&&e.parentElement,ht=(e,t)=>un(e)&&e.closest(t),Hn=e=>document.activeElement,Lr=(e,t,a)=>{const n=ht(e,t),o=e&&Or(a,n),l=ht(o,t)===n;return!(!n||!o)&&(n===e||o===e||l&&ht(ht(e,a),t)!==n)},yt=e=>{le(Zn(e),(e=>{const t=Ot(e);e&&t&&t.removeChild(e)}))},Le=(e,t)=>X(yt,e&&t&&le(Zn(t),(t=>{t&&e.appendChild(t)}))),pt=e=>{const t=document.createElement("div");return Je(t,"class",e),t},co=e=>{const t=pt();return t.innerHTML=e.trim(),le(In(t),(e=>yt(e)))},gs=(e,t)=>e.getPropertyValue(t)||e[t]||"",uo=e=>{const t=e||0;return isFinite(t)?t:0},Gt=e=>uo(parseFloat(e||"")),Bn=e=>Math.round(1e4*e)/1e4,_o=e=>`${Bn(uo(e))}px`;function Lt(e,t){e&&t&&le(t,((t,a)=>{try{const n=e.style,o=dn(t)||Qn(t)?"":je(t)?_o(t):t;0===a.indexOf("--")?n.setProperty(a,o):n[a]=o}catch{}}))}function tt(e,t,a){const n=Ft(t);let o=n?"":{};if(e){const l=Ve.getComputedStyle(e,a)||e.style;o=n?gs(l,t):lt(t).reduce(((e,t)=>(e[t]=gs(l,t),e)),o)}return o}const bs=(e,t,a)=>{const n=t?`${t}-`:"",o=a?`-${a}`:"",l=`${n}top${o}`,r=`${n}right${o}`,s=`${n}bottom${o}`,i=`${n}left${o}`,d=tt(e,[l,r,s,i]);return{t:Gt(d[l]),r:Gt(d[r]),b:Gt(d[s]),l:Gt(d[i])}},Fr=(e,t)=>"translate"+(nn(e)?`(${e.x},${e.y})`:`Y(${e})`),Rr=e=>!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length),Ir={w:0,h:0},hn=(e,t)=>t?{w:t[`${e}Width`],h:t[`${e}Height`]}:Ir,Hr=e=>hn("inner",e||Ve),gt=X(hn,"offset"),vo=X(hn,"client"),an=X(hn,"scroll"),rs=e=>{const t=parseFloat(tt(e,_n))||0,a=parseFloat(tt(e,vn))||0;return{w:t-Dn(t),h:a-Dn(a)}},Sn=e=>e.getBoundingClientRect(),Br=e=>!!e&&Rr(e),Nn=e=>!(!e||!e[vn]&&!e[_n]),fo=(e,t)=>{const a=Nn(e);return!Nn(t)&&a},ws=(e,t,a,n)=>{le(_t(t),(t=>{e&&e.removeEventListener(t,a,n)}))},_e=(e,t,a,n)=>{var o;const l=null==(o=n&&n.H)||o,r=n&&n.I||!1,s=n&&n.A||!1,i={passive:l,capture:r};return X(Re,_t(t).map((t=>{const n=s?o=>{ws(e,t,n,r),a&&a(o)}:a;return e&&e.addEventListener(t,n,i),X(ws,e,t,n,r)})))},mo=e=>e.stopPropagation(),Un=e=>e.preventDefault(),ho=e=>mo(e)||Un(e),ze=(e,t)=>{const{x:a,y:n}=je(t)?{x:t,y:t}:t||{};je(a)&&(e.scrollLeft=a),je(n)&&(e.scrollTop=n)},Fe=e=>({x:e.scrollLeft,y:e.scrollTop}),po=()=>({D:{x:0,y:0},M:{x:0,y:0}}),Nr=(e,t)=>{const{D:a,M:n}=e,{w:o,h:l}=t,r=(e,t,a)=>{let n=ms(e)*a,o=ms(t)*a;if(n===o){const a=Zt(e),l=Zt(t);o=a>l?0:o,n=a<l?0:n}return n=n===o?0:n,[n+0,o+0]},[s,i]=r(a.x,n.x,o),[d,u]=r(a.y,n.y,l);return{D:{x:s,y:d},M:{x:i,y:u}}},ys=({D:e,M:t})=>{const a=(e,t)=>0===e&&e<=t;return{x:a(e.x,t.x),y:a(e.y,t.y)}},$s=({D:e,M:t},a)=>{const n=(e,t,a)=>so(0,1,(e-a)/(e-t)||0);return{x:n(e.x,t.x,a.x),y:n(e.y,t.y,a.y)}},qn=e=>{e&&e.focus&&e.focus({preventScroll:!0})},ks=(e,t)=>{le(Zn(t),e)},Pn=e=>{const t=new Map,a=(e,a)=>{if(e){const n=t.get(e);ks((e=>{n&&n[e?"delete":"clear"](e)}),a)}else t.forEach((e=>{e.clear()})),t.clear()},n=(e,o)=>{if(Ft(e)){const n=t.get(e)||new Set;return t.set(e,n),ks((e=>{He(e)&&n.add(e)}),o),X(a,e,o)}Qn(o)&&o&&a();const l=Ne(e),r=[];return le(l,(t=>{const a=e[t];a&&me(r,n(t,a))})),X(Re,r)};return n(e||{}),[n,a,(e,a)=>{le(lt(t.get(e)),(e=>{a&&!On(a)?e.apply(0,a):e()}))}]},xs=e=>JSON.stringify(e,((e,t)=>{if(He(t))throw 0;return t})),Ss=(e,t)=>e?`${t}`.split(".").reduce(((e,t)=>e&&to(e,t)?e[t]:void 0),e):void 0,Ur={paddingAbsolute:!1,showNativeOverlaidScrollbars:!1,update:{elementEvents:[["img","load"]],debounce:[0,33],attributes:null,ignoreMutation:null},overflow:{x:"scroll",y:"scroll"},scrollbars:{theme:"os-theme-dark",visibility:"auto",autoHide:"never",autoHideDelay:1300,autoHideSuspend:!1,dragScroll:!0,clickScroll:!1,pointers:["mouse","touch","pen"]}},go=(e,t)=>{const a={};return le(Vt(Ne(t),Ne(e)),(n=>{const o=e[n],l=t[n];if(nn(o)&&nn(l))oe(a[n]={},go(o,l)),es(a[n])&&delete a[n];else if(to(t,n)&&l!==o){let e=!0;if(Ge(o)||Ge(l))try{xs(o)===xs(l)&&(e=!1)}catch{}e&&(a[n]=l)}})),a},Cs=(e,t,a)=>n=>[Ss(e,n),a||void 0!==Ss(t,n)],Ct="data-overlayscrollbars",Qt="os-environment",Kt=`${Qt}-scrollbar-hidden`,Cn=`${Ct}-initialize`,Jt="noClipping",Es=`${Ct}-body`,at=Ct,qr="host",Ze=`${Ct}-viewport`,Pr=Js,zr=Zs,jr="arrange",bo="measuring",Gr="scrolling",wo="scrollbarHidden",Kr="noContent",zn=`${Ct}-padding`,Ts=`${Ct}-content`,as="os-size-observer",Wr=`${as}-appear`,Yr=`${as}-listener`,Xr="os-trinsic-observer",Qr="os-theme-none",Ie="os-scrollbar",Jr=`${Ie}-rtl`,Zr=`${Ie}-horizontal`,ea=`${Ie}-vertical`,yo=`${Ie}-track`,ls=`${Ie}-handle`,ta=`${Ie}-visible`,na=`${Ie}-cornerless`,Ms=`${Ie}-interaction`,As=`${Ie}-unusable`,jn=`${Ie}-auto-hide`,Ds=`${jn}-hidden`,Vs=`${Ie}-wheel`,sa=`${yo}-interactive`,oa=`${ls}-interactive`;let $o;const ra=()=>$o,aa=e=>{$o=e};let En;const la=()=>{const e=(e,t,a)=>{Le(document.body,e),Le(document.body,e);const n=vo(e),o=gt(e),l=rs(t);return a&&yt(e),{x:o.h-n.h+l.h,y:o.w-n.w+l.w}},t=co(`<div class="${Qt}"><div></div><style>${`.${Qt}{scroll-behavior:auto!important;position:fixed;opacity:0;visibility:hidden;overflow:scroll;height:200px;width:200px;z-index:-1}.${Qt} div{width:200%;height:200%;margin:10px 0}.${Kt}{scrollbar-width:none!important}.${Kt}::-webkit-scrollbar,.${Kt}::-webkit-scrollbar-corner{appearance:none!important;display:none!important;width:0!important;height:0!important}`}</style></div>`)[0],a=t.firstChild,n=t.lastChild,o=ra();o&&(n.nonce=o);const[l,,r]=Pn(),[s,i]=Oe({o:e(t,a),i:Xt},X(e,t,a,!0)),[d]=i(),u=(e=>{let t=!1;const a=os(e,Kt);try{t="none"===tt(e,"scrollbar-width")||"none"===tt(e,"display","::-webkit-scrollbar")}catch{}return a(),t})(t),c={x:0===d.x,y:0===d.y},v={elements:{host:null,padding:!u,viewport:e=>u&&io(e)&&e,content:!1},scrollbars:{slot:!0},cancel:{nativeScrollbarsOverlaid:!1,body:null}},m=oe({},Ur),f=X(oe,{},m),_=X(oe,{},v),p={T:d,k:c,R:u,V:!!Yt,L:X(l,"r"),U:_,P:e=>oe(v,e)&&_(),N:f,q:e=>oe(m,e)&&f(),B:oe({},v),F:oe({},m)};if(qe(t,"style"),yt(t),_e(Ve,"resize",(()=>{r("r",[])})),He(Ve.matchMedia)&&!u&&(!c.x||!c.y)){const e=t=>{const a=Ve.matchMedia(`(resolution: ${Ve.devicePixelRatio}dppx)`);_e(a,"change",(()=>{t(),e(t)}),{A:!0})};e((()=>{const[e,t]=s();oe(p.T,e),r("r",[t])}))}return p},We=()=>(En||(En=la()),En),ko=(e,t)=>He(t)?t.apply(0,e):t,ia=(e,t,a,n)=>{const o=Xn(n)?a:n;return ko(e,o)||t.apply(0,e)},xo=(e,t,a,n)=>{const o=Xn(n)?a:n,l=ko(e,o);return!!l&&(on(l)?l:t.apply(0,e))},ca=(e,t)=>{const{nativeScrollbarsOverlaid:a,body:n}=t||{},{k:o,R:l,U:r}=We(),{nativeScrollbarsOverlaid:s,body:i}=r().cancel,d=a??s,u=Xn(n)?i:n,c=(o.x||o.y)&&d,v=e&&(dn(u)?!l:u);return!!c||!!v},is=new WeakMap,da=(e,t)=>{is.set(e,t)},ua=e=>{is.delete(e)},So=e=>is.get(e),_a=(e,t,a)=>{let n=!1;const o=!!a&&new WeakMap,l=l=>{if(o&&a){le(a.map((t=>{const[a,n]=t||[];return[n&&a?(l||lo)(a,e):[],n]})),(a=>le(a[0],(l=>{const r=a[1],s=o.get(l)||[];if(e.contains(l)&&r){const e=_e(l,r,(a=>{n?(e(),o.delete(l)):t(a)}));o.set(l,me(s,e))}else Re(s),o.delete(l)}))))}};return l(),[()=>{n=!0},l]},Os=(e,t,a,n)=>{let o=!1;const{j:l,X:r,Y:s,W:i,J:d,G:u}=n||{},c=Fn((()=>o&&a(!0)),{_:33,v:99}),[v,m]=_a(e,c,s),f=r||[],_=Vt(l||[],f),p=(o,l)=>{if(!On(l)){const r=d||ut,s=u||ut,c=[],v=[];let _=!1,p=!1;if(le(l,(a=>{const{attributeName:o,target:l,type:d,oldValue:u,addedNodes:m,removedNodes:h}=a,g="attributes"===d,b="childList"===d,w=e===l,y=g&&o,k=y&&ts(l,o||""),x=Ft(k)?k:null,S=y&&u!==x,C=zs(f,o)&&S;if(t&&(b||!w)){const t=g&&S,d=t&&i&&Rn(l,i),v=(d?!r(l,o,u,x):!g||t)&&!s(a,!!d,e,n);le(m,(e=>me(c,e))),le(h,(e=>me(c,e))),p=p||v}!t&&w&&S&&!r(l,o,u,x)&&(me(v,o),_=_||C)})),m((e=>Ln(c).reduce(((t,a)=>(me(t,lo(e,a)),Rn(a,e)?me(t,a):t)),[]))),t)return!o&&p&&a(!1),[!1];if(!On(v)||_){const e=[Ln(v),_];return!o&&a.apply(0,e),e}}},h=new Ar(X(p,!1));return[()=>(h.observe(e,{attributes:!0,attributeOldValue:!0,attributeFilter:_,subtree:t,childList:t,characterData:t}),o=!0,()=>{o&&(v(),h.disconnect(),o=!1)}),()=>{if(o)return c.m(),p(!0,h.takeRecords())}]},Co={},Eo={},va=e=>{le(e,(e=>le(e,((t,a)=>{Co[a]=e[a]}))))},To=(e,t,a)=>Ne(e).map((n=>{const{static:o,instance:l}=e[n],[r,s,i]=a||[],d=a?l:o;if(d){const e=a?d(r,s,t):d(t);return(i||Eo)[n]=e}})),Rt=e=>Eo[e],fa="__osOptionsValidationPlugin",ma="__osSizeObserverPlugin",ha=(e,t)=>{const{k:a}=t,[n,o]=e("showNativeOverlaidScrollbars");return[n&&a.x&&a.y,o]},$t=e=>0===e.indexOf(rt),pa=(e,t)=>{const a=(e,t,a,n)=>{const o=e===rt?ct:e.replace(`${rt}-`,""),l=$t(e),r=$t(a);return t||n?l&&r?rt:l?t&&n?o:t?rt:ct:t?o:r&&n?rt:ct:ct},n={x:a(t.x,e.x,t.y,e.y),y:a(t.y,e.y,t.x,e.x)};return{K:n,Z:{x:n.x===wt,y:n.y===wt}}},Mo="__osScrollbarsHidingPlugin",ga="__osClickScrollPlugin",Ao=(e,t,a)=>{const{dt:n}=a||{},o=Rt(ma),[l]=Oe({o:!1,u:!0});return()=>{const a=[],r=co(`<div class="${as}"><div class="${Yr}"></div></div>`)[0],s=r.firstChild,i=e=>{let a=!1,n=!1;if(e instanceof ResizeObserverEntry){const[t,,o]=l(e.contentRect),r=Nn(t);n=fo(t,o),a=!n&&!r}else n=!0===e;a||t({ft:!0,dt:n})};if(tn){const e=new tn((e=>i(e.pop())));e.observe(s),me(a,(()=>{e.disconnect()}))}else{if(!o)return ut;{const[e,t]=o(s,i,n);me(a,Vt([os(r,Wr),_e(r,"animationstart",e)],t))}}return X(Re,me(a,Le(e,r)))}},ba=(e,t)=>{let a;const n=pt(Xr),[o]=Oe({o:!1}),l=(e,a)=>{if(e){const n=o((e=>0===e.h||e.isIntersecting||e.intersectionRatio>0)(e)),[,l]=n;return l&&!a&&t(n)&&[n]}},r=(e,t)=>l(t.pop(),e);return[()=>{const t=[];if(hs)a=new hs(X(r,!1),{root:e}),a.observe(n),me(t,(()=>{a.disconnect()}));else{const e=()=>{const e=gt(n);l(e)};me(t,Ao(n,e)()),e()}return X(Re,me(t,Le(e,n)))},()=>a&&r(!0,a.takeRecords())]},wa=(e,t,a,n)=>{let o,l,r,s,i,d;const u=`[${at}]`,c=`[${Ze}]`,v=["id","class","style","open","wrap","cols","rows"],{vt:m,ht:f,ot:_,gt:p,bt:h,nt:g,wt:b,yt:w,St:y,Ot:k}=e,x=e=>"rtl"===tt(e,"direction"),S={$t:!1,ct:x(m)},C=We(),A=Rt(Mo),[E]=Oe({i:eo,o:{w:0,h:0}},(()=>{const n=A&&A.tt(e,t,S,C,a).ut,o=!(b&&g)&&ss(f,at,Jt),l=!g&&w(jr),r=l&&Fe(p),s=r&&k(),i=y(bo,o),d=l&&n&&n()[0],u=an(_),c=rs(_);return d&&d(),ze(p,r),s&&s(),o&&i(),{w:u.w+c.w,h:u.h+c.h}})),M=Fn(n,{_:()=>o,v:()=>l,S(e,t){const[a]=e,[n]=t;return[Vt(Ne(a),Ne(n)).reduce(((e,t)=>(e[t]=a[t]||n[t],e)),{})]}}),D=e=>{const t=x(m);oe(e,{Ct:d!==t}),oe(S,{ct:t}),d=t},T=(e,t)=>{const[a,o]=e,l={xt:o};return oe(S,{$t:a}),!t&&n(l),l},q=({ft:e,dt:t})=>{const a=e&&!t||!C.R?n:M,o={ft:e||t,dt:t};D(o),a(o)},L=(e,t)=>{const[,a]=E(),o={Ht:a};return D(o),a&&!t&&(e?n:M)(o),o},V=(e,t,a)=>{const n={Et:t};return D(n),t&&!a&&M(n),n},[P,R]=h?ba(f,T):[],O=!g&&Ao(f,q,{dt:!0}),[B,F]=Os(f,!1,V,{X:v,j:v}),H=g&&tn&&new tn((e=>{const t=e[e.length-1].contentRect;q({ft:!0,dt:fo(t,i)}),i=t})),N=Fn((()=>{const[,e]=E();n({Ht:e})}),{_:222,p:!0});return[()=>{H&&H.observe(f);const e=O&&O(),t=P&&P(),a=B(),n=C.L((e=>{e?M({zt:e}):N()}));return()=>{H&&H.disconnect(),e&&e(),t&&t(),s&&s(),a(),n()}},({It:e,At:t,Dt:a})=>{const n={},[i]=e("update.ignoreMutation"),[d,m]=e("update.attributes"),[f,p]=e("update.elementEvents"),[b,w]=e("update.debounce"),y=t||a;if(p||m){r&&r(),s&&s();const[e,t]=Os(h||_,!0,L,{j:Vt(v,d||[]),Y:f,W:u,G:(e,t)=>{const{target:a,attributeName:n}=e;return!(t||!n||g)&&Lr(a,u,c)||!!ht(a,`.${Ie}`)||!!(e=>He(i)&&i(e))(e)}});s=e(),r=t}if(w)if(M.m(),Ge(b)){const e=b[0],t=b[1];o=je(e)&&e,l=je(t)&&t}else je(b)?(o=b,l=!1):(o=!1,l=!1);if(y){const e=F(),t=R&&R(),a=r&&r();e&&oe(n,V(e[0],e[1],y)),t&&oe(n,T(t[0],y)),a&&oe(n,L(a[0],y))}return D(n),n},S]},ya=(e,t,a,n)=>{const o="--os-viewport-percent",l="--os-scroll-percent",r="--os-scroll-direction",{U:s}=We(),{scrollbars:i}=s(),{slot:d}=i,{vt:u,ht:c,ot:v,Mt:m,gt:f,wt:_,nt:p}=t,{scrollbars:h}=m?{}:e,{slot:g}=h||{},b=[],w=[],y=[],k=xo([u,c,v],(()=>p&&_?u:c),d,g),x=e=>{if(Yt){const t=new Yt({source:f,axis:e});return{kt:e=>{const a=e.Tt.animate({clear:["left"],[l]:[0,1]},{timeline:t});return()=>a.cancel()}}}},S={x:x("x"),y:x("y")},C=(e,t,a)=>{const n=a?os:ao;le(e,(e=>{n(e.Tt,t)}))},A=(e,t)=>{le(e,(e=>{const[a,n]=t(e);Lt(a,n)}))},E=(e,t,a)=>{const n=Qn(a),o=!n||!a;(!n||a)&&C(w,e,t),o&&C(y,e,t)},M=e=>{const t=e?"x":"y",a=pt(`${Ie} ${e?Zr:ea}`),o=pt(yo),l=pt(ls),r={Tt:a,Ut:o,Pt:l},s=S[t];return me(e?w:y,r),me(b,[Le(a,o),Le(o,l),X(yt,a),s&&s.kt(r),n(r,E,e)]),r},D=X(M,!0),T=X(M,!1);return D(),T(),[{Nt:()=>{const e=(()=>{const{Rt:e,Vt:t}=a,n=(e,t)=>so(0,1,e/(e+t)||0);return{x:n(t.x,e.x),y:n(t.y,e.y)}})(),t=e=>t=>[t.Tt,{[o]:Bn(e)+""}];A(w,t(e.x)),A(y,t(e.y))},qt:()=>{if(!Yt){const{Lt:e}=a,t=$s(e,Fe(f)),n=e=>t=>[t.Tt,{[l]:Bn(e)+""}];A(w,n(t.x)),A(y,n(t.y))}},Bt:()=>{const{Lt:e}=a,t=ys(e),n=e=>t=>[t.Tt,{[r]:e?"0":"1"}];A(w,n(t.x)),A(y,n(t.y))},Ft:()=>{if(p&&!_){const{Rt:e,Lt:t}=a,n=ys(t),o=$s(t,Fe(f)),l=t=>{const{Tt:a}=t,l=Ot(a)===v&&a,r=(e,t,a)=>{const n=t*e;return _o(a?n:-n)};return[l,l&&{transform:Fr({x:r(o.x,e.x,n.x),y:r(o.y,e.y,n.y)})}]};A(w,l),A(y,l)}},jt:E,Xt:{Yt:w,Wt:D,Jt:X(A,w)},Gt:{Yt:y,Wt:T,Jt:X(A,y)}},()=>(Le(k,w[0].Tt),Le(k,y[0].Tt),X(Re,b))]},$a=(e,t,a,n)=>(o,l,r)=>{const{ht:s,ot:i,nt:d,gt:u,Kt:c,Ot:v}=t,{Tt:m,Ut:f,Pt:_}=o,[p,h]=mt(333),[g,b]=mt(444),w=e=>{He(u.scrollBy)&&u.scrollBy({behavior:"smooth",left:e.x,top:e.y})};let y=!0;return X(Re,[_e(_,"pointermove pointerleave",n),_e(m,"pointerenter",(()=>{l(Ms,!0)})),_e(m,"pointerleave pointercancel",(()=>{l(Ms,!1)})),!d&&_e(m,"mousedown",(()=>{const e=Hn();(ps(e,Ze)||ps(e,at)||e===document.body)&&en(X(qn,i),25)})),_e(m,"wheel",(e=>{const{deltaX:t,deltaY:a,deltaMode:n}=e;y&&0===n&&Ot(m)===s&&w({x:t,y:a}),y=!1,l(Vs,!0),p((()=>{y=!0,l(Vs)})),Un(e)}),{H:!1,I:!0}),_e(m,"pointerdown",X(_e,c,"click",ho,{A:!0,I:!0,H:!1}),{I:!0}),(()=>{const t="pointerup pointercancel lostpointercapture",n="client"+(r?"X":"Y"),o=r?_n:vn,l=r?"left":"top",s=r?"w":"h",i=r?"x":"y",d=[];return _e(f,"pointerdown",(r=>{const m=ht(r.target,`.${ls}`)===_,p=m?_:f,h=e.scrollbars,y=h[m?"dragScroll":"clickScroll"],{button:k,isPrimary:x,pointerType:S}=r,{pointers:C}=h;if(0===k&&x&&y&&(C||[]).includes(S)){Re(d),b();const e=!m&&(r.shiftKey||"instant"===y),h=X(Sn,_),k=X(Sn,f),x=(e,t)=>(e||h())[l]-(t||k())[l],S=Dn(Sn(u)[o])/gt(u)[s]||1,C=((e,t)=>n=>{const{Rt:o}=a,l=gt(f)[s]-gt(_)[s],r=t*n/l*o[i];ze(u,{[i]:e+r})})(Fe(u)[i],1/S),A=r[n],E=h(),M=k(),D=E[o],T=x(E,M)+D/2,q=A-M[l],L=m?0:q-T,V=e=>{Re(O),p.releasePointerCapture(e.pointerId)},P=m||e,R=v(),O=[_e(c,t,V),_e(c,"selectstart",(e=>Un(e)),{H:!1}),_e(f,t,V),P&&_e(f,"pointermove",(e=>C(L+(e[n]-A)))),P&&(()=>{const e=Fe(u);R();const t=Fe(u),a={x:t.x-e.x,y:t.y-e.y};(Zt(a.x)>3||Zt(a.y)>3)&&(v(),ze(u,e),w(a),g(R))})];if(p.setPointerCapture(r.pointerId),e)C(L);else if(!m){const e=Rt(ga);if(e){const t=e(C,L,D,(e=>{e?R():me(O,R)}));me(O,t),me(d,X(t,!0))}}}}))})(),h,b])},ka=(e,t,a,n,o,l)=>{let r,s,i,d,u,c=ut,v=0;const m=e=>"mouse"===e.pointerType,[f,_]=mt(),[p,h]=mt(100),[g,b]=mt(100),[w,y]=mt((()=>v)),[k,x]=ya(e,o,n,$a(t,o,n,(e=>m(e)&&V()))),{ht:S,Qt:C,wt:A}=o,{jt:E,Nt:M,qt:D,Bt:T,Ft:q}=k,L=(e,t)=>{if(y(),e)E(Ds);else{const e=X(E,Ds,!0);v>0&&!t?w(e):e()}},V=()=>{(i?!r:!d)&&(L(!0),p((()=>{L(!1)})))},P=e=>{E(jn,e,!0),E(jn,e,!1)},R=e=>{m(e)&&(r=i,i&&L(!0))},O=[y,h,b,_,()=>c(),_e(S,"pointerover",R,{A:!0}),_e(S,"pointerenter",R),_e(S,"pointerleave",(e=>{m(e)&&(r=!1,i&&L(!1))})),_e(S,"pointermove",(e=>{m(e)&&s&&V()})),_e(C,"scroll",(e=>{f((()=>{D(),V()})),l(e),q()}))];return[()=>X(Re,me(O,x())),({It:e,Dt:t,Zt:o,tn:l})=>{const{nn:r,sn:m,en:f,cn:_}=l||{},{Ct:p,dt:h}=o||{},{ct:b}=a,{k:w}=We(),{K:y,rn:k}=n,[x,S]=e("showNativeOverlaidScrollbars"),[V,R]=e("scrollbars.theme"),[O,B]=e("scrollbars.visibility"),[F,H]=e("scrollbars.autoHide"),[N,I]=e("scrollbars.autoHideSuspend"),[W]=e("scrollbars.autoHideDelay"),[U,z]=e("scrollbars.dragScroll"),[j,$]=e("scrollbars.clickScroll"),[Q,Z]=e("overflow"),K=h&&!t,Y=k.x||k.y,G=r||m||_||p||t,J=f||B||Z,ee=x&&w.x&&w.y,te=(e,t,a)=>{const n=e.includes(wt)&&(O===rt||"auto"===O&&t===wt);return E(ta,n,a),n};if(v=W,K&&(N&&Y?(P(!1),c(),g((()=>{c=_e(C,"scroll",X(P,!0),{A:!0})}))):P(!0)),S&&E(Qr,ee),R&&(E(u),E(V,!0),u=V),I&&!N&&P(!0),H&&(s="move"===F,i="leave"===F,d="never"===F,L(d,!0)),z&&E(oa,U),$&&E(sa,!!j),J){const e=te(Q.x,y.x,!0),t=te(Q.y,y.y,!1);E(na,!(e&&t))}G&&(D(),M(),q(),_&&T(),E(As,!k.x,!0),E(As,!k.y,!1),E(Jr,b&&!A))},{},k]},xa=e=>{const t=We(),{U:a,R:n}=t,{elements:o}=a(),{padding:l,viewport:r,content:s}=o,i=on(e),d=i?{}:e,{elements:u}=d,{padding:c,viewport:v,content:m}=u||{},f=i?e:d.target,_=io(f),p=f.ownerDocument,h=p.documentElement,g=()=>p.defaultView||Ve,b=X(ia,[f]),w=X(xo,[f]),y=X(pt,""),k=X(b,y,r),x=X(w,y,s),S=k(v),C=S===f,A=C&&_,E=!C&&x(m),M=!C&&S===E,D=A?h:S,T=A?D:f,q=!C&&w(y,l,c),L=!M&&E,V=[L,D,q,T].map((e=>on(e)&&!Ot(e)&&e)),P=e=>e&&zs(V,e),R=!P(D)&&(e=>{const t=gt(e),a=an(e),n=tt(e,Js),o=tt(e,Zs);return a.w-t.w>0&&!$t(n)||a.h-t.h>0&&!$t(o)})(D)?D:f,O=A?h:D,B={vt:f,ht:T,ot:D,ln:q,bt:L,gt:O,Qt:A?p:D,an:_?h:R,Kt:p,wt:_,Mt:i,nt:C,un:g,yt:e=>ss(D,Ze,e),St:(e,t)=>rn(D,Ze,e,t),Ot:()=>rn(O,Ze,Gr,!0)},{vt:F,ht:H,ln:N,ot:I,bt:W}=B,U=[()=>{qe(H,[at,Cn]),qe(F,Cn),_&&qe(h,[Cn,at])}];let z=In([W,I,N,H,F].find((e=>e&&!P(e))));const j=A?F:W||I,$=X(Re,U);return[B,()=>{const e=g(),t=Hn(),a=e=>{Le(Ot(e),In(e)),yt(e)},o=e=>_e(e,"focusin focusout focus blur",ho,{I:!0,H:!1}),l="tabindex",r=ts(I,l),s=o(t);return Je(H,at,C?"":qr),Je(N,zn,""),Je(I,Ze,""),Je(W,Ts,""),C||(Je(I,l,r||"-1"),_&&Je(h,Es,"")),Le(j,z),Le(H,N),Le(N||H,!C&&I),Le(I,W),me(U,[s,()=>{const e=Hn(),t=P(I),n=t&&e===I?F:e,s=o(n);qe(N,zn),qe(W,Ts),qe(I,Ze),_&&qe(h,Es),r?Je(I,l,r):qe(I,l),P(W)&&a(W),t&&a(I),P(N)&&a(N),qn(n),s()}]),n&&!C&&(ns(I,Ze,wo),me(U,X(qe,I,Ze))),qn(!C&&_&&t===F&&e.top===e?I:t),s(),z=0,$},$]},Sa=({bt:e})=>({Zt:t,_n:a,Dt:n})=>{const{xt:o}=t||{},{$t:l}=a;e&&(o||n)&&Lt(e,{[vn]:l&&"100%"})},Ca=({ht:e,ln:t,ot:a,nt:n},o)=>{const[l,r]=Oe({i:Vr,o:bs()},X(bs,e,"padding",""));return({It:e,Zt:s,_n:i,Dt:d})=>{let[u,c]=r(d);const{R:v}=We(),{ft:m,Ht:f,Ct:_}=s||{},{ct:p}=i,[h,g]=e("paddingAbsolute");(m||c||d||f)&&([u,c]=l(d));const b=!n&&(g||_||c);if(b){const e=!h||!t&&!v,n=u.r+u.l,l=u.t+u.b,r={[Xs]:e&&!p?-n:0,[Qs]:e?-l:0,[Ys]:e&&p?-n:0,top:e?-u.t:0,right:e?p?-u.r:"auto":0,left:e?p?"auto":-u.l:0,[_n]:e&&`calc(100% + ${n}px)`},s={[js]:e?u.t:0,[Gs]:e?u.r:0,[Ws]:e?u.b:0,[Ks]:e?u.l:0};Lt(t||a,r),Lt(a,s),oe(o,{ln:u,dn:!e,rt:t?s:oe({},r,s)})}return{fn:b}}},Ea=(e,t)=>{const a=We(),{ht:n,ln:o,ot:l,nt:r,Qt:s,gt:i,wt:d,St:u,un:c}=e,{R:v}=a,m=d&&r,f=X(qs,0),_={display:()=>!1,direction:e=>"ltr"!==e,flexDirection:e=>e.endsWith("-reverse"),writingMode:e=>"horizontal-tb"!==e},p=Ne(_),h={i:eo,o:{w:0,h:0}},g={i:Xt,o:{}},b=e=>{u(bo,!m&&e)},[w,y]=Oe(h,X(rs,l)),[k,x]=Oe(h,X(an,l)),[S,C]=Oe(h),[A]=Oe(g),[E,M]=Oe(h),[D]=Oe(g),[T]=Oe({i:(e,t)=>fn(e,t,p),o:{}},(()=>Br(l)?tt(l,p):{})),[q,L]=Oe({i:(e,t)=>Xt(e.D,t.D)&&Xt(e.M,t.M),o:po()}),V=Rt(Mo),P=(e,t)=>`${t?Pr:zr}${Dr(e)}`;return({It:r,Zt:d,_n:h,Dt:g},{fn:R})=>{const{ft:O,Ht:B,Ct:F,dt:H,zt:N}=d||{},I=V&&V.tt(e,t,h,a,r),{it:W,ut:U,_t:z}=I||{},[j,X]=ha(r,a),[$,Q]=r("overflow"),Z=$t($.x),K=$t($.y);let Y=y(g),G=x(g),J=C(g),ee=M(g);X&&v&&u(wo,!j);{ss(n,at,Jt)&&b(!0);const[e]=U?U():[],[t]=Y=w(g),[a]=G=k(g),o=vo(l),r=m&&Hr(c()),s={w:f(a.w+t.w),h:f(a.h+t.h)},i={w:f((r?r.w:o.w+f(o.w-a.w))+t.w),h:f((r?r.h:o.h+f(o.h-a.h))+t.h)};e&&e(),ee=E(i),J=S(((e,t)=>{const a=Ve.devicePixelRatio%1!=0?1:0,n={w:f(e.w-t.w),h:f(e.h-t.h)};return{w:n.w>a?n.w:0,h:n.h>a?n.h:0}})(s,i),g)}const[te,ae]=ee,[ne,le]=J,[re,se]=G,[ie,de]=Y,[ue,ce]=A({x:ne.w>0,y:ne.h>0}),ve=Z&&K&&(ue.x||ue.y)||Z&&ue.x&&!ue.y||K&&ue.y&&!ue.x,me=R||F||N||de||se||ae||le||Q||X||!0,fe=pa(ue,$),[pe,he]=D(fe.K),[ge,be]=T(g),we=F||H||be||ce||g,[ye,ke]=we?q((e=>{if(!p.some((t=>{const a=e[t];return a&&_[t](a)})))return{D:{x:0,y:0},M:{x:1,y:1}};b(!0);const t=Fe(i),a=u(Kr,!0),n=_e(s,wt,(e=>{const a=Fe(i);e.isTrusted&&a.x===t.x&&a.y===t.y&&mo(e)}),{I:!0,A:!0});ze(i,{x:0,y:0}),a();const o=Fe(i),l=an(i);ze(i,{x:l.w,y:l.h});const r=Fe(i);ze(i,{x:r.x-o.x<1&&-l.w,y:r.y-o.y<1&&-l.h});const d=Fe(i);return ze(i,t),Yn((()=>n())),{D:o,M:d}})(ge),g):L();return me&&(he&&(e=>{const t=e=>[rt,ct,wt].map((t=>P(t,e))),a=t(!0).concat(t()).join(" ");u(a),u(Ne(e).map((t=>P(e[t],"x"===t))).join(" "),!0)})(fe.K),z&&W&&Lt(l,z(fe,h,W(fe,re,ie)))),b(!1),rn(n,at,Jt,ve),rn(o,zn,Jt,ve),oe(t,{K:pe,Vt:{x:te.w,y:te.h},Rt:{x:ne.w,y:ne.h},rn:ue,Lt:Nr(ye,ne)}),{en:he,nn:ae,sn:le,cn:ke||le,vn:we}}},Ta=e=>{const[t,a,n]=xa(e),o={ln:{t:0,r:0,b:0,l:0},dn:!1,rt:{[Xs]:0,[Qs]:0,[Ys]:0,[js]:0,[Gs]:0,[Ws]:0,[Ks]:0},Vt:{x:0,y:0},Rt:{x:0,y:0},K:{x:ct,y:ct},rn:{x:!1,y:!1},Lt:po()},{vt:l,gt:r,nt:s,Ot:i}=t,{R:d,k:u}=We(),c=!d&&(u.x||u.y),v=[Sa(t),Ca(t,o),Ea(t,o)];return[a,e=>{const t={},a=c&&Fe(r),n=a&&i();return le(v,(a=>{oe(t,a(e,t)||{})})),ze(r,a),n&&n(),!s&&ze(l,0),t},o,t,n]},Ma=(e,t,a,n,o)=>{let l=!1;const r=Cs(t,{}),[s,i,d,u,c]=Ta(e),[v,m,f]=wa(u,d,r,(e=>{b({},e)})),[_,p,,h]=ka(e,t,f,d,u,o),g=e=>Ne(e).some((t=>!!e[t])),b=(e,o)=>{if(a())return!1;const{pn:r,Dt:s,At:d,hn:u}=e,c=r||{},v=!!s||!l,_={It:Cs(t,c,v),pn:c,Dt:v};if(u)return p(_),!1;const h=o||m(oe({},_,{At:d})),b=i(oe({},_,{_n:f,Zt:h}));p(oe({},_,{Zt:h,tn:b}));const w=g(h),y=g(b),k=w||y||!es(c)||v;return l=!0,k&&n(e,{Zt:h,tn:b}),k};return[()=>{const{an:e,gt:t,Ot:a}=u,n=Fe(e),o=[v(),s(),_()],l=a();return ze(t,n),l(),X(Re,o)},b,()=>({gn:f,bn:d}),{wn:u,yn:h},c]},Ke=(e,t,a)=>{const{N:n}=We(),o=on(e),l=o?e:e.target,r=So(l);if(t&&!r){let r=!1;const s=[],i={},d=e=>{const t=no(e),a=Rt(fa);return a?a(t,!0):t},u=oe({},n(),d(t)),[c,v,m]=Pn(),[f,_,p]=Pn(a),h=(e,t)=>{p(e,t),m(e,t)},[g,b,w,y,k]=Ma(e,u,(()=>r),(({pn:e,Dt:t},{Zt:a,tn:n})=>{const{ft:o,Ct:l,xt:r,Ht:s,Et:i,dt:d}=a,{nn:u,sn:c,en:v,cn:m}=n;h("updated",[S,{updateHints:{sizeChanged:!!o,directionChanged:!!l,heightIntrinsicChanged:!!r,overflowEdgeChanged:!!u,overflowAmountChanged:!!c,overflowStyleChanged:!!v,scrollCoordinatesChanged:!!m,contentMutation:!!s,hostMutation:!!i,appear:!!d},changedOptions:e||{},force:!!t}])}),(e=>h("scroll",[S,e]))),x=e=>{ua(l),Re(s),r=!0,h("destroyed",[S,e]),v(),_()},S={options(e,t){if(e){const a=t?n():{},o=go(u,oe(a,d(e)));es(o)||(oe(u,o),b({pn:o}))}return oe({},u)},on:f,off:(e,t)=>{e&&t&&_(e,t)},state(){const{gn:e,bn:t}=w(),{ct:a}=e,{Vt:n,Rt:o,K:l,rn:s,ln:i,dn:d,Lt:u}=t;return oe({},{overflowEdge:n,overflowAmount:o,overflowStyle:l,hasOverflow:s,scrollCoordinates:{start:u.D,end:u.M},padding:i,paddingAbsolute:d,directionRTL:a,destroyed:r})},elements(){const{vt:e,ht:t,ln:a,ot:n,bt:o,gt:l,Qt:r}=y.wn,{Xt:s,Gt:i}=y.yn,d=e=>{const{Pt:t,Ut:a,Tt:n}=e;return{scrollbar:n,track:a,handle:t}},u=e=>{const{Yt:t,Wt:a}=e,n=d(t[0]);return oe({},n,{clone:()=>{const e=d(a());return b({hn:!0}),e}})};return oe({},{target:e,host:t,padding:a||n,viewport:n,content:o||n,scrollOffsetElement:l,scrollEventElement:r,scrollbarHorizontal:u(s),scrollbarVertical:u(i)})},update:e=>b({Dt:e,At:!0}),destroy:X(x,!1),plugin:e=>i[Ne(e)[0]]};return me(s,[k]),da(l,S),To(Co,Ke,[S,c,i]),ca(y.wn.wt,!o&&e.cancel)?(x(!0),S):(me(s,g()),h("initialized",[S]),S.update(),S)}return r};function Aa(){let e;const t=A(null),a=Math.floor(Math.random()*2**32),n=A(!1),o=A([]),l=()=>o.value,r=()=>e.clearSelection(!0),s=A(),i=A(null),d=A(null),u=A(null),c=A(null);const v=()=>{o.value=e.getSelection().map((e=>JSON.parse(e.dataset.item))),s.value(o.value)},m=()=>{i.value&&(t.value.getBoundingClientRect().height<t.value.scrollHeight?(d.value.style.height=t.value.scrollHeight+"px",d.value.style.display="block"):(d.value.style.height="100%",d.value.style.display="none"))},f=e=>{if(!i.value)return;const{scrollOffsetElement:a}=i.value.elements();a.scrollTo({top:t.value.scrollTop,left:0})};return xe((()=>{Ke(u.value,{scrollbars:{theme:"vf-theme-dark dark:vf-theme-light"},plugins:{OverlayScrollbars:Ke}},{initialized:e=>{i.value=e},scroll:(e,a)=>{const{scrollOffsetElement:n}=e.elements();t.value.scrollTo({top:n.scrollTop,left:0})}}),e=new vr({area:t.value,keyboardDrag:!1,selectedClass:"vf-explorer-selected",selectorClass:"vf-explorer-selector"}),e.subscribe("DS:start:pre",(({items:a,event:o,isDragging:l})=>{if(l)e.Interaction._reset(o);else{n.value=!1;const a=t.value.offsetWidth-o.offsetX,l=t.value.offsetHeight-o.offsetY;a<15&&l<15&&e.Interaction._reset(o),o.target.classList.contains("os-scrollbar-handle")&&e.Interaction._reset(o)}})),document.addEventListener("dragleave",(e=>{!e.buttons&&n.value&&(n.value=!1)})),m(),c.value=new ResizeObserver(m),c.value.observe(t.value),t.value.addEventListener("scroll",f),e.subscribe("DS:scroll",(({isDragging:e})=>e||f()))})),Wn((()=>{e&&e.stop(),c.value&&c.value.disconnect()})),Rs((()=>{e&&e.Area.reset()})),{area:t,explorerId:a,isDraggingRef:n,scrollBar:d,scrollBarContainer:u,getSelected:l,getSelection:()=>e.getSelection(),selectAll:()=>dt((()=>{e.addSelection(e.getSelectables()),v()})),clearSelection:r,refreshSelection:()=>dt((()=>{const t=l().map((e=>e.path));r(),e.setSettings({selectables:document.getElementsByClassName("vf-item-"+a)}),e.addSelection(e.getSelectables().filter((e=>t.includes(JSON.parse(e.dataset.item).path)))),v(),m()})),getCount:()=>o.value.length,onSelect:t=>{s.value=t,e.subscribe("DS:end",(({items:e,event:a,isDragging:n})=>{o.value=e.map((e=>JSON.parse(e.dataset.item))),t(e.map((e=>JSON.parse(e.dataset.item))))}))}}}function Da(e,t){const a=A(e),n=A(t),o=A([]),l=A([]),r=A([]),s=A(!1),i=A(5);let d=!1;const u=kt({adapter:a,storages:[],dirname:n,files:[]});function c(){let e=[],t=[],s=n.value??a.value+"://";0===s.length&&(o.value=[]),s.replace(a.value+"://","").split("/").forEach((function(n){e.push(n),""!==e.join("/")&&t.push({basename:n,name:n,path:a.value+"://"+e.join("/"),type:"dir"})})),l.value=t;const[d,u]=function(e,t){return e.length>t?[e.slice(-t),e.slice(0,-t)]:[e,[]]}(t,i.value);r.value=u,o.value=d}const v=bt((()=>{var e;return(null==(e=o.value[o.value.length-2])?void 0:e.path)??a.value+"://"}));return xe((()=>{})),De(n,c),xe(c),{adapter:a,path:n,loading:!1,searchMode:d,data:u,breadcrumbs:o,breadcrumbItems:l,limitBreadcrumbItems:function(e){i.value=e,c()},hiddenBreadcrumbs:r,showHiddenBreadcrumbs:s,toggleHiddenBreadcrumbs:function(e=null){s.value=e??!s.value},isGoUpAvailable:function(){return o.value&&o.value.length&&!0},parentFolderPath:v}}Ke.plugin=e=>{const t=Ge(e),a=t?e:[e],n=a.map((e=>To(e,Ke)[0]));return va(a),t?n:n[0]},Ke.valid=e=>{const t=e&&e.elements,a=He(t)&&t();return sn(a)&&!!So(a.target)},Ke.env=()=>{const{T:e,k:t,R:a,V:n,B:o,F:l,U:r,P:s,N:i,q:d}=We();return oe({},{scrollbarsSize:e,scrollbarsOverlaid:t,scrollbarsHiding:a,scrollTimeline:n,staticDefaultInitialization:o,staticDefaultOptions:l,getDefaultInitialization:r,setDefaultInitialization:s,getDefaultOptions:i,setDefaultOptions:d})},Ke.nonce=aa;const Va=(e,t)=>{const a=wr(e.id),n=_r(),o=a.getStore("metricUnits",!1),l=Cr(a,e.theme),r=t.i18n,s=e.locale??t.locale,i=a.getStore("persist-path",e.persist),d=i?a.getStore("path",e.path):e.path,u=i?a.getStore("adapter"):null,c=Aa();return kt({version:xr,root:null,debug:e.debug,emitter:n,storage:a,i18n:$r(a,s,n,r),modal:Er(),dragSelect:bt((()=>c)),requester:br(e.request),features:(v=e.features,Array.isArray(v)?v:kr),view:a.getStore("viewport","grid"),fullScreen:a.getStore("full-screen",e.fullScreen),showTreeView:a.getStore("show-tree-view",e.showTreeView),pinnedFolders:a.getStore("pinned-folders",e.pinnedFolders),treeViewData:[],selectButton:e.selectButton,maxFileSize:e.maxFileSize,theme:l,metricUnits:o,filesize:o?Us:Ns,compactListView:a.getStore("compact-list-view",!0),persist:i,showThumbnails:a.getStore("show-thumbnails",e.showThumbnails),loadingIndicator:e.loadingIndicator,contextMenuItems:e.contextMenuItems,fs:Da(u,d)});var v},Oa=a("div",{class:"vuefinder__modal-layout__overlay"},null,-1),La={class:"vuefinder__modal-layout__container"},Fa={class:"vuefinder__modal-layout__content"},Ra={class:"vuefinder__modal-layout__footer"},Ye={__name:"ModalLayout",setup(e){const t=A(null),n=re("ServiceContainer");return xe((()=>{const e=document.querySelector(".v-f-modal input");e&&e.focus(),dt((()=>{if(document.querySelector(".v-f-modal input")&&window.innerWidth<768){const e=t.value.getBoundingClientRect().bottom+16;window.scrollTo({top:e,left:0,behavior:"smooth"})}}))})),(e,l)=>(v(),g("div",{class:"vuefinder__modal-layout","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onKeyup:l[1]||(l[1]=xt((e=>o(n).modal.close()),["esc"])),tabindex:"0"},[Oa,a("div",La,[a("div",{class:"vuefinder__modal-layout__wrapper",onMousedown:l[0]||(l[0]=et((e=>o(n).modal.close()),["self"]))},[a("div",{ref_key:"modalBody",ref:t,class:"vuefinder__modal-layout__body"},[a("div",Fa,[Dt(e.$slots,"default")]),a("div",Ra,[Dt(e.$slots,"buttons")])],512)],32)])],32))}},Ia=(e,t)=>{const a=e.__vccOpts||e;for(const[e,n]of t)a[e]=n;return a},Ha={props:{on:{type:String,required:!0}},setup(e,{emit:t,slots:a}){const n=re("ServiceContainer"),o=A(!1),{t:l}=n.i18n;let r=null;const s=()=>{clearTimeout(r),o.value=!0,r=setTimeout((()=>{o.value=!1}),2e3)};return xe((()=>{n.emitter.on(e.on,s)})),Wn((()=>{clearTimeout(r)})),{shown:o,t:l}}},Ba={key:1};function Na(e,t,a,n,o,l){return v(),g("div",{class:ae(["vuefinder__action-message",{"vuefinder__action-message--hidden":!n.shown}])},[e.$slots.default?Dt(e.$slots,"default",{key:0}):(v(),g("span",Ba,b(n.t("Saved.")),1))],2)}const ft=Ia(Ha,[["render",Na]]),Ua={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",viewBox:"0 0 24 24"},qa=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87q.11.06.22.127c.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a8 8 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a7 7 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a7 7 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a7 7 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124q.108-.066.22-.128c.332-.183.582-.495.644-.869z"},null,-1),Pa=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0"},null,-1),za=[qa,Pa];function ja(e,t){return v(),g("svg",Ua,[...za])}const Ga={render:ja},Ka={class:"vuefinder__modal-header"},Wa={class:"vuefinder__modal-header__icon-container"},Ya={class:"vuefinder__modal-header__title",id:"modal-title"},nt={__name:"ModalHeader",props:{title:{type:String,required:!0},icon:{type:Object,required:!0}},setup:e=>(t,n)=>(v(),g("div",Ka,[a("div",Wa,[(v(),W(Is(e.icon),{class:"vuefinder__modal-header__icon"}))]),a("h3",Ya,b(e.title),1)]))},Xa={class:"vuefinder__about-modal__content"},Qa={class:"vuefinder__about-modal__main"},Ja={class:"vuefinder__about-modal__tabs","aria-label":"Tabs"},Za=["onClick","aria-current"],el={key:0,class:"vuefinder__about-modal__tab-content"},tl={class:"vuefinder__about-modal__description"},nl={href:"https://vuefinder.ozdemir.be",class:"vuefinder__about-modal__link",target:"_blank"},sl={href:"https://github.com/n1crack/vuefinder",class:"vuefinder__about-modal__link",target:"_blank"},ol={key:1,class:"vuefinder__about-modal__tab-content"},rl={class:"vuefinder__about-modal__description"},al={class:"vuefinder__about-modal__settings"},ll={class:"vuefinder__about-modal__setting flex"},il={class:"vuefinder__about-modal__setting-input"},cl={class:"vuefinder__about-modal__setting-label"},dl={for:"metric_unit",class:"vuefinder__about-modal__label"},ul={class:"vuefinder__about-modal__setting flex"},_l={class:"vuefinder__about-modal__setting-input"},vl={class:"vuefinder__about-modal__setting-label"},fl={for:"large_icons",class:"vuefinder__about-modal__label"},ml={class:"vuefinder__about-modal__setting flex"},hl={class:"vuefinder__about-modal__setting-input"},pl={class:"vuefinder__about-modal__setting-label"},gl={for:"persist_path",class:"vuefinder__about-modal__label"},bl={class:"vuefinder__about-modal__setting flex"},wl={class:"vuefinder__about-modal__setting-input"},yl={class:"vuefinder__about-modal__setting-label"},$l={for:"show_thumbnails",class:"vuefinder__about-modal__label"},kl={class:"vuefinder__about-modal__setting"},xl={class:"vuefinder__about-modal__setting-input"},Sl={for:"theme",class:"vuefinder__about-modal__label"},Cl={class:"vuefinder__about-modal__setting-label"},El=["label"],Tl=["value"],Ml={key:0,class:"vuefinder__about-modal__setting"},Al={class:"vuefinder__about-modal__setting-input"},Dl={for:"language",class:"vuefinder__about-modal__label"},Vl={class:"vuefinder__about-modal__setting-label"},Ol=["label"],Ll=["value"],Fl={key:2,class:"vuefinder__about-modal__tab-content"},Rl={class:"vuefinder__about-modal__shortcuts"},Il={class:"vuefinder__about-modal__shortcut"},Hl=a("kbd",null,"F2",-1),Bl={class:"vuefinder__about-modal__shortcut"},Nl=a("kbd",null,"F5",-1),Ul={class:"vuefinder__about-modal__shortcut"},ql=a("kbd",null,"Del",-1),Pl={class:"vuefinder__about-modal__shortcut"},zl=a("div",null,[a("kbd",null,"Esc")],-1),jl={class:"vuefinder__about-modal__shortcut"},Gl=a("div",null,[a("kbd",null,"Ctrl"),Q(" + "),a("kbd",null,"A")],-1),Kl={class:"vuefinder__about-modal__shortcut"},Wl=a("div",null,[a("kbd",null,"Ctrl"),Q(" + "),a("kbd",null,"F")],-1),Yl={class:"vuefinder__about-modal__shortcut"},Xl=a("div",null,[a("kbd",null,"Ctrl"),Q(" + "),a("kbd",null,"E")],-1),Ql={class:"vuefinder__about-modal__shortcut"},Jl=a("div",null,[a("kbd",null,"Ctrl"),Q(" + "),a("kbd",null,",")],-1),Zl={class:"vuefinder__about-modal__shortcut"},ei=a("div",null,[a("kbd",null,"Ctrl"),Q(" + "),a("kbd",null,"Enter")],-1),ti={key:3,class:"vuefinder__about-modal__tab-content"},ni={class:"vuefinder__about-modal__description"},Do={__name:"ModalAbout",setup(e){const t=re("ServiceContainer"),{setStore:n,clearStore:l}=t.storage,{t:r}=t.i18n,s="about",i="settings",d="shortcuts",u="reset",c=bt((()=>[{name:r("About"),key:s},{name:r("Settings"),key:i},{name:r("Shortcuts"),key:d},{name:r("Reset"),key:u}])),m=A("about"),f=async()=>{l(),location.reload()},_=()=>{t.metricUnits=!t.metricUnits,t.filesize=t.metricUnits?Us:Ns,n("metricUnits",t.metricUnits),t.emitter.emit("vf-metric-units-saved")},p=()=>{t.compactListView=!t.compactListView,n("compactListView",t.compactListView),t.emitter.emit("vf-compact-view-saved")},h=()=>{t.showThumbnails=!t.showThumbnails,n("show-thumbnails",t.showThumbnails),t.emitter.emit("vf-show-thumbnails-saved")},w=()=>{t.persist=!t.persist,n("persist-path",t.persist),t.emitter.emit("vf-persist-path-saved")},{i18n:y}=re("VueFinderOptions"),k=Object.fromEntries(Object.entries({ar:"Arabic (العربيّة)",en:"English",fr:"French (Français)",de:"German (Deutsch)",fa:"Persian (فارسی)",he:"Hebrew (עִברִית)",hi:"Hindi (हिंदी)",pl:"Polish (Polski)",ru:"Russian (Pусский)",sv:"Swedish (Svenska)",tr:"Turkish (Türkçe)",nl:"Dutch (Nederlands)",zhCN:"Simplified Chinese (简体中文)",zhTW:"Traditional Chinese (繁體中文)"}).filter((([e])=>Object.keys(y).includes(e)))),x=bt((()=>({system:r("System"),light:r("Light"),dark:r("Dark")})));return(e,n)=>(v(),W(Ye,null,{buttons:Z((()=>[a("button",{type:"button",onClick:n[7]||(n[7]=e=>o(t).modal.close()),class:"vf-btn vf-btn-secondary"},b(o(r)("Close")),1)])),default:Z((()=>[a("div",Xa,[P(nt,{icon:o(Ga),title:"Vuefinder "+o(t).version},null,8,["icon","title"]),a("div",Qa,[a("div",null,[a("div",null,[a("nav",Ja,[(v(!0),g(ge,null,ke(c.value,(e=>(v(),g("button",{key:e.name,onClick:t=>m.value=e.key,class:ae([e.key===m.value?"vuefinder__about-modal__tab--active":"vuefinder__about-modal__tab--inactive","vuefinder__about-modal__tab"]),"aria-current":e.current?"page":void 0},b(e.name),11,Za)))),128))])])]),m.value===s?(v(),g("div",el,[a("div",tl,b(o(r)("Vuefinder is a simple, lightweight, and fast file manager library for Vue.js applications")),1),a("a",nl,b(o(r)("Project home")),1),a("a",sl,b(o(r)("Follow on GitHub")),1)])):q("",!0),m.value===i?(v(),g("div",ol,[a("div",rl,b(o(r)("Customize your experience with the following settings")),1),a("div",al,[a("fieldset",null,[a("div",ll,[a("div",il,[ue(a("input",{id:"metric_unit",name:"metric_unit",type:"checkbox","onUpdate:modelValue":n[0]||(n[0]=e=>o(t).metricUnits=e),onClick:_,class:"vuefinder__about-modal__checkbox"},null,512),[[jt,o(t).metricUnits]])]),a("div",cl,[a("label",dl,[Q(b(o(r)("Use Metric Units"))+" ",1),P(ft,{class:"ms-3",on:"vf-metric-units-saved"},{default:Z((()=>[Q(b(o(r)("Saved.")),1)])),_:1})])])]),a("div",ul,[a("div",_l,[ue(a("input",{id:"large_icons",name:"large_icons",type:"checkbox","onUpdate:modelValue":n[1]||(n[1]=e=>o(t).compactListView=e),onClick:p,class:"vuefinder__about-modal__checkbox"},null,512),[[jt,o(t).compactListView]])]),a("div",vl,[a("label",fl,[Q(b(o(r)("Compact list view"))+" ",1),P(ft,{class:"ms-3",on:"vf-compact-view-saved"},{default:Z((()=>[Q(b(o(r)("Saved.")),1)])),_:1})])])]),a("div",ml,[a("div",hl,[ue(a("input",{id:"persist_path",name:"persist_path",type:"checkbox","onUpdate:modelValue":n[2]||(n[2]=e=>o(t).persist=e),onClick:w,class:"vuefinder__about-modal__checkbox"},null,512),[[jt,o(t).persist]])]),a("div",pl,[a("label",gl,[Q(b(o(r)("Persist path on reload"))+" ",1),P(ft,{class:"ms-3",on:"vf-persist-path-saved"},{default:Z((()=>[Q(b(o(r)("Saved.")),1)])),_:1})])])]),a("div",bl,[a("div",wl,[ue(a("input",{id:"show_thumbnails",name:"show_thumbnails",type:"checkbox","onUpdate:modelValue":n[3]||(n[3]=e=>o(t).showThumbnails=e),onClick:h,class:"vuefinder__about-modal__checkbox"},null,512),[[jt,o(t).showThumbnails]])]),a("div",yl,[a("label",$l,[Q(b(o(r)("Show thumbnails"))+" ",1),P(ft,{class:"ms-3",on:"vf-show-thumbnails-saved"},{default:Z((()=>[Q(b(o(r)("Saved.")),1)])),_:1})])])]),a("div",kl,[a("div",xl,[a("label",Sl,b(o(r)("Theme")),1)]),a("div",Cl,[ue(a("select",{id:"theme","onUpdate:modelValue":n[4]||(n[4]=e=>o(t).theme.value=e),onChange:n[5]||(n[5]=e=>(e=>{t.theme.set(e),t.emitter.emit("vf-theme-saved")})(e.target.value)),class:"vuefinder__about-modal__select"},[a("optgroup",{label:o(r)("Theme")},[(v(!0),g(ge,null,ke(x.value,((e,t)=>(v(),g("option",{value:t},b(e),9,Tl)))),256))],8,El)],544),[[An,o(t).theme.value]]),P(ft,{class:"ms-3",on:"vf-theme-saved"},{default:Z((()=>[Q(b(o(r)("Saved.")),1)])),_:1})])]),o(t).features.includes(o(de).LANGUAGE)&&Object.keys(o(k)).length>1?(v(),g("div",Ml,[a("div",Al,[a("label",Dl,b(o(r)("Language")),1)]),a("div",Vl,[ue(a("select",{id:"language","onUpdate:modelValue":n[6]||(n[6]=e=>o(t).i18n.locale=e),class:"vuefinder__about-modal__select"},[a("optgroup",{label:o(r)("Language")},[(v(!0),g(ge,null,ke(o(k),((e,t)=>(v(),g("option",{value:t},b(e),9,Ll)))),256))],8,Ol)],512),[[An,o(t).i18n.locale]]),P(ft,{class:"ms-3",on:"vf-language-saved"},{default:Z((()=>[Q(b(o(r)("Saved.")),1)])),_:1})])])):q("",!0)])])])):q("",!0),m.value===d?(v(),g("div",Fl,[a("div",Rl,[a("div",Il,[a("div",null,b(o(r)("Rename")),1),Hl]),a("div",Bl,[a("div",null,b(o(r)("Refresh")),1),Nl]),a("div",Ul,[Q(b(o(r)("Delete"))+" ",1),ql]),a("div",Pl,[Q(b(o(r)("Escape"))+" ",1),zl]),a("div",jl,[Q(b(o(r)("Select All"))+" ",1),Gl]),a("div",Kl,[Q(b(o(r)("Search"))+" ",1),Wl]),a("div",Yl,[Q(b(o(r)("Toggle Sidebar"))+" ",1),Xl]),a("div",Ql,[Q(b(o(r)("Open Settings"))+" ",1),Jl]),a("div",Zl,[Q(b(o(r)("Toggle Full Screen"))+" ",1),ei])])])):q("",!0),m.value===u?(v(),g("div",ti,[a("div",ni,b(o(r)("Reset all settings to default")),1),a("button",{onClick:f,type:"button",class:"vf-btn vf-btn-secondary"},b(o(r)("Reset Settings")),1)])):q("",!0)])])])),_:1}))}},si=["title"],oi=a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"vuefinder__message__icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),ri=[oi],Xe={__name:"Message",props:{error:{type:Boolean,default:!1}},emits:["hidden"],setup(e,{emit:t}){var n;const l=t,r=re("ServiceContainer"),{t:s}=r.i18n,i=A(!1),d=A(null),u=A(null==(n=d.value)?void 0:n.strMessage);De(u,(()=>i.value=!1));const c=()=>{l("hidden"),i.value=!0};return(t,n)=>(v(),g("div",null,[i.value?q("",!0):(v(),g("div",{key:0,ref_key:"strMessage",ref:d,class:ae(["vuefinder__message",e.error?"vuefinder__message--error":"vuefinder__message--success"])},[Dt(t.$slots,"default"),a("div",{class:"vuefinder__message__close",onClick:c,title:o(s)("Close")},ri,8,si)],2))]))}},ai={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"},li=a("path",{d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21q.512.078 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48 48 0 0 0-3.478-.397m-12 .562q.51-.089 1.022-.165m0 0a48 48 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a52 52 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a49 49 0 0 0-7.5 0"},null,-1),ii=[li];function ci(e,t){return v(),g("svg",ai,[...ii])}const Vo={render:ci},di={class:"vuefinder__delete-modal__content"},ui={class:"vuefinder__delete-modal__form"},_i={class:"vuefinder__delete-modal__description"},vi={class:"vuefinder__delete-modal__files vf-scrollbar"},fi={class:"vuefinder__delete-modal__file"},mi={key:0,class:"vuefinder__delete-modal__icon vuefinder__delete-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},hi=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),pi=[hi],gi={key:1,class:"vuefinder__delete-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},bi=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),wi=[bi],yi={class:"vuefinder__delete-modal__file-name"},$i={class:"vuefinder__delete-modal__warning"},cs={__name:"ModalDelete",setup(e){const t=re("ServiceContainer"),{t:n}=t.i18n,l=A(t.modal.data.items),r=A(""),s=()=>{l.value.length&&t.emitter.emit("vf-fetch",{params:{q:"delete",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{items:l.value.map((({path:e,type:t})=>({path:e,type:t})))},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("Files deleted.")})},onError:e=>{r.value=n(e.message)}})};return(e,i)=>(v(),W(Ye,null,{buttons:Z((()=>[a("button",{type:"button",onClick:s,class:"vf-btn vf-btn-danger"},b(o(n)("Yes, Delete!")),1),a("button",{type:"button",onClick:i[1]||(i[1]=e=>o(t).modal.close()),class:"vf-btn vf-btn-secondary"},b(o(n)("Cancel")),1),a("div",$i,b(o(n)("This action cannot be undone.")),1)])),default:Z((()=>[a("div",null,[P(nt,{icon:o(Vo),title:o(n)("Delete files")},null,8,["icon","title"]),a("div",di,[a("div",ui,[a("p",_i,b(o(n)("Are you sure you want to delete these files?")),1),a("div",vi,[(v(!0),g(ge,null,ke(l.value,(e=>(v(),g("p",fi,["dir"===e.type?(v(),g("svg",mi,pi)):(v(),g("svg",gi,wi)),a("span",yi,b(e.basename),1)])))),256))]),r.value.length?(v(),W(Xe,{key:0,onHidden:i[0]||(i[0]=e=>r.value=""),error:""},{default:Z((()=>[Q(b(r.value),1)])),_:1})):q("",!0)])])])])),_:1}))}},ki={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"},xi=a("path",{d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"},null,-1),Si=[xi];function Ci(e,t){return v(),g("svg",ki,[...Si])}const Oo={render:Ci},Ei={class:"vuefinder__rename-modal__content"},Ti={class:"vuefinder__rename-modal__item"},Mi={class:"vuefinder__rename-modal__item-info"},Ai={key:0,class:"vuefinder__rename-modal__icon vuefinder__rename-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Di=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),Vi=[Di],Oi={key:1,class:"vuefinder__rename-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Li=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),Fi=[Li],Ri={class:"vuefinder__rename-modal__item-name"},ds={__name:"ModalRename",setup(e){const t=re("ServiceContainer"),{t:n}=t.i18n,l=A(t.modal.data.items[0]),r=A(t.modal.data.items[0].basename),s=A(""),i=()=>{""!=r.value&&t.emitter.emit("vf-fetch",{params:{q:"rename",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{item:l.value.path,name:r.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("%s is renamed.",r.value)})},onError:e=>{s.value=n(e.message)}})};return(e,d)=>(v(),W(Ye,null,{buttons:Z((()=>[a("button",{type:"button",onClick:i,class:"vf-btn vf-btn-primary"},b(o(n)("Rename")),1),a("button",{type:"button",onClick:d[2]||(d[2]=e=>o(t).modal.close()),class:"vf-btn vf-btn-secondary"},b(o(n)("Cancel")),1)])),default:Z((()=>[a("div",null,[P(nt,{icon:o(Oo),title:o(n)("Rename")},null,8,["icon","title"]),a("div",Ei,[a("div",Ti,[a("p",Mi,["dir"===l.value.type?(v(),g("svg",Ai,Vi)):(v(),g("svg",Oi,Fi)),a("span",Ri,b(l.value.basename),1)]),ue(a("input",{"onUpdate:modelValue":d[0]||(d[0]=e=>r.value=e),onKeyup:xt(i,["enter"]),class:"vuefinder__rename-modal__input",placeholder:"Name",type:"text"},null,544),[[St,r.value]]),s.value.length?(v(),W(Xe,{key:0,onHidden:d[1]||(d[1]=e=>s.value=""),error:""},{default:Z((()=>[Q(b(s.value),1)])),_:1})):q("",!0)])])])])),_:1}))}},Qe={ESCAPE:"Escape",F2:"F2",F5:"F5",DELETE:"Delete",ENTER:"Enter",BACKSLASH:"Backslash",KEY_A:"KeyA",KEY_E:"KeyE",KEY_F:"KeyF"};function Ii(e){const t=t=>{t.code===Qe.ESCAPE&&(e.modal.close(),e.root.focus()),!e.modal.visible&&(e.fs.searchMode||(t.code===Qe.F2&&e.features.includes(de.RENAME)&&(1!==e.dragSelect.getCount()||e.modal.open(ds,{items:e.dragSelect.getSelected()})),t.code===Qe.F5&&e.emitter.emit("vf-fetch",{params:{q:"index",adapter:e.fs.adapter,path:e.fs.data.dirname}}),t.code===Qe.DELETE&&(!e.dragSelect.getCount()||e.modal.open(cs,{items:e.dragSelect.getSelected()})),t.metaKey&&t.code===Qe.BACKSLASH&&e.modal.open(Do),t.metaKey&&t.code===Qe.KEY_F&&e.features.includes(de.SEARCH)&&(e.fs.searchMode=!0,t.preventDefault()),t.metaKey&&t.code===Qe.KEY_E&&(e.showTreeView=!e.showTreeView,e.storage.setStore("show-tree-view",e.showTreeView)),t.metaKey&&t.code===Qe.ENTER&&(e.fullScreen=!e.fullScreen,e.root.focus()),t.metaKey&&t.code===Qe.KEY_A&&(e.dragSelect.selectAll(),t.preventDefault())))};xe((()=>{e.root.addEventListener("keydown",t)}))}const Hi={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"},Bi=a("path",{d:"M12 10.5v6m3-3H9m4.06-7.19-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44z"},null,-1),Ni=[Bi];function Ui(e,t){return v(),g("svg",Hi,[...Ni])}const Lo={render:Ui},qi={class:"vuefinder__new-folder-modal__content"},Pi={class:"vuefinder__new-folder-modal__form"},zi={class:"vuefinder__new-folder-modal__description"},ji=["placeholder"],Fo={__name:"ModalNewFolder",setup(e){const t=re("ServiceContainer");t.storage;const{t:n}=t.i18n,l=A(""),r=A(""),s=()=>{""!==l.value&&t.emitter.emit("vf-fetch",{params:{q:"newfolder",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{name:l.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("%s is created.",l.value)})},onError:e=>{r.value=n(e.message)}})};return(e,i)=>(v(),W(Ye,null,{buttons:Z((()=>[a("button",{type:"button",onClick:s,class:"vf-btn vf-btn-primary"},b(o(n)("Create")),1),a("button",{type:"button",onClick:i[2]||(i[2]=e=>o(t).modal.close()),class:"vf-btn vf-btn-secondary"},b(o(n)("Cancel")),1)])),default:Z((()=>[a("div",null,[P(nt,{icon:o(Lo),title:o(n)("New Folder")},null,8,["icon","title"]),a("div",qi,[a("div",Pi,[a("p",zi,b(o(n)("Create a new folder")),1),ue(a("input",{"onUpdate:modelValue":i[0]||(i[0]=e=>l.value=e),onKeyup:xt(s,["enter"]),class:"vuefinder__new-folder-modal__input",placeholder:o(n)("Folder Name"),type:"text"},null,40,ji),[[St,l.value]]),r.value.length?(v(),W(Xe,{key:0,onHidden:i[1]||(i[1]=e=>r.value=""),error:""},{default:Z((()=>[Q(b(r.value),1)])),_:1})):q("",!0)])])])])),_:1}))}},Gi={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"},Ki=a("path",{d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9"},null,-1),Wi=[Ki];function Yi(e,t){return v(),g("svg",Gi,[...Wi])}const Ro={render:Yi},Xi={class:"vuefinder__new-file-modal__content"},Qi={class:"vuefinder__new-file-modal__form"},Ji={class:"vuefinder__new-file-modal__description"},Zi=["placeholder"],ec={__name:"ModalNewFile",setup(e){const t=re("ServiceContainer");t.storage;const{t:n}=t.i18n,l=A(""),r=A(""),s=()=>{""!==l.value&&t.emitter.emit("vf-fetch",{params:{q:"newfile",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{name:l.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("%s is created.",l.value)})},onError:e=>{r.value=n(e.message)}})};return(e,i)=>(v(),W(Ye,null,{buttons:Z((()=>[a("button",{type:"button",onClick:s,class:"vf-btn vf-btn-primary"},b(o(n)("Create")),1),a("button",{type:"button",onClick:i[2]||(i[2]=e=>o(t).modal.close()),class:"vf-btn vf-btn-secondary"},b(o(n)("Cancel")),1)])),default:Z((()=>[a("div",null,[P(nt,{icon:o(Ro),title:o(n)("New File")},null,8,["icon","title"]),a("div",Xi,[a("div",Qi,[a("p",Ji,b(o(n)("Create a new file")),1),ue(a("input",{"onUpdate:modelValue":i[0]||(i[0]=e=>l.value=e),onKeyup:xt(s,["enter"]),class:"vuefinder__new-file-modal__input",placeholder:o(n)("File Name"),type:"text"},null,40,Zi),[[St,l.value]]),r.value.length?(v(),W(Xe,{key:0,onHidden:i[1]||(i[1]=e=>r.value=""),error:""},{default:Z((()=>[Q(b(r.value),1)])),_:1})):q("",!0)])])])])),_:1}))}};function Gn(e,t=14){let a=`((?=([\\w\\W]{0,${t}}))([\\w\\W]{${t+1},})([\\w\\W]{8,}))`;return e.replace(new RegExp(a),"$2..$4")}const tc={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"},nc=a("path",{d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"},null,-1),sc=[nc];function oc(e,t){return v(),g("svg",tc,[...sc])}const Io={render:oc},rc={class:"vuefinder__upload-modal__content"},ac={key:0,class:"pointer-events-none"},lc={key:1,class:"pointer-events-none"},ic=["disabled"],cc=["disabled"],dc={class:"vuefinder__upload-modal__file-list vf-scrollbar"},uc=["textContent"],_c={class:"vuefinder__upload-modal__file-info"},vc={class:"vuefinder__upload-modal__file-name hidden md:block"},fc={class:"vuefinder__upload-modal__file-name md:hidden"},mc={key:0,class:"ml-auto"},hc=["title","disabled","onClick"],pc=a("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"vuefinder__upload-modal__file-remove-icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1),gc=[pc],bc={key:0,class:"py-2"},wc=["disabled"],yc={__name:"ModalUpload",setup(e){const t=re("ServiceContainer"),{t:n}=t.i18n,l=n("uppy"),r={PENDING:0,CANCELED:1,UPLOADING:2,ERROR:3,DONE:10},s=A({QUEUE_ENTRY_STATUS:r}),i=A(null),d=A(null),u=A(null),c=A(null),m=A(null),f=A(null),_=A([]),p=A(""),h=A(!1),w=A(!1);let y;function k(e){return _.value.findIndex((t=>t.id===e))}function x(e,t=null){t=t??(e.webkitRelativePath||e.name),y.addFile({name:t,type:e.type,data:e,source:"Local"})}function S(e){switch(e.status){case r.DONE:return"text-green-600";case r.ERROR:case r.CANCELED:return"text-red-600";default:return""}}const C=e=>{switch(e.status){case r.DONE:return"✓";case r.ERROR:case r.CANCELED:return"!";default:return"..."}};function E(){c.value.click()}function M(){if(!h.value){if(!_.value.filter((e=>e.status!==r.DONE)).length)return void(p.value=n("Please select file to upload first."));p.value="",y.retryAll(),y.upload()}}function D(){y.cancelAll({reason:"user"}),_.value.forEach((e=>{e.status!==r.DONE&&(e.status=r.CANCELED,e.statusName=n("Canceled"))})),h.value=!1}function T(e){h.value||(y.removeFile(e.id,"removed-by-user"),_.value.splice(k(e.id),1))}function L(e){if(!h.value){if(y.cancelAll({reason:"user"}),e){const e=[];return _.value.forEach((t=>{t.status!==r.DONE&&e.push(t)})),_.value=[],void e.forEach((e=>{x(e.originalFile,e.name)}))}_.value.splice(0)}}function V(){t.modal.close()}return xe((async()=>{function e(t,a){a.isFile&&a.file((e=>t(a,e))),a.isDirectory&&a.createReader().readEntries((a=>{a.forEach((a=>{e(t,a)}))}))}y=new fr({debug:t.debug,restrictions:{maxFileSize:Sr(t.maxFileSize)},locale:l,onBeforeFileAdded(e,a){if(null!=a[e.id]){const t=k(e.id);_.value[t].status===r.PENDING&&(p.value=y.i18n("noDuplicates",{fileName:e.name})),_.value=_.value.filter((t=>t.id!==e.id))}return _.value.push({id:e.id,name:e.name,size:t.filesize(e.size),status:r.PENDING,statusName:n("Pending upload"),percent:null,originalFile:e.data}),!0}}),y.use(mr,{endpoint:"WILL_BE_REPLACED_BEFORE_UPLOAD",limit:5,timeout:0,getResponseError(e,t){let a;try{a=JSON.parse(e).message}catch{a=n("Cannot parse server response.")}return new Error(a)}}),y.on("restriction-failed",((e,t)=>{T(_.value[k(e.id)]),p.value=t.message})),y.on("upload",(()=>{const e=t.requester.transformRequestParams({url:"",method:"post",params:{q:"upload",adapter:t.fs.adapter,path:t.fs.data.dirname}});y.setMeta({...e.body});const a=y.getPlugin("XHRUpload");a.opts.method=e.method,a.opts.endpoint=e.url+"?"+new URLSearchParams(e.params),a.opts.headers=e.headers,delete e.headers["Content-Type"],h.value=!0,_.value.forEach((e=>{e.status!==r.DONE&&(e.percent=null,e.status=r.UPLOADING,e.statusName=n("Pending upload"))}))})),y.on("upload-progress",((e,t)=>{const a=Math.floor(t.bytesUploaded/t.bytesTotal*100);_.value[k(e.id)].percent=`${a}%`})),y.on("upload-success",(e=>{const t=_.value[k(e.id)];t.status=r.DONE,t.statusName=n("Done")})),y.on("upload-error",((e,t)=>{const a=_.value[k(e.id)];a.percent=null,a.status=r.ERROR,t.isNetworkError?a.statusName=n("Network Error, Unable establish connection to the server or interrupted."):a.statusName=t?t.message:n("Unknown Error")})),y.on("error",(e=>{p.value=e.message,h.value=!1,t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname},noCloseModal:!0})})),y.on("complete",(()=>{h.value=!1,t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname},noCloseModal:!0})})),c.value.addEventListener("click",(()=>{d.value.click()})),m.value.addEventListener("click",(()=>{u.value.click()})),f.value.addEventListener("dragover",(e=>{e.preventDefault(),w.value=!0})),f.value.addEventListener("dragleave",(e=>{e.preventDefault(),w.value=!1})),f.value.addEventListener("drop",(t=>{t.preventDefault(),w.value=!1;const a=/^[/\\](.+)/;[...t.dataTransfer.items].forEach((t=>{"file"===t.kind&&e(((e,t)=>{x(t,a.exec(e.fullPath)[1])}),t.webkitGetAsEntry())}))}));const a=({target:e})=>{const t=e.files;for(const e of t)x(e);e.value=""};d.value.addEventListener("change",a),u.value.addEventListener("change",a)})),Hs((()=>{null==y||y.close({reason:"unmount"})})),(e,t)=>(v(),W(Ye,null,{buttons:Z((()=>[a("button",{type:"button",class:"vf-btn vf-btn-primary",disabled:h.value,onClick:et(M,["prevent"])},b(o(n)("Upload")),9,wc),h.value?(v(),g("button",{key:0,type:"button",class:"vf-btn vf-btn-secondary",onClick:et(D,["prevent"])},b(o(n)("Cancel")),1)):(v(),g("button",{key:1,type:"button",class:"vf-btn vf-btn-secondary",onClick:et(V,["prevent"])},b(o(n)("Close")),1))])),default:Z((()=>[a("div",null,[P(nt,{icon:o(Io),title:o(n)("Upload Files")},null,8,["icon","title"]),a("div",rc,[a("div",{class:"vuefinder__upload-modal__drop-area",ref_key:"dropArea",ref:f,onClick:E},[w.value?(v(),g("div",ac,b(o(n)("Release to drop these files.")),1)):(v(),g("div",lc,b(o(n)("Drag and drop the files/folders to here or click here.")),1))],512),a("div",{ref_key:"container",ref:i,class:"vuefinder__upload-modal__buttons"},[a("button",{ref_key:"pickFiles",ref:c,type:"button",class:"vf-btn vf-btn-secondary"},b(o(n)("Select Files")),513),a("button",{ref_key:"pickFolders",ref:m,type:"button",class:"vf-btn vf-btn-secondary"},b(o(n)("Select Folders")),513),a("button",{type:"button",class:"vf-btn vf-btn-secondary",disabled:h.value,onClick:t[0]||(t[0]=e=>L(!1))},b(o(n)("Clear all")),9,ic),a("button",{type:"button",class:"vf-btn vf-btn-secondary",disabled:h.value,onClick:t[1]||(t[1]=e=>L(!0))},b(o(n)("Clear only successful")),9,cc)],512),a("div",dc,[(v(!0),g(ge,null,ke(_.value,(e=>(v(),g("div",{class:"vuefinder__upload-modal__file-entry",key:e.id},[a("span",{class:ae(["vuefinder__upload-modal__file-icon",S(e)])},[a("span",{class:"vuefinder__upload-modal__file-icon-text",textContent:b(C(e))},null,8,uc)],2),a("div",_c,[a("div",vc,b(o(Gn)(e.name,40))+" ("+b(e.size)+")",1),a("div",fc,b(o(Gn)(e.name,16))+" ("+b(e.size)+")",1),a("div",{class:ae(["vuefinder__upload-modal__file-status",S(e)])},[Q(b(e.statusName)+" ",1),e.status===s.value.QUEUE_ENTRY_STATUS.UPLOADING?(v(),g("b",mc,b(e.percent),1)):q("",!0)],2)]),a("button",{type:"button",class:ae(["vuefinder__upload-modal__file-remove",h.value?"disabled":""]),title:o(n)("Delete"),disabled:h.value,onClick:t=>T(e)},gc,10,hc)])))),128)),_.value.length?q("",!0):(v(),g("div",bc,b(o(n)("No files selected!")),1))]),p.value.length?(v(),W(Xe,{key:0,onHidden:t[2]||(t[2]=e=>p.value=""),error:""},{default:Z((()=>[Q(b(p.value),1)])),_:1})):q("",!0)])]),a("input",{ref_key:"internalFileInput",ref:d,type:"file",multiple:"",class:"hidden"},null,512),a("input",{ref_key:"internalFolderInput",ref:u,type:"file",multiple:"",webkitdirectory:"",class:"hidden"},null,512)])),_:1}))}},$c={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"},kc=a("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5m6 4.125 2.25 2.25m0 0 2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1),xc=[kc];function Sc(e,t){return v(),g("svg",$c,[...xc])}const Ho={render:Sc},Cc={class:"vuefinder__unarchive-modal__content"},Ec={class:"vuefinder__unarchive-modal__items"},Tc={class:"vuefinder__unarchive-modal__item"},Mc={key:0,class:"vuefinder__unarchive-modal__icon vuefinder__unarchive-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Ac=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),Dc=[Ac],Vc={key:1,class:"vuefinder__unarchive-modal__icon vuefinder__unarchive-modal__icon--file",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Oc=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),Lc=[Oc],Fc={class:"vuefinder__unarchive-modal__item-name"},Rc={class:"vuefinder__unarchive-modal__info"},Bo={__name:"ModalUnarchive",setup(e){const t=re("ServiceContainer"),{t:n}=t.i18n,l=A(t.modal.data.items[0]),r=A(""),s=A([]),i=()=>{t.emitter.emit("vf-fetch",{params:{q:"unarchive",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{item:l.value.path},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("The file unarchived.")})},onError:e=>{r.value=n(e.message)}})};return(e,l)=>(v(),W(Ye,null,{buttons:Z((()=>[a("button",{type:"button",onClick:i,class:"vf-btn vf-btn-primary"},b(o(n)("Unarchive")),1),a("button",{type:"button",onClick:l[1]||(l[1]=e=>o(t).modal.close()),class:"vf-btn vf-btn-secondary"},b(o(n)("Cancel")),1)])),default:Z((()=>[a("div",null,[P(nt,{icon:o(Ho),title:o(n)("Unarchive")},null,8,["icon","title"]),a("div",Cc,[a("div",Ec,[(v(!0),g(ge,null,ke(s.value,(e=>(v(),g("p",Tc,["dir"===e.type?(v(),g("svg",Mc,Dc)):(v(),g("svg",Vc,Lc)),a("span",Fc,b(e.basename),1)])))),256)),a("p",Rc,b(o(n)("The archive will be unarchived at"))+" ("+b(o(t).fs.data.dirname)+")",1),r.value.length?(v(),W(Xe,{key:0,onHidden:l[0]||(l[0]=e=>r.value=""),error:""},{default:Z((()=>[Q(b(r.value),1)])),_:1})):q("",!0)])])])])),_:1}))}},Ic={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"},Hc=a("path",{d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125"},null,-1),Bc=[Hc];function Nc(e,t){return v(),g("svg",Ic,[...Bc])}const No={render:Nc},Uc={class:"vuefinder__archive-modal__content"},qc={class:"vuefinder__archive-modal__form"},Pc={class:"vuefinder__archive-modal__files vf-scrollbar"},zc={class:"vuefinder__archive-modal__file"},jc={key:0,class:"vuefinder__archive-modal__icon vuefinder__archive-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Gc=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),Kc=[Gc],Wc={key:1,class:"vuefinder__archive-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Yc=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),Xc=[Yc],Qc={class:"vuefinder__archive-modal__file-name"},Jc=["placeholder"],Uo={__name:"ModalArchive",setup(e){const t=re("ServiceContainer"),{t:n}=t.i18n,l=A(""),r=A(""),s=A(t.modal.data.items),i=()=>{s.value.length&&t.emitter.emit("vf-fetch",{params:{q:"archive",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{items:s.value.map((({path:e,type:t})=>({path:e,type:t}))),name:l.value},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("The file(s) archived.")})},onError:e=>{r.value=n(e.message)}})};return(e,d)=>(v(),W(Ye,null,{buttons:Z((()=>[a("button",{type:"button",onClick:i,class:"vf-btn vf-btn-primary"},b(o(n)("Archive")),1),a("button",{type:"button",onClick:d[2]||(d[2]=e=>o(t).modal.close()),class:"vf-btn vf-btn-secondary"},b(o(n)("Cancel")),1)])),default:Z((()=>[a("div",null,[P(nt,{icon:o(No),title:o(n)("Archive the files")},null,8,["icon","title"]),a("div",Uc,[a("div",qc,[a("div",Pc,[(v(!0),g(ge,null,ke(s.value,(e=>(v(),g("p",zc,["dir"===e.type?(v(),g("svg",jc,Kc)):(v(),g("svg",Wc,Xc)),a("span",Qc,b(e.basename),1)])))),256))]),ue(a("input",{"onUpdate:modelValue":d[0]||(d[0]=e=>l.value=e),onKeyup:xt(i,["enter"]),class:"vuefinder__archive-modal__input",placeholder:o(n)("Archive name. (.zip file will be created)"),type:"text"},null,40,Jc),[[St,l.value]]),r.value.length?(v(),W(Xe,{key:0,onHidden:d[1]||(d[1]=e=>r.value=""),error:""},{default:Z((()=>[Q(b(r.value),1)])),_:1})):q("",!0)])])])])),_:1}))}},Zc={xmlns:"http://www.w3.org/2000/svg",fill:"none",class:"animate-spin p-0.5 h-5 w-5 text-white ml-auto",viewBox:"0 0 24 24"},ed=a("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4",class:"opacity-25 stroke-blue-900 dark:stroke-blue-100"},null,-1),td=a("path",{fill:"currentColor",d:"M4 12a8 8 0 0 1 8-8V0C5.373 0 0 5.373 0 12zm2 5.291A7.96 7.96 0 0 1 4 12H0c0 3.042 1.135 5.824 3 7.938z",class:"opacity-75"},null,-1),nd=[ed,td];function sd(e,t){return v(),g("svg",Zc,[...nd])}const us={render:sd},od={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"},rd=a("path",{d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},null,-1),ad=[rd];function ld(e,t){return v(),g("svg",od,[...ad])}const id={render:ld},cd={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto vf-toolbar-icon",viewBox:"0 0 24 24"},dd=a("path",{d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"},null,-1),ud=[dd];function _d(e,t){return v(),g("svg",cd,[...ud])}const vd={render:_d},fd={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"},md=a("path",{d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25zm0 9.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18zM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25zm0 9.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18z"},null,-1),hd=[md];function pd(e,t){return v(),g("svg",fd,[...hd])}const gd={render:pd},bd={xmlns:"http://www.w3.org/2000/svg",fill:"none","stroke-width":"1.5",class:"h-6 w-6 md:h-8 md:w-8 m-auto",viewBox:"0 0 24 24"},wd=a("path",{d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75"},null,-1),yd=[wd];function $d(e,t){return v(),g("svg",bd,[...yd])}const kd={render:$d},xd={class:"vuefinder__toolbar"},Sd={key:0,class:"vuefinder__toolbar__actions"},Cd=["title"],Ed=["title"],Td=["title"],Md=["title"],Ad=["title"],Dd=["title"],Vd=["title"],Od={key:1,class:"vuefinder__toolbar__search-results"},Ld={class:"pl-2"},Fd={class:"dark:bg-gray-700 bg-gray-200 text-xs px-2 py-1 rounded"},Rd={class:"vuefinder__toolbar__controls"},Id=["title"],Hd=["title"],Bd={__name:"Toolbar",setup(e){const t=re("ServiceContainer"),{setStore:n}=t.storage,{t:l}=t.i18n,r=t.dragSelect,s=A("");t.emitter.on("vf-search-query",(({newQuery:e})=>{s.value=e}));const i=()=>{t.fullScreen=!t.fullScreen};De((()=>t.fullScreen),(()=>{t.fullScreen?document.querySelector("body").style.overflow="hidden":document.querySelector("body").style.overflow="",n("full-screen",t.fullScreen),t.emitter.emit("vf-fullscreen-toggle")}));return(e,d)=>(v(),g("div",xd,[s.value.length?(v(),g("div",Od,[a("div",Ld,[Q(b(o(l)("Search results for"))+" ",1),a("span",Fd,b(s.value),1)]),"circular"===o(t).loadingIndicator&&o(t).fs.loading?(v(),W(o(us),{key:0})):q("",!0)])):(v(),g("div",Sd,[o(t).features.includes(o(de).NEW_FOLDER)?(v(),g("div",{key:0,class:"mx-1.5",title:o(l)("New Folder"),onClick:d[0]||(d[0]=e=>o(t).modal.open(Fo,{items:o(r).getSelected()}))},[P(o(Lo))],8,Cd)):q("",!0),o(t).features.includes(o(de).NEW_FILE)?(v(),g("div",{key:1,class:"mx-1.5",title:o(l)("New File"),onClick:d[1]||(d[1]=e=>o(t).modal.open(ec,{items:o(r).getSelected()}))},[P(o(Ro))],8,Ed)):q("",!0),o(t).features.includes(o(de).RENAME)?(v(),g("div",{key:2,class:"mx-1.5",title:o(l)("Rename"),onClick:d[2]||(d[2]=e=>1!==o(r).getCount()||o(t).modal.open(ds,{items:o(r).getSelected()}))},[P(o(Oo),{class:ae(1===o(r).getCount()?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,Td)):q("",!0),o(t).features.includes(o(de).DELETE)?(v(),g("div",{key:3,class:"mx-1.5",title:o(l)("Delete"),onClick:d[3]||(d[3]=e=>!o(r).getCount()||o(t).modal.open(cs,{items:o(r).getSelected()}))},[P(o(Vo),{class:ae(o(r).getCount()?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,Md)):q("",!0),o(t).features.includes(o(de).UPLOAD)?(v(),g("div",{key:4,class:"mx-1.5",title:o(l)("Upload"),onClick:d[4]||(d[4]=e=>o(t).modal.open(yc,{items:o(r).getSelected()}))},[P(o(Io))],8,Ad)):q("",!0),o(t).features.includes(o(de).UNARCHIVE)&&1===o(r).getCount()&&"application/zip"===o(r).getSelected()[0].mime_type?(v(),g("div",{key:5,class:"mx-1.5",title:o(l)("Unarchive"),onClick:d[5]||(d[5]=e=>!o(r).getCount()||o(t).modal.open(Bo,{items:o(r).getSelected()}))},[P(o(Ho),{class:ae(o(r).getCount()?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,Dd)):q("",!0),o(t).features.includes(o(de).ARCHIVE)?(v(),g("div",{key:6,class:"mx-1.5",title:o(l)("Archive"),onClick:d[6]||(d[6]=e=>!o(r).getCount()||o(t).modal.open(Uo,{items:o(r).getSelected()}))},[P(o(No),{class:ae(o(r).getCount()?"vf-toolbar-icon":"vf-toolbar-icon-disabled")},null,8,["class"])],8,Vd)):q("",!0)])),a("div",Rd,[o(t).features.includes(o(de).FULL_SCREEN)?(v(),g("div",{key:0,onClick:i,class:"mx-1.5",title:o(l)("Toggle Full Screen")},[o(t).fullScreen?(v(),W(o(vd),{key:0})):(v(),W(o(id),{key:1}))],8,Id)):q("",!0),a("div",{class:"mx-1.5",title:o(l)("Change View"),onClick:d[7]||(d[7]=e=>s.value.length||(t.view="list"===t.view?"grid":"list",r.refreshSelection(),void n("viewport",t.view)))},["grid"===o(t).view?(v(),W(o(gd),{key:0,class:ae(["vf-toolbar-icon",s.value.length?"vf-toolbar-icon-disabled":""])},null,8,["class"])):q("",!0),"list"===o(t).view?(v(),W(o(kd),{key:1,class:ae(["vf-toolbar-icon",s.value.length?"vf-toolbar-icon-disabled":""])},null,8,["class"])):q("",!0)],8,Hd)])]))}},Nd=(e,t=0,a=!1)=>{let n;return(...o)=>{a&&!n&&e(...o),clearTimeout(n),n=setTimeout((()=>{e(...o)}),t)}},Ls=(e,t,a)=>{const n=A(e);return rr(((e,o)=>({get:()=>(e(),n.value),set:Nd((e=>{n.value=e,o()}),t,a)})))},Ud={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2","aria-hidden":"true",class:"h-6 w-6 stroke-blue-600 dark:stroke-blue-100",viewBox:"0 0 24 24"},qd=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3"},null,-1),Pd=[qd];function zd(e,t){return v(),g("svg",Ud,[...Pd])}const jd={render:zd},Gd={class:"vuefinder__move-modal__content"},Kd={class:"vuefinder__move-modal__description"},Wd={class:"vuefinder__move-modal__files vf-scrollbar"},Yd={class:"vuefinder__move-modal__file"},Xd={key:0,class:"vuefinder__move-modal__icon vuefinder__move-modal__icon--dir",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},Qd=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},null,-1),Jd=[Qd],Zd={key:1,class:"vuefinder__move-modal__icon",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},eu=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"},null,-1),tu=[eu],nu={class:"vuefinder__move-modal__file-name"},su={class:"vuefinder__move-modal__target-title"},ou={class:"vuefinder__move-modal__target-directory"},ru=a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"vuefinder__move-modal__icon vuefinder__move-modal__icon--dir",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"})],-1),au={class:"vuefinder__move-modal__target-path"},lu={class:"vuefinder__move-modal__selected-items"},Kn={__name:"ModalMove",setup(e){const t=re("ServiceContainer"),{t:n}=t.i18n,l=A(t.modal.data.items.from),r=A(""),s=()=>{l.value.length&&t.emitter.emit("vf-fetch",{params:{q:"move",m:"post",adapter:t.fs.adapter,path:t.fs.data.dirname},body:{items:l.value.map((({path:e,type:t})=>({path:e,type:t}))),item:t.modal.data.items.to.path},onSuccess:()=>{t.emitter.emit("vf-toast-push",{label:n("Files moved.",t.modal.data.items.to.name)})},onError:e=>{r.value=n(e.message)}})};return(e,i)=>(v(),W(Ye,null,{buttons:Z((()=>[a("button",{type:"button",onClick:s,class:"vf-btn vf-btn-primary"},b(o(n)("Yes, Move!")),1),a("button",{type:"button",onClick:i[1]||(i[1]=e=>o(t).modal.close()),class:"vf-btn vf-btn-secondary"},b(o(n)("Cancel")),1),a("div",lu,b(o(n)("%s item(s) selected.",l.value.length)),1)])),default:Z((()=>[a("div",null,[P(nt,{icon:o(jd),title:o(n)("Move files")},null,8,["icon","title"]),a("div",Gd,[a("p",Kd,b(o(n)("Are you sure you want to move these files?")),1),a("div",Wd,[(v(!0),g(ge,null,ke(l.value,(e=>(v(),g("div",Yd,[a("div",null,["dir"===e.type?(v(),g("svg",Xd,Jd)):(v(),g("svg",Zd,tu))]),a("div",nu,b(e.path),1)])))),256))]),a("h4",su,b(o(n)("Target Directory")),1),a("p",ou,[ru,a("span",au,b(o(t).modal.data.items.to.path),1)]),r.value.length?(v(),W(Xe,{key:0,onHidden:i[0]||(i[0]=e=>r.value=""),error:""},{default:Z((()=>[Q(b(r.value),1)])),_:1})):q("",!0)])])])),_:1}))}},iu={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer",viewBox:"-40 -40 580 580"},cu=a("path",{d:"M463.5 224h8.5c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2S461.9 48.1 455 55l-41.6 41.6c-87.6-86.5-228.7-86.2-315.8 1-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2S334.3 224 344 224z"},null,-1),du=[cu];function uu(e,t){return v(),g("svg",iu,[...du])}const _u={render:uu},vu={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-0.5 rounded",viewBox:"0 0 20 20"},fu=a("path",{"fill-rule":"evenodd",d:"M5.293 9.707a1 1 0 0 1 0-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L11 7.414V15a1 1 0 1 1-2 0V7.414L6.707 9.707a1 1 0 0 1-1.414 0",class:"pointer-events-none","clip-rule":"evenodd"},null,-1),mu=[fu];function hu(e,t){return v(),g("svg",vu,[...mu])}const pu={render:hu},gu={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-300 dark:text-neutral-200 dark:hover:bg-gray-700 cursor-pointer",viewBox:"0 0 24 24"},bu=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1),wu=[bu];function yu(e,t){return v(),g("svg",gu,[...wu])}const $u={render:yu},ku={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 rounded text-slate-700 hover:bg-neutral-100 dark:text-neutral-300 dark:hover:bg-gray-800 cursor-pointer",viewBox:"0 0 20 20"},xu=a("path",{d:"M10.707 2.293a1 1 0 0 0-1.414 0l-7 7a1 1 0 0 0 1.414 1.414L4 10.414V17a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-6.586l.293.293a1 1 0 0 0 1.414-1.414z",class:"pointer-events-none"},null,-1),Su=[xu];function Cu(e,t){return v(),g("svg",ku,[...Su])}const Eu={render:Cu},Tu={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-6 w-6 p-1 m-auto stroke-gray-400 fill-gray-100 dark:stroke-gray-400 dark:fill-gray-400/20",viewBox:"0 0 20 20"},Mu=a("path",{d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607"},null,-1),Au=[Mu];function Du(e,t){return v(),g("svg",Tu,[...Au])}const Vu={render:Du},Ou={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"w-6 h-6 cursor-pointer",viewBox:"0 0 24 24"},Lu=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1),Fu=[Lu];function Ru(e,t){return v(),g("svg",Ou,[...Fu])}const Iu={render:Ru},Hu={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"text-neutral-500 fill-sky-500 stroke-sky-500 dark:fill-slate-500 dark:stroke-slate-500",viewBox:"0 0 24 24"},Bu=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 7v10a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-6l-2-2H5a2 2 0 0 0-2 2"},null,-1),Nu=[Bu];function Uu(e,t){return v(),g("svg",Hu,[...Nu])}const pn={render:Uu},qu={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"h-6 w-6 p-1 rounded text-slate-700 dark:text-neutral-300 cursor-pointer",viewBox:"0 0 24 24"},Pu=a("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),zu=a("path",{d:"M9 6h11M12 12h8M15 18h5M5 6v.01M8 12v.01M11 18v.01"},null,-1),ju=[Pu,zu];function Gu(e,t){return v(),g("svg",qu,[...ju])}const Ku={render:Gu},Wu={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 rounded text-slate-700 hover:bg-neutral-100 dark:fill-neutral-300 dark:hover:bg-gray-800 cursor-pointer",viewBox:"0 0 448 512"},Yu=a("path",{d:"M8 256a56 56 0 1 1 112 0 56 56 0 1 1-112 0m160 0a56 56 0 1 1 112 0 56 56 0 1 1-112 0m216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112"},null,-1),Xu=[Yu];function Qu(e,t){return v(),g("svg",Wu,[...Xu])}const Ju={render:Qu},Zu={class:"vuefinder__breadcrumb__container"},e_=["title"],t_=["title"],n_=["title"],s_=["title"],o_={class:"vuefinder__breadcrumb__list"},r_={key:0,class:"vuefinder__breadcrumb__hidden-list"},a_=a("div",{class:"vuefinder__breadcrumb__separator"},"/",-1),l_={class:"relative"},i_=a("span",{class:"vuefinder__breadcrumb__separator"},"/",-1),c_=["onDragover","onDragleave","onDrop","title","onClick"],d_={class:"vuefinder__breadcrumb__search-mode"},u_=["placeholder"],__={class:"vuefinder__breadcrumb__hidden-dropdown"},v_=["onDrop","onClick"],f_={class:"vuefinder__breadcrumb__hidden-item-content"},m_={class:"vuefinder__breadcrumb__hidden-item-text"},h_={__name:"Breadcrumb",setup(e){const t=re("ServiceContainer"),{t:n}=t.i18n,l=t.dragSelect,{setStore:r}=t.storage,s=A(null),i=Ls(0,100);De(i,(e=>{const a=s.value.children;let n=0,o=0;t.fs.limitBreadcrumbItems(5),dt((()=>{for(let e=a.length-1;e>=0&&!(n+a[e].offsetWidth>i.value-40);e--)n+=parseInt(a[e].offsetWidth,10),o++;o<1&&(o=1),o>5&&(o=5),t.fs.limitBreadcrumbItems(o)}))}));const d=()=>{i.value=s.value.offsetWidth};let u=A(null);xe((()=>{u.value=new ResizeObserver(d),u.value.observe(s.value)})),Wn((()=>{u.value.disconnect()}));const c=(e,a=null)=>{e.preventDefault(),l.isDraggingRef.value=!1,f(e),a??(a=t.fs.breadcrumbs.length-2);let n=JSON.parse(e.dataTransfer.getData("items"));n.find((e=>e.storage!==t.fs.adapter))?alert("Moving items between different storages is not supported yet."):t.modal.open(Kn,{items:{from:n,to:t.fs.breadcrumbs[a]??{path:t.fs.adapter+"://"}}})},m=e=>{e.preventDefault(),t.fs.isGoUpAvailable()?(e.dataTransfer.dropEffect="copy",e.currentTarget.classList.add("bg-blue-200","dark:bg-slate-600")):(e.dataTransfer.dropEffect="none",e.dataTransfer.effectAllowed="none")},f=e=>{e.preventDefault(),e.currentTarget.classList.remove("bg-blue-200","dark:bg-slate-600"),t.fs.isGoUpAvailable()&&e.currentTarget.classList.remove("bg-blue-200","dark:bg-slate-600")},_=()=>{C(),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname}})},p=()=>{C(),!t.fs.isGoUpAvailable()||t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.parentFolderPath}})},h=()=>{t.fs.showHiddenBreadcrumbs&&t.fs.toggleHiddenBreadcrumbs(!1)},w={mounted(e,t,a,n){e.clickOutsideEvent=function(a){e===a.target||e.contains(a.target)||t.value()},document.body.addEventListener("click",e.clickOutsideEvent)},beforeUnmount(e,t,a,n){document.body.removeEventListener("click",e.clickOutsideEvent)}},y=()=>{t.showTreeView=!t.showTreeView};De((()=>t.showTreeView),((e,t)=>{e!==t&&r("show-tree-view",e)}));const k=A(null),x=()=>{t.features.includes(de.SEARCH)&&(t.fs.searchMode=!0,dt((()=>k.value.focus())))},S=Ls("",400);De(S,(e=>{t.emitter.emit("vf-toast-clear"),t.emitter.emit("vf-search-query",{newQuery:e})})),De((()=>t.fs.searchMode),(e=>{e&&dt((()=>k.value.focus()))}));const C=()=>{t.fs.searchMode=!1,S.value=""};t.emitter.on("vf-search-exit",(()=>{C()}));const E=()=>{""===S.value&&C()};return(e,r)=>(v(),g("div",Zu,[a("span",{title:o(n)("Toggle Tree View")},[P(o(Ku),{onClick:y,class:ae(["vuefinder__breadcrumb__toggle-tree",o(t).showTreeView?"vuefinder__breadcrumb__toggle-tree--active":""])},null,8,["class"])],8,e_),a("span",{title:o(n)("Go up a directory")},[P(o(pu),{onDragover:r[0]||(r[0]=e=>m(e)),onDragleave:r[1]||(r[1]=e=>f(e)),onDrop:r[2]||(r[2]=e=>c(e)),onClick:p,class:ae(o(t).fs.isGoUpAvailable()?"vuefinder__breadcrumb__go-up--active":"vuefinder__breadcrumb__go-up--inactive")},null,8,["class"])],8,t_),o(t).fs.loading?(v(),g("span",{key:1,title:o(n)("Cancel")},[P(o($u),{onClick:r[3]||(r[3]=e=>o(t).emitter.emit("vf-fetch-abort"))})],8,s_)):(v(),g("span",{key:0,title:o(n)("Refresh")},[P(o(_u),{onClick:_})],8,n_)),ue(a("div",{onClick:et(x,["self"]),class:"group vuefinder__breadcrumb__search-container"},[a("div",null,[P(o(Eu),{onDragover:r[4]||(r[4]=e=>m(e)),onDragleave:r[5]||(r[5]=e=>f(e)),onDrop:r[6]||(r[6]=e=>c(e,-1)),onClick:r[7]||(r[7]=e=>o(t).emitter.emit("vf-fetch",{params:{q:"index",adapter:o(t).fs.adapter}}))})]),a("div",o_,[o(t).fs.hiddenBreadcrumbs.length?ue((v(),g("div",r_,[a_,a("div",l_,[a("span",{onDragenter:r[8]||(r[8]=e=>o(t).fs.toggleHiddenBreadcrumbs(!0)),onClick:r[9]||(r[9]=e=>o(t).fs.toggleHiddenBreadcrumbs()),class:"vuefinder__breadcrumb__hidden-toggle"},[P(o(Ju),{class:"vuefinder__breadcrumb__hidden-toggle-icon"})],32)])])),[[w,h]]):q("",!0)]),a("div",{ref_key:"breadcrumbContainer",ref:s,class:"vuefinder__breadcrumb__visible-list",onClick:et(x,["self"])},[(v(!0),g(ge,null,ke(o(t).fs.breadcrumbs,((e,n)=>(v(),g("div",{key:n},[i_,a("span",{onDragover:e=>n===o(t).fs.breadcrumbs.length-1||m(e),onDragleave:e=>n===o(t).fs.breadcrumbs.length-1||f(e),onDrop:e=>n===o(t).fs.breadcrumbs.length-1||c(e,n),class:"vuefinder__breadcrumb__item",title:e.basename,onClick:a=>o(t).emitter.emit("vf-fetch",{params:{q:"index",adapter:o(t).fs.adapter,path:e.path}})},b(e.name),41,c_)])))),128))],512),"circular"===o(t).loadingIndicator&&o(t).fs.loading?(v(),W(o(us),{key:0})):q("",!0)],512),[[Pe,!o(t).fs.searchMode]]),ue(a("div",d_,[a("div",null,[P(o(Vu))]),ue(a("input",{ref_key:"searchInput",ref:k,onKeydown:xt(C,["esc"]),onBlur:E,"onUpdate:modelValue":r[10]||(r[10]=e=>ar(S)?S.value=e:null),placeholder:o(n)("Search anything.."),class:"vuefinder__breadcrumb__search-input",type:"text"},null,40,u_),[[St,o(S)]]),P(o(Iu),{onClick:C})],512),[[Pe,o(t).fs.searchMode]]),ue(a("div",__,[(v(!0),g(ge,null,ke(o(t).fs.hiddenBreadcrumbs,((e,n)=>(v(),g("div",{key:n,onDragover:r[11]||(r[11]=e=>m(e)),onDragleave:r[12]||(r[12]=e=>f(e)),onDrop:e=>((e,a=null)=>{e.preventDefault(),l.isDraggingRef.value=!1,f(e),a??(a=t.fs.hiddenBreadcrumbs.length-1);let n=JSON.parse(e.dataTransfer.getData("items"));n.find((e=>e.storage!==t.fs.adapter))?alert("Moving items between different storages is not supported yet."):t.modal.open(Kn,{items:{from:n,to:t.fs.hiddenBreadcrumbs[a]??{path:t.fs.adapter+"://"}}})})(e,n),onClick:a=>(e=>{t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:e.path}}),t.fs.toggleHiddenBreadcrumbs(!1)})(e),class:"vuefinder__breadcrumb__hidden-item"},[a("div",f_,[a("span",null,[P(o(pn),{class:"vuefinder__breadcrumb__hidden-item-icon"})]),Q(),a("span",m_,b(e.name),1)])],40,v_)))),128))],512),[[Pe,o(t).fs.showHiddenBreadcrumbs]])]))}},qo=(e,t=null)=>new Date(1e3*e).toLocaleString(t??navigator.language??"en-US"),p_=["onClick"],g_={__name:"Toast",setup(e){const t=re("ServiceContainer"),{getStore:a}=t.storage,n=A(a("full-screen",!1)),o=A([]),l=e=>"error"===e?"text-red-400 border-red-400 dark:text-red-300 dark:border-red-300":"text-lime-600 border-lime-600 dark:text-lime-300 dark:border-lime-1300",r=e=>{o.value.splice(e,1)};return t.emitter.on("vf-toast-clear",(()=>{o.value=[]})),t.emitter.on("vf-toast-push",(e=>{let t=(new Date).getTime().toString(36).concat(performance.now().toString(),Math.random().toString()).replace(/\./g,"");e.id=t,o.value.push(e),setTimeout((()=>{(e=>{let t=o.value.findIndex((t=>t.id===e));-1!==t&&r(t)})(t)}),5e3)})),(e,t)=>(v(),g("div",{class:ae(["vuefinder__toast",n.value.value?"vuefinder__toast--fixed":"vuefinder__toast--absolute"])},[P(lr,{name:"vuefinder__toast-item","enter-active-class":"vuefinder__toast-item--enter-active","leave-active-class":"vuefinder__toast-item--leave-active","leave-to-class":"vuefinder__toast-item--leave-to"},{default:Z((()=>[(v(!0),g(ge,null,ke(o.value,((e,t)=>(v(),g("div",{key:t,onClick:e=>r(t),class:ae(["vuefinder__toast__message",l(e.type)])},b(e.label),11,p_)))),128))])),_:1})],2))}},b_={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"},w_=a("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 0 1 1.414 0L10 10.586l3.293-3.293a1 1 0 1 1 1.414 1.414l-4 4a1 1 0 0 1-1.414 0l-4-4a1 1 0 0 1 0-1.414","clip-rule":"evenodd"},null,-1),y_=[w_];function $_(e,t){return v(),g("svg",b_,[...y_])}const k_={render:$_},x_={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 20 20"},S_=a("path",{"fill-rule":"evenodd",d:"M14.707 12.707a1 1 0 0 1-1.414 0L10 9.414l-3.293 3.293a1 1 0 0 1-1.414-1.414l4-4a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1 0 1.414","clip-rule":"evenodd"},null,-1),C_=[S_];function E_(e,t){return v(),g("svg",x_,[...C_])}const T_={render:E_},Wt={__name:"SortIcon",props:{direction:String},setup:e=>(t,a)=>(v(),g("div",null,["asc"===e.direction?(v(),W(o(k_),{key:0})):q("",!0),"desc"===e.direction?(v(),W(o(T_),{key:1})):q("",!0)]))},M_={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"text-neutral-500",viewBox:"0 0 24 24"},A_=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1),D_=[A_];function V_(e,t){return v(),g("svg",M_,[...D_])}const O_={render:V_},L_={class:"vuefinder__item-icon"},Tn={__name:"ItemIcon",props:{type:{type:String,required:!0},small:{type:Boolean,default:!1}},setup:e=>(t,a)=>(v(),g("span",L_,["dir"===e.type?(v(),W(o(pn),{key:0,class:ae(e.small?"vuefinder__item-icon--small":"vuefinder__item-icon--large")},null,8,["class"])):(v(),W(o(O_),{key:1,class:ae(e.small?"vuefinder__item-icon--small":"vuefinder__item-icon--large")},null,8,["class"]))]))},F_={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"absolute h-6 w-6 md:h-12 md:w-12 m-auto stroke-neutral-500 fill-white dark:fill-gray-700 dark:stroke-gray-600 z-10",viewBox:"0 0 24 24"},R_=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7 21h10a2 2 0 0 0 2-2V9.414a1 1 0 0 0-.293-.707l-5.414-5.414A1 1 0 0 0 12.586 3H7a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"},null,-1),I_=[R_];function H_(e,t){return v(),g("svg",F_,[...I_])}const B_={render:H_},N_={class:"vuefinder__drag-item__container"},U_={class:"vuefinder__drag-item__count"},q_={__name:"DragItem",props:{count:{type:Number,default:0}},setup(e){const t=e;return(e,n)=>(v(),g("div",N_,[P(o(B_)),a("div",U_,b(t.count),1)]))}},P_={class:"vuefinder__text-preview"},z_={class:"vuefinder__text-preview__header"},j_=["title"],G_={class:"vuefinder__text-preview__actions"},K_={key:0,class:"vuefinder__text-preview__content"},W_={key:1},Y_={__name:"Text",emits:["success"],setup(e,{emit:t}){const n=t,l=A(""),r=A(""),s=A(null),i=A(!1),d=A(""),u=A(!1),c=re("ServiceContainer"),{t:m}=c.i18n;xe((()=>{c.requester.send({url:"",method:"get",params:{q:"preview",adapter:c.modal.data.adapter,path:c.modal.data.item.path},responseType:"text"}).then((e=>{l.value=e,n("success")}))}));const f=()=>{d.value="",u.value=!1,c.requester.send({url:"",method:"post",params:{q:"save",adapter:c.modal.data.adapter,path:c.modal.data.item.path},body:{content:r.value},responseType:"text"}).then((e=>{d.value=m("Updated."),l.value=e,n("success"),i.value=!i.value})).catch((e=>{d.value=m(e.message),u.value=!0}))};return(e,t)=>(v(),g("div",P_,[a("div",z_,[a("div",{class:"vuefinder__text-preview__title",id:"modal-title",title:o(c).modal.data.item.path},b(o(c).modal.data.item.basename),9,j_),a("div",G_,[i.value?(v(),g("button",{key:0,onClick:f,class:"vuefinder__text-preview__save-button"},b(o(m)("Save")),1)):q("",!0),o(c).features.includes(o(de).EDIT)?(v(),g("button",{key:1,class:"vuefinder__text-preview__edit-button",onClick:t[0]||(t[0]=e=>(i.value=!i.value,void(r.value=l.value)))},b(i.value?o(m)("Cancel"):o(m)("Edit")),1)):q("",!0)])]),a("div",null,[i.value?(v(),g("div",W_,[ue(a("textarea",{ref_key:"editInput",ref:s,"onUpdate:modelValue":t[1]||(t[1]=e=>r.value=e),class:"vuefinder__text-preview__textarea",name:"text",cols:"30",rows:"10"},null,512),[[St,r.value]])])):(v(),g("pre",K_,b(l.value),1)),d.value.length?(v(),W(Xe,{key:2,onHidden:t[2]||(t[2]=e=>d.value=""),error:u.value},{default:Z((()=>[Q(b(d.value),1)])),_:1},8,["error"])):q("",!0)])]))}},X_={class:"vuefinder__image-preview"},Q_={class:"vuefinder__image-preview__header"},J_=["title"],Z_={class:"vuefinder__image-preview__actions"},ev={class:"vuefinder__image-preview__image-container"},tv=["src"],nv={__name:"Image",emits:["success"],setup(e,{emit:t}){const n=t,l=re("ServiceContainer"),{t:r}=l.i18n,s=A(null),i=A(null),d=A(!1),u=A(""),c=A(!1),m=()=>{d.value=!d.value,d.value?i.value=new pr(s.value,{crop(e){}}):i.value.destroy()},f=()=>{i.value.getCroppedCanvas({width:795,height:341}).toBlob((e=>{u.value="",c.value=!1;const t=new FormData;t.set("file",e),l.requester.send({url:"",method:"post",params:{q:"upload",adapter:l.modal.data.adapter,path:l.modal.data.item.path},body:t}).then((e=>{u.value=r("Updated."),s.value.src=l.requester.getPreviewUrl(l.modal.data.adapter,l.modal.data.item),m(),n("success")})).catch((e=>{u.value=r(e.message),c.value=!0}))}))};return xe((()=>{n("success")})),(e,t)=>(v(),g("div",X_,[a("div",Q_,[a("h3",{class:"vuefinder__image-preview__title",id:"modal-title",title:o(l).modal.data.item.path},b(o(l).modal.data.item.basename),9,J_),a("div",Z_,[d.value?(v(),g("button",{key:0,onClick:f,class:"vuefinder__image-preview__crop-button"},b(o(r)("Crop")),1)):q("",!0),o(l).features.includes(o(de).EDIT)?(v(),g("button",{key:1,class:"vuefinder__image-preview__edit-button",onClick:t[0]||(t[0]=e=>m())},b(d.value?o(r)("Cancel"):o(r)("Edit")),1)):q("",!0)])]),a("div",ev,[a("img",{ref_key:"image",ref:s,class:"vuefinder__image-preview__image",src:o(l).requester.getPreviewUrl(o(l).modal.data.adapter,o(l).modal.data.item),alt:""},null,8,tv)]),u.value.length?(v(),W(Xe,{key:0,onHidden:t[1]||(t[1]=e=>u.value=""),error:c.value},{default:Z((()=>[Q(b(u.value),1)])),_:1},8,["error"])):q("",!0)]))}},sv={class:"vuefinder__default-preview"},ov={class:"vuefinder__default-preview__header"},rv=["title"],av=a("div",null,null,-1),lv={__name:"Default",emits:["success"],setup(e,{emit:t}){const n=re("ServiceContainer"),l=t;return xe((()=>{l("success")})),(e,t)=>(v(),g("div",sv,[a("div",ov,[a("h3",{class:"vuefinder__default-preview__title",id:"modal-title",title:o(n).modal.data.item.path},b(o(n).modal.data.item.basename),9,rv)]),av]))}},iv={class:"vuefinder__video-preview"},cv=["title"],dv={class:"vuefinder__video-preview__video",preload:"",controls:""},uv=["src"],_v={__name:"Video",emits:["success"],setup(e,{emit:t}){const n=re("ServiceContainer"),l=t;return xe((()=>{l("success")})),(e,t)=>(v(),g("div",iv,[a("h3",{class:"vuefinder__video-preview__title",id:"modal-title",title:o(n).modal.data.item.path},b(o(n).modal.data.item.basename),9,cv),a("div",null,[a("video",dv,[a("source",{src:n.requester.getPreviewUrl(n.modal.data.adapter,n.modal.data.item),type:"video/mp4"},null,8,uv),Q(" Your browser does not support the video tag. ")])])]))}},vv={class:"vuefinder__audio-preview"},fv=["title"],mv={class:"vuefinder__audio-preview__audio",controls:""},hv=["src"],pv={__name:"Audio",emits:["success"],setup(e,{emit:t}){const n=t,l=re("ServiceContainer");return xe((()=>{n("success")})),(e,t)=>(v(),g("div",vv,[a("h3",{class:"vuefinder__audio-preview__title",id:"modal-title",title:o(l).modal.data.item.path},b(o(l).modal.data.item.basename),9,fv),a("div",null,[a("audio",mv,[a("source",{src:l.requester.getPreviewUrl(l.modal.data.adapter,l.modal.data.item),type:"audio/mpeg"},null,8,hv),Q(" Your browser does not support the audio element. ")])])]))}},gv={class:"vuefinder__pdf-preview"},bv=["title"],wv=["data"],yv=["src"],$v={__name:"Pdf",emits:["success"],setup(e,{emit:t}){const n=re("ServiceContainer"),l=t,r=()=>n.requester.getPreviewUrl(n.modal.data.adapter,n.modal.data.item);return xe((()=>{l("success")})),(e,t)=>(v(),g("div",gv,[a("h3",{class:"vuefinder__pdf-preview__title",id:"modal-title",title:o(n).modal.data.item.path},b(o(n).modal.data.item.basename),9,bv),a("div",null,[a("object",{class:"vuefinder__pdf-preview__object",data:r(),type:"application/pdf",width:"100%",height:"100%"},[a("iframe",{class:"vuefinder__pdf-preview__iframe",src:r(),width:"100%",height:"100%"}," Your browser does not support PDFs ",8,yv)],8,wv)])]))}},kv={class:"vuefinder__preview-modal__content"},xv={key:0},Sv={class:"vuefinder__preview-modal__loading"},Cv={key:0,class:"vuefinder__preview-modal__loading-indicator"},Ev=a("svg",{class:"vuefinder__preview-modal__spinner",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[a("circle",{class:"vuefinder__preview-modal__spinner-circle",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),a("path",{class:"vuefinder__preview-modal__spinner-path",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Tv={class:"vuefinder__preview-modal__details"},Mv={class:"font-bold"},Av={class:"font-bold pl-2"},Dv={key:0,class:"vuefinder__preview-modal__note"},Vv=["download","href"],Po={__name:"ModalPreview",setup(e){const t=re("ServiceContainer"),{t:n}=t.i18n,l=A(!1),r=e=>(t.modal.data.item.mime_type??"").startsWith(e),s=t.features.includes(de.PREVIEW);return s||(l.value=!0),(e,i)=>(v(),W(Ye,null,{buttons:Z((()=>[a("button",{type:"button",onClick:i[6]||(i[6]=e=>o(t).modal.close()),class:"vf-btn vf-btn-secondary"},b(o(n)("Close")),1),o(t).features.includes(o(de).DOWNLOAD)?(v(),g("a",{key:0,target:"_blank",class:"vf-btn vf-btn-primary",download:o(t).requester.getDownloadUrl(o(t).modal.data.adapter,o(t).modal.data.item),href:o(t).requester.getDownloadUrl(o(t).modal.data.adapter,o(t).modal.data.item)},b(o(n)("Download")),9,Vv)):q("",!0)])),default:Z((()=>[a("div",null,[a("div",kv,[o(s)?(v(),g("div",xv,[r("text")?(v(),W(Y_,{key:0,onSuccess:i[0]||(i[0]=e=>l.value=!0)})):r("image")?(v(),W(nv,{key:1,onSuccess:i[1]||(i[1]=e=>l.value=!0)})):r("video")?(v(),W(_v,{key:2,onSuccess:i[2]||(i[2]=e=>l.value=!0)})):r("audio")?(v(),W(pv,{key:3,onSuccess:i[3]||(i[3]=e=>l.value=!0)})):r("application/pdf")?(v(),W($v,{key:4,onSuccess:i[4]||(i[4]=e=>l.value=!0)})):(v(),W(lv,{key:5,onSuccess:i[5]||(i[5]=e=>l.value=!0)}))])):q("",!0),a("div",Sv,[!1===l.value?(v(),g("div",Cv,[Ev,a("span",null,b(o(n)("Loading")),1)])):q("",!0)])])]),a("div",Tv,[a("div",null,[a("span",Mv,b(o(n)("File Size"))+": ",1),Q(b(o(t).filesize(o(t).modal.data.item.file_size)),1)]),a("div",null,[a("span",Av,b(o(n)("Last Modified"))+": ",1),Q(" "+b(o(qo)(o(t).modal.data.item.last_modified)),1)])]),o(t).features.includes(o(de).DOWNLOAD)?(v(),g("div",Dv,[a("span",null,b(o(n)('Download doesn\'t work? You can try right-click "Download" button, select "Save link as...".')),1)])):q("",!0)])),_:1}))}},Ov={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",class:"h-5 w-5",viewBox:"0 0 24 24"},Lv=a("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),Fv=a("path",{d:"m15 4.5-4 4L7 10l-1.5 1.5 7 7L14 17l1.5-4 4-4M9 15l-4.5 4.5M14.5 4 20 9.5"},null,-1),Rv=[Lv,Fv];function Iv(e,t){return v(),g("svg",Ov,[...Rv])}const zo={render:Iv},Hv=["data-type","data-item","data-index"],Mn={__name:"Item",props:{item:{type:Object},index:{type:Number},dragImage:{type:Object}},setup(e){const t=re("ServiceContainer"),a=t.dragSelect,n=e,l=e=>{"dir"===e.type?(t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:e.path}})):t.modal.open(Po,{adapter:t.fs.adapter,item:e})},r={mounted(e,t,a,n){a.props.draggable&&(e.addEventListener("dragstart",(e=>s(e,t.value))),e.addEventListener("dragover",(e=>d(e,t.value))),e.addEventListener("drop",(e=>i(e,t.value))))},beforeUnmount(e,t,a,n){a.props.draggable&&(e.removeEventListener("dragstart",s),e.removeEventListener("dragover",d),e.removeEventListener("drop",i))}},s=(e,t)=>{if(e.altKey||e.ctrlKey||e.metaKey)return e.preventDefault(),!1;a.isDraggingRef.value=!0,e.dataTransfer.setDragImage(n.dragImage.$el,0,15),e.dataTransfer.effectAllowed="all",e.dataTransfer.dropEffect="copy",e.dataTransfer.setData("items",JSON.stringify(a.getSelected()))},i=(e,n)=>{e.preventDefault(),a.isDraggingRef.value=!1;let o=JSON.parse(e.dataTransfer.getData("items"));o.find((e=>e.storage!==t.fs.adapter))?alert("Moving items between different storages is not supported yet."):t.modal.open(Kn,{items:{from:o,to:n}})},d=(e,t)=>{e.preventDefault(),!t||"dir"!==t.type||a.getSelection().find((t=>t===e.currentTarget))?(e.dataTransfer.dropEffect="none",e.dataTransfer.effectAllowed="none"):e.dataTransfer.dropEffect="copy"};let u=null,c=!1;return(s,i)=>ue((v(),g("div",{style:ln({opacity:o(a).isDraggingRef.value&&o(a).getSelection().find((e=>s.$el===e))?"0.5 !important":""}),class:ae(["vuefinder__item","vf-item-"+o(a).explorerId]),"data-type":e.item.type,key:e.item.path,"data-item":JSON.stringify(e.item),"data-index":e.index,onDblclick:i[0]||(i[0]=t=>l(e.item)),onTouchstart:i[1]||(i[1]=e=>(e=>{if(c)return c=!1,l(n.item),clearTimeout(u),!1;c=!0,setTimeout((()=>c=!1),300),u=setTimeout((()=>{const t=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!1,view:window,button:2,buttons:0,clientX:e.target.getBoundingClientRect().x,clientY:e.target.getBoundingClientRect().y});e.target.dispatchEvent(t)}),500)})(e)),onTouchend:i[2]||(i[2]=e=>{u&&clearTimeout(u)}),onContextmenu:i[3]||(i[3]=et((n=>o(t).emitter.emit("vf-contextmenu-show",{event:n,items:o(a).getSelected(),target:e.item})),["prevent"]))},[Dt(s.$slots,"default"),o(t).pinnedFolders.find((t=>t.path===e.item.path))?(v(),W(o(zo),{key:0,class:"vuefinder__item--pinned"})):q("",!0)],46,Hv)),[[r,e.item]])}},Bv={class:"vuefinder__explorer__container"},Nv={key:0,class:"vuefinder__explorer__header"},Uv={class:"vuefinder__explorer__drag-item"},qv={key:0,class:"vuefinder__linear-loader absolute"},Pv={class:"vuefinder__explorer__item-list-content"},zv={class:"vuefinder__explorer__item-list-name"},jv={class:"vuefinder__explorer__item-name"},Gv={class:"vuefinder__explorer__item-path"},Kv={class:"vuefinder__explorer__item-list-content"},Wv={class:"vuefinder__explorer__item-list-name"},Yv={class:"vuefinder__explorer__item-name"},Xv={class:"vuefinder__explorer__item-size"},Qv={class:"vuefinder__explorer__item-date"},Jv={class:"vuefinder__explorer__item-grid-content"},Zv=["data-src","alt"],ef={key:2,class:"vuefinder__explorer__item-extension"},tf={class:"vuefinder__explorer__item-title break-all"},nf={__name:"Explorer",setup(e){const t=re("ServiceContainer"),{t:n}=t.i18n,l=e=>null==e?void 0:e.substring(0,3),r=A(null),s=A(""),i=t.dragSelect;let d;t.emitter.on("vf-fullscreen-toggle",(()=>{i.area.value.style.height=null})),t.emitter.on("vf-search-query",(({newQuery:e})=>{s.value=e,e?t.emitter.emit("vf-fetch",{params:{q:"search",adapter:t.fs.adapter,path:t.fs.data.dirname,filter:e},onSuccess:e=>{e.files.length||t.emitter.emit("vf-toast-push",{label:n("No search result found.")})}}):t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter,path:t.fs.data.dirname}})}));const u=kt({active:!1,column:"",order:""}),c=(e=!0)=>{let a=[...t.fs.data.files],n=u.column,o="asc"===u.order?1:-1;if(!e)return a;return u.active&&(a=a.slice().sort(((e,t)=>((e,t)=>"string"==typeof e&&"string"==typeof t?e.toLowerCase().localeCompare(t.toLowerCase()):e<t?-1:e>t?1:0)(e[n],t[n])*o))),a},m=e=>{u.active&&u.column===e?(u.active="asc"===u.order,u.column=e,u.order="desc"):(u.active=!0,u.column=e,u.order="asc")};return xe((()=>{d=new hr(i.area.value)})),Rs((()=>{d.update()})),Hs((()=>{d.destroy()})),(e,d)=>(v(),g("div",Bv,["list"===o(t).view||s.value.length?(v(),g("div",Nv,[a("div",{onClick:d[0]||(d[0]=e=>m("basename")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--name vf-sort-button"},[Q(b(o(n)("Name"))+" ",1),ue(P(Wt,{direction:u.order},null,8,["direction"]),[[Pe,u.active&&"basename"===u.column]])]),s.value.length?q("",!0):(v(),g("div",{key:0,onClick:d[1]||(d[1]=e=>m("file_size")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--size vf-sort-button"},[Q(b(o(n)("Size"))+" ",1),ue(P(Wt,{direction:u.order},null,8,["direction"]),[[Pe,u.active&&"file_size"===u.column]])])),s.value.length?q("",!0):(v(),g("div",{key:1,onClick:d[2]||(d[2]=e=>m("last_modified")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--date vf-sort-button"},[Q(b(o(n)("Date"))+" ",1),ue(P(Wt,{direction:u.order},null,8,["direction"]),[[Pe,u.active&&"last_modified"===u.column]])])),s.value.length?(v(),g("div",{key:2,onClick:d[3]||(d[3]=e=>m("path")),class:"vuefinder__explorer__sort-button vuefinder__explorer__sort-button--path vf-sort-button"},[Q(b(o(n)("Filepath"))+" ",1),ue(P(Wt,{direction:u.order},null,8,["direction"]),[[Pe,u.active&&"path"===u.column]])])):q("",!0)])):q("",!0),a("div",Uv,[P(q_,{ref_key:"dragImage",ref:r,count:o(i).getCount()},null,8,["count"])]),a("div",{ref:o(i).scrollBarContainer,class:ae(["vf-explorer-scrollbar-container vuefinder__explorer__scrollbar-container",[{"grid-view":"grid"===o(t).view},{"search-active":s.value.length}]])},[a("div",{ref:o(i).scrollBar,class:"vuefinder__explorer__scrollbar"},null,512)],2),a("div",{ref:o(i).area,class:"vuefinder__explorer__selector-area vf-explorer-scrollbar vf-selector-area min-h-32",onContextmenu:d[4]||(d[4]=et((e=>o(t).emitter.emit("vf-contextmenu-show",{event:e,items:o(i).getSelected()})),["self","prevent"]))},["linear"===o(t).loadingIndicator&&o(t).fs.loading?(v(),g("div",qv)):q("",!0),s.value.length?(v(!0),g(ge,{key:1},ke(c(),((e,n)=>(v(),W(Mn,{item:e,index:n,dragImage:r.value,class:"vf-item vf-item-list"},{default:Z((()=>[a("div",Pv,[a("div",zv,[P(Tn,{type:e.type,small:o(t).compactListView},null,8,["type","small"]),a("span",jv,b(e.basename),1)]),a("div",Gv,b(e.path),1)])])),_:2},1032,["item","index","dragImage"])))),256)):q("",!0),"list"!==o(t).view||s.value.length?q("",!0):(v(!0),g(ge,{key:2},ke(c(),((e,n)=>(v(),W(Mn,{item:e,index:n,dragImage:r.value,class:"vf-item vf-item-list",draggable:"true",key:e.path},{default:Z((()=>[a("div",Kv,[a("div",Wv,[P(Tn,{type:e.type,small:o(t).compactListView},null,8,["type","small"]),a("span",Yv,b(e.basename),1)]),a("div",Xv,b(e.file_size?o(t).filesize(e.file_size):""),1),a("div",Qv,b(o(qo)(e.last_modified)),1)])])),_:2},1032,["item","index","dragImage"])))),128)),"grid"!==o(t).view||s.value.length?q("",!0):(v(!0),g(ge,{key:3},ke(c(!1),((e,n)=>(v(),W(Mn,{item:e,index:n,dragImage:r.value,class:"vf-item vf-item-grid",draggable:"true"},{default:Z((()=>[a("div",null,[a("div",Jv,[(e.mime_type??"").startsWith("image")&&o(t).showThumbnails?(v(),g("img",{src:"data:image/png;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",class:"vuefinder__explorer__item-thumbnail lazy","data-src":o(t).requester.getPreviewUrl(o(t).fs.adapter,e),alt:e.basename,key:e.path},null,8,Zv)):(v(),W(Tn,{key:1,type:e.type},null,8,["type"])),(e.mime_type??"").startsWith("image")&&o(t).showThumbnails||"dir"===e.type?q("",!0):(v(),g("div",ef,b(l(e.extension)),1))]),a("span",tf,b(o(Gn)(e.basename)),1)])])),_:2},1032,["item","index","dragImage"])))),256))],544),P(g_)]))}},sf=["href","download"],of=["onClick"],rf={__name:"ContextMenu",setup(e){const t=re("ServiceContainer"),n=A(null),l=A([]),r=A(""),s=kt({active:!1,items:[],positions:{left:0,top:0}});t.emitter.on("vf-context-selected",(e=>{l.value=e}));const i=e=>e.link(t,l);t.emitter.on("vf-search-query",(({newQuery:e})=>{r.value=e})),t.emitter.on("vf-contextmenu-show",(({event:e,items:a,target:n=null})=>{if(s.items=t.contextMenuItems.filter((e=>e.show(t,{searchQuery:r.value,items:a,target:n}))),r.value){if(!n)return;t.emitter.emit("vf-context-selected",[n])}else n||r.value?a.length>1&&a.some((e=>e.path===n.path))?t.emitter.emit("vf-context-selected",a):t.emitter.emit("vf-context-selected",[n]):t.emitter.emit("vf-context-selected",[]);d(e)})),t.emitter.on("vf-contextmenu-hide",(()=>{s.active=!1}));const d=e=>{const a=t.dragSelect.area.value,o=t.root.getBoundingClientRect(),l=a.getBoundingClientRect();let r=e.clientX-o.left,i=e.clientY-o.top;s.active=!0,dt((()=>{var t;const a=null==(t=n.value)?void 0:t.getBoundingClientRect();let o=(null==a?void 0:a.height)??0,d=(null==a?void 0:a.width)??0;r=l.right-e.pageX+window.scrollX<d?r-d:r,i=l.bottom-e.pageY+window.scrollY<o?i-o:i,s.positions={left:r+"px",top:i+"px"}}))};return(e,r)=>ue((v(),g("ul",{ref_key:"contextmenu",ref:n,style:ln(s.positions),class:"vuefinder__context-menu"},[(v(!0),g(ge,null,ke(s.items,(e=>(v(),g("li",{class:"vuefinder__context-menu__item",key:e.title},[e.link?(v(),g("a",{key:0,class:"vuefinder__context-menu__link",target:"_blank",href:i(e),download:i(e),onClick:r[0]||(r[0]=e=>o(t).emitter.emit("vf-contextmenu-hide"))},[a("span",null,b(e.title(o(t).i18n)),1)],8,sf)):(v(),g("div",{key:1,class:"vuefinder__context-menu__action",onClick:a=>(e=>{t.emitter.emit("vf-contextmenu-hide"),e.action(t,l)})(e)},[a("span",null,b(e.title(o(t).i18n)),1)],8,of))])))),128))],4)),[[Pe,s.active]])}},af={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",class:"h-5 w-5",viewBox:"0 0 24 24"},lf=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"},null,-1),cf=[lf];function df(e,t){return v(),g("svg",af,[...cf])}const jo={render:df},uf={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"2",class:"h-5 w-5 stroke-slate-500 cursor-pointer",viewBox:"0 0 24 24"},_f=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0"},null,-1),vf=[_f];function ff(e,t){return v(),g("svg",uf,[...vf])}const mf={render:ff},hf={class:"vuefinder__status-bar__wrapper"},pf={class:"vuefinder__status-bar__storage"},gf=["title"],bf={class:"vuefinder__status-bar__storage-icon"},wf=["value"],yf={class:"vuefinder__status-bar__info"},$f={key:0},kf={class:"vuefinder__status-bar__selected-count"},xf={class:"vuefinder__status-bar__actions"},Sf=["disabled"],Cf=["title"],Ef={__name:"Statusbar",setup(e){const t=re("ServiceContainer"),{t:n}=t.i18n,{setStore:l}=t.storage,r=t.dragSelect,s=()=>{t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:t.fs.adapter}}),l("adapter",t.fs.adapter)},i=A("");t.emitter.on("vf-search-query",(({newQuery:e})=>{i.value=e}));const d=bt((()=>{const e=t.selectButton.multiple?r.getSelected().length>0:1===r.getSelected().length;return t.selectButton.active&&e}));return(e,l)=>(v(),g("div",hf,[a("div",pf,[a("div",{class:"vuefinder__status-bar__storage-container",title:o(n)("Storage")},[a("div",bf,[P(o(jo))]),ue(a("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>o(t).fs.adapter=e),onChange:s,class:"vuefinder__status-bar__storage-select",tabindex:"-1"},[(v(!0),g(ge,null,ke(o(t).fs.data.storages,(e=>(v(),g("option",{value:e},b(e),9,wf)))),256))],544),[[An,o(t).fs.adapter]])],8,gf),a("div",yf,[i.value.length?(v(),g("span",$f,b(o(t).fs.data.files.length)+" items found. ",1)):q("",!0),a("span",kf,b(o(t).dragSelect.getCount()>0?o(n)("%s item(s) selected.",o(t).dragSelect.getCount()):""),1)])]),a("div",xf,[o(t).selectButton.active?(v(),g("button",{key:0,class:ae(["vf-btn py-0 vf-btn-primary",{disabled:!d.value}]),disabled:!d.value,onClick:l[1]||(l[1]=e=>o(t).selectButton.click(o(r).getSelected(),e))},b(o(n)("Select")),11,Sf)):q("",!0),a("span",{class:"vuefinder__status-bar__about",title:o(n)("About"),onClick:l[2]||(l[2]=e=>o(t).modal.open(Do))},[P(o(mf))],8,Cf)])]))}},Tf={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-width":"1.5",class:"text-neutral-500 fill-sky-500 stroke-gray-100/50 dark:stroke-slate-700/50 dark:fill-slate-500",viewBox:"0 0 24 24"},Mf=a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 9.776q.168-.026.344-.026h15.812q.176 0 .344.026m-16.5 0a2.25 2.25 0 0 0-1.883 2.542l.857 6a2.25 2.25 0 0 0 2.227 1.932H19.05a2.25 2.25 0 0 0 2.227-1.932l.857-6a2.25 2.25 0 0 0-1.883-2.542m-16.5 0V6A2.25 2.25 0 0 1 6 3.75h3.879a1.5 1.5 0 0 1 1.06.44l2.122 2.12a1.5 1.5 0 0 0 1.06.44H18A2.25 2.25 0 0 1 20.25 9v.776"},null,-1),Af=[Mf];function Df(e,t){return v(),g("svg",Tf,[...Af])}const Go={render:Df},Vf={xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"h-5 w-5",viewBox:"0 0 24 24"},Of=a("path",{fill:"none",d:"M0 0h24v24H0z"},null,-1),Lf=a("path",{d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2m3.6 5.2a1 1 0 0 0-1.4.2L12 10.333 9.8 7.4a1 1 0 1 0-1.6 1.2l2.55 3.4-2.55 3.4a1 1 0 1 0 1.6 1.2l2.2-2.933 2.2 2.933a1 1 0 0 0 1.6-1.2L13.25 12l2.55-3.4a1 1 0 0 0-.2-1.4"},null,-1),Ff=[Of,Lf];function Rf(e,t){return v(),g("svg",Vf,[...Ff])}const If={render:Rf},Hf={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},Bf=a("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),Nf=a("path",{d:"M15 12H9M12 9v6"},null,-1),Uf=[Bf,Nf];function qf(e,t){return v(),g("svg",Hf,[...Uf])}const Ko={render:qf},Pf={xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},zf=a("path",{stroke:"none",d:"M0 0h24v24H0z"},null,-1),jf=a("path",{d:"M9 12h6"},null,-1),Gf=[zf,jf];function Kf(e,t){return v(),g("svg",Pf,[...Gf])}const Wo={render:Kf};function Yo(e,t){const a=e.findIndex((e=>e.path===t.path));a>-1?e[a]=t:e.push(t)}const Wf={class:"vuefinder__folder-loader-indicator"},Yf={key:1,class:"vuefinder__folder-loader-indicator--icon"},Xo={__name:"FolderLoaderIndicator",props:ir({adapter:{type:String,required:!0},path:{type:String,required:!0}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=e,a=re("ServiceContainer");a.i18n;const n=Bs(e,"modelValue"),l=A(!1);function r(){return a.treeViewData.find((e=>e.path===t.path))}De((()=>n.value),(()=>{var e;return(null==(e=r())?void 0:e.folders.length)||s()}));const s=()=>{l.value=!0,a.requester.send({url:"",method:"get",params:{q:"subfolders",adapter:t.adapter,path:t.path}}).then((e=>{Yo(a.treeViewData,{path:t.path,...e})})).catch((e=>{})).finally((()=>{l.value=!1}))};return(e,t)=>{var a;return v(),g("div",Wf,[l.value?(v(),W(o(us),{key:0,class:"vuefinder__folder-loader-indicator--loading"})):(v(),g("div",Yf,[n.value&&null!=(a=r())&&a.folders.length?(v(),W(o(Wo),{key:0,class:"vuefinder__folder-loader-indicator--minus"})):q("",!0),n.value?q("",!0):(v(),W(o(Ko),{key:1,class:"vuefinder__folder-loader-indicator--plus"}))]))])}}},Xf={class:"vuefinder__treesubfolderlist__item-content"},Qf=["onClick"],Jf=["title","onClick"],Zf={class:"vuefinder__treesubfolderlist__item-icon"},em={class:"vuefinder__treesubfolderlist__subfolder"},tm={__name:"TreeSubfolderList",props:{adapter:{type:String,required:!0},path:{type:String,required:!0}},setup(e){const t=re("ServiceContainer"),n=A([]),l=e,r=A(null);xe((()=>{l.path===l.adapter+"://"&&Ke(r.value,{scrollbars:{theme:"vf-theme-dark dark:vf-theme-light"}})}));const s=bt((()=>{var e;return(null==(e=t.treeViewData.find((e=>e.path===l.path)))?void 0:e.folders)||[]}));return(i,d)=>{const u=cr("TreeSubfolderList",!0);return v(),g("ul",{ref_key:"parentSubfolderList",ref:r,class:"vuefinder__treesubfolderlist__container"},[(v(!0),g(ge,null,ke(s.value,((r,s)=>(v(),g("li",{key:r.path,class:"vuefinder__treesubfolderlist__item"},[a("div",Xf,[a("div",{class:"vuefinder__treesubfolderlist__item-toggle",onClick:e=>n.value[r.path]=!n.value[r.path]},[P(Xo,{adapter:e.adapter,path:r.path,modelValue:n.value[r.path],"onUpdate:modelValue":e=>n.value[r.path]=e},null,8,["adapter","path","modelValue","onUpdate:modelValue"])],8,Qf),a("div",{class:"vuefinder__treesubfolderlist__item-link",title:r.path,onClick:e=>o(t).emitter.emit("vf-fetch",{params:{q:"index",adapter:l.adapter,path:r.path}})},[a("div",Zf,[o(t).fs.path===r.path?(v(),W(o(Go),{key:0})):(v(),W(o(pn),{key:1}))]),a("div",{class:ae(["vuefinder__treesubfolderlist__item-text",{"vuefinder__treesubfolderlist__item-text--active":o(t).fs.path===r.path}])},b(r.basename),3)],8,Jf)]),a("div",em,[ue(P(u,{adapter:l.adapter,path:r.path},null,8,["adapter","path"]),[[Pe,n.value[r.path]]])])])))),128))],512)}}},nm={__name:"TreeStorageItem",props:{storage:{type:String,required:!0}},setup(e){const t=re("ServiceContainer"),{setStore:n}=t.storage,l=A(!1);return(r,s)=>(v(),g(ge,null,[a("div",{onClick:s[2]||(s[2]=a=>function(e){e===t.fs.adapter?l.value=!l.value:(t.emitter.emit("vf-search-exit"),t.emitter.emit("vf-fetch",{params:{q:"index",adapter:e}}),n("adapter",e))}(e.storage)),class:"vuefinder__treestorageitem__header"},[a("div",{class:ae(["vuefinder__treestorageitem__info",e.storage===o(t).fs.adapter?"vuefinder__treestorageitem__info--active":""])},[a("div",{class:ae(["vuefinder__treestorageitem__icon",e.storage===o(t).fs.adapter?"vuefinder__treestorageitem__icon--active":""])},[P(o(jo))],2),a("div",null,b(e.storage),1)],2),a("div",{class:"vuefinder__treestorageitem__loader",onClick:s[1]||(s[1]=et((e=>l.value=!l.value),["stop"]))},[P(Xo,{adapter:e.storage,path:e.storage+"://",modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=e=>l.value=e)},null,8,["adapter","path","modelValue"])])]),ue(P(tm,{adapter:e.storage,path:e.storage+"://",class:"vuefinder__treestorageitem__subfolder"},null,8,["adapter","path"]),[[Pe,l.value]])],64))}},sm={class:"vuefinder__folder-indicator"},om={class:"vuefinder__folder-indicator--icon"},rm={__name:"FolderIndicator",props:{modelValue:{},modelModifiers:{}},emits:["update:modelValue"],setup(e){const t=Bs(e,"modelValue");return(e,n)=>(v(),g("div",sm,[a("div",om,[t.value?(v(),W(o(Wo),{key:0,class:"vuefinder__folder-indicator--minus"})):q("",!0),t.value?q("",!0):(v(),W(o(Ko),{key:1,class:"vuefinder__folder-indicator--plus"}))])]))}},am={class:"vuefinder__treeview__header"},lm={class:"vuefinder__treeview__pinned-label"},im={class:"vuefinder__treeview__pin-text text-nowrap"},cm={key:0,class:"vuefinder__treeview__pinned-list"},dm={class:"vuefinder__treeview__pinned-item"},um=["onClick"],_m=["title"],vm=["onClick"],fm={key:0},mm={class:"vuefinder__treeview__no-pinned"},hm={class:"vuefinder__treeview__storage"},pm={__name:"TreeView",setup(e){const t=re("ServiceContainer"),{t:n}=t.i18n,{getStore:l,setStore:r}=t.storage,s=A(190),i=A(l("pinned-folders-opened",!0));De(i,(e=>r("pinned-folders-opened",e)));const d=e=>{const a=e.clientX,n=e.target.parentElement,o=n.getBoundingClientRect().width;n.classList.remove("transition-[width]"),n.classList.add("transition-none");const l=e=>{s.value=o+e.clientX-a,s.value<50&&(s.value=0,t.showTreeView=!1),s.value>50&&(t.showTreeView=!0)},r=()=>{const e=n.getBoundingClientRect();s.value=e.width,n.classList.add("transition-[width]"),n.classList.remove("transition-none"),window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",r)};window.addEventListener("mousemove",l),window.addEventListener("mouseup",r)},u=A(null);return xe((()=>{Ke(u.value,{overflow:{x:"hidden"},scrollbars:{theme:"vf-theme-dark dark:vf-theme-light"}})})),De(t.fs.data,((e,a)=>{const n=e.files.filter((e=>"dir"===e.type));Yo(t.treeViewData,{path:t.fs.path,folders:n.map((e=>({adapter:e.storage,path:e.path,basename:e.basename})))})})),(e,l)=>(v(),g(ge,null,[a("div",{onClick:l[0]||(l[0]=e=>o(t).showTreeView=!o(t).showTreeView),class:ae(["vuefinder__treeview__overlay",o(t).showTreeView?"vuefinder__treeview__backdrop":"hidden"])},null,2),a("div",{style:ln(o(t).showTreeView?"min-width:100px;max-width:75%; width: "+s.value+"px":"width: 0"),class:"vuefinder__treeview__container"},[a("div",{ref_key:"treeViewScrollElement",ref:u,class:"vuefinder__treeview__scroll"},[a("div",am,[a("div",{onClick:l[2]||(l[2]=e=>i.value=!i.value),class:"vuefinder__treeview__pinned-toggle"},[a("div",lm,[P(o(zo),{class:"vuefinder__treeview__pin-icon"}),a("div",im,b(o(n)("Pinned Folders")),1)]),P(rm,{modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=e=>i.value=e)},null,8,["modelValue"])]),i.value?(v(),g("ul",cm,[(v(!0),g(ge,null,ke(o(t).pinnedFolders,(e=>(v(),g("li",dm,[a("div",{class:"vuefinder__treeview__pinned-folder",onClick:a=>o(t).emitter.emit("vf-fetch",{params:{q:"index",adapter:e.storage,path:e.path}})},[o(t).fs.path!==e.path?(v(),W(o(pn),{key:0,class:"vuefinder__treeview__folder-icon"})):q("",!0),o(t).fs.path===e.path?(v(),W(o(Go),{key:1,class:"vuefinder__treeview__open-folder-icon"})):q("",!0),a("div",{title:e.path,class:ae(["vuefinder__treeview__folder-name text-nowrap",{"vuefinder__treeview__folder-name--active":o(t).fs.path===e.path}])},b(e.basename),11,_m)],8,um),a("div",{class:"vuefinder__treeview__remove-favorite",onClick:a=>(e=>{t.pinnedFolders=t.pinnedFolders.filter((t=>t.path!==e.path)),t.storage.setStore("pinned-folders",t.pinnedFolders)})(e)},[P(o(If),{class:"vuefinder__treeview__remove-icon"})],8,vm)])))),256)),o(t).pinnedFolders.length?q("",!0):(v(),g("li",fm,[a("div",mm,b(o(n)("No folders pinned")),1)]))])):q("",!0)]),(v(!0),g(ge,null,ke(o(t).fs.data.storages,(e=>(v(),g("div",hm,[P(nm,{storage:e},null,8,["storage"])])))),256))],512),a("div",{onMousedown:d,class:ae([(o(t).showTreeView,""),"vuefinder__treeview__resize-handle"])},null,34)],4)],64))}};class gm{constructor(e,t,a,n){this.title=e,this.action=t,this.link=a,this.options=Object.assign({needsSearchQuery:!1,target:"one"},n)}show(e,t){var a,n;return!(this.options.needsSearchQuery!==!!t.searchQuery||void 0!==this.options.target&&this.options.target!==(o=t,o.items.length>1&&o.items.some((e=>{var t;return e.path===(null==(t=o.target)?void 0:t.path)}))?"many":o.target?"one":null)||void 0!==this.options.targetType&&this.options.targetType!==(null==(a=t.target)?void 0:a.type)||void 0!==this.options.mimeType&&this.options.mimeType!==(null==(n=t.target)?void 0:n.mime_type)||void 0!==this.options.feature&&!e.features.includes(this.options.feature)||void 0!==this.options.show&&!this.options.show(e,t));var o}}function Be(e,t){return e.map((e=>new gm(e.title,e.action,e.link,{...t,feature:e.key})))}const Te={newfolder:{key:de.NEW_FOLDER,title:({t:e})=>e("New Folder"),action:e=>e.modal.open(Fo)},selectAll:{title:({t:e})=>e("Select All"),action:e=>e.dragSelect.selectAll()},pinFolder:{title:({t:e})=>e("Pin Folder"),action:(e,t)=>{e.pinnedFolders=e.pinnedFolders.concat(t.value),e.storage.setStore("pinned-folders",e.pinnedFolders)}},unpinFolder:{title:({t:e})=>e("Unpin Folder"),action:(e,t)=>{e.pinnedFolders=e.pinnedFolders.filter((e=>!t.value.find((t=>t.path===e.path)))),e.storage.setStore("pinned-folders",e.pinnedFolders)}},delete:{key:de.DELETE,title:({t:e})=>e("Delete"),action:(e,t)=>{e.modal.open(cs,{items:t})}},refresh:{title:({t:e})=>e("Refresh"),action:e=>{e.emitter.emit("vf-fetch",{params:{q:"index",adapter:e.fs.adapter,path:e.fs.data.dirname}})}},preview:{key:de.PREVIEW,title:({t:e})=>e("Preview"),action:(e,t)=>e.modal.open(Po,{adapter:e.fs.adapter,item:t.value[0]})},open:{title:({t:e})=>e("Open"),action:(e,t)=>{e.emitter.emit("vf-search-exit"),e.emitter.emit("vf-fetch",{params:{q:"index",adapter:e.fs.adapter,path:t.value[0].path}})}},openDir:{title:({t:e})=>e("Open containing folder"),action:(e,t)=>{e.emitter.emit("vf-search-exit"),e.emitter.emit("vf-fetch",{params:{q:"index",adapter:e.fs.adapter,path:t.value[0].dir}})}},download:{key:de.DOWNLOAD,link:(e,t)=>e.requester.getDownloadUrl(e.fs.adapter,t.value[0]),title:({t:e})=>e("Download"),action:()=>{}},archive:{key:de.ARCHIVE,title:({t:e})=>e("Archive"),action:(e,t)=>e.modal.open(Uo,{items:t})},unarchive:{key:de.UNARCHIVE,title:({t:e})=>e("Unarchive"),action:(e,t)=>e.modal.open(Bo,{items:t})},rename:{key:de.RENAME,title:({t:e})=>e("Rename"),action:(e,t)=>e.modal.open(ds,{items:t})}},bm=[...Be([Te.openDir],{needsSearchQuery:!0}),...Be([Te.refresh,Te.selectAll,Te.newfolder],{target:null}),...Be([Te.refresh,Te.archive,Te.delete],{target:"many"}),...Be([Te.open],{targetType:"dir"}),...Be([Te.unpinFolder],{targetType:"dir",show:(e,t)=>-1!==e.pinnedFolders.findIndex((e=>{var a;return e.path===(null==(a=t.target)?void 0:a.path)}))}),...Be([Te.pinFolder],{targetType:"dir",show:(e,t)=>-1===e.pinnedFolders.findIndex((e=>{var a;return e.path===(null==(a=t.target)?void 0:a.path)}))}),...Be([Te.preview,Te.download],{show:(e,t)=>{var a;return"dir"!==(null==(a=t.target)?void 0:a.type)}}),...Be([Te.rename],{numItems:"one"}),...Be([Te.unarchive],{mimeType:"application/zip"}),...Be([Te.archive],{show:(e,t)=>{var a;return"application/zip"!==(null==(a=t.target)?void 0:a.mime_type)}}),...Be([Te.delete],{})],wm={class:"vuefinder__main__content"},ym={__name:"VueFinder",props:{id:{type:String,default:"vf"},request:{type:[String,Object],required:!0},persist:{type:Boolean,default:!1},path:{type:String,default:""},features:{type:[Array,Boolean],default:!0},debug:{type:Boolean,default:!1},theme:{type:String,default:"system"},locale:{type:String,default:null},maxHeight:{type:String,default:"600px"},maxFileSize:{type:String,default:"10mb"},fullScreen:{type:Boolean,default:!1},showTreeView:{type:Boolean,default:!1},pinnedFolders:{type:Array,default:[]},showThumbnails:{type:Boolean,default:!0},selectButton:{type:Object,default:e=>({active:!1,multiple:!1,click:e=>{},...e})},onError:{type:Function,default:null},loadingIndicator:{type:String,default:"circular"},contextMenuItems:{type:Array,default:()=>bm}},emits:["select","update:path"],setup(e,{emit:t}){const n=t,l=e,r=Va(l,re("VueFinderOptions"));dr("ServiceContainer",r);const{setStore:s}=r.storage,i=A(null);r.root=i;const d=r.dragSelect;Ii(r);let u;function c(e){let t={};e&&e.includes("://")&&(t={adapter:e.split("://")[0],path:e}),r.emitter.emit("vf-fetch",{params:{q:"index",adapter:r.fs.adapter,...t},onError:l.onError??(e=>{e.message&&r.emitter.emit("vf-toast-push",{label:e.message,type:"error"})})})}return r.emitter.on("vf-fetch-abort",(()=>{u.abort(),r.fs.loading=!1})),r.emitter.on("vf-fetch",(({params:e,body:t=null,onSuccess:a=null,onError:n=null,noCloseModal:o=!1})=>{["index","search"].includes(e.q)&&(u&&u.abort(),r.fs.loading=!0),u=new AbortController;const l=u.signal;r.requester.send({url:"",method:e.m||"get",params:e,body:t,abortSignal:l}).then((e=>{r.fs.adapter=e.adapter,r.persist&&(r.fs.path=e.dirname,s("path",r.fs.path)),o||r.modal.close(),(e=>{Object.assign(r.fs.data,e),d.clearSelection(),d.refreshSelection()})(e),a&&a(e)})).catch((e=>{console.error(e),n&&n(e)})).finally((()=>{["index","search"].includes(e.q)&&(r.fs.loading=!1)}))})),xe((()=>{c(r.fs.path),De((()=>l.path),(e=>{c(e)})),d.onSelect((e=>{n("select",e)})),De((()=>r.fs.data.dirname),(e=>{n("update:path",e)}))})),(t,n)=>(v(),g("div",{class:"vuefinder",ref_key:"root",ref:i,tabindex:"0"},[a("div",{class:ae(o(r).theme.actualValue)},[a("div",{class:ae([o(r).fullScreen?"vuefinder__main__fixed":"vuefinder__main__relative","vuefinder__main__container"]),style:ln(o(r).fullScreen?"":"max-height: "+e.maxHeight),onMousedown:n[0]||(n[0]=e=>o(r).emitter.emit("vf-contextmenu-hide")),onTouchstart:n[1]||(n[1]=e=>o(r).emitter.emit("vf-contextmenu-hide"))},[P(Bd),P(h_),a("div",wm,[P(pm),P(nf)]),P(Ef)],38),P(ur,{name:"fade"},{default:Z((()=>[o(r).modal.visible?(v(),W(Is(o(r).modal.type),{key:0})):q("",!0)])),_:1}),P(rf)],2)],512))}},Dm={install(e,t={}){t.i18n=t.i18n??{};let[a]=Object.keys(t.i18n);t.locale=t.locale??a??"en",e.provide("VueFinderOptions",t),e.component("VueFinder",ym)}};export{gm as SimpleContextMenuItem,bm as contextMenuItems,Dm as default};
//# sourceMappingURL=/sm/e2d17e04abf90fa3e4181b7f907c535d10065886ab0be71618c2261b9c2eb6d1.map